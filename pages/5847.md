[[!redirects formally étale morphism]]

+-- {: .rightHandSide}
+-- {: .toc .clickDown tabindex="0"}
###Context###
#### Higher geometry
+--{: .hide}
[[!include higher geometry - contents]]
=--
=--
=--

#Contents#
* table of contents
{:toc}

A [[space]] $X$ is called **formally étale** if every [[morphism]]s $Y \to X$ has _unique_ [[infinitesimal object|infinitesimal]] extensions for every infinitesimal thickening of $X$.

(If there exists at least one such infinitesimal extension it is called a [[formally smooth morphism]]. If there exists at most one such extension, if is called a [[formally unramified morphism]]. The formally étale morphisms are precisely those that are both formally smoth and formally unramified.)


Traditionally this has considered in the context of [[geometry]] over formal duals of [[ring]]s and [[associative algebra]]s. This we discuss in the section ([Concrete notion](#ConcreteNotion)). But generally the notion makes sense in any context of <a href="http://nlab.mathforge.org/nlab/show/cohesive+%28infinity%2C1%29-topos#InfinitesimalCohesion">infinitesimal cohesion</a>. This we discuss in the section 
[General abstract notion](#GeneralAbstractNotion).

## General abstract notion
 {#GeneralAbstractNotion}

### Definition

Let 

$$
  \mathbf{H}
   \stackrel{\overset{u^*}{\hookrightarrow}}{\stackrel{\overset{u_*}{\leftarrow}}{\underset{u^!}{\to}}}
  \mathbf{H}_{th}   
$$

be a triple of [[adjoint functor]]s with $u^*$ a [[full and faithful functor]] that preserves the [[terminal object]]. 

We may think of this as exhibiting <a href="http://nlab.mathforge.org/nlab/show/cohesive+%28infinity%2C1%29-topos#InfinitesimalCohesion">infinitesimal cohesion</a> (see there for details, but notice that in the notation used there we have $u^* = i_!$, $u_* = i^*$ and $u^! = i_*$). 

We think of the objects of $\mathbf{H}$ as [[cohesive topos|cohesive space]]s and of the objects of $\mathbf{H}_{th}$ as such cohesive spaces possibly equipped with [[infinitesimal object|infinitesimal extension]]. 

As a class of examples that is useful to keep in mind consider a [[Q-category]] $(cod \dashv \epsilon \dashv dom) : \bar A \to A$  of <a href="http://nlab.mathforge.org/nlab/show/Q-category#InfinitesimalThickening">infinitesimal thickening of rings</a> and let

$$
  ((u^* \dashv u_* \dashv u^!) : \mathbf{H}_{th} \to \mathbf{H}) := 
  ([dom,Set] \dashv [\epsilon, Set] \dashv [codom,Set] : [\bar A, Set] \to [A,Set])
$$ 

be the corresponding <a href="http://nlab.mathforge.org/nlab/show/Q-category#PresheafQCategory">Q-category of copresheaves</a>.

For any such setup there is a canonical [[natural transformation]]

$$
  \phi : u^* \to u^!
  \,.
$$

Details of this are in the section <a href="http://ncatlab.org/nlab/show/cohesive%20topos#AdjointQuadruples">Adjoint quadruples</a> at [[cohesive topos]].

From this we get for every morphism $f : X \to Y$ in $\mathbf{H}$ a canonical morphism

\[
  \label{MorphismIntoPullback}
  u^* X \to u^* Y \prod_{u^! Y} u^! X
  \,.
\]

+-- {: .num_defn #AbstractFormallyEtaleMorphism}
###### Definition

A morphism $f : X \to Y$ in $\mathbf{H}$ is called **formally étale** if (eq:MorphismIntoPullback) is an [[isomorphism]].

=--

This appears as ([KontsevichRosenberg, def. 5.1, prop. 5.3.1.1](#KontsevichRosenbergSpaces)).

In other words, $f$ is formally étale if the $f$-component naturality square

$$
  \array{
    u^* X &\stackrel{u^* f}{\to}& u^* Y
    \\
    {}^{\mathllap{\phi_X}}\downarrow && \downarrow^{\mathrlap{\phi_Y}}
    \\
    u^! X &\stackrel{u^! f}{\to}& u^! Y
  }
$$

of the [[natural transformation]] $\phi$ is a [[pullback]] [[diagram]].

+-- {: .num_remark #FormallySmooth}
###### Remark


The partial notions of this condition are: if the above morphism is a [[monomorphism]] then $f$ is a [[formally unramified morphism]], if it is an [[epimorphism]] then $f$ is a [[formally smooth morphism]].

=--

+-- {: .num_defn #AbstractFormallyEtaleObject}
###### Definition

An object $X \in \mathbf{H}$ is called **formally étale** if the morphism $X \to *$ to the [[terminal object]] is formally étale.

=--

+-- {: .num_prop #AbstractFormallyEtaleObjectDirect}
###### Proposition

The object $X$ is formally étale precisely if 

$$
  u^* X \to u^! X
$$

is an [[isomorphism]].

=--

This appears as ([KontsevichRosenberg, def. 5.3.2](#KontsevichRosenbergSpaces)).

### Properties

+-- {: .num_prop}
###### Proposition

Formally étale morphisms are closed under composition.

=--

This appears as ([KontsevichRosenberg, prop. 5.4](#KontsevichRosenbergSpaces)).

+-- {: .proof}
###### Proof

This follows by the [[pasting law]] for pullbacks: let $f : X \to Y$ and $g : Y \to Z$ be two formally étale morphisms.  Then by definition both of the small squares in

$$
  \array{
    u^* X &\stackrel{u^* f }{\to}& u^* Y &\stackrel{u^* g}{\to}& u^* Y
    \\
    \downarrow && \downarrow && \downarrow
    \\
    u^! X &\stackrel{u^! f }{\to}& u^! Y &\stackrel{u^! g}{\to}& u^! Y    
  }
$$

are pullback squares. Hence so is the total outer square.

=--

Using also the other case of the [[pasting law]],  the above proof shows more:

+-- {: .num_prop}
###### Proposition

If

$$
  \array{
    && Y
    \\
    & {}^{\mathllap{f}}\nearrow && \searrow^{\mathrlap{g}}
    \\
    X &&\stackrel{h}{\to}&& Z
  }
$$

is a [[commuting diagram]] such that $g$ and $h$ are formally étale, then also $h$ is formally étale.

=--


+-- {: .num_prop}
###### Proposition

Formally étale morphisms are closed under [[retract]]s.

=--

This means that if $f : X \to Y$ is formally étale and 

$$
  \array{
    A &\to & X &\to& A
    \\
    \downarrow^{\mathrlap{p}} && \downarrow^{\mathrlap{f}} && \downarrow^{\mathrlap{p}}
    \\
    B &\to& Y &\to& B
  }
$$

is a [[commuting diagram]] such that the two horizontal composites are [[identities]], then also $p$ is formally étale.

+-- {: .proof}
###### Proof

By applying the [[natural transformation]] $ \phi : u^* \to u^!$ to this diagram we obtain a retract diagram in the category of squares, given by the naturality squares of $\phi$ on $f$ and $p$, where the middle square is a pullback square. By <a href="http://nlab.mathforge.org/nlab/show/retract#RetractsOfLimits">this proposition</a> at _[[retract]]_ this implies that also the retracting square is a pullback, which means that $p$ is formally étale.

=--

+-- {: .num_prop}
###### Proposition

If $u^*$ preserves [[pullbacks]], then formally étale morphisms are reflected under pullback: if the pullback of $f$ is formally étale, then so is $f$.

=--

+-- {: .proof}
###### Proof

Consider a [[pullback]] diagram

$$
  \array{
    A \times_Y X &\to& X
    \\
    {}^{\mathllap{p}}\downarrow && \downarrow^{\mathrlap{f}}
    \\
    A &\to& Y
  }
$$

such that $p$ is formally étale.

Applying the [[natural transformation]] $\phi : u^* \to u^!$ to this yields a square of squares. Two sides of this are the [[pasting]] composite


$$
  \array{
    u^* A \times_Y X &\to& u^* X &\stackrel{\phi_X}{\to}&  u^! X
    \\
    \downarrow && \downarrow && \downarrow
    \\
    u^* A &\to& u^* Y &\stackrel{\phi_X}{\to}& u^! Y
  }
$$

and the other two sides are the pasting composite

$$
  \array{
     u^* A \times_Y X &\stackrel{\phi_{A \times_Y X}}{\to}& u^! A \times_Y A
     &\stackrel{}{\to}& u^! X
     \\
     \downarrow && \downarrow && \downarrow
     \\
     u^* A &\stackrel{\phi_A}{\to}& u^! A &\to& u^! Y
  }
  \,.
$$

Counting left to right and top to bottom, we have that

* the first square is a pullback by assumption on $u^*$;

* the fourth square is a pullback since $u^!$ is [[right adjoint]] and so also preserves pullbacks;

* the third square is a pullback, since $p$ is formally étale.

* so the total top rectangle is a pullback, since it is equal to the bottom  total rectangle;

* therefore finally the second square is a pullback, by the [[pasting law]]. 

=--

## Concrete notion
 {#ConcreteNotion}

See the concrete notions of [[formally smooth morphism]] and [[formally unramified morphism]].

## Related concepts

[[formally smooth morphism]] and [[formally unramified morphism]] $\Rightarrow$ **formally étale morphism**

[[!redirects formally etale]]
