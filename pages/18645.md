

+-- {: .rightHandSide}
+-- {: .toc .clickDown tabindex="0"}
###Context###
#### Algebraic Quantum Field Theory
+--{: .hide}
[[!include AQFT and operator algebra contents]]
=--
=--
=--

$\,$

> this entry is going to be one chapter of _[[geometry of physics]]_

> under construction

$\,$

<img src="https://ncatlab.org/schreiber/files/HamburgAnnouncement.jpg" width="850" >


These notes mean to give an expository but rigorous introduction to the basic concepts
of [[relativistic quantum field theory|relativistic]] [[perturbative quantum field theories]], specifically those
that arise as the [[perturbative quantum field theory|perturbative]] [[quantization]] of a _[[Lagrangian field theory]]_
-- such as [[quantum electrodynamics]], [[quantum chromodynamics]], and [[perturbative quantum gravity]]
appearing in the [[standard model of particle physics]].

For broad introduction of the idea of the topic of _[[perturbative quantum field theory]]_ see [[perturbative quantum field theory|there]] and see

* PhysicsForums-Insights: _[Introduction to Perturbative Quantum Field Theory](https:/s/www.physicsforums.com/insights/paqft-idea-references/)_

Here, first we consider [[classical field theory]] (or rather [[pre-quantum field theory]]), complete with [[BV-BRST formalism]];
then its [[deformation quantization]] via [[causal perturbation theory]] to [[perturbative quantum field theory]].
This mathematically rigorous (i.e. clear and precise) formulation of the traditional informal lore
has come to be known as _[[perturbative algebraic quantum field theory]]_.

We aim to give a _fully [[local field theory|local]]_ discussion, where all structures arise
on the "[[jet bundle]] over the [[field bundle]]" (introduced [below](#FieldVariations)) and "[[transgression|transgress]]" from there to the [[spaces of field histories]] over [[spacetime]] (discussed [further below](#Observables)).
This "[[schreiber:Higher Prequantum Geometry]]" streamlines traditional constructions and serves the conceptualization in the theory.
This is joint work with [[Igor Khavkine]].


In full beauty these concepts are extremely general and powerful; but the aim here is to give a first precise idea of the subject, not
a fully general account.
Therefore we concentrate on the special case where [[spacetime]] is [[Minkowski spacetime]] (def. \ref{MinkowskiSpacetime} below), where the [[field bundle]] (def. \ref{FieldsAndFieldBundles} below) is an ordinary [[trivial vector bundle]] (example \ref{TrivialVectorBundleAsAFieldBundle} below) and hence the [[Lagrangian  density]] (def. \ref{LocalLagrangianDensityOnSecondOrderJetBundleOfTrivialVectorBundleOverMinkowskiSpacetime} below) is [[locally variational field theory|globally defined]].
Similarly, when considering [[gauge theory]] we consider just the special case that the [[gauge parameter]]-bundle
is a [[trivial vector bundle]]  and we concentrate on the case that the gauge symmetries are "closed irreducible" (def. \ref{GaugeParametrizedInfinitesimalGaugeTransformation} below).
But we aim to organize all concepts such that the _structure_ of their generalization to [[AQFT on curved spacetime|curved spacetime]]
and non-trivial [[field bundles]] is immediate.

This comparatively simple setup already subsumes what is considered in traditional texts on the subject; it captures the established [[perturbative quantum field theory|perturbative]] [[BV formalism|BRST-BV quantization]] of [[gauge fields]] coupled to [[fermions]] [[AQFT on curved spacetime|on curved spacetimes]]
-- which is the state of the art.
Further generalization, necessary for the discussion of global topological effects, such as [[instanton]] configurations
of [[gauge fields]], will be discussed elsewhere (see at _[[homotopical algebraic quantum field theory]]_).

Alongside the theory we develop the concrete examples of the [[real scalar field]], the [[electromagnetic field]] and the [[Dirac field]]:

**running examples**
{#RunningExamples}

| [[field (physics)|field]] | [[field bundle]] |  [[Lagrangian density]] | [[equation of motion]] | [[gauge fixing]] | [[Poisson bracket]] |
|---------------------------|------------------|-------------------------|------------------------|------------------|------|
| [[real scalar field]] |  expl. \ref{RealScalarFieldBundle} |  expl. \ref{LagrangianForFreeScalarFieldOnMinkowskiSpacetime} | expl. \ref{FreeScalarFieldEOM} | none | expl. \ref{PeierlsBracketEistsForScalarFieldAndDiracField}, <br/> expl. \ref{PoissonBracketForRealScalarField} |
| [[electromagnetic field]] | expl. \ref{Electromagnetism} | expl. \ref{ElectromagnetismLagrangianDensity} | expl. \ref{ElectromagnetismEl}  | expl. \ref{NLGaugeFixingOfElectromagnetism} | ... |
| [[Dirac field]] | expl. \ref{DiracFieldBundle}  | expl. \ref{LagrangianDensityForDiracField}  |  expl. \ref{EquationOfMotionOfDiracFieldIsDiracEquation}  |  none  |  expl. \ref{PeierlsBracketEistsForScalarFieldAndDiracField}, <br/>  expl. \ref{PoissonBracketForDiracField}  |

$\,$

| [[field (physics)|field]] | [[causal propagator]] | [[Hadamard propagator]] | [[Feynman propagator]] |
|---------------------------|----|----|-----|
| [[real scalar field]] | prop. \ref{ModeExpansionOfCausalPropagatorForKleinGordonOnMinkowski} | def. \ref{StandardHadamardDistributionOnMinkowskiSpacetime} | def. \ref{FeynmanPropagatorForKleinGordonEquationOnMinkowskiSpacetime}  |
| [[electromagnetic field]] | ...  | ... | ... |
| [[Dirac field]] | prop. \ref{DiracEquationOnMinkowskiSpacetimeAdvancedAndRetardedPropagators} | def. \ref{HadamardPropagatorForDiracOperatorOnMinkowskiSpacetime} | def. \ref{FeynmanPropagatorForDiracOperatorOnMinkowskiSpacetime} |


The [[electromagnetic field]] and the [[Dirac field]] combined are the [[field (physics)|fields]] of _[[quantum electrodynamics]]_
which we turn to at the end [below](#QED).

$\,$

**Acknowledgement**

These notes profited greatly from discussions with [[Igor Khavkine]].
Thanks also to [[Marco Benini]], [[Klaus Fredenhagen]], [[Arnold Neumaier]], [[Kasia Rejzner]] for helpful discussion.


$\,$
$\,$

#A first idea of quantum field theory#
* table of contents
{:toc}

$\,$




## Geometry
 {#Geometry}

The [[geometry of physics]] is _[[differential geometry]]_. This is the flavor of [[geometry]] which is modeled on
[[Cartesian spaces]] $\mathbb{R}^n$ with [[smooth functions]] between them. Here we briefly review the basics of
[[differential geometry]] on [[Cartesian spaces]].

In principle the only **background** assumed of the reader here is

1. usual _[[structural set theory|naive set theory]]_ (e.g. [[Sets for Mathematics|Lawvere-Rosebrugh 03]]);

1. the concept of the _[[continuum]]_: the [[real line]] $\mathbb{R}$, the [[plane]] $\mathbb{R}^2$, etc.

1. the concepts of _[[differentiation]]_ and _[[integration]]_ of functions on such [[Cartesian spaces]];

hence essentially the content of multi-variable [[differential calculus]].

We now discuss:

* _[Abstract coordinate systems](#SmoothFunctions)_

* _[Fiber bundles](#BundlesAndSections)_

* _[Synthetic differential geometry](#SyntheticDifferentialGeometry)_

* _[Differential forms](#DifferentialFormsAndCartanCalculus)_


As we uncover [[Lagrangian field theory]] further below, we discover ever more general concepts of
"[[space]]" in differential geometry, such as
_[[smooth manifolds]]_, _[[diffeological spaces]]_, _[[infinitesimal neighbourhoods]]_, _[[supermanifolds]]_, _[[Lie algebroids]]_
and _[[super L-∞ algebra|super]] [[Lie ∞-algebroids]]_.
We introduce these incrementally as we go along:

**more general [[spaces]] in [[differential geometry]] introduced further below**
 {#NotionsOfGeometry}

| | |  |  |  |  |  |  |  |  |  | [[higher differential geometry]] |
|--|---|---|---|---|---|---|---|---|---|---|---|
| **[[differential  geometry]]** | [[smooth manifolds]] <br/> (def. \ref{SmoothManifoldInsideDiffeologicalSpaces}) | $\hookrightarrow$ | [[diffeological spaces]] <br/> (def. \ref{DiffeologicalSpace}) | $\hookrightarrow$ | [[smooth sets]] <br/> (def. \ref{SmoothSet}) | $\hookrightarrow$ | [[formal smooth sets]] <br/> (def. \ref{FormalSmoothSet}) | $\hookrightarrow$ | [[super formal smooth sets]] <br/> (def. \ref{SuperFormalSmoothSet}) | $\hookrightarrow$ | [[super formal smooth ∞-groupoids]] <br/> (not needed in fully [[perturbative QFT]]) |
| **[[infinitesimal]] [[formal geometry|geometry]], <br/> [[Lie theory]]** | |  |  |  |  |   | [[infinitesimally thickened points]] <br/> (def. \ref{InfinitesimallyThickendSmoothManifold}) |  | [[superpoints]] <br/> (def. \ref{SuperCartesianSpace}) |  | [[Lie ∞-algebroids]] <br/> (def. \ref{LInfinityAlgebroid}) |
| | |  |  |  |  |  |  |  |  |  | **[[higher Lie theory]]** |
| **needed in [[QFT]] for:** |  [[spacetime]] (def. \ref{MinkowskiSpacetime}) |  | [[space of field histories]] <br/> (def. \ref{DiffeologicalSpaceOfFieldHistories})  |  |  |  | [[Cauchy surface]] (def. \ref{CauchySurface}), <br/> [[perturbation theory]]  (def. \ref{LocalObservablesOnInfinitesimalNeighbourhood}) |  | [[Dirac field]] (expl. \ref{DiracFieldBundle}), [[Pauli exclusion principle]]  |  | [[infinitesimal gauge symmetry]]/[[BRST complex]] <br/> (expl. \ref{LocalOffShellBRSTComplex})  |


$\,$

**Abstract coordinate systems**
 {#SmoothFunctions}

What characterizes [[differential geometry]] is that it models [[geometry]] on _the [[continuum]]_,
namely the [[real line]] $\mathbb{R}$, together with its [[Cartesian products]] $\mathbb{R}^n$,
regarded with its canonical [[smooth structure]] (def. \ref{CartesianSpacesAndSmoothFunctionsBetweenThem} below).
We may think of these _[[Cartesian spaces]]_ $\mathbb{R}^n$ as the "abstract [[coordinate systems]]"
and of the [[smooth functions]] between them as the "abstract [[coordinate transformations]]".

We will eventually consider [below](#FieldBundles) much more general "[[smooth spaces]]" $X$ than just the [[Cartesian spaces]] $\mathbb{R}^n$;
but all of them are going to be understood by "laying out abstract coordinate systems" inside them,
in the general sense of having smooth functions $f \colon \mathbb{R}^n \to X$ mapping a Cartesian space smoothly into them.
All structure on [[generalized smooth spaces]] $X$ is thereby reduced to _compatible systems_ of structures on just [[Cartesian spaces]],
one for each smooth "probe" $f\colon \mathbb{R}^n \to X$. This is called "[[functorial geometry]]".

Notice that the popular concept of a _[[smooth manifold]]_ (def./prop. \ref{SmoothManifoldInsideDiffeologicalSpaces} below)
is essentially that o a [[smooth space]] which _locally looks just like_ a [[Cartesian space]],
in that there exist sufficiently many $f \colon \mathbb{R}^n \to X$ which are ([[open map|open]]) _[[isomorphisms]]_
onto their [[images]]. Historically it was a long process to arrive at the insight that it is wrong to _fix_
such local coordinate identifications $f$, or to have any structure depend on such a choice. But it is useful
to go one step further:

In [[functorial geometry]] we do not even focus attention on those $f \colon \mathbb{R}^n \to X$ that are
isomorphisms onto their image, but consider _all_ "probes" of $X$ by "abstract coordinate systems".
This makes [[differential geometry]] both simpler as well as more powerful. The analogous insight
for [[algebraic geometry]] is due to [Grothendieck 65](functorial+geometry#Grothendieck65); it was transported
to [[differential geometry]] by [Lawvere 67](synthetic+differential+geometry#Lawvere67).

This allows to combine the best of two superficially disjoint worlds: On the one hand we may reduce
all constructions and computations to [[coordinates]], the way traditionally done in the [[physics]] literature;
on the other hand we have full conceptial control over the coordinate-free generalized spaces analyzed thereby.
What makes this work is that all [[coordinate]]-constructions are _[[functorial geometry|functorially]]_ considered
over all abstract coordinate systems.

$\,$

+-- {: .num_defn #CartesianSpacesAndSmoothFunctionsBetweenThem}
###### Definition
**([[Cartesian spaces]] and [[smooth functions]] between them)**

For $n \in \mathbb{N}$ we say that the set $\mathbb{R}^n$ of [[n-tuples]] of [[real numbers]]
is a _[[Cartesian space]]_. This comes with the canonical [[coordinate functions]]

$$
  x^k \;\colon\; \mathbb{R}^n \longrightarrow \mathbb{R}
$$

which send an [[n-tuple]] of real numbers to the $k$th element in the tuple, for $k \in \{1, \cdots, n\}$.

For

$$
  f \;\colon\; \mathbb{R}^{n} \longrightarrow \mathbb{R}^{n'}
$$

any [[function]] between [[Cartesian spaces]], we may ask whether its [[partial derivative]]
along the $k$th coordinate exists, denoted

$$
  \frac{\partial f}{\partial x^k}
  \;\colon\;
  \mathbb{R}^{n}
    \longrightarrow
  \mathbb{R}^{n'}
  \,.
$$

If this exists, we may in turn ask that the [[partial derivative]] of the partial derivative exists

$$
  \frac{\partial^2 f}{\partial x^{k_1} \partial x^{k_2}}
  \coloneqq
  \frac{\partial}{\partial x^{k_2}} \frac{\partial f}{\partial x^{k_1}}
$$

and so on.

A general higher [[partial derivative]] obtained this way is, if it exists, indexed by an [[n-tuple]]
of [[natural numbers]] $\alpha \in \mathbb{N}^n$ and denoted

$$
  \label{PartialDerivativeWithManyIndices}
  \partial^\alpha
    \;\coloneqq\;
  \frac{
    \partial^{\vert \alpha \vert} f
  }{
    \partial^{\alpha_1} x^1
    \partial^{\alpha_2} x^2
      \cdots
    \partial^{\alpha_n} x^n
  }
  \,,
$$

where ${\vert \alpha\vert} \coloneqq \underoverset{n}{i = 1}{\sum} \alpha_i$ is the total _order_ of the partial derivative.

If all partial derivative to all orders $\alpha \in \mathbb{N}^n$ of a [[function]] $f \colon \mathbb{R}^n \to \mathbb{R}^{n'}$
exist, then $f$ is called a _[[smooth function]]_.

=--

Of course the [[composition]] $g \circ f$ of two smooth functions is again a [[smooth function]].

$$
  \array{
    && \mathbb{R}^{n_2}
    \\
    & {}^{\mathllap{f}}\nearrow && \searrow^{\mathrlap{g}}
    \\
    \mathbb{R}^{n_1}
      && \underset{g \circ f}{\longrightarrow} &&
    \mathbb{R}^{n_3}
  }
  \,.
$$


The inclined reader may notice that this means that [[Cartesian spaces]] with [[smooth functions]]
between them constitute a _[[category]]_ ("[[CartSp]]"); but the reader not so inclined may ignore this.

For the following it is useful to think of each [[Cartesian space]] as an _abstract [[coordinate system]]_.
We will be dealing with various [[generalized smooth spaces]] (see the table [below](#NotionsOfGeometry)), but they will all be characterized by
a prescription for how to smoothly map abstract coordinate systems into them.



+-- {: .num_example #CoordinateFunctionsAreSmoothFunctions}
###### Example
**([[coordinate functions]] are [[smooth functions]])**

Given a [[Cartesian space]] $\mathbb{R}^n$, then all its [[coordinate functions]] (def. \ref{CartesianSpacesAndSmoothFunctionsBetweenThem})

$$
  x^k \;\colon\; \mathbb{R}^n \longrightarrow \mathbb{R}
$$

are [[smooth functions]] (def. \ref{CartesianSpacesAndSmoothFunctionsBetweenThem}).

For

$$
  f \colon \mathbb{R}^{n_1} \longrightarrow \mathbb{R}^{n_2}
$$

any [[smooth function]] and $a \in \{1, 2, \cdots, n_2\}$ write

$$
  f^a \coloneqq x^k \circ f
  \;\colon\;
  \mathbb{R}^{n_1}
    \overset{f}{\longrightarrow}
  \mathbb{R}^{n_2}
    \overset{x^a}{\longrightarrow}
  \mathbb{R}
$$
.
for its [[composition]] with this [[coordinate function]].

=--


+-- {: .num_example #AlgebraOfSmoothFunctionsOnCartesianSpaces}
###### Example
**([[algebra of functions|algebra of]] [[smooth functions]] on [[Cartesian spaces]])**

For each $n \in \mathbb{N}$, the set

$$
  C^\infty(\mathbb{R}^n)
   \;\coloneqq\;
  Hom_{CartSp}(\mathbb{R}^n, \mathbb{R})
$$

of [[real number]]-valued [[smooth functions]] $f \colon \mathbb{R}^n \to \mathbb{R}$
on the $n$-dimensional [[Cartesian space]] (def. \ref{CartesianSpacesAndSmoothFunctionsBetweenThem})
becomes a [[commutative algebra|commutative]] [[associative algebra]] over the [[ring]] of [[real numbers]]
by pointwise addition and multiplication in $\mathbb{R}$: for $f,g \in C^\infty(\mathbb{R}^n)$ and $x \in \mathbb{R}^n$

1. $(f + g)(x) \coloneqq f(x) + g(x)$

1. $(f \cdot g)(x) \coloneqq f(x) \cdot g(x)$.

The inclusion

$$
  \mathbb{R} \overset{const}{\hookrightarrow} C^\infty(\mathbb{R}^n)
$$

is given by the [[constant functions]].

We call this the _[[real numbers|real]] [[algebra of functions|algebra of]] [[smooth functions]]_ on $\mathbb{R}^n$:

$$
  C^\infty(\mathbb{R}^n)
  \;\in\;
  \mathbb{R} Alg
  \,.
$$

If

$$
  f \;\colon\; \mathbb{R}^{n_1} \longrightarrow \mathbb{R}^{n_2}
$$

is any [[smooth function]] (def. \ref{CartesianSpacesAndSmoothFunctionsBetweenThem}) then
[[composition|pre-composition]] with $f$ ("[[pullback of functions]]")

$$
  \array{
    C^\infty(\mathbb{R}^{n_2})
      &\overset{f^\ast}{\longrightarrow}&
    C^\infty(\mathbb{R}^{n_1})
    \\
    g &\mapsto& f^\ast g \coloneqq g \circ f
  }
$$

is an [[associative algebra|algebra]] [[homomorphism]]. Moreover, this is clearly compatible with [[composition]] in that

$$
  f_1^\ast(f_2^\ast g) = (f_2 \circ f_1)^\ast g
  \,.
$$

Stated more [[category theory|abstractly]], this means that assigning [[algebra of functions|algebras]] of [[smooth functions]]
is a [[functor]]

$$
  C^\infty(-)
  \;\colon\;
  CartSp \longrightarrow \mathbb{R} Alg^{op}
$$

from the [[category]] [[CartSp]] of [[Cartesian spaces]] and [[smooth functions]] between them (def. \ref{CartesianSpacesAndSmoothFunctionsBetweenThem}), to the
[[opposite category|opposite]] of the category $\mathbb{R}$[[Alg]] of $\mathbb{R}$-[[associative algebra|algebras]].

=--

+-- {: .num_defn #LocalDiffeomorphismBetweenCartesianSpaces}
###### Definition
**([[local diffeomorphisms]] and [[open embeddings]] of [[Cartesian spaces]])**

A [[smooth function]] $f \colon \mathbb{R}^{n} \to \mathbb{R}^{n}$ from one [[Cartesian space]] to itself
(def. \ref{CartesianSpacesAndSmoothFunctionsBetweenThem}) is called a _[[local diffeomorphism]]_, denoted

$$
  f \;\colon\; \mathbb{R}^{n} \overset{et}{\longrightarrow} \mathbb{R}^n
$$

if the [[determinant]] of the [[matrix]] of [[partial derivatives]] (the "[[Jacobian]]" of $f$) is
everywhere non-vanishing

$$
  det
  \left(
   \array{
     \frac{\partial f^1}{\partial x^1}(x)
     &\cdots&
     \frac{\partial f^n}{\partial x^1}(x)
     \\
     \vdots && \vdots
     \\
     \frac{\partial f^1}{\partial x^n}(x)
     &\cdots&
     \frac{\partial f^n}{\partial x^n}(x)
   }
  \right)
  \;\neq\;
  0
  \phantom{AAAA}
  \text{for all} \, x \in \mathbb{R}^n
  \,.
$$

If the function $f$ is both a [[local diffeomorphism]], as above, as well as an [[injective function]] then
we call it an _[[open embedding]]_, denoted

$$
  f \;\colon\;
  \mathbb{R}^n \overset{\phantom{A}et\phantom{A}}{\hookrightarrow} \mathbb{R}^n
  \,.
$$

=--

+-- {: .num_defn #DifferentiablyGoodOpenCover}
###### Definition
**([[good open cover]] of [[Cartesian spaces]])**

For $\mathbb{R}^n$ a [[Cartesian space]] (def. \ref{CartesianSpacesAndSmoothFunctionsBetweenThem}),
a _[[differentiably good open cover]]_ is

*  an [[indexed set]]

   $$
      \left\{
        \mathbb{R}^n
          \underoverset{et}{\phantom{AA}f_i\phantom{AA}}{\hookrightarrow}
        \mathbb{R}^n
      \right\}_{i \in I}
   $$

   of [[open embeddings]]
   (def. \ref{LocalDiffeomorphismBetweenCartesianSpaces})

such that the [[images]]

$$
  U_i \coloneqq im(f_i) \subset \mathbb{R}^n
$$

satisfy:

1. ([[open cover]]) every point of $\mathbb{R}^n$ is contained in at least one of the $U_i$;

1. ([[good open cover|good]]) all [[finite set|finite]] [[intersections]] $U_{i_1} \cap \cdots \cap U_{i_k} \subset \mathbb{R}^n$ are either [[empty set]] or  themselves images of [[open embeddings]] according to def. \ref{LocalDiffeomorphismBetweenCartesianSpaces}.

The inclined reader may notice that the concept of [[differentiably good open covers]] from def. \ref{DifferentiablyGoodOpenCover}
is a _[[coverage]]_ on the [[category]] _[[CartSp]]_ of [[Cartesian spaces]] with [[smooth functions]] between them, making it a
_[[site]]_, but the reader not so inclined may ignore this.

=--

([[schreiber:Cech Cocycles for Differential characteristic Classes|Fiorenza-Schreiber-Stasheff 12, def. 6.3.9]])

$\,$


$\,$

**[[fiber bundles]]**
 {#BundlesAndSections}

Given any context of [[objects]] and [[morphisms]] between them, such as the [[Cartesian spaces]]
and [[smooth functions]] from def. \ref{CartesianSpacesAndSmoothFunctionsBetweenThem}
it is of interest to fix one [[object]] $X$ and consider other objects _[[dependent type|parameterized over]]_
it. These are called _[[bundles]]_ (def. \ref{BundlesAndFibers}) below.
For reference, we briefly discuss here the basic concepts related to [[bundles]] in the context of
[[Cartesian spaces]].

Of course the theory of bundles is mostly trivial over Cartesian spaces;
it gains its main interest from its generalization to more general [[smooth manifolds]] (def./prop. \ref{SmoothManifoldInsideDiffeologicalSpaces} below).
It is still worthwhile for our development to first consider the relevant concepts in this simple case first.

For more exposition see at _[[fiber bundles in physics]]_.

$\,$

+-- {: .num_defn #BundlesAndFibers}
###### Definition
**([[bundles]])**

We say that a [[smooth function]] $E \overset{fb}{\to} X$ (def. \ref{CartesianSpacesAndSmoothFunctionsBetweenThem})
is a _[[bundle]]_ just to amplify that we think of it as exhibiting $E$ as being a "space over $X$":

$$
  \array{
    E
    \\
    \downarrow\mathrlap{fb}
    \\
    X
  }
  \,.
$$

For $x \in X$ a point, we say that the _[[fiber]]_ of this [[bundle]] over $x$ is the [[pre-image]]

$$
  \label{FiberOfAFiberBundle}
  E_x \coloneqq fb^{-1}(\{x\}) \subset E
$$

of the point $x$ under the smooth function. We think of $fb$ as exhibiting a "smoothly varying" set of [[fiber]] spaces over $X$.

Given two [[bundles]] $E_1 \overset{fb_1}{\to} X$ and $E_2 \overset{fb_2}{\to} X$ over $X$,
a _[[homomorphism]] of bundles_ between them is a [[smooth function]]
$f \colon E_1 \to E_2$ (def. \ref{CartesianSpacesAndSmoothFunctionsBetweenThem}) between their
total spaces which respects the bundle projections, in that

$$
  fb_2  \circ f = fb_2
  \phantom{AAAA}
  \text{i.e.}
  \phantom{AAA}
  \array{
    E_1 && \overset{f}{\longrightarrow} && E_2
    \\
    & {}_{\mathllap{fb_1}}\searrow && \swarrow_{\mathrlap{fb_2}}
    \\
    && X
  }
  \,.
$$

Hence a bundle homomorphism is a smooth function that sends [[fibers]] to [[fibers]] over the same point:

$$
  f\left(
    (E_1)_x
  \right)
    \;\subset\;
  (E_2)_x
  \,.
$$

The inclined reader may notice that this defines a [[category]] of [[bundles]] over $X$,
which is in fact just the _[[slice category]]_ $CartSp_{/X}$; the reader not so inclined may ignore this.

=--


+-- {: .num_defn #Sections}
###### Definition
**([[sections]])**

Given a [[bundle]] $E \overset{fb}{\to} X$ (def. \ref{BundlesAndFibers})
a _[[section]]_ is a [[smooth function]] $s \colon X \to E$ such that

$$
  fb \circ f = id_X
  \phantom{AAAAA}
  \array{
    && E
    \\
    &
    {}^{\mathllap{s}}\nearrow
    & \downarrow\mathrlap{fb}
    \\
    X &=& X
  }
  \,.
$$

This means that $s$ sends every point $x \in X$ to an element in the [[fiber]] over that point

$$
  s(x) \in E_x
  \,.
$$

We write

$$
  \Gamma_X(E) \coloneqq
  \left\{
     \array{
        && E
        \\
        & {}^{\mathllap{s}}\nearrow & \downarrow^\mathrlap{fb}
        \\
        X &=& X
     }
     \phantom{fb}
  \right\}
$$

for the [[space of sections|set of sections]] of a bundle.

For $E_1 \overset{f_1}{\to} X$ and $E_2 \overset{f_2}{\to} X$ two [[bundles]] and for

$$
  \array{
    E_1
      && \overset{f}{\longrightarrow} &&
    E_2
    \\
    & {}_{\mathllap{fb_1}}\searrow && \swarrow_{\mathrlap{fb_2}}
    \\
    && X
  }
$$

a bundle [[homomorphism]] between them (def. \ref{BundlesAndFibers}), then [[composition]] with $f$ sends [[sections]] to [[sections]]
and hence yields a [[function]] denoted

$$
  \array{
    \Gamma_X(E_1)
      &\overset{f_\ast}{\longrightarrow}&
    \Gamma_X(E_2)
    \\
    s &\mapsto& f \circ s
  }
  \,.
$$

=--


+-- {: .num_example #TrivialBundleOnCartesianSpace}
###### Example
**([[trivial bundle]])**

For $X$ and $F$  [[Cartesian spaces]], then the [[Cartesian product]] $X \times F$ equipped with the [[projection]]

$$
  \array{
    X \times F
    \\
    \downarrow^\mathrlap{pr_1}
    \\
    X
  }
$$

to $X$ is a [[bundle]] (def. \ref{BundlesAndFibers}), called the _[[trivial bundle]]_
with [[fiber]] $F$. This represents the _constant_ smoothly varying set of [[fibers]], constant on $F$

If $F = \ast$ is the point, then this is the identity bundle

$$
  \array{
    X
    \\
    \downarrow\mathrlap{id}
    \\
    X
  }
  \,.
$$

Given any [[bundle]] $E \overset{fb}{\to} X$, then a bundle homomorphism (def. \ref{BundlesAndFibers})
from the identity bundle to $E \overset{fb}{\to} X$ is equivalently a [[section]] of $E \overset{fb}{\to} X$ (def. \ref{Sections})

$$
  \array{
     X && \overset{s}{\longrightarrow} && E
     \\
     & {}_{\mathllap{id}}\searrow && \swarrow_{\mathrlap{fb}}
     \\
     && X
  }
$$

=--

+-- {: .num_defn #FiberBundle}
###### Definition
**([[fiber bundle]])**

A [[bundle]] $E \overset{fb}{\to} X$ (def. \ref{BundlesAndFibers}) is called a _[[fiber bundle]]_ with _typical fiber_ $F$ if
there exists a [[differentiably good open cover]] $\{U_i \hookrightarrow X\}_{i \in I}$ (def. \ref{DifferentiablyGoodOpenCover})
such that the restriction of $fb$ to each $U_i$ is [[isomorphism|isomorphic]] to the [[trivial fiber bundle]] with
fiber $F$ over $U_i$. Such [[diffeomorphisms]] $f_i \colon U_i \times F \overset{\simeq}{\to} E\vert_{U_i}$
are called _[[local trivializations]]_ of the fiber bundle:

$$
  \array{
    U_i \times F &\underoverset{\simeq}{f_i}{\longrightarrow}& E\vert_{U_i}
    \\
    & {}_{\mathllap{pr_1}}\searrow & \downarrow\mathrlap{fb\vert_{U_i}}
    \\
    && U_i
  }
  \,.
$$


=--


+-- {: .num_defn #VectorBundle}
###### Definition
**([[vector bundle]])**

A _[[vector bundle]]_ is a [[fiber bundle]] $E \overset{vb}{\to} X$ (def. \ref{FiberBundle}) with typical fiber a [[vector space]] $V$ such that
there exists a [[local trivialization]] $\{U_i \times V \underoverset{\simeq}{f_i}{\to} E\vert_{U_i}\}_{i \in I}$
whose _gluing functions_

$$
  U_i \cap U_j \times V
    \overset{f_i\vert_{U_i \cap U_j}}{\longrightarrow}
  E\vert_{U_i \cap U_j}
    \overset{f_j^{-1}\vert_{U_i \cap U_j}}{\longrightarrow}
  U_i \cap U_j \times V
$$

for all $i,j \in I$ are [[linear functions]] over each point $x \in U_i \cap U_j$.

A [[homomorphism]] of [[vector bundle]] is a bundle morphism $f$ (def. \ref{BundlesAndFibers})
such that there exist [[local trivializations]] on both sides with respect to which $g$ is
[[fiber]]-wise a [[linear map]].

The inclined reader may notice that this makes vector bundles over $X$ a [[category]] (denoted $Vect_{/X}$);
the reader not so inclined may ignore this.

=--

+-- {: .num_example #ModuleOfSectionsOfAVectorBundle}
###### Example
**([[module]] of [[sections]] of a [[vector bundle]])**

Given a [[vector bundle]] $E \overset{vb}{\to} X$ (def. \ref{VectorBundle}),
then its [[space of sections|set of sections]] $\Gamma_X(E)$ (def. \ref{BundlesAndFibers})
becomes a [[real vector space]] by [[fiber]]-wise multiplication with [[real numbers]].
Moreover, it becomes a [[module]] over the [[algebra of functions|algebra of]] [[smooth functions]] $C^\infty(X)$
(example \ref{AlgebraOfSmoothFunctionsOnCartesianSpaces}) by the same [[fiber]]-wise multiplication:

$$
  \array{
     C^\infty(X) \otimes_{\mathbb{R}} \Gamma_X(E) &\longrightarrow& \Gamma_X(E)
     \\
     (f,s) &\mapsto& (x \mapsto f(x) \cdot s(x))
  }
  \,.
$$

For $E_1 \overset{fb_1}{\to} X$ and $E_2 \overset{fb_2}{\to} X$ two [[vector bundles]] and

$$
  \array{
    E_1 && \overset{f}{\longrightarrow} && E_2
    \\
    & {}_{\mathllap{fb_1}}\searrow && \swarrow_{\mathrlap{fb_2}}
    \\
    && X
  }
$$

a vector bundle homomorphism (def. \ref{VectorBundle}) then the induced function on sections (def. \ref{Sections})

$$
  f_\ast \;\colon\; \Gamma_X(E_1) \longrightarrow \Gamma_X(E_2)
$$

is compatible with this [[action]] by smooth functions and hence constitutes a [[homomorphism]] of $C^\infty(X)$-[[modules]].

The inclined reader may notice that this means that taking [[spaces of sections]] yields a [[functor]]

$$
  \Gamma_X(-)
  \;\colon\;
  Vect_{/X}
    \longrightarrow
  C^\infty(X) Mod
$$

from the [[category of vector bundles]] over $X$ to that over [[modules]] over $C^\infty(X)$.

=--


+-- {: .num_example #TangentVectorFields}
###### Example
**([[tangent vector fields]] and [[tangent bundle]])**

For $\mathbb{R}^n $ a [[Cartesian space]] (def. \ref{CartesianSpacesAndSmoothFunctionsBetweenThem})
the [[trivial vector bundle]] (example \ref{TrivialBundleOnCartesianSpace}, def. \ref{VectorBundle})

$$
  \array{
    T \mathbb{R}^n &\coloneqq& \mathbb{R}^n \times \mathbb{R}^n
    \\
    \mathllap{tb}\downarrow && \downarrow\mathrlap{pr_1}
    \\
    \mathbb{R}^n &=& \mathbb{R}^n
  }
$$

is called the _[[tangent bundle]]_ of $\mathbb{R}^n$. With $(x^a)_{a = 1}^n$ the [[coordinate functions]]
on $\mathbb{R}^n$ (def. \ref{CoordinateFunctionsAreSmoothFunctions}) we write $(\partial_a)_{a = 1}^n$
for the corresponding [[linear basis]] of $\mathbb{R}^n$ regarded as a [[vector space]]. Then
a general [[section]] (def. \ref{Sections})

$$
  \array{
    && T \mathbb{R}^n
    \\
    & {}^{\mathllap{v}}\nearrow& \downarrow\mathrlap{tb}
    \\
    \mathbb{R}^n &=& \mathbb{R}^n
  }
$$

of the [[tangent bundle]] has a unique expansion of the form

$$
  v = v^a \partial_a
$$

where a sum over indices is understood ([[Einstein summation convention]]) and where
the components $(v^a \in C^\infty(\mathbb{R}^n))_{a = 1}^n$
are [[smooth functions]] on $\mathbb{R}^n$ (def. \ref{CartesianSpacesAndSmoothFunctionsBetweenThem}).

Such a $v$ is also called a smooth _[[tangent vector field]]_ on $\mathbb{R}^n$.

Each tangent vector field $v$ on $\mathbb{R}^n$ determines a [[partial derivative]]
on [[smooth functions]]

$$
  \array{
    C^\infty(\mathbb{R}^n) &\overset{D_v}{\longrightarrow}& C^\infty(\mathbb{R}^n)
    \\
    f &\mapsto& \mathrlap{ D_v f \coloneqq v^a \partial_a (f) \coloneqq  \sum_a v^a \frac{\partial f}{\partial x^a} }
  }
  \,.
$$

By the [[product law]] of [[differentiation]], this is a [[derivation]] on the [[algebra of functions|algebra of]] [[smooth functions]]
(example \ref{AlgebraOfSmoothFunctionsOnCartesianSpaces}) in that

1. it is an $\mathbb{R}$-[[linear map]] in that

   $$
     D_v( c_1 f_1 + c_2 f_2 ) = c_1 D_v f_1 + c_2 D_v f_2
   $$

1. it satisfies the [[Leibniz rule]]

   $$
     D_v(f_1 \cdot f_2) = (D_v f_1) \cdot f_2 + f_1 \cdot (D_v f_2)
   $$

for all $c_1, c_2 \in \mathbb{R}$ and all $f_1, f_2 \in C^\infty(\mathbb{R}^n)$.

Hence regarding [[tangent vector fields]] as [[partial derivatives]] constitutes a [[linear function]]

$$
  D \;\colon\; \Gamma_{\mathbb{R}^n}(T \mathbb{R}^n) \longrightarrow Der(C^\infty(\mathbb{R}^n))
$$

from the [[space of sections]] of the [[tangent bundle]]. In fact this is
a [[homomorphism]] of $C^\infty(\mathbb{R}^n)$-[[modules]] (example \ref{ModuleOfSectionsOfAVectorBundle}),
in that for $f \in C^\infty(\mathbb{R}^n)$ and $v \in \Gamma_{\mathbb{R}^n}(T \mathbb{R}^n)$ we have

$$
  D_{f v}(-) = f \cdot D_v(-)
  \,.
$$

=--


+-- {: .num_example #VerticalTangentBundle}
###### Example
**([[vertical tangent bundle]])**

Let $E \overset{fb}{\to} \Sigma$ be a [[fiber bundle]]. Then its _[[vertical tangent bundle]]_ $T_\Sigma E \overset{T fb}{\to} \Sigma$ is the [[fiber bundle]] (def. \ref{FiberBundle}) over $\Sigma$ whose [[fiber]] over a point is the [[tangent bundle]] (def. \ref{TangentVectorFields}) of the fiber of $E \overset{fb}{\to}\Sigma$ over that point:

$$
  (T_\Sigma E)_x \coloneqq T(E_x)
  \,.
$$

If $E \simeq \Sigma \times F$ is a [[trivial fiber bundle]] with [[fiber]] $F$, then its vertical vector bundle is the trivial fiber bundle with fiber $T F$.

=--


+-- {: .num_defn #DualVectorBundle}
###### Definition
**([[dual vector bundle]])**

For $E \overset{vb}{\to} \Sigma$ a [[vector bundle]] (def. \ref{VectorBundle}), its
_[[dual vector bundle]]_ is the vector bundle whose [[fiber]] (eq:FiberOfAFiberBundle) over $x \in \Sigma$ is the
[[dual vector space]] of the corresponding fiber of $E \to \Sigma$:

$$
  (E^\ast)_x \;\coloneqq\; (E_x)^\ast
  \,.
$$

The defining pairing of [[dual vector spaces]] $(E_x)^\ast \otimes E_x \to \mathbb{R}$ applied
pointwise induces a pairing on the [[modules]] of [[sections]] (def. \ref{ModuleOfSectionsOfAVectorBundle})
of the original vector bundle and its dual with values in the [[smooth functions]] (def. \ref{CartesianSpacesAndSmoothFunctionsBetweenThem}):

$$
  \label{PairingOfDualSections}
  \array{
    \Gamma_\Sigma(E) \otimes_{C^\infty(X)} \Gamma_\Sigma(E^\ast)
      &\longrightarrow&
    C^\infty(\Sigma)
    \\
    (v,\alpha) &\mapsto& (v \cdot \alpha \colon x \mapsto \alpha_x(v_x) )
  }
$$


=--


$\,$

**[[synthetic differential geometry]]**
 {#SyntheticDifferentialGeometry}

Below we encounter generalizations of ordinary [[differential geometry]] that include
explicit "[[infinitesimals]]" in the guise of _[[infinitesimally thickened points]]_,
as well as "super-graded infinitesimals", in the guise of _[[superpoints]]_ (necessary for the
description of [[fermion fields]] such as the [[Dirac field]]). As we discuss [below](#FieldBundles), these structures are
naturally incorporated into [[differential geometry]] in just the same way as [[Grothendieck]]
introduced them into [[algebraic geometry]] (in the guise of "[[formal schemes]]"),
namely in terms of [[formal dual|formally dual]] [[rings of functions]] with [[nilpotent ideals]].
That this also works well for [[differential geometry]] rests on the following three
basic but important properties, which say that [[smooth functions]] behave "more algebraically"
than their definition might superficially suggest:


+-- {: .num_prop #AlgebraicFactsOfDifferentialGeometry}
###### Proposition
**(the three magic algebraic properties of [[differential geometry]])**

1. **[[embedding of smooth manifolds into formal duals of R-algebras|embedding of Cartesian spaces into formal duals of R-algebras]]**

   For $X$ and $Y$ two [[Cartesian spaces]], the [[smooth functions]] $f \colon X \longrightarrow Y$
   between them (def. \ref{CartesianSpacesAndSmoothFunctionsBetweenThem}) are in [[natural bijection]] with their
   induced algebra [[homomorphisms]] $C^\infty(X) \overset{f^\ast}{\longrightarrow} C^\infty(Y)$ (example \ref{AlgebraOfSmoothFunctionsOnCartesianSpaces}), so that
   one may equivalently handle [[Cartesian spaces]] entirely via their $\mathbb{R}$-algebras of smooth functions.

   Stated more [[category theory|abstractly]], this means equivalently that the [[functor]] $C^\infty(-)$ that
   sends a [[smooth manifold]] $X$ to its $\mathbb{R}$-[[associative algebra|algebra]]
   $C^\infty(X)$ of [[smooth functions]] (example \ref{AlgebraOfSmoothFunctionsOnCartesianSpaces}) is a _[[fully faithful functor]]_:

   $$
     C^\infty(-)
     \;\colon\;
     SmthMfd \overset{\phantom{AAAA}}{\hookrightarrow} \mathbb{R} Alg^{op}
     \,.
   $$

   ([Kolar-Slovak-Michor 93, lemma 35.8, corollaries 35.9, 35.10](embedding+of+smooth+manifolds+into+formal+duals+of+R-algebras#KolarSlovakMichor93))


1. **[[smooth Serre-Swan theorem|embedding of smooth vector bundles into formal duals of R-algebra modules]]**

   For $E_1 \overset{vb_1}{\to} X$ and $E_2 \overset{vb_2}{\to} X$ two [[vector bundle]] (def. \ref{VectorBundle})
   there is then a [[natural bijection]] between vector bundle [[homomorphisms]] $f \colon E_1 \to E_2$
   and the [[homomorphisms]] of [[modules]] $f_\ast \;\colon\; \Gamma_X(E_1) \to \Gamma_X(E_2)$
   that these induces between the [[spaces of sections]] (example \ref{ModuleOfSectionsOfAVectorBundle}).

   More [[category theory|abstractly]] this means that the [[functor]] $\Gamma_X(-)$ is a [[fully faithful functor]]

   $$
     \Gamma_X(-) \;\colon\; VectBund_X \overset{\phantom{AAAA}}{\hookrightarrow} C^\infty(X) Mod
   $$

   ([Nestruev 03, theorem 11.29](smooth+Serre-Swan theorem#Nestruev03))

   Moreover, the [[modules]] over the $\mathbb{R}$-algebra $C^\infty(X)$
   of [[smooth functions]] on $X$ which arise this way as [[sections]] of [[smooth vector bundles]] over
   a [[Cartesian space]] $X$
   are precisely the [[finitely generated module|finitely generated]] [[free modules]] over $C^\infty(X)$.

   ([Nestruev 03, theorem 11.32](smooth+Serre-Swan theorem#Nestruev03))


1. **[[derivations of smooth functions are vector fields|vector fields are derivations of smooth functions]]**.

   For $X$ a [[Cartesian space]] (example \ref{CartesianSpacesAndSmoothFunctionsBetweenThem}),
   then any [[derivation]] $D \colon  C^\infty(X) \to C^\infty(X)$ on
   the $\mathbb{R}$-[[associative algebra|algebra]]
   $C^\infty(X)$ of [[smooth functions]] (example \ref{AlgebraOfSmoothFunctionsOnCartesianSpaces}) is given by [[differentiation]] with respect to a uniquely defined smooth [[tangent vector field]]: The function that regards [[tangent vector fields]]
   with [[derivations]] from example \ref{TangentVectorFields}

   $$
     \array{
       \Gamma_X(T X)
         &\overset{\phantom{A}\simeq\phantom{A}}{\longrightarrow}&
       Der(C^\infty(X))
       \\
       v &\mapsto& D_v
     }
   $$

   is in fact an [[isomorphism]].

   (This follows directly from the _[[Hadamard lemma]]_.)

=--

Actually all three statements in prop. \ref{AlgebraicFactsOfDifferentialGeometry}
hold not just for [[Cartesian spaces]], but generally for [[smooth manifolds]] (def./prop. \ref{SmoothManifoldInsideDiffeologicalSpaces} below; if only we generalize in the second statement from [[free modules]] to [[projective modules]].
However for our development here it is useful to first focus on just [[Cartesian spaces]] and then bootstrap
the theory of [[smooth  manifolds]] and much more from that, which we do [below](#FieldBundles).


$\,$


$\,$



**[[differential forms]]**
 {#DifferentialFormsAndCartanCalculus}

We introduce and discuss [[differential forms]] on [[Cartesian spaces]].

+-- {: .num_defn #Differential1FormsOnCartesianSpaces}
###### Definition
**([[differential 1-forms]] on [[Cartesian spaces]] and the [[cotangent bundle]])**

For $n \in \mathbb{N}$ a _[[smooth differential 1-form]]_ $\omega$ on a [[Cartesian space]] $\mathbb{R}^n$ (def. \ref{CartesianSpacesAndSmoothFunctionsBetweenThem}) is an [[n-tuple]]

$$
  \left(\omega_i \in CartSp\left(\mathbb{R}^n,\mathbb{R}\right)\right)_{i = 1}^n
$$

of [[smooth functions]] (def. \ref{CartesianSpacesAndSmoothFunctionsBetweenThem}), which we think of equivalently as the [[coefficients]] of a [[formal linear combination]]

$$
  \omega = \omega_i d x^i
$$

on a [[set]] $\{d x^1, d x^2, \cdots, d x^n\}$ of [[cardinality]] $n$.

Here a sum over repeated indices is tacitly understood ([[Einstein summation convention]]).

Write

$$
  \Omega^1(\mathbb{R}^k) \simeq CartSp(\mathbb{R}^k, \mathbb{R})^{\times k}\in Set
$$

for the set of smooth [[differential 1-forms]] on $\mathbb{R}^k$.

We may think of the expressions $(d x^a)_{a = 1}^n$ as a [[linear basis]] for the [[dual vector space]]
$\mathbb{R}^n$. With this the [[differential 1-forms]] are equivalently the [[sections]] (def. \ref{Sections})
of the [[trivial vector bundle]] (example \ref{TrivialBundleOnCartesianSpace}, def. \ref{VectorBundle})

$$
  \array{
    T^\ast \mathbb{R}^n &\coloneqq& \mathbb{R}^n \times (\mathbb{R}^n)^\ast
    \\
    \mathllap{cb}\downarrow && \downarrow\mathrlap{pr_1}
    \\
    \mathbb{R}^n &=& \mathbb{R}^n
  }
$$

called the _[[cotangent bundle]]_ of $\mathbb{R}^n$ (def. \ref{Differential1FormsOnCartesianSpaces}):

$$
  \Omega^1(\mathbb{R}^n) = \Gamma_{\mathbb{R}^n}(T^\ast \mathbb{R}^n)
  \,.
$$

This amplifies via example \ref{ModuleOfSectionsOfAVectorBundle} that $\Omega^1(\mathbb{R}^n)$
has the  [[structure]] of a [[module]] over the [[algebra of functions|algebra of]] [[smooth functions]] $C^\infty(\mathbb{R}^n)$,
by the evident multiplication of [[differential 1-forms]] with [[smooth functions]]:

1. The set $\Omega^1(\mathbb{R}^k)$ of [[differential 1-forms]] in a [[Cartesian space]] (def. \ref{Differential1FormsOnCartesianSpaces})
   is naturally an [[abelian group]] with addition given by componentwise addition

   $$
      \begin{aligned}
         \omega + \lambda & =
          \omega_i d x^i + \lambda_i d x^i
         \\
         & = (\omega_i + \lambda_i) d x^i
      \end{aligned}
      \,,
   $$

1. The abelian group $\Omega^1(\mathbb{R}^k)$ is naturally equipped with the structure of a [[module]] over the
   [[algebra of functions|algebra of]] [[smooth functions]] $C^\infty(\mathbb{R}^k)$ (example \ref{AlgebraOfSmoothFunctionsOnCartesianSpaces}), where the [[action]] $C^\infty(\mathbb{R}^k) \times\Omega^1(\mathbb{R}^k) \to \Omega^1(\mathbb{R}^k)$ is given by componentwise multiplication

   $$
     f \cdot \omega = ( f \cdot \omega_i) d x^i
     \,.
   $$


Accordingly there is a canonical pairing between [[differential 1-forms]] and [[tangent vector fields]] (example \ref{TangentVectorFields})

$$
  \label{PairingVectorFieldsWithDifferential1Forms}
  \array{
    \Gamma_{\mathbb{R}^n}(T \mathbb{R}^n)
    \otimes_{\mathbb{R}}
    \Gamma_{\mathbb{R}^n}(T \ast \mathbb{R}^n)
      &\overset{\iota_{(-)}(-) }{\longrightarrow}&
    C^\infty(\mathbb{R}^n)
    \\
    (v,\omega)
    &\mapsto&
    \mathrlap{
      \iota_v \omega \coloneqq v^a \omega_a
    }
  }
$$

With [[differential 1-forms]] in hand, we may collect all the first-order [[partial derivatives]] of a [[smooth function]]
into a single object: the _[[exterior derivative]]_ or _[[de Rham differential]]_ is the $\mathbb{R}$-[[linear function]]

$$
  \label{deRhamDifferentialOnFunctionsOnCartesianSpace}
  \array{
    C^\infty(\mathbb{R}^n) &\overset{d}{\longrightarrow}& \Omega^1(\mathbb{R}^n)
    \\
    f &\mapsto& \mathrlap{ d f \coloneqq \frac{\partial f}{ \partial x^a} d x^a }
  }
  \,.
$$

Under the above pairing with [[tangent vector fields]] $v$ this yields the particular [[partial derivative]] along $v$:

$$
  \iota_v d f = D_v f = v^a \frac{\partial f}{\partial x^a}
  \,.
$$

=--


We think of $d  x^i$ as a measure for [[infinitesimal space|infinitesimal]] displacements along the $x^i$-[[coordinate]] of a [[Cartesian space]]. If we have a measure of infintesimal displacement on some $\mathbb{R}^n$ and a smooth function $f \colon \mathbb{R}^{\tilde n} \to \mathbb{R}^n$, then this induces a measure for infinitesimal displacement on $\mathbb{R}^{\tilde n}$ by sending whatever happens there first with  $f$ to $\mathbb{R}^n$ and then applying the given measure there. This is captured by the following definition:

+-- {: .num_defn #PullbackOfDifferential1FormsOnCartesianSpaces}
###### Definition
**([[pullback of differential forms|pullback of differential 1-forms]])**

For $\phi \colon \mathbb{R}^{\tilde k} \to \mathbb{R}^k$ a [[smooth function]], the **[[pullback of differential forms|pullback of differential 1-forms]]** along $\phi$ is the [[function]]

$$
  \phi^* \colon \Omega^1(\mathbb{R}^{k}) \to \Omega^1(\mathbb{R}^{\tilde k})
$$

between sets of differential 1-forms, def. \ref{Differential1FormsOnCartesianSpaces}, which is defined on [[basis]]-elements by

$$
  \phi^* d  x^i
    \;\coloneqq\;
  \frac{\partial \phi^i}{\partial \tilde x^j} d \tilde x^j
$$

and then extended linearly by

$$
  \begin{aligned}
    \phi^* \omega & = \phi^* \left(  \omega_i d x^i \right)
    \\
    & \coloneqq
      \left(\phi^* \omega\right)_i  \frac{\partial \phi^i }{\partial \tilde x^j}  d  \tilde x^j
    \\
    & =
     (\omega_i \circ \phi) \cdot \frac{\partial \phi^i }{\partial \tilde x^j}  d  \tilde x^j
  \end{aligned}
  \,.
$$

This is compatible with [[identity morphisms]] and [[composition]] in that

$$
  (id_{\mathbb{R}^n})^\ast = id_{\Omega^1(\mathbb{R}^n)}
  \phantom{AAAA}
  (g \circ f)^\ast = f^\ast \circ g^\ast
  \,.
$$

Stated more [[category theory|abstractly]], this just means that [[pullback of differential forms|pullback of differential 1-forms]]
makes the assignment of sets of differential 1-forms to [[Cartesian spaces]] a [[contravariant functor|contravariant]] [[functor]]

$$
  \Omega^1(-) \;\colon\; CartSp^{op} \longrightarrow Set
  \,.
$$


=--


The following definition captures the idea that if $d  x^i$ is a measure for displacement along the $x^i$-[[coordinate]], and $d x^j$ a measure for displacement along the $x^j$ coordinate, then there should be a way to get a measure, to be called $d x^i \wedge d  x^j$, for [[infinitesimal]] _[[surfaces]]_ (squares) in the $x^i$-$x^j$-plane. And this should keep track of the [[orientation]] of these squares, with

$$
  d x^j \wedge d x^i = - d x^i \wedge d  x^j
$$

being the same infinitesimal measure with orientation reversed.

+-- {: .num_defn #DifferentialnForms}
###### Definition
**([[exterior algebra]] of [[differential n-forms]])**

For $k,n \in \mathbb{N}$, the **smooth [[differential forms]]** on a [[Cartesian space]] $\mathbb{R}^k$ (def. \ref{CartesianSpacesAndSmoothFunctionsBetweenThem}) is the [[exterior algebra]]

$$
  \Omega^\bullet(\mathbb{R}^k)
   \coloneqq
  \wedge^\bullet_{C^\infty(\mathbb{R}^k)} \Omega^1(\mathbb{R}^k)
$$

over the [[algebra of functions|algebra of]] [[smooth functions]] $C^\infty(\mathbb{R}^k)$ (example \ref{AlgebraOfSmoothFunctionsOnCartesianSpaces}) of the [[module]] $\Omega^1(\mathbb{R}^k)$ of smooth 1-forms.

We write $\Omega^n(\mathbb{R}^k)$ for the sub-module of degree $n$ and call its elements the _[[differential n-forms]]_.

Explicitly this means that a [[differential n-form]] $\omega \in \Omega^n(\mathbb{R}^k)$ on $\mathbb{R}^k$ is a [[formal linear combination]] over $C^\infty(\mathbb{R}^k)$ (example \ref{AlgebraOfSmoothFunctionsOnCartesianSpaces}) of [[basis]] elements of the form $d  x^{i_1} \wedge \cdots \wedge d x^{i_n}$ for $i_1 \lt i_2 \lt \cdots \lt i_n$:

$$
  \omega = \omega_{i_1, \cdots, i_n} d x^{i_1} \wedge \cdots \wedge d x^{i_n}
  \,.
$$

=--

Now all the constructions for [[differential 1-forms]] above extent naturally to [[differential n-forms]]:


+-- {: .num_defn #deRhamDifferential}
###### Definition
**([[exterior derivative]] or [[de Rham differential]])**

For $\mathbb{R}^n$ a [[Cartesian space]] (def. \ref{CartesianSpacesAndSmoothFunctionsBetweenThem})
the [[de Rham differential]] $d \colon C^\infty(\mathbb{R}^n) \to \Omega^1(\mathbb{R}^n)$
(eq:deRhamDifferentialOnFunctionsOnCartesianSpace) uniquely extended as a [[derivation]]
of degree +1 to the [[exterior algebra]] of [[differential forms]] (def. \ref{DifferentialnForms})

$$
  d
    \;\colon\;
  \Omega^\bullet(\mathbb{R}^n)
    \longrightarrow
  \Omega^\bullet(\mathbb{R}^n)
$$

meaning that for $\omega_i \in \Omega^{k_i}(\mathbb{R})$ then

$$
  d(\omega_1 \wedge \omega_2)
  \;=\;
  (d \omega_1) \wedge \omega_2
  +
  \omega_1 \wedge d \omega_2
  \,.
$$

In components this simply means that

$$
  \begin{aligned}
    d \omega
    & =
    d \left(\omega_{i_1 \cdots i_k} d x^{i_1} \wedge \cdots \wedge d x^{i_k}\right)
    \\
    & =
    \frac{\partial \omega_{i_1 \cdots i_k}}{\partial x^{a}}
    d x^a \wedge d x^{i_1} \wedge \cdots \wedge d x^{i_k}
  \end{aligned}
  \,.
$$

Since [[partial derivatives]] commute with each other, while differential 1-form anti-commute, this implies
that $d$ is nilpotent

$$
  d^2 = d \circ d = 0
  \,.
$$

We say hence that [[differential forms]] form a _[[cochain complex]]_, the _[[de Rham complex]]_
$(\Omega^\bullet(\mathbb{R}^n), d)$.

=--


+-- {: .num_defn #ContractionOfFormsWithVectorFields}
###### Definition
**(contraction of [[differential n-forms]] with [[tangent vector fields]])**

The pairing $\iota_v \omega = \omega(v)$ of [[tangent vector fields]] $v$ with [[differential 1-forms]] $\omega$ (eq:PairingVectorFieldsWithDifferential1Forms) uniquely [[extension|extends]] to the [[exterior algebra]] $\Omega^\bullet(\mathbb{R}^n)$ of [[differential forms]] (def. \ref{DifferentialnForms}) as a [[derivation]] of degree -1

$$
  \iota_v \;\colon\; \Omega^{\bullet+1}(\mathbb{R}^n) \longrightarrow \Omega^\bullet(\mathbb{R}^n)
  \,.
$$

In particular for $\omega_1, \omega_2 \in \Omega^1(\mathbb{R}^n)$ two [[differential 1-forms]], then

$$
  \iota_{v} (\omega_1 \wedge \omega_2)
   \;=\;
  \omega_1(v) \omega_2 - \omega_2(v) \omega_1
  \;\in\;
  \Omega^1(\mathbb{R}^n)
  \,.
$$


=--

+-- {: .num_prop #PullbackOfDifferentialForms}
###### Proposition
**([[pullback of differential forms|pullback of differential n-forms]])**

For $f \colon \mathbb{R}^{n_1} \to \mathbb{R}^{n_2}$ a [[smooth function]] between [[Cartesian spaces]]
(def. \ref{CartesianSpacesAndSmoothFunctionsBetweenThem})
the operationf of  [[pullback of differential forms|pullback of differential 1-forms]] of def. \ref{Differential1FormsOnCartesianSpaces} extends as an $C^\infty(\mathbb{R}^k)$-[[associative algebra|algebra]] [[homomorphism]] to the [[exterior algebra]]
of [[differential forms]] (def. \ref{DifferentialnForms}),

$$
  f^\ast
  \;\colon\;
  \Omega^\bullet(\mathbb{R}^{n_2})
    \longrightarrow
  \Omega^\bullet(\mathbb{R}^{n_1})
$$

given on basis elements by

$$
  f^* \left(  dx^{i_1} \wedge \cdots \wedge dx^{i_n} \right)
  =
  \left(f^* dx^{i_1} \wedge \cdots \wedge f^* dx^{i_n} \right)
  \,.
$$


This commutes with the [[de Rham differential]] $d$ on both sides (def. \ref{deRhamDifferential}) in that

$$
  d \circ f^\ast
  =
  f^\ast \circ d
  \phantom{AAAAA}
  \array{
    \Omega^\bullet(X) &\overset{f^\ast}{\longleftarrow}& \Omega^\bullet(Y)
    \\
    \mathllap{d}\downarrow && \downarrow\mathrlap{d}
    \\
    \Omega^\bullet(X) &\underset{f^\ast}{\longleftarrow}& \Omega^\bullet(Y)
  }
$$

hence that [[pullback of differential forms]] is a _[[chain map]]_ of [[de Rham complexes]].

This is still compatible with [[identity morphisms]] and [[composition]] in that

$$
  \label{PullbackOfDiffereentialFormsCompatibleWithComposition}
  (id_{\mathbb{R}^n})^\ast = id_{\Omega^1(\mathbb{R}^n)}
  \phantom{AAAA}
  (g \circ f)^\ast = f^\ast \circ g^\ast
  \,.
$$

Stated more [[category theory|abstractly]], this just means that [[pullback of differential forms|pullback of differential n-forms]]
makes the assignment of sets of [[differential n-forms]] to [[Cartesian spaces]] a [[contravariant functor|contravariant]] [[functor]]

$$
  \Omega^n(-) \;\colon\; CartSp^{op} \longrightarrow Set
  \,.
$$


=--



+-- {: .num_prop #CartanHomotopyFormula}
###### Proposition
**([[Cartan's homotopy formula]])**

Let $X$ be a [[Cartesian space]] (def. \ref{CartesianSpacesAndSmoothFunctionsBetweenThem}), and let $v \in \Gamma(T X)$ be
a smooth [[tangent vector field]] (example \ref{TangentVectorFields}).

For $t \in \mathbb{R}$ write $\exp(t v) \colon X \overset{\simeq}{\to} X$ for the [[flow]] by [[diffeomorphisms]]
along $v$ of parameter length $t$.

Then the [[derivative]] with respect to $t$ of the [[pullback of differential forms]] along $\exp(t v)$, hence the [[Lie derivative]]
$\mathcal{L}_v \colon \Omega^\bullet(X) \to \Omega^\bullet(X)$,
 is given by the [[anticommutator]] of the contraction derivation $\iota_v$ (def. \ref{ContractionOfFormsWithVectorFields}) with the [[de Rham differential]] $d$ (def. \ref{deRhamDifferential}):

$$
  \begin{aligned}
    \mathcal{L}_v
      &\coloneqq
    \frac{d}{d t } \exp(t v)^\ast \omega \vert_{t = 0}
    \\
    & =
    \iota_v d \omega + d \iota_v \omega
    \,.
  \end{aligned}
$$

=--

Finally we turn to the concept of [[integration of differential forms]] (def. \ref{IntegrationOfDifferentialFormsOverSmoothSingularChainsInCartesianSpaces} below).
First we need to say what it is that differential forms may be integrated over:

+-- {: .num_defn #SingularSimplicesInCartesianSpaces}
###### Definition
**(smooth [[singular simplicial chains]] in [[Cartesian spaces]])**

For $n \in \mathbb{N}$, the _standard [[n-simplex]]_ in the [[Cartesian space]]
$\mathbb{R}^n$ (def. \ref{CartesianSpacesAndSmoothFunctionsBetweenThem}) is the
[[subset]]

$$
  \Delta^n
  \;\coloneqq\;
  \left\{
    (x^i)_{i = 1}^n
    \;\vert\;
    0 \leq x^1 \leq \cdots \leq x^n
  \right\}
  \;\subset\;
  \mathbb{R}^n
  \,.
$$

More generally, a _smooth [[singular simplicial complex|singular n-simplex]]_ in a [[Cartesian space]]
$\mathbb{R}^k$ is a [[smooth function]] (def. \ref{CartesianSpacesAndSmoothFunctionsBetweenThem})

$$
  \sigma
    \;\colon\;
  \mathbb{R}^n
    \longrightarrow
  \mathbb{R}^k
  \,,
$$

to be thought of as a smooth extension of its restriction

$$
  \sigma\vert_{\Delta^n}
    \;\colon\;
  \Delta^n
    \longrightarrow
  \mathbb{R}^k
  \,.
$$

(This is called a _[[singular simplicial complex|singular]]_ simplex because there is no condition that
$\Sigma$ be an [[embedding]] in any way, in particular $\sigma$ may be a [[constant function]].)

A [[singular chain]] in $\mathbb{R}^k$ of [[dimension]] $n$ is a [[formal linear combination]] of singular $n$-simplices in $\mathbb{R}^k$.

In particular, given a singular $n+1$-simplex $\sigma$, then its _[[boundary of a simplex|boundary]]_
is a [[singular chain]] of singular $n$-simplices $\partial \sigma$.


=--

+-- {: .num_defn #IntegrationOfDifferentialFormsOverSmoothSingularChainsInCartesianSpaces}
###### Definition
**([[fiber integration|fiber]]-[[integration of differential forms]]) over smooth [[singular chains]] in [[Cartesian spaces]])**

For $n \in \mathbb{N}$ and $\omega \in \Omega^n(\mathbb{R}^n)$ a [[differential n-form]] (def. \ref{DifferentialnForms}),
which may be written as

$$
  \omega = f d x^1 \wedge \cdots d x^n
  \,,
$$

then its [[integration of differential forms|integration]] over the standard [[n-simplex]] $\Delta^n \subset \mathbb{R}^n$ (def. \ref{SingularSimplicesInCartesianSpaces}) is the ordinary [[integral]] (e.g. [[Riemann integral]])

$$
  \int_{\Delta^n} \omega
  \;\coloneqq\;
  \underset{0 \leq x^1 \leq \cdots \leq x^n \leq 1}{\int} f(x^1, \cdots, x^n) \, d x^1 \cdots d x^n
  \,.
$$

More generally, for

1. $\omega \in \Omega^n(\mathbb{R}^k)$ a [[differential n-forms]];

1. $C = \underset{i}{\sum} c_i \sigma_i $ a singular $n$-chain (def. \ref{SingularSimplicesInCartesianSpaces})

in any [[Cartesian space]] $\mathbb{R}^k$. Then the _[[integration of differential forms|integration]]_
of $\omega$ over $x$ is the [[sum]] of the integrations, as above, of the [[pullback of differential forms]] (def. \ref{PullbackOfDifferentialForms}) along all the singular [[n-simplices]] in the chain:

$$
  \int_C \omega
  \;\coloneqq\;
  \underset{i}{\sum}
  c_i
  \int_{\Delta^n} (\sigma_i)^\ast \omega
  \,.
$$

Finally, for $U$ another Cartesian space, then _[[fiber integration]] of differential forms along $U \times C \to U$_
is the linear map

$$
  \int_C \;\colon\; \Omega^{\bullet + dim(C)}(U \times C) \longrightarrow \Omega^\bullet(U)
$$

which on differential forms of the form $\omega_U \wedge \omega$ is given by

$$
  \int_C \omega_U \wedge \omega
   \;\coloneqq\;
  (-1)^{\vert \omega_U\vert} \int_C \omega
  \,.
$$

=--

+-- {: .num_prop #StokesTheorem}
###### Proposition
**([[Stokes theorem]] for [[fiber integration|fiber]]-[[integration of differential forms]])**

For $\Sigma$ a smooth [[singular simplicial chain]] (def. \ref{IntegrationOfDifferentialFormsOverSmoothSingularChainsInCartesianSpaces})
the operation of [[fiber integration|fiber]]-[[integration of differential forms]] along
$U \times \Sigma \overset{pr_1}{\longrightarrow} U$ (def. \ref{IntegrationOfDifferentialFormsOverSmoothSingularChainsInCartesianSpaces})
is compatible with the [[exterior derivative]] $d_U$ on $U$ (def. \ref{deRhamDifferential}) in that

$$
  \begin{aligned}
    d \int_\Sigma \omega
     & =
    (-1)^{dim(\Sigma)} \int_\Sigma d_U \omega
    \\
    & =
    (-1)^{dim(\Sigma)}
    \left(
      \int_\Sigma d \omega
      -
      \int_{\partial \Sigma} \omega
    \right)
  \end{aligned}
  \,,
$$

where $d = d_U + d_\Sigma$ is the [[de Rham differential]] on $U \times \Sigma$ (def. \ref{deRhamDifferential}) and where the second
equality is the _[[Stokes theorem]]_ along $\Sigma$:

$$
  \int_\Sigma d_\Sigma \omega = \int_{\partial \Sigma} \omega
  \,.
$$

=--




$\,$

This concludes our review of the basics of ([[synthetic differential geometry|synthetic]]) [[differential geometry]] on which the following development of quantum field theory is based.
In the [next chapter](#Spacetime) we consider _[[spacetime]]_ and _[[spin]]_.


$\,$


## Spacetime
  {#Spacetime}

[[relativistic field theory|Relativistic field theory]] takes place on _[[spacetime]]_.

The concept of [[spacetime]] makes sense for every [[dimension]] $p+1$ with $p \in \mathbb{N}$.
The [[observable universe]] has macroscopic dimension $3+1$, but [[quantum field theory]] generally makes sense
also in lower and in higher dimensions. For instance quantum field theory in dimension 0+1 is the "[[worldline]]"
theory of [[particles]], also known as _[[quantum mechanics]]_; while quantum field theory in dimension $\gt p+1$
may be "[[Kaluza-Klein compactifications|KK-compactified]]" to an "[[effective field theory|effective]]"
field theory in dimension $p+1$ which generally looks more complicated than its higher dimensional incarnation.

However, every realistic field theory, and also most of the non-realistic field theories of interest, contain
[[spinor fields]] such as the [[Dirac field]] (example \ref{LagrangianDensityForDiracField} below) and
the precise nature and behaviour of [[spinors]] does depend sensitively on spacetime dimension.
In fact the theory of relativistic spinors is mathematically most natural in just the following four
spacetime dimensions:

$$
  p +1 = \phantom{AAAAA} \array{ 2+1,\; & 3+1,\; & \, &  5+1,\; &\, & \, & \, & \, 9+1 }
$$

In the literature one finds these four dimensions advertized for two superficially unrelated reasons:

1. in precisely these dimensions "[[twistors]]" exist (see [there](twistor+space#TwistorSpace));

1. in precisely these dimensions "[[Green-Schwarz superstrings|GS-superstrings]]" exist (see [there](geometry+of+physics+--+fundamental+super+p-branes#TheSuperStringAndTheSuperMembrane)).

However, both these explanations have a common origin in something simpler and deeper:
Spacetime in these dimensions appears from the "[[Pauli matrices]]" with entries in the real [[normed division algebras]].
(In fact it goes [deeper still](geometry+of+physics+--+supersymmetry#SupersymmetryFromTheSuperpoint), but this will not concern us here.)

This we explain now, and then we use this to obtain a slick handle on [[spinors]] in these dimensions,
using simple [[linear algebra]] over the four [[real number|real]] [[normed division algebras]].
At the end (in remark \ref{TwoComponentSpinorNotation}) we give a dictionary that expresses these constructions in terms
of the "two-component spinor notation" that is traditionally used in physics texts (remark \ref{TwoComponentSpinorNotation} below).

The relation between _[[real spin representations and division algebras]]_,
is originally due to [Kugo-Townsend 82](geometry+of+physics+--+supersymmetry#KugoTownsend82), [Sudbery 84](geometry+of+physics+--+supersymmetry#Sudbery84) and others. We follow the streamlined discussion in [Baez-Huerta 09](geometry+of+physics+--+supersymmetry#BaezHuerta09) and [Baez-Huerta 10](geometry+of+physics+--+supersymmetry#BaezHuerta10).

A key extra structure that the [[spinors]] impose on the underlying [[Cartesian space]] of [[spacetime]]
is its _[[causal structure]]_, which determines which points in [[spacetime]] ("[[events]]") are in
the [[future]] or the [[past]] of other points (def. \ref{SpacelikeTimelikeLightlike} below).
 This [[causal structure]] will turn out to tightly control
the [[quantum field theory]] on [[spacetime]] in terms of the "[[causal  additivity]] of the [[S-matrix]]"
(prop. \ref{TimeOrderedProductInducesPerturbativeSMatrix} below) and the induced "[[causal locality]]" of the
[[algebra of quantum observables]] (prop. \ref{PerturbativeQuantumObservablesIsLocalnet} below).
To prepare the discussion of these constructions, we end this chapter with some basics on the
[[causal structure]] of [[Minkowski spacetime]].

$\,$

1. [Real division algebras](#RealDivisionAlgebras)

1. [Spacetime in dimensions 3, 4, 6 and 10](#MinkowskiSpacetimeInCriticalDimensions)

1. [Lorentz group and Spin group](#LorentzGroupAndSpinGroup)

1. [Spinors in dimensions 3, 4, 6 and 10](#InTermsOfNormedDivisionAlgebraInDimension3To10)

1. [Causal structure](#CausalStructure)



$\,$

**Real division algebras**
 {#RealDivisionAlgebras}

To amplify the following pattern and to fix our notation for algebra generators, recall these definitions:

+-- {: .num_defn #TheComplexNumbers}
###### Definition
**([[complex numbers]])**

The _[[complex numbers]]_ $\mathbb{C}$ is the [[commutative algebra]] over the [[real numbers]] $\mathbb{R}$ which is [[generators and relations|generated]] from one generators $\{e_1\}$ subject to the [[generators and relations|relation]]

* $(e_1)^2 = -1$.

=--

+-- {: .num_defn #TheQuaternions}
###### Definition
**([[quaternions]])**

The _[[quaternions]]_ $\mathbb{H}$ is the [[associative algebra]] over the [[real numbers]] which is [[generators and relations|generated]] from three generators $\{e_1, e_2, e_3\}$ subject to the [[generators and relations|relations]]

<div style="float:right;margin:0 20px 10px 20px;">
<img src="https://ncatlab.org/nlab/files/QuaternionMultiplicationTable.jpg" width="300" alt="quaternion multiplication table">
</div>

1. for all $i$

   $(e_i)^2 = -1$

1. for $(i,j,k)$ a cyclic [[permutation]] of $(1,2,3)$ then

   1. $e_i e_j  = e_k$

   1. $e_j e_i  = -e_k$


> (graphics grabbed from [Baez 02](geometry+of+physics+--+supersymmetry#Baez02))

=--


+-- {: .num_defn #TheOctonions}
###### Definition
**([[octonions]])**

The _[[octonions]]_ $\mathbb{O}$ is the [[nonassociative algebra]] over the [[real numbers]] which is [[generators and relations|generated]] from seven generators $\{e_1, \cdots, e_7\}$ subject to the [[generators and relations|relations]]

<div style="float:right;margin:0 20px 10px 20px;">
<img src="https://ncatlab.org/nlab/files/OctonionMultiplicationTable.jpg" width="400" alt="octonion multiplication table">
</div>


1. for all $i$

   $(e_i)^2 = -1$

1. for $e_i \to e_j \to e_k$ an edge or circle in the diagram shown (a labeled version of the [[Fano plane]]) then

   1. $e_i e_j  = e_k$

   1. $e_j e_i  = -e_k$

   and all relations obtained by cyclic [[permutation]] of the indices in these equations.


> (graphics grabbed from [Baez 02](geometry+of+physics+--+supersymmetry#Baez02))

=--



One defines the following operations on these real algebras:

+-- {: .num_defn #Conjugation}
###### Definition
**(conjugation, [[real part]], [[imaginary part]] and [[absolute value]])**

For $\mathbb{K} \in \{\mathbb{R}, \mathbb{C}, \mathbb{H}, \mathbb{O}\}$, let

$$
  (-)^\ast
    \;\colon\;
  \mathbb{K}
    \longrightarrow
  \mathbb{K}
$$

be the [[antihomomorphism]] of real algebras

$$
  \begin{aligned}
    (r a)^\ast  = r a^\ast &, \text{for}\;\; r \in \mathbb{R}, a \in \mathbb{K}
    \\
   (a b)^\ast = b^\ast a^\ast &,\text{for}\;\; a,b \in \mathbb{K}
  \end{aligned}
$$

given on the generators of def. \ref{TheComplexNumbers}, def. \ref{TheQuaternions}
and def. \ref{TheOctonions}  by

$$
  (e_i)^\ast = - e_i
  \,.
$$

This operation makes $\mathbb{K}$ into a [[star algebra]].
For the [[complex numbers]] $\mathbb{C}$ this is called _[[complex conjugation]]_, and in general we call it _conjugation_.

Let then

$$
  Re \;\colon\; \mathbb{K} \longrightarrow \mathbb{R}
$$

be the [[function]]

$$
  Re(a) \;\coloneqq\; \tfrac{1}{2}(a + a^\ast)
$$

("[[real part]]") and

$$
  Im \;\colon\; \mathbb{K} \longrightarrow \mathbb{R}
$$

be the [[function]]

$$
  Im(a) \;\coloneqq \; \tfrac{1}{2}(a - a^\ast)
$$

("[[imaginary part]]").

It follows that for all $a \in \mathbb{K}$ then the product of a with its conjugate is in the real [[center]]
of $\mathbb{K}$

$$
  a a^\ast = a^\ast a \;\in \mathbb{R} \hookrightarrow \mathbb{K}
$$

and we write the [[square root]] of this expression as

$$
  {\vert a\vert}
    \;\coloneqq\;
  \sqrt{a a^\ast}
$$

called the _[[norm]]_ or _[[absolute value]]_ [[function]]

$$
  {\vert -\vert}
    \;\colon\;
  \mathbb{K}
    \longrightarrow
  \mathbb{R}
  \,.
$$

This norm operation clearly satisfies the following properties (for all $a,b \in \mathbb{K}$)

1. $\vert a \vert \geq 0$;

1. ${\vert a \vert } = 0 \;\;\;\;\; \Leftrightarrow\;\;\;\;\;\; a = 0$;

1. ${\vert a b \vert } = {\vert a \vert} {\vert b \vert}$

and hence makes $\mathbb{K}$ a [[normed algebra]].

Since $\mathbb{R}$ is a [[division algebra]], these relations immediately imply that each $\mathbb{K}$ is a [[division algebra]], in that

$$
  a b = 0 \;\;\;\;\;\; \Rightarrow \;\;\;\;\;\; a = 0 \;\; \text{or} \;\; b = 0
  \,.
$$

Hence the conjugation operation makes $\mathbb{K}$ a [[real numbers|real]] [[normed division algebra]].

=--

+-- {: .num_remark #SequenceOfInclusionsOfRealNormedDivisionAlgebras}
###### Remark
**(sequence of inclusions of real [[normed division algebras]])**

Suitably embedding the sets of generators in def. \ref{TheComplexNumbers}, def. \ref{TheQuaternions} and def. \ref{TheOctonions}
into each other yields sequences of real [[star-algebra]] [[monomorphisms|inclusions]]

$$
  \mathbb{R}
    \hookrightarrow
  \mathbb{C}
    \hookrightarrow
  \mathbb{H}
    \hookrightarrow
  \mathbb{O}
  \,.
$$

For example for the first two inclusions we may send each generator to the generator of the same name, and for the
last inclusion me may choose

$$
  \array{
    1 &\mapsto& 1
    \\
    e_1 &\mapsto & e_3
    \\
    e_2 &\mapsto& e_4
    \\
    e_3 &\mapsto& e_6
  }
$$

=--

+-- {: .num_prop #HurwitzTheorem}
###### Proposition
**([[Hurwitz theorem]]: $\mathbb{R}$, $\mathbb{C}$, $\mathbb{H}$ and $\mathbb{O}$ are the normed real division algebras)**

The four algebras of [[real numbers]] $\mathbb{R}$, [[complex numbers]] $\mathbb{C}$,
[[quaternions]] $\mathbb{H}$ and [[octonions]] $\mathbb{O}$
from def. \ref{TheComplexNumbers}, def. \ref{TheQuaternions} and def. \ref{TheOctonions} respectively,
which are real [[normed division algebras]] via def. \ref{Conjugation},
are, up to [[isomorphism]], the _only_ real normed division algebras that exist.

=--

+-- {: .num_remark}
###### Remark
**([[Cayley-Dickson construction]] and [[sedenions]])**

While prop. \ref{HurwitzTheorem} says that the sequence from remark \ref{SequenceOfInclusionsOfRealNormedDivisionAlgebras}

$$
  \mathbb{R}
    \hookrightarrow
  \mathbb{C}
    \hookrightarrow
  \mathbb{H}
    \hookrightarrow
  \mathbb{O}
$$

is maximal in the [[category]] of real normed non-associative [[division algebras]], there is a pattern that does
continue if one disregards the division algebra property. Namely each step in this sequence is given by
a construction called _forming the [[Cayley-Dickson double algebra]]_. This continues to an unbounded sequence of
real nonassociative star-algebras

$$
  \mathbb{R}
    \hookrightarrow
  \mathbb{C}
    \hookrightarrow
  \mathbb{H}
    \hookrightarrow
  \mathbb{O}
    \hookrightarrow
  \mathbb{S}
    \hookrightarrow
  \cdots
$$

where the next algebra $\mathbb{S}$ is called the _[[sedenions]]_.

=--

What actually matters for the following relation of the real normed division algebras to [[real spin representations]]
is that they are also [[alternative algebras]]:

+-- {: .num_defn #AlternativeAlgebra}
###### Definition
**([[alternative algebras]])**

Given any [[non-associative algebra]] $A$, then the trilinear map

$$
  [-,-,-] \;-\; A \otimes A \otimes A \longrightarrow A
$$

given on any elements $a,b,c \in A$ by

$$
  [a,b,c] \coloneqq (a b) c - a (b c)
$$

is called the _[[associator]]_ (in analogy with the _[[commutator]]_ $[a,b] \coloneqq a b - b a$ ).

If the associator is completely antisymmetric (in that for any [[permutation]] $\sigma$ of three elements then $[a_{\sigma_1}, a_{\sigma_2}, a_{\sigma_3}] = (-1)^{\vert \sigma\vert} [a_1, a_2, a_3]$ for $\vert \sigma \vert$ the [[signature of a permutation|signature of the permutation]]) then $A$ is called an _[[alternative algebra]]_.

If the [[characteristic]] of the [[ground field]] is different from 2, then alternativity is
readily seen to be equivalent to the conditions that for all $a,b \in A$ then

$$
  (a a)b = a (a b)
   \;\;\;\;\;
     \text{and}
   \;\;\;\;\;
   (a b) b = a (b b)
   \,.
$$

=--

We record some basic properties of associators in alternative star-algebras that we need below:

+-- {: .num_prop #PropertiesOfAssociatorInAlternativeAlgebra}
###### Proposition
**(properties of [[alternative algebra|alternative]] [[star algebras]])**

Let $A$ be an [[alternative algebra]] (def. \ref{AlternativeAlgebra}) which is also a [[star algebra]]. Then (using def. \ref{Conjugation}):

1. the [[associator]] vanishes when at least one argument is [[real part|real]]

   $$
     [Re(a),b,c]
   $$

1. the [[associator]] changes sign when one of its arguments is conjugated

   $$
     [a,b,c] = -[a^\ast,b,c]
     \,;
   $$

1. the [[associator]] vanishes when one of its arguments is the conjugate of another

   $$
     [a,a^\ast, b] = 0
     \,;
   $$

1. the [[associator]] is purely [[imaginary part|imaginary]]

   $$
     Re([a,b,c]) = 0
     \,.
   $$

=--

+-- {: .proof}
###### Proof

That the associator vanishes as soon as one argument is real is just the linearity of an algebra
product over the ground ring.

Hence in fact

$$
  [a,b,c] = [Im(a), Im(b), Im(c)]
  \,.
$$

This implies the second statement by linearity. And so follows the third statement by skew-symmetry:

$$
  [a,a^\ast,b] = -[a,a,b] = 0
  \,.
$$

The fourth statement finally follows by this computation:

$$
  \begin{aligned}
    \,[ a, b, c]^\ast
      & =
    -[c^\ast, b^\ast, a^\ast]
      \\
      & =
      -[c,b,a]
      \\
      & =
      -[a,b,c]
  \end{aligned}
  \,.
$$

Here the first equation follows by inspection and using that $(a b)^\ast = b^\ast a^\ast$,
the second follows from the first statement above, and the third is the anti-symmetry of the associator.

=--

It is immediate to check that:

+-- {: .num_prop #RCHOAreAlternative}
###### Proposition
**($\mathbb{R}$, $\mathbb{C}$, $\mathbb{H}$ and $\mathbb{O}$ are real [[alternative algebras]])**

The real algebras of [[real numbers]], [[complex numbers]],  def. \ref{TheComplexNumbers},[[quaternions]] def. \ref{TheQuaternions} and
[[octonions]] def. \ref{TheOctonions} are [[alternative algebras]] (def. \ref{AlternativeAlgebra}).

=--

+-- {: .proof}
###### Proof

Since the [[real numbers]], [[complex numbers]] and [[quaternions]] are [[associative algebras]],
their [[associator]] vanishes identically. It only remains to see that the associator of the
[[octonions]] is skew-symmetric. By linearity it is sufficient to check this on generators.
So let $e_i \to e_j \to e_k$ be a circle or a cyclic permutation of an edge in the [[Fano plane]].
Then by definition of the octonion multiplication we have

$$
  \begin{aligned}
    (e_i e_j) e_j
    &=
    e_k e_j
    \\
    &=
    - e_j e_k
    \\
    & =
    -e_i
    \\
    & =
    e_i (e_j e_j)
  \end{aligned}
$$

and similarly

$$
  \begin{aligned}
    (e_i e_i ) e_j
    &=
    - e_j
    \\
    &=
    - e_k e_i
    \\
    &=
    e_i e_k
    \\
    &=
    e_i (e_i e_j)
  \end{aligned}
  \,.
$$

=--

The analog of the [[Hurwitz theorem]] (prop. \ref{HurwitzTheorem}) is now this:

+-- {: .num_prop #ZornTheorem}
###### Proposition
**($\mathbb{R}$, $\mathbb{C}$, $\mathbb{H}$ and $\mathbb{O}$ are precisely the [[alternative algebra|alternative]] [[real number|real]] [[division algebras]])**

The only [[division algebras]] over the [[real numbers]] which are also [[alternative algebras]] (def. \ref{AlternativeAlgebra}) are the [[real numbers]] themselves, the [[complex numbers]], the [[quaternions]] and the [[octonions]] from prop. \ref{RCHOAreAlternative}.

=--

This is due to ([Zorn 30](normed+division#algebra#Zorn30)).


For the following, the key point of alternative algebras is this equivalent characterization:

+-- {: .num_prop #ArtinTheorem}
###### Proposition
**([[alternative algebra]] detected on subalgebras spanned by any two elements)**

A [[nonassociative algebra]] is alternative, def. \ref{AlternativeAlgebra},  precisely if the [[subalgebra]] generated by any two elements is an [[associative algebra]].

=--

This is due to [[Emil Artin]], see for instance ([Schafer 95, p. 18](alternative+algebra#Schafer95)).

Proposition \ref{ArtinTheorem} is what allows to carry over a minimum of [[linear algebra]] also to the [[octonions]]
such as to yield a representation of the [[Clifford algebra]] on $\mathbb{R}^{9,1}$. This happens in the proof
of prop. \ref{SpinorRepsByNormedDivisionAlgebra} below.

So we will be looking at a [[fragment]] of [[linear algebra]] over these four [[normed division algebras]].
To that end, fix the following notation and terminology:

+-- {: .num_defn #MatrixNotation}
###### Definition
**([[hermitian matrices]] with values in real [[normed division algebras]])**

Let $\mathbb{K}$ be one of the four real [[normed division algebras]] from prop. \ref{HurwitzTheorem}, hence equivalently one of the four
real [[alternative algebra|alternative]] [[division algebras]] from prop. \ref{ZornTheorem}.

Say that an $n \times n$ [[matrix]] with [[coefficients]] in $\mathbb{K}$

$$
  A\in Mat_{n\times n}(\mathbb{K})
$$

is a _[[hermitian matrix]]_ if the [[transpose matrix]] $(A^t)_{i j} \coloneqq A_{j i}$ equals the componentwise [[complex conjugation|conjugated]] matrix (def. \ref{Conjugation}):

   $$
     A^t = A^\ast
     \,.
   $$

   Hence with the notation

   $$
     (-)^\dagger \coloneqq ((-)^t)^\ast
   $$

   we have that $A$ is a [[hermitian matrix]] precisely if

   $$
     A = A^\dagger
     \,.
   $$

   We write $Mat_{2 \times 2}^{her}(\mathbb{K})$ for the [[real vector space]] of hermitian matrices.

=--

+-- {: .num_defn #TraceReversal}
###### Definition
**([[trace]] reversal)**

Let $A \in Mat_{2 \times 2}^{her}(\mathbb{K})$ be a hermitian $2 \times 2$ matrix as in def. \ref{MatrixNotation}.
Its _trace reversal_ is the result of subtracting its [[trace]] times the identity matrix:


$$
    \tilde A \;\coloneqq\; A - (tr A) 1_{n\times n}
    \,.
$$

=--



$\,$


**Minkowski spacetime in dimensions 3,4,6 and 10**
 {#MinkowskiSpacetimeInCriticalDimensions}

We now discover [[Minkowski spacetime]] of dimension 3,4,6 and 10, in terms of the
real [[normed division algebras]] $\mathbb{K}$ from prop. \ref{HurwitzTheorem}, equivalently the
real [[alternative algebra|alternative]] [[division algebras]] from prop. \ref{ZornTheorem}:
this is prop./def. \ref{SpacetimeAsMatrices} and def. \ref{MinkowskiSpacetime} below.

+-- {: .num_prop #SpacetimeAsMatrices}
###### Proposition/Definition
**([[Minkowski spacetime]] as [[real vector space]] of [[hermitian matrices]] in [[real number|real]] [[normed division algebras]])**

Let $\mathbb{K}$ be one of the four real [[normed division algebras]] from prop. \ref{HurwitzTheorem}, hence one of the four
real [[alternative algebra|alternative]] [[division algebras]] from prop. \ref{ZornTheorem}.

Then the [[real vector space]] of $2 \times 2$ [[hermitian matrices]] over $\mathbb{K}$ (def. \ref{MatrixNotation})
equipped with the [[inner product]] $\eta$ whose [[quadratic form]] ${\vert -\vert^2_\eta}$ is the negative of the [[determinant]] operation on matrices is _[[Minkowski spacetime]]_:

$$
  \label{MinkowskiSpacetimeFromHermitianMatricesWithDeterminant}
  \begin{aligned}
    \mathbb{R}^{dim_{\mathbb{R}}(\mathbb{K})+1,1}
    &
    \coloneqq
    \left(
      \mathbb{R}^{dim_{\mathbb{R}(\mathbb{K})}+2}
      ,
      {\vert -\vert^2_\eta}
    \right)
    & \coloneqq
    \left(Mat_{2 \times 2}^{her}(\mathbb{K}), -det \right)
  \end{aligned}
  \,.
$$

hence

1. $\mathbb{R}^{2,1}$ for $\mathbb{K} = \mathbb{R}$;

1. $\mathbb{R}^{3,1}$ for $\mathbb{K} = \mathbb{C}$;

1. $\mathbb{R}^{5,1}$ for $\mathbb{K} = \mathbb{H}$;

1. $\mathbb{R}^{9,1}$ for $\mathbb{K} = \mathbb{O}$.

Here we think of the [[vector space]] on the left as $\mathbb{R}^{p,1}$
with

$$
  p \coloneqq dim_{\mathbb{R}}(\mathbb{K})+1
$$

equipped with the canonical coordinates labeled $(x^\mu)_{\mu = 0}^p$.

As a [[linear map]] the identification is given by

$$
  (x^0, x^1, \cdots, x^{d-1})
    \;\mapsto\;
  \left(
    \array{
      x^0 + x^1 & y
      \\
      y^\ast & x^0 - x^1
    }
  \right)
  \;\;\;
  \text{with}\;
  y \coloneqq x^2 1 + x^3 e_1 + x^4 e_2 +   \cdots + x^{2 + dim_{\mathbb{R}(\mathbb{K})}} \,e_{dim_{\mathbb{R}}(\mathbb{K})-1}
  \,.
$$

This means that the [[quadratic form]] ${\vert - \vert^2_\eta}$ is given on an element $v = (v^\mu)_{\mu = 0}^p$ by

$$
  {\vert v \vert}^2_{\eta}
    \;=\;
  - (v^0)^2 + \underoverset{j = 1}{p}{\sum} (x^j)^2
  \,.
$$

By the [[polarization identity]] the [[quadratic form]] ${\vert - \vert^2_\eta}$ induces a [[bilinear form]]

$$
  \eta \;\colon\; \mathbb{R}^{p,1}\otimes \mathbb{R}^{p,1} \longrightarrow \mathbb{R}
$$

given by

$$
 \begin{aligned}
    \eta(v_1, v_2)
    & =
    \eta_{\mu \nu} v_1^\mu v_1^\nu
    \\
    & \coloneqq
    - v_1^0 v_2^0 + \underoverset{j  = 1}{p}{\sum} v_1^j v_2^j
  \end{aligned}
  \,.
$$

This is called the _[[Minkowski metric]]_.

Finally, under the above identification the operation of trace reversal from def. \ref{TraceReversal}
corresponds to _time reversal_ in that

$$
  \widetilde{
  \left(
    \array{
      x^0 + x^1 & y
      \\
      y^\ast & x^0 - x^1
    }
  \right)
  }
   \;=\;
  \left(
    \array{
      -x^0 + x^1 & y
      \\
      y^\ast & -x^0 - x^1
    }
  \right)
  \,.
$$

=--

+-- {: .proof}
###### Proof

We need to check that under the given identification, the Minkowski norm-square is indeed given by minus the determinant on the
corresponding hermitian matrices.
This follows from the nature of the conjugation operation $(-)^\ast$ from def. \ref{Conjugation}:

$$
  \begin{aligned}
    -
    det
    \left(
      \array{
        x^0 + x^1 & y
        \\
        y^\ast & x^0 - x^1
      }
    \right)
    & =
    -(x^0 + x^1)(x^0 - x^1)
    +
    y y^\ast
    \\
    & =
    -(x^0)^2 + \underoverset{i = 1}{p}{\sum} (x^i)^2
  \end{aligned}
  \,.
$$

=--

+-- {: .num_remark #MinkowskiMetricAndPhysicalUnitOfLength}
###### Remark
**([[physical units]] of [[length]])**

As the term "[[metric]]" suggests, in application to [[physics]], the [[Minkowski metric]] $\eta$ in prop./def. \ref{SpacetimeAsMatrices} is regarded as a _measure of [[length]]_: for $v \in \Gamma_x(T \mathbb{R}^{p,1})$ a [[tangent vector]] at a point $x$ in Minkowski spacetime, interpreted as a displacement from [[event]] $x$ to event $x + v$, then

1. if $\eta(v,v) \gt 0$ then

   $$
     \sqrt{\eta(v,v)} \in \mathbb{R}
   $$

   is interpreted as a measure for the _[[spacelike|spatial]] [[distance]]_ between $x$ and $x + v$;

1. if $\eta(v,v) \lt 0$ then

   $$
     \sqrt{-\eta(v,v)} \in \mathbb{R}
   $$

   is interpreted as a measure for the _[[timelike|time]] [[distance]]_ between $x$ and $x + v$.

But for this to make physical sense, an operational prescription needs to be specified that tells the experimentor how the _[[real number]]_ $\sqrt{\eta(v,v)}$ is to be translated into an physical distance between actual [[events]] in the [[observable universe]].

Such an operational prescription is called a _[[physical unit]] of [[length]]_.
For example "[[centimeter]]" $cm$ is a physical unit of length, another one is "[[femtometer]]" $fm$.

The combined information of a [[real number]] $\sqrt{\eta(v,v)} \in \mathbb{R}$ and a [[physical unit]] of [[length]] such as [[meter]], jointly written

$$
  \sqrt{\eta(v,v)} \, cm
$$

is a prescription for finding actual distance in the [[observable universe]]. Alternatively

$$
  \sqrt{\eta(v,v)} \, fm
$$

is another prescription, that translates the same [[real number]] $\sqrt{\eta(v,v)}$ into another physical distance.

But of course they are related, since [[physical units]] form a [[torsor]] over the [[group]] $\mathbb{R}_{\gt 0}$ of [[non-negative number|non-negative]] [[real numbers]], meaning that any two are related by a unique rescaling. For example

$$
  fm = 10^{-13} cm
  \,,
$$

with $10^{-13} \in \mathbb{R}_{\gt 0}$.

This means that once any one prescription of turning real numbers into spacetime distances is specified, then any other such prescription is obtained from this by rescaling these real numbers. For example

$$
  \begin{aligned}
    \sqrt{\eta(v,v)} \, fm
    & = \left( 10^{-13} \sqrt{\eta(v,v)}\right) \,cm
    \\
    & =
    \sqrt{ 10^{-26} \eta(v,v) } \, cm
  \end{aligned}
  \,.
$$

The point to notice here is that, via the last line, we may think of this as
_rescaling the [[metric]]_ from $\eta$ to $10^{-30} \eta$.

In [[quantum field theory]] [[physical units]] of [[length]] are typically expressed in terms of a
[[physical unit]] of "[[action]]", called "[[Planck's constant]]" $\hbar$, via the
combination of units called the _[[Compton wavelength]]_

$$
  \label{ComptonWavelength}
  \ell_m = \frac{2\pi \hbar}{m c}
  \,.
$$

parameterized, in turn, by a [[physical unit]] of [[mass]] $m$. For the mass of the [[electron]],
the [[Compton wavelength]] is

$$
  \ell_e =  \frac{2\pi \hbar}{m_e c} \sim 386 \, fm
  \,.
$$


Another [[physical unit]] of [[length]] parameterized by a [[mass]] $m$ is the _[[Schwarzschild radius]]_ $r_m \coloneqq 2 m G/c^2$, where $G$ is the [[gravitational constant]]. Solving the [[equation]]

$$
  \array{
    & \ell_m &=& r_m
    \\
    \Leftrightarrow & 2\pi\hbar / m c &=& 2 m G / c^2
  }
$$

for $m$ yields the _[[Planck mass]]_

$$
   m_{P} \coloneqq \tfrac{1}{\sqrt{\pi}} m_{\ell = r} = \sqrt{\frac{\hbar c}{G}}
  \,.
$$

The corresponding [[Compton wavelength]] $\ell_{m_{P}}$ is given by the _[[Planck length]]_ $\ell_P$

$$
  \ell_{P} \coloneqq \tfrac{1}{2\pi} \ell_{m_P} = \sqrt{ \frac{\hbar G}{c^3} }
  \,.
$$


=--


+-- {: .num_defn #MinkowskiSpacetime}
###### Definition
**([[Minkowski spacetime]] as a [[pseudo-Riemannian manifold|pseudo-Riemannian]] [[Cartesian space]])**

Prop./def. \ref{SpacetimeAsMatrices} introduces [[Minkowski spacetime]] $\mathbb{R}^{p,1}$
for $p+1 \in \{3,4,6,10\}$ as a
a [[vector space]] $\mathbb{R}^{p,1}$ equipped with a [[norm]] ${\vert - \vert_\eta}$. The genuine [[spacetime]] corresponding to this
is this vector space regaded as a [[Cartesian space]], i.e. with [[smooth functions]] (instead of just [[linear maps]])
to it and from it (def. \ref{CartesianSpacesAndSmoothFunctionsBetweenThem}).
This still carries one copy of $\mathbb{R}^{p,1}$ over each point $x \in \mathbb{R}^{p,1}$, as its [[tangent space]] (example \ref{TangentVectorFields})

$$
  T_x \mathbb{R}^{p,1} \simeq \mathbb{R}^{p,1}
$$

and the [[Cartesian space]] $\mathbb{R}^{p,1}$ equipped with the Lorentzian inner product from
prop./def. \ref{SpacetimeAsMatrices} on each [[tangent space]] $T_x \mathbb{R}^{p,1}$
(a "[[pseudo-Riemannian manifold|pseudo-Riemannian]] [[Cartesian space]]") is  _[[Minkowski spacetime]]_ as such.

We write

$$
  \label{MinkowskiVolume}
  dvol_\Sigma
   \;\coloneqq\;
  d x^0 \wedge d x^1 \wedge \cdots \wedge d x^p
  \in \Omega^{p+1}(\mathbb{R}^{p,1})
$$

for the canonical [[volume form]] on Minkowski spacetime.

We use the [[Einstein summation convention]]: Expressions with repeated indices indicate [[sum|summation]] over the
range of indices.

For example a [[differential 1-form]] $\alpha \in \Omega^1(\mathbb{R}^{p,1})$ on Minkowski spacetime may be expanded as

$$
  \alpha = \alpha_\mu d x^\mu
  \,.
$$

Moreover we use square brackets around indices to indicate skew-symmetrization. For example a [[differential 2-form]]
$\beta \in \Omega^2(\mathbb{R}^{p,1})$ on Minkowski spacetime may be expanded as

$$
  \begin{aligned}
    \beta
    & = \beta_{\mu \nu} d x^\mu \wedge d x^\nu
    \\
    & = \beta_{[\mu \nu]} d x^\mu \wedge d x^\nu
  \end{aligned}
$$

=--

$\,$

The identification of [[Minkowski spacetime]] (def. \ref{MinkowskiSpacetime}) in the exceptional dimensions with the
generalized [[Pauli matrices]] (prop./def. \ref{SpacetimeAsMatrices}) has some immediate useful implications:

+-- {: .num_prop #DeterminantViaProductWithTraceReversal}
###### Proposition
**([[Minkowski spacetime|Minkowski metric]] in terms of [[trace]] reversal)**

In terms of the trace reversal operation $\widetilde{(-)}$ from def. \ref{TraceReversal},
the [[determinant]] operation on [[hermitian matrices]] (def. \ref{MatrixNotation}) has the following alternative expression

$$
  \begin{aligned}
    -det(A) & = A \tilde A
      \\
      & = \tilde A A
  \end{aligned}
  \,.
$$

and the Minkowski inner product from prop. \ref{SpacetimeAsMatrices} has the alternative expression

$$
  \begin{aligned}
    \eta(A,B) & = \tfrac{1}{2}Re(tr(A \tilde B))
    \\
    & = \tfrac{1}{2} Re(tr(\tilde A B))
  \end{aligned}
  \,.
$$

=--

([Baez-Huerta 09, prop. 5](geometry+of+physics+--+supersymmetry#BaezHuerta09))



+-- {: .num_prop #SLGrupOnPaulimatrices}
###### Proposition
**([[special linear group]] $SL(2,\mathbb{K})$ acts by linear [[isometries]] on [[Minkowski spacetime]] )**

For $\mathbb{K} \in \{\mathbb{R}, \mathbb{C}, \mathbb{H}, \mathbb{O}\}$ one of the four real [[normed division algebras]]
(prop. \ref{HurwitzTheorem}) the [[special linear group]] $SL(2,\mathbb{K})$ [[action|acts]] on [[Minkowski spacetime]] $\mathbb{R}^{p,1}$
in dimension $p+1 \in \{2+1, \,3+1, \, 5+1. \, 9+1\}$ (def. \ref{MinkowskiSpacetime})
by [[linear map|linear]] [[isometries]] given under the identification with the [[Pauli matrices]] in prop./def. \ref{SpacetimeAsMatrices} by [[conjugation]]:

$$
  \array{
    SL(2,\mathbb{K}) \times \mathbb{R}^{dim(\mathbb{K}+1,1)}
      & \simeq &
    SL(2, \mathbb{K}) \times Mat^{herm}_{2 \times 2}(\mathbb{K})
      &\overset{}{\longrightarrow}&
    Mat^{herm}_{2 \times 2}(\mathbb{K})
     & \simeq &
    \mathbb{R}^{dim(\mathbb{K}+1,1)}
    \\
    &&
    (G, A) &\mapsto& G \, A \, G^\dagger
  }
$$

=--

+-- {: .proof}
###### Proof

For $\mathbb{K} \in \{\mathbb{R}, \mathbb{C}, \mathbb{H}\}$ this is immediate from [[matrix calculus]], but we spell it out now.
While the argument does not directly apply to the case $\mathbb{K} = \mathbb{O}$ of the [[octonions]], one can check that it
still goes through, too.

First we need to see that the [[action]] is well defined. This follows from the [[associativity]] of [[matrix multiplication]]
and the fact that forming [[conjugate transpose matrices]] is an [[antihomomorphism]]: $(G_1 G_2)^\dagger = G_2^\dagger G_1^\dagger$.
In particular this implies that the action indeed sends [[hermitian matrices]] to hermitian matrices:

$$
  \begin{aligned}
    \left(
      G \, A \, G^\dagger
    \right)^\dagger
    & =
    \underset{= G}{\underbrace{\left( G^\dagger \right)}} \, \underset{= A}{\underbrace{A^\dagger}} \, G^\dagger
    \\
    & =
    G \, A \, G^\dagger
  \end{aligned}
  \,.
$$

By prop./def. \ref{SpacetimeAsMatrices} such an action is an [[isometry]] precisely if it preserves the
[[determinant]]. This follows from the multiplicative property of determinants: $det(A B) = det(A) det(B)$
and their compativility with conjugate transposition: $det(A^\dagger) = det(A^\ast)$, and
finally by the assumption that $G \in SL(2,\mathbb{K})$ is an element of the [[special linear group]], hence
that its determinant is $1 \in \mathbb{K}$:

$$
  \begin{aligned}
    det\left(
      G \, A \, G^\dagger
    \right)
    & =
    \underset{ = 1}{\underbrace{det(G)}} \, det(A) \, \underset{= 1^\ast = 1}{\underbrace{det(G^\dagger)}}
    \\
    & = det(A)
  \end{aligned}
  \,.
$$

=--

In fact the [[special linear groups]] of [[linear map|linear]] [[isometries]] in prop. \ref{SLGrupOnPaulimatrices}
are the [[spin groups]] (def. \ref{SpinGroup} below) in these dimensions.

[[!include exceptional spinors and division algebras -- table]]

This we explain now.



$\,$

**Lorentz group and spin group**
 {#LorentzGroupAndSpinGroup}


+-- {: .num_defn #LorentzGroup}
###### Definition
**([[Lorentz group]])**

For $d \in \mathbb{N}$, write

$$
  O(d-1,1)  \hookrightarrow GL(\mathbb{R}^d)
$$

for the [[subgroup]] of the [[general linear group]] on those [[linear maps]] $A$ which preserve this bilinear form
on [[Minkowski spacetime]] (def \ref{MinkowskiSpacetime}), in that

$$
  \eta(A(-),A(-)) = \eta(-,-)
  \,.
$$

This is the **[[Lorentz group]]** in dimension $d$.

The elements in the Lorentz group in the image of the [[special orthogonal group]] $SO(d-1) \hookrightarrow O(d-1,1)$ are _[[rotations]]_ in space. The further elements in the special Lorentz group $SO(d-1,1)$, which mathematically are "hyperbolic rotations" in a space-time plane, are called _[[boosts]]_ in [[physics]].

One distinguishes the following further [[subgroups]] of the [[Lorentz group]] $O(d-1,1)$:

* the _[[proper Lorentz group]]_

  $$
    SO(d-1,1) \hookrightarrow O(d-1,1)
  $$

  is the subgroup of elements which have [[determinant]] +1 (as elements  $SO(d-1,1)\hookrightarrow GL(d)$ of the [[general linear group]]);

* the _[[proper orthochronous Lorentz group|proper orthochronous]]_ (or _restricted_) Lorentz group

  $$
    SO^+(d-1,1) \hookrightarrow SO(d-1,1)
  $$

  is the further [[subgroup]] of elements $A$ which preserve the time orientation of vectors $v$ in that
  $(v^0 \gt 0) \Rightarrow ((A v)^0 \gt 0)$.

=--

+-- {: .num_prop #ConnectedComponentsOfLorentzGroup}
###### Proposition
**([[connected component]] of [[Lorentz group]])**

As a [[smooth manifold]], the [[Lorentz group]] $O(d-1,1)$ (def. \ref{LorentzGroup})
has four [[connected components]]. The connected component of the identity is the
[[proper orthochronous Lorentz group]] $SO^+(3,1)$ (def. \ref{LorentzGroup}). The other three components are

1. $SO^+(d-1,1)\cdot P$

1. $SO^+(d-1,1)\cdot T$

1. $SO^+(d-1,1)\cdot P T$,

where, as [[matrices]],

$$
  P \coloneqq diag(1,-1,-1, \cdots, -1)
$$

is the operation of point reflection at the origin in space, where

$$
  T \coloneqq diag(-1,1,1, \cdots, 1)
$$

is the operation of reflection in time and hence where

$$
  P T = T P = diag(-1,-1, \cdots, -1)
$$

is point reflection in spacetime.

=--






The following concept of the [[Clifford algebra]] (def. \ref{CliffordAlgebra}) of [[Minkowski spacetime]]
encodes the structure of the [[inner product space]] $\mathbb{R}^{d-1,1}$
in terms of algebraic operation ("[[geometric algebra]]"), such that the action of the
[[Lorentz group]] becomes represented by a [[conjugation action]] (example \ref{CliffordConjugtionReflectionAndRotation} below).
In particular this means that every element of the proper orthochronous Lorentz group may be "split in half"
to yield a [[double cover]]: the [[spin group]] (def. \ref{SpinGroup} below).



+-- {: .num_defn #CliffordAlgebra}
###### Definition
**([[Clifford algebra]])**

For $d \in \mathbb{N}$, we write

$$
  Cl(\mathbb{R}^{d-1,1})
$$

for the $\mathbb{Z}/2$-[[graded algebra|graded]] [[associative algebra]] over $\mathbb{R}$
which is generated from $d$ generators $\{\Gamma_0, \Gamma_1, \Gamma_2, \cdots, \Gamma_{d-1}\}$
in odd degree ("Clifford generators"), subject to the [[generators and relations|relation]]

$$
  \label{RelationCliffordAlgebra}
  \Gamma_{a} \Gamma_b + \Gamma_b \Gamma_a = - 2\eta_{a b}
$$

where $\eta$ is the [[inner product]] of [[Minkowski spacetime]] as in def. \ref{MinkowskiSpacetime}.

These relations say equivalently that

$$
  \begin{aligned}
    & \Gamma_0^2 = +1
    \\
    & \Gamma_i^2 = -1 \;\; \text{for}\; i \in \{1,\cdots, d-1\}
    \\
    & \Gamma_a \Gamma_b = - \Gamma_b \Gamma_a \;\;\; \text{for}\; a \neq b
  \end{aligned}
  \,.
$$

We write

$$
  \Gamma_{a_1 \cdots a_p}
    \;\coloneqq\;
  \frac{1}{p!}
  \underset{{permutations \atop \sigma}}{\sum} (-1)^{\vert \sigma\vert } \Gamma_{a_{\sigma(1)}} \cdots \Gamma_{a_{\sigma(p)}}
$$

for the antisymmetrized product of $p$ Clifford generators.
In particular, if all the $a_i$ are pairwise distinct, then this is simply the plain product of generators

$$
  \Gamma_{a_1 \cdots a_n}
  =
  \Gamma_{a_1} \cdots \Gamma_{a_n}
  \;\;\;
  \text{if}
  \;
  \underset{i,j}{\forall} (a_i \neq a_j)
  \,.
$$

Finally, write

$$
  \overline{(-)}
  \;\colon\;
    Cl(\mathbb{R}^{d-1,1})
      \longrightarrow
    Cl(\mathbb{R}^{d-1,1})
$$

for the algebra [[antihomomorphism|anti-]][[automorphism]] given by

$$
  \overline{\Gamma_a}
    \coloneqq
  \Gamma_a
$$

$$
  \overline{\Gamma_a \Gamma_b}
    \coloneqq
  \Gamma_b \Gamma_a
  \,.
$$

=--

+-- {: .num_remark #VectorsInsideCliffordAlgebra}
###### Remark
**([[vectors]] inside [[Clifford algebra]])**

By construction, the [[vector space]] of [[linear combinations]] of the generators
in a [[Clifford algebra]] $Cl(\mathbb{R}^{d-1,1})$ (def. \ref{CliffordAlgebra}) is canonically identified
with [[Minkowski spacetime]] $\mathbb{R}^{d-1,1}$ (def. \ref{MinkowskiSpacetime})

$$
  \widehat{(-)}
    \;\colon\;
  \mathbb{R}^{d-1,1}
    \hookrightarrow
  Cl(\mathbb{R}^{d-1,1})
$$

via

$$
  x_a \mapsto \Gamma_a
  \,,
$$

hence via

$$
  v = v^a x_x \mapsto \hat v = v^a \Gamma_a
  \,,
$$

such that the defining [[quadratic form]] on $\mathbb{R}^{d-1,1}$ is identified with
the [[anti-commutator]] in the Clifford algebra

$$
  \eta(v_1,v_2) = -\tfrac{1}{2}( \hat v_1 \hat v_2 + \hat v_2 \hat v_1)
  \,,
$$

where on the right we are, in turn, identifying $\mathbb{R}$ with the linear span of the unit in $Cl(\mathbb{R}^{d-1,1})$.

=--

The key point of the [[Clifford algebra]] (def. \ref{CliffordAlgebra}) is that it realizes
spacetime [[reflections]], [[rotations]] and [[boosts]] via [[conjugation actions]]:

+-- {: .num_example #CliffordConjugtionReflectionAndRotation}
###### Example
**(Clifford conjugation)**

For $d \in \mathbb{N}$ and $\mathbb{R}^{d-1,1}$ the [[Minkowski spacetime]] of def. \ref{MinkowskiSpacetime},
let $v \in \mathbb{R}^{d-1,1}$ be any [[vector]], regarded as an element $\hat v \in Cl(\mathbb{R}^{d-1,1})$ via remark \ref{VectorsInsideCliffordAlgebra}.

Then

1. the [[conjugation action]] $\hat v \mapsto -\Gamma_a^{-1} \hat v \Gamma_a$
   of a single Clifford generator $\Gamma_a$ on $\hat v$ sends $v$ to its
  [[reflection]] at the hyperplane $x_a = 0$;

1. the [[conjugation action]]

   $$
     \hat v \mapsto \exp(- \tfrac{\alpha}{2} \Gamma_{a b}) \hat v \exp(\tfrac{\alpha}{2} \Gamma_{a b})
   $$

   sends $v$ to the result of [[rotation|rotating]] it in the $(a,b)$-plane through an angle $\alpha$.

=--

+-- {: .proof}
###### Proof

This is immediate by inspection:

For the first statement, observe that conjugating the Clifford generator $\Gamma_b$ with $\Gamma_a$
yields $\Gamma_b$ up to a sign, depending on whether $a = b$ or not:

$$
  - \Gamma_a^{-1} \Gamma_b \Gamma_a
  =
  \left\{
    \array{
      -\Gamma_b & \vert \text{if}\, a = b
      \\
      \Gamma_b & \vert \text{otherwise}
    }
  \right.
  \,.
$$

Therefore for $\hat v = v^b \Gamma_b$ then $\Gamma_a^{-1} \hat v \Gamma_a$ is the result of
multiplying the $a$-component of $v$ by $-1$.

For the second statement, observe that

$$
  -\tfrac{1}{2}[\Gamma_{a b}, \Gamma_c]
  =
  \Gamma_a \eta_{b c} - \Gamma_b \eta_{a c}
  \,.
$$

This is the canonical action of the Lorentzian [[special orthogonal Lie algebra]] $\mathfrak{so}(d-1,1)$.
Hence

$$
  \exp(-\tfrac{\alpha}{2} \Gamma_{ab}) \hat v \exp(\tfrac{\alpha}{2} \Gamma_{ab})
    =
  \exp(\tfrac{1}{2}[\Gamma_{a b}, -])(\hat v)
$$

is the rotation action as claimed.

=--

+-- {: .num_remark #AmbiguityInCliffordConjugation}
###### Remark

Since the [[reflections]], [[rotations]] and [[boosts]] in example \ref{CliffordConjugtionReflectionAndRotation} are given by [[conjugation actions]], there is a crucial ambiguity in the Clifford elements that induce them:

1. the conjugation action by $\Gamma_a$ coincides precisely with the conjugation action by $-\Gamma_a$;

1. the [[conjugation action]] by $\exp(\tfrac{\alpha}{4} \Gamma_{a b})$ coincides precisely with the
   conjugation action by $-\exp(\tfrac{\alpha}{2}\Gamma_{a b})$.

=--


+-- {: .num_defn #SpinGroup}
###### Definition
**([[spin group]])**

For $d \in \mathbb{N}$, the **[[spin group]]** $Spin(d-1,1)$ is the group of
even graded elements of the Clifford algebra $Cl(\mathbb{R}^{d-1,1})$ (def. \ref{CliffordAlgebra})
which are [[unitary operator|unitary]] with respect to the conjugation operation $\overline{(-)}$
from def. \ref{CliffordAlgebra}:

$$
  Spin(d-1,1)
   \;\coloneqq\;
  \left\{
    A \in Cl(\mathbb{R}^{d-1,1})_{even}
    \;\vert\;
    \overline{A} A = 1
  \right\}
  \,.
$$

=--

+-- {: .num_prop #SpinDoubleCover}
###### Proposition

The [[function]]

$$
  Spin(d-1,1)
    \longrightarrow
  GL(\mathbb{R}^{d-1,1})
$$

from the [[spin group]] (def. \ref{SpinGroup}) to the [[general linear group]] in $d$-dimensions
given by sending $A \in Spin(d-1,1) \hookrightarrow Cl(\mathbb{R}^{d-1,1})$ to the
[[conjugation action]]

$$
  \overline{A}(-) A
$$

(via the identification of Minkowski spacetime as the subspace of the [[Clifford algebra]]
containing the [[linear combinations]] of the generators, according to remark \ref{VectorsInsideCliffordAlgebra})

is

1. a [[group]] [[homomorphism]] onto the [[proper orthochronous Lorentz group]] (def. \ref{LorentzGroup}):

   $$
     Spin(d-1,1) \longrightarrow SO^+(d-1,1)
   $$

1. exhibiting a $\mathbb{Z}/2$-[[central extension]].

=--

+-- {: .proof}
###### Proof

That the function is a group homomorphism into the [[general linear group]], hence that it acts by [[linear transformations]]
on the generators follows by using that it clearly lands in [[automorphisms]] of the Clifford algebra.

That the function lands in the [[Lorentz group]] $O(d-1,1) \hookrightarrow GL(d)$ follows from remark \ref{VectorsInsideCliffordAlgebra}:

$$
  \begin{aligned}
    \eta(\overline{A}v_1A , \overline{A} v_2 A)
    &=
    \tfrac{1}{2}
    \left(
    \left(\overline{A} \hat v_1 A\right) \left(\overline{A}\hat v_2 A\right)
    +
    \left(\overline{A} \hat v_2 A\right) \left(\overline{A} \hat v_1 A\right)
    \right)
    \\
    & =
    \tfrac{1}{2}
    \left(
    \overline{A}(\hat v_1 \hat v_2 + \hat v_2 \hat v_1) A
    \right)
    \\
    & =
    \overline{A} A \tfrac{1}{2}\left( \hat v_1 \hat v_2 + \hat v_2 \hat v_1\right)
    \\
    & =
    \eta(v_1, v_2)
  \end{aligned}
  \,.
$$

That it moreover lands in the [[proper Lorentz group]] $SO(d-1,1)$ follows from
observing (example \ref{CliffordConjugtionReflectionAndRotation}) that every reflection is given by the [[conjugation action]] by
a linear combination of generators, which are excluded from the group $Spin(d-1,1)$
(as that is defined to be in the even subalgebra).


To see that the homomorphism is surjective, use that all elements of $SO(d-1,1)$
are products of [[rotations]] in hyperplanes. If a hyperplane is spanned by the [[bivector]]
$(\omega^{a b})$, then such a rotation is given, via example \ref{CliffordConjugtionReflectionAndRotation}
by the conjugation action by
$$
  \exp(\tfrac{\alpha}{2} \omega^{a b}\Gamma_{a b})
$$

for some $\alpha$, hence is in the image.

That the [[kernel]] is $\mathbb{Z}/2$ is clear from the fact that the only even Clifford elements which commute
with all vectors are the multiples $a \in \mathbb{R} \hookrightarrow Cl(\mathbb{R}^{d-1,1})$ of the identity.
For these $\overline{a} = a$ and hence
the condition $\overline{a} a = 1$ is equivalent to $a^2 = 1$. It is clear that these two elements
$\{+1,-1\}$ are in the [[center]] of $Spin(d-1,1)$. This
kernel reflects the ambiguity from remark \ref{AmbiguityInCliffordConjugation}.

=--


$\,$

**Spinors in dimensions 3, 4, 6 and 10**
 {#InTermsOfNormedDivisionAlgebraInDimension3To10}

We now discuss how [[real spin representations]] (def. \ref{SpinGroup}) in
spacetime dimensions 3,4, 6 and 10 are naturally induced from
[[linear algebra]] over the four real [[alternative algebras|alternative]] [[division algebras]] (prop. \ref{HurwitzTheorem}).



+-- {: .num_defn #CliffordAlgebraInTermsOfNormedDivisionAlgebra}
###### Definition
**([[Clifford algebra]] via [[normed division algebra]])**

Let $\mathbb{K}$ be one of the four real [[normed division algebras]] from prop. \ref{HurwitzTheorem}, hence one of the four
real [[alternative algebra|alternative]] [[division algebras]] from prop. \ref{ZornTheorem}.


Define a [[real numbers|real]] [[linear map]]

$$
  \Gamma \;\colon\; \mathbb{R}^{dim_{\mathbb{R}}(\mathbb{K})+1,1} \longrightarrow End_{\mathbb{R}}(\mathbb{K}^4)
$$

from (the real vector space underlying) [[Minkowski spacetime]] to real [[linear maps]] on $\mathbb{K}^4$

$$
  \Gamma(A)
  \left(
    \array{
      \psi
      \\
      \phi
    }
  \right)
  \;\coloneqq\;
  \left(
    \array{
      - \tilde A \phi
      \\
      A \psi
    }
  \right)
  \,.
$$

Here on the right we are using the isomorphism from prop. \ref{SpacetimeAsMatrices} for identifying
a spacetime vector with a $2 \times 2$-matrix, and we are using the trace reversal $\widetilde(-)$
from def. \ref{TraceReversal}.

=--

+-- {: .num_remark}
###### Remark
**([[Clifford algebra|Clifford multiplication]] via [[octonion]]-valued matrices)**

Each operation of $\Gamma(A)$ in def. \ref{CliffordAlgebraInTermsOfNormedDivisionAlgebra} is clearly a [[linear map]],
even for $\mathbb{K}$ being the non-associative [[octonions]]. The only point to beware of is that for $\mathbb{K}$
the octonions, then the composition of two such linear maps is not in general given by the
usual matrix product.

=--


+-- {: .num_prop #SpinorRepsByNormedDivisionAlgebra}
###### Proposition
**([[real spin representations]] via [[normed division algebras]])**

The map $\Gamma$ in def. \ref{CliffordAlgebraInTermsOfNormedDivisionAlgebra} gives a [[representation]] of the [[Clifford algebra]]
$Cl(\mathbb{R}^{dim_{\mathbb{R}}}(\mathbb{K}+1,1)  )$
([this def.](geometry+of+physics+--+supersymmetry#CliffordAlgebra)), i.e of

1. $Cl(\mathbb{R}^{2,1})$ for $\mathbb{K} = \mathbb{R}$;

1. $Cl(\mathbb{R}^{3,1})$ for $\mathbb{K} = \mathbb{C}$;

1. $Cl(\mathbb{R}^{5,1})$ for $\mathbb{K} = \mathbb{H}$;

1. $Cl(\mathbb{R}^{9,1})$ for $\mathbb{K} = \mathbb{O}$.

Hence this Clifford representation induces [[spin representations|representations]]
of the [[spin group]] $Spin(dim_{\mathbb{R}}(\mathbb{K})+1,1)$  on
the real vector spaces

$$
  S_{\pm } \coloneqq \mathbb{K}^2
  \,.
$$

and hence on

$$
  S \coloneqq S_+ \oplus S_-
  \,.
$$

=--

([Baez-Huerta 09, p. 6](geometry+of+physics+--+supersymmetry#BaezHuerta09))

+-- {: .proof}
###### Proof

We need to check that the Clifford relation

$$
  \begin{aligned}
    (\Gamma(A))^2
      & = -\eta(A,A)1
      \\
      & = + det(A)
  \end{aligned}
$$

is satisfied (where we used (eq:RelationCliffordAlgebra) and (eq:MinkowskiSpacetimeFromHermitianMatricesWithDeterminant)). Now by definition, for any $(\phi,\psi) \in \mathbb{K}^4$ then

$$
  (\Gamma(A))^2
  \left(
    \array{
      \phi
      \\
      \psi
    }
  \right)
  \;=\;
  -
  \left(
    \array{
      \tilde A(A \phi)
      \\
      A(\tilde A \psi)
    }
  \right)
  \,,
$$

where on the right we have in each component ordinary matrix product expressions.

Now observe that both expressions on the right are sums of triple products that involve either
one real factor or two factors that are conjugate to each other:

$$
  \begin{aligned}
    A (\tilde A \psi)
    & =
    \left(
      \array{
        x_0 + x_1 & y
        \\
        y^\ast & x_0 - x_1
      }
    \right)
      \cdot
    \left(
      \array{
        (-x_0 + x_1) \phi_1 + y \phi_2
        \\
        y^\ast \phi_1 - (x_0 + x_1)\phi_2
      }
    \right)
    \\
    & =
    \left(
      \array{
        (-x_0^2 + x_1^2) \phi_1 + (x_0 + x_1)(y \phi_2) + y (y^\ast \phi_1) - y( (x_0 + x_1) \phi_2 )
        \\
        \cdots
      }
    \right)
  \end{aligned}
  \,.
$$

Since the [[associators]] of triple products that involve a real factor and those involving both an element and its
conjugate vanish by prop. \ref{PropertiesOfAssociatorInAlternativeAlgebra} (hence ultimately by Artin's theorem, prop. \ref{ArtinTheorem}).
In conclusion all associators involved vanish, so that we may rebracket to obtain

$$
  (\Gamma(A))^2
  \left(
    \array{
      \phi
      \\
      \psi
    }
  \right)
  \;=\;
  -
  \left(
    \array{
      (\tilde A A) \phi
      \\
      (A \tilde A) \psi
    }
  \right)
  \,.
$$

This implies the statement via the equality $-A \tilde A = -\tilde A A = det(A)$ (prop. \ref{DeterminantViaProductWithTraceReversal}).

=--


+-- {: .num_prop #RealSpinorPairingsViaDivisionAlg}
###### Proposition
**([[spinor]] [[bilinear map|bilinear]] pairings)**

Let $\mathbb{K}$ be one of the four real [[normed division algebras]] and $S_\pm \simeq_{\mathbb{R}}\mathbb{K}^2$
the corresponding [[spin representation]] from prop. \ref{SpinorRepsByNormedDivisionAlgebra}.

Then there are [[bilinear maps]] from two [[spinors]] (according to prop. \ref{SpinorRepsByNormedDivisionAlgebra})
to the [[real numbers]]

$$
  \overline{(-)}(-) \;\colon\; S_+ \otimes S_-\longrightarrow \mathbb{R}
$$

as well as to $\mathbb{R}^{dim(\mathbb{K}+1,1)}$

$$
  \overline{(-)}\Gamma (-) \;\colon\; S_\pm \otimes S_{\pm}\longrightarrow \mathbb{R}^{dim(\mathbb{K}+1,1)}
$$

given, respectively, by forming the [[real part]] (def. \ref{Conjugation}) of the canonical $\mathbb{K}$-[[inner product]]

$$
  \overline{(-)}(-) \colon S_+\otimes S_- \longrightarrow \mathbb{R}
$$
$$
  (\psi,\phi)\mapsto \overline{\psi} \phi \coloneqq Re(\psi^\dagger \cdot \phi)
$$

and by forming the product of a column vector with a row vector to produce a matrix, possibly up to trace reversal (def. \ref{TraceReversal})
under the identification $\mathbb{R}^{dim(\mathbb{K})+1,1} \simeq Mat^{her}_{2 \times 2}(\mathbb{K})$ from prop. \ref{SpacetimeAsMatrices}:

$$
  S_+ \otimes S_+ \longrightarrow \mathbb{R}^{dim(\mathbb{K})+1,1}
$$
$$
  (\psi , \phi) \mapsto \overline{\psi}\Gamma \phi \coloneqq
  \widetilde{\psi \phi^\dagger + \phi \psi^\dagger}
$$

and

$$
  S_- \otimes S_- \longrightarrow \mathbb{R}^{dim(\mathbb{K}+1,1)}
$$
$$
  (\psi , \phi) \mapsto {\psi \phi^\dagger + \phi \psi^\dagger}
$$

For $A \in Mat^{her}_{2 \times 2}(\mathbb{K})$ the $A$-component of this map is

$$
  \eta(\overline{\psi}\Gamma \phi, A)
  =
  Re (\psi^\dagger (A\phi))
 \,.
$$

These pairings have the following properties

1. both are $Spin(dim(\mathbb{K})+1,1)$-equivalent;

1. the pairing $\overline{(-)}\Gamma(-)$ is _[[symmetric bilinear form|symmetric]]_:

   $$
     \label{SpinorToVectorPairingIsSymmetric}
     \overline{\psi_1} \,\Gamma\, \psi_2 = + \overline{\phi_2}\, \Gamma\, \psi_1
     \phantom{AAAA}
     \text{for} \phantom{AA} \psi_1, \psi_2 \in S_+ \oplus S_-
   $$

=--

([Baez-Huerta 09, prop. 8, prop. 9](geometry+of+physics+--+supersymmetry#BaezHuerta09)).


+-- {: .num_remark #TwoComponentSpinorNotation}
###### Remark
**(two-component [[spinor]] notation)**

In the [[physics]]/[[QFT]] literature the expressions for [[spin representations]]
given by prop. \ref{SpinorRepsByNormedDivisionAlgebra} are traditionally written in
_two-component spinor notation_ as follows:

* An element of $S_+$ is denoted $(\chi_a \in \mathbb{K})_{a = 1,2}$
  and called a _[[Weyl spinor|left handed spinor]]_;

* an element of $S_-$ is denoted $(\xi^{\dagger \dot a})_{\dot a = 1,2}$
  and called a _[[Weyl spinor|right handed spinor]]_;

* an element of $S = S_+ \oplus S_-$ is denoted

  $$
    \label{TwoComponentNotationForDiracSpinor}
    (\psi^\alpha) = \left( (\chi_a), (\xi^{\dagger \dot a}) \right)
  $$

  and called a _[[Dirac spinor]]_;

and the Clifford action of prop. \ref{CliffordAlgebraInTermsOfNormedDivisionAlgebra} corresponds to the generalized "[[Pauli matrices]]":

* a hermitian matrix $A \in Mat^{her}_{2\times 2}(\mathbb{K})$ as in prop \ref{SpacetimeAsMatrices} regarded as a linear map $S_- \to S_+$ via def. \ref{CliffordAlgebraInTermsOfNormedDivisionAlgebra} is denoted

  $$
    \left(x_\mu \sigma^\mu_{a \dot a}\right)
    \;\coloneqq\;
    \left( \array{  x_0 + x_1 & y  \\ y^\ast & x_0 - x_1 } \right)    \,;
  $$

* the negative of the trace-reversal (def. \ref{TraceReversal}) of such a hermitian matrix, regarded as a linear map $S_+ \to S_-$, is denoted

  $$
    \left(
      x_\mu \widetilde \sigma^{\mu \dot a a}
    \right)
    \;\coloneqq\;
    -
    \left( \array{  -x_0 + x_1 & y  \\ y^\ast & -x_0 - x_1 } \right)
    \,.
  $$

* the corresponding Clifford generator $\Gamma(A) \;\colon\; S_+ \oplus S_- \to S_+ \oplus S_-$ (def. \ref{CliffordAlgebraInTermsOfNormedDivisionAlgebra})
  is denoted

  $$
    x_\mu (\gamma^\mu)_{\alpha \beta}
    \;\coloneqq\;
    \left(
      \array{
         0 & x_\mu \sigma^\mu_{a \dot b}
         \\
         x_\mu \widetilde \sigma^{\mu \dot a b}
      }
    \right)
  $$

* the bilinear spinor-to-vector pairing from prop. \ref{RealSpinorPairingsViaDivisionAlg}
  is written as the [[matrix multiplication]]

  $$
    \left( \overline{\psi} \, \gamma^\mu \, \phi\right)
    \;\coloneqq\;
    \overline{\psi}\,\Gamma \,\phi
    \,,
  $$

  where the _[[Dirac conjugate]]_ $\overline{\psi}$  on the left is given
  on $(\psi_\alpha) = (\chi_a, \xi^{\dagger \dot c})$ by

  $$
    \label{DiracConjugate}
    \begin{aligned}
      \overline{\psi}
      & \coloneqq
      \psi^\dagger \gamma^0
      \\
      & =
      ( \xi^a, \chi^\dagger_{\dot a} )
    \end{aligned}
  $$

  hence, with (eq:TwoComponentNotationForDiracSpinor):

  $$
    \label{TwoComponentNotationForSpinorToVectorPairing}
    \begin{aligned}
      \overline{\psi_1} \,\gamma^\mu\, \psi_2
      & =
      \psi_1^\dagger \, \gamma^0 \gamma^\mu \, \psi_2
      \\
      & =
      (\xi_1)^a \, \sigma^\mu_{a \dot c}\, (\xi_2)^{\dagger \dot c}
      +
      (\chi_1)^\dagger_{\dot a} \, \widetilde \sigma^{\mu \dot a c} \, (\chi_2)_c
    \end{aligned}
  $$

Finally, it is common to abbreviate contractions with the [[Clifford algebra]] generators $(\gamma^\mu)$
by a slash, as in

$$
  k\!\!\!/\, \;\coloneqq\; \gamma^\mu k_\mu
$$

or

$$
  \label{FeynmanSlashNotationForMasslessDiracOperator}
  i \partial\!\!\!/\,
  \;\coloneqq\;
  i \gamma^\mu \frac{\partial}{\partial x^\mu}
  \,.
$$

This is called the _[[Feynman slash notation]]_.

=--

(e.g. [Dermisek I-8](Dirac+field#DermisekI8), [Dermisek I-9](Dirac+field#DermisekI9))




Below we spell out the example of the [[Lagrangian field theory]] of the [[Dirac field]]
in detail (example \ref{LagrangianDensityForDiracField}). For discussion of
_massive chiral spinor fields_ one also needs the following, here we just mention this for
completeness:

+-- {: .num_defn #ChiralSpinorMassPairing}
###### Proposition
**(chiral spinor mass pairing)**

In dimension 2+1 and 3+1, there exists a non-trivial skew-symmetric pairing

$$
  \epsilon
  \;\colon\;
  S \wedge S
    \longrightarrow
  \mathbb{R}
$$

which may be normalized such that in the two-component spinor basis of
remark \ref{TwoComponentSpinorNotation} we have

$$
  \label{ConjugationOfLeftRightCliffordGeneratorToRightLeft}
  \tilde \sigma^{\mu \dot a a} = \epsilon^{a b} \epsilon^{\dot a \dot b} \sigma^\mu_{b \dot b}
  \,.
$$

=--

+-- {: .proof}
###### Proof

Take the non-vanishing components of $\epsilon$ to be

$$
  \epsilon^{1 2} = \epsilon^{\dot 1 \dot 2} = \epsilon_{21} = \epsilon_{\dot 2 \dot 1} =  1
$$

and

$$
  \epsilon^{2 1} = \epsilon^{\dot 2 \dot 1} = \epsilon_{1 2} = \epsilon_{\dot 1 \dot 2} = -1
  \,.
$$

With this equation (eq:ConjugationOfLeftRightCliffordGeneratorToRightLeft) is checked explicitly.
It is clear that $\epsilon$ thus defined is skew symmetric as long as the component algebra
is commutative, which is the case for $\mathbb{K}$ being $\mathbb{R}$ or $\mathbb{C}$.


=--







$\,$

**Causal structure**
 {#CausalStructure}

We need to consider the following concepts and constructions related to the [[causal structure]] of [[Minkowski spacetime]] $\Sigma$ (def. \ref{MinkowskiSpacetime}).


+-- {: .num_defn #SpacelikeTimelikeLightlike}
###### Definition
**([[spacelike]], [[timelike]], [[lightlike]] [[direction of a vector|directions]]; [[past]] and [[future]])**

Given two points $x,y \in \Sigma$ in [[Minkowski spacetime]] (def. \ref{MinkowskiSpacetime}),
write

$$
  v \coloneqq y - x \in \mathbb{R}^{p,1}
$$

for their difference, using the [[vector space]] structure underlying [[Minkowski spacetime]].

Recall the Minkowski [[inner product]] $\eta$  on $\mathbb{R}^{p,1}$, given by prop./def. \ref{SpacetimeAsMatrices}.
Then via remark \ref{MinkowskiMetricAndPhysicalUnitOfLength} we say that the difference vector $v$ is

1. _[[spacelike]]_ if $\eta(v,v) \gt 0$,

1. _[[timelike]]_ if $\eta(v,v) \lt 0$,

1. _[[lightlike]]_ if $\eta(v,v) = 0$.

If $v$ is [[timelike]] or [[lightlike]] then we say that

1. $y$ is in the _[[future]]_ of $x$ if $y^0 - x^0 \geq 0$;

1. $y$ is in the _[[past]]_ of $x$ if $y^0 - x^0 \leq 0$.

=--

+-- {: .num_defn #CausalPastAndFuture}
###### Definition
**([[causal cones]])**

For $x \in \Sigma$ a point in spacetime (an [[event]]), we write

$$
  V^+(x), V^-(x) \subset \Sigma
$$

for the [[subsets]] of [[events]] that are in the [[timelike]] [[future]] or in the [[timelike]] [[past]] of $x$, respectively (def. \ref{SpacelikeTimelikeLightlike})
called the _[[open future cone]]_ and _[[open past cone]]_, respectively, and

$$
  \overline{V}^+(x), \overline{V}^-(x) \subset \Sigma
$$

for the [[subsets]] of [[events]] that are in the [[timelike]] or [[lightlike]] [[future]] or [[past]], respectivel,
called the _[[closed future cone]]_ and _[[closed past cone]]_, respectively.

The [[union]]

$$
  J(x) \coloneqq \overline{V}^+(x) \cup \overline{V}^-(x)
$$

of the closed [[future cone]] and [[past cone]] is called the full _[[causal cone]]_ of the [[event]] $x$.
Its [[boundary]] is the _[[light cone]]_.

More generally for $S \subset \Sigma$ a [[subset]] of [[events]] we write

$$
  \overline{V}^\pm(S)
  \;\coloneqq\;
  \underset{x \in S}{\cup} \overline{V}^{\pm}(x)
$$

for the [[union]] of the future/past closed cones of all events in the subset.

=--

+-- {: .num_defn #CompactlySourceCausalSupport}
###### Definition
**(compactly sourced causal support)

Consider a [[vector bundle]] $E \overset{}{\to} \Sigma$ (def. \ref{VectorBundle}) over [[Minkowski spacetime]] (def. \ref{MinkowskiSpacetime}).

Write $\Gamma_{\Sigma}(E)$ for the [[space of sections|spaces of smooth sections]] (def. \ref{Sections}), and write

$$
  \begin{aligned}
    \Gamma_{cp}(E) & \text{compact support}
    \\
    \Gamma_{\Sigma,\pm cp}(E) & \text{compactly sourced future/past support}
    \\
    \Gamma_{\Sigma,scp}(E) & \text{spacelike compact support}
    \\
    \Gamma_{\Sigma,(f/p)cp}(E) & \text{future/past compact support}
    \\
    \Gamma_{\Sigma,tcp}(E) & \text{timelike compact support}
  \end{aligned}
$$

for the subsets on those smooth sections whose [[support]] is

1. ($cp$) inside a [[compact subset]],

1. ($\pm cp$) inside the [[closed future cone]]/[[closed past cone]], respectively, of a [[compact subset]],

1. ($scp$) inside the [[closed causal cone]] of a [[compact subset]], which equivalently means that the [[intersection]] with every ([[spacelike]]) [[Cauchy surface]] is compact ([Sanders 13, theorem 2.2](#Sanders12)),

1. ($fcp$) inside the past of a Cauchy surface ([Sanders 13, def. 3.2](#Sanders12)),

1. ($pcp$) inside the future of a Cauchy surface ([Sanders 13, def. 3.2](#Sanders12)),

1. ($tcp$) inside the future of one Cauchy surface and the past of another ([Sanders 13, def. 3.2](#Sanders12)).

=--

([Bär 14, section 1](space+of+sections#Baer14), [Khavkine 14, def. 2.1](Green+hyperbolic+differential+operator#Khavkine14))



+-- {: .num_defn #CausalOrdering}
###### Definition
**(causal order)**

Consider the [[relation]] on the set $P(\Sigma)$ of [[subsets]] of [[spacetime]]
which says a [[subset]] $S_1 \subset \Sigma$ is _not prior_ to a subset $S_2 \subset \Sigma$,
denoted $S_1 \geq S_2$, if $S_1$ does not [[intersection|intersect]] the [[causal past]] of $S_2$ (def. \ref{CausalPastAndFuture}),
or equivalently that $S_2$ does not intersect the [[causal future]] of $S_1$:

$$
  \begin{aligned}
    (S_1 \geq S_2)
    & \coloneqq
    S_1 \cap \overline{V}^-(S_2) = \emptyset
    \\
    & \Leftrightarrow S_2 \cap \overline{V}^+(S_1) = \emptyset
   \end{aligned}
   \,.
$$

If $S_1 \geq S_2$ and $S_2 \geq S_1$ we say that the two subsets are _[[spacelike]] separated_.

=--

+-- {: .num_example #CausalComplementOfSubsetOfLorentzianManifold}
###### Definition
**([[causal complement]] and [[causal closure]] of subset of [[spacetime]])**

For $S \subset X$ a [[subset]] of [[spacetime]], its _[[causal complement]]_ $S^\perp$ is the [[complement]] of the [[causal cone]]:

$$
  S^\perp \;\coloneqq\; S \setminus J_X(S)
  \,.
$$

The causal complement $S^{\perp \perp}$ of the causal complement $S^\perp$ is called the _[[causal closure]]_. If

$$
  S = S^{\perp \perp}
$$

then the subset $S$ is called a _[[causally closed subset]]_.

Given a [[spacetime]] $\Sigma$, we write

$$
  CausClsdSubsets(\Sigma) \;\in\; Cat
$$

for the [[partially ordered set]] of causally closed subsets, partially ordered by
inclusion $\mathcal{O}_1 \subset \mathcal{O}_2$.

=--


+-- {: .num_defn #CutoffFunctions}
###### Definition
**([[adiabatic switching]])**

For a [[causally closed subset]] $\mathcal{O} \subset \Sigma$ of [[spacetime]] (def. \ref{CausalComplementOfSubsetOfLorentzianManifold}) say that an _[[adiabatic switching]] function_ or  _[[infrared cutoff]] function_ for $\mathcal{O}$
is a [[smooth function]] $g_{sw}$ of [[compact support]] (a [[bump function]]) whose
restriction to some [[neighbourhood]] $U$ of $\mathcal{O}$ is the [[constant function]]
with value $1$:

$$
  Cutoffs(\mathcal{O})
  \;\coloneqq\;
  \left\{
    g_{sw} \in C^\infty_c(\Sigma)
    \;\vert\;
    \underset{ {U \supset \mathcal{O}} \atop { \text{neighbourhood} } }{\exists}
    \left(
      g_{sw}\vert_U = 1
    \right)
  \right\}
  \,.
$$

Often we consider the vector space space $C^\infty(\Sigma)\langle g \rangle $ spanned by a formal
variable $g$ (the [[coupling constant]]) under multiplication with smooth functions, and consider as adiabatic switching functions
the corresponding images in this space,

$$
  \array{
     C_c^\infty(\Sigma) &\overset{\simeq}{\longrightarrow}& C_c^\infty(X)\langle g\rangle
  }
$$

which are thus bump functions constant over a neighbourhood $U$ of $\mathcal{O}$ not on 1 but on
the formal parameter $g$:

$$
  g_{sw}\vert_U = g
  \,
$$

In this sense we may think of the adiabatic switching as _being_ the spacetime-depependent coupling "constant".

=--

The following lemma \ref{CausalPartition} will be key in the derivation (proof of prop. \ref{CausalLocalityOfThePerturbativeSMatrix} below) of the [[causal locality]] of [[algebra of quantum observables]] in [[perturbative quantum field theory]]:

+-- {: .num_lemma #CausalPartition}
###### Lemma
**(causal partition)**

Let $\mathcal{O} \subset \Sigma$ be a [[causally closed subset]] (def. \ref{CausalComplementOfSubsetOfLorentzianManifold})
and let $f \in C^\infty_{cp}(\Sigma)$ be a [[compact support|compactly supported]] [[smooth function]] which vanishes
on a [[neighbourhood]] $U \supset \mathcal{O}$, i.e. $f\vert_U = 0$.

Then there exists a _causal partition_ of $f$ in that there
exist compactly supported smooth functions $a,r \in C^\infty_{cp}(\Sigma)$
such that

1. they sum up to $f$:

   $$
     f = a + r
   $$

1. their [[support]] satisfies the following causal ordering (def. \ref{CausalOrdering})

   $$
     supp(a) \geq \mathcal{O} \geq supp(r)
     \,.
   $$

=--

+-- {: .proof}
###### Proof idea

By assumption $\mathcal{O}$ has a [[Cauchy surface]]. This may be
extended to a Cauchy surface $\Sigma_p$ of $\Sigma$, such that this is one [[leaf]]
of a [[foliation]] of $\Sigma$ by Cauchy surfaces, given by a [[diffeomorphism]]
$\Sigma \simeq (-1,1) \times \Sigma_p$ with the original $\Sigma_p$ at zero.
There exists then $\epsilon \in (0,1)$ such that
the restriction of $supp(f)$ to the interval $(-\epsilon, \epsilon)$ is
in the [[causal complement]] $\overline{\mathcal{O}}$ of the given region (def. \ref{CausalComplementOfSubsetOfLorentzianManifold}):

$$
  supp(f) \cap (-\epsilon, \epsilon) \times \Sigma_p
  \;\subset\;
  \overline{\mathcal{O}}
  \,.
$$

Let then $\chi \colon \Sigma \to \mathbb{R}$ be any [[smooth function]] with

1. $\chi\vert_{(-1,0] \times \Sigma_p} = 1$

1. $\chi\vert_{(\epsilon,1) \times \Sigma_p} = 0$.

Then

$$
  r \coloneqq \chi \cdot f
  \phantom{AAA}
  \text{and}
  \phantom{AAA}
  a \coloneqq (1-\chi) \cdot f
$$

are smooth functions as required.

=--

$\,$

This concludes our discussion of [[spin]] and [[spacetime]]. In the [next chapter](#Fields) we consider the concept of _[[field (physics)|fields]]_ on [[spacetime]].

$\,$

## Fields
 {#Fields}

A [[field history]] on a given [[spacetime]] $\Sigma$ is a [[quantity]] assigned to each point of spacetime (each [[event]]), such that this assignment varies smoothly with spacetime points. For instance an _[[electromagnetic field]] [[field history|history]]_ (example \ref{Electromagnetism} below) is at each point of spacetime a collection of [[vectors]] that encode the direction in which a [[charged particle]] passing through that point would feel a [[force]] (the "[[Lorentz force]]", see example \ref{Electromagnetism} below).

This is readily formalized (def. \ref{FieldsAndFieldBundles} below): If $F$ denotes the [[smooth manifold]] of "values" that the given kind of field may take at any spacetime point, then a field history $\Phi$ is modeled as a [[smooth function]] from spacetime to this space of values:

$$
  \Phi
    \;\colon\;
   \Sigma
     \longrightarrow
   F
  \,.
$$

It will be useful to unify [[spacetime]] and the space of [[field (physics)|field]] values (the [[field fiber]]) into a single manifold, the [[Cartesian product]]

$$
  E \;\coloneqq\; \Sigma \times F
$$

and to think of this equipped with the [[projection]] map onto the first factor as a [[fiber bundle]] of spaces of field values over spacetime


$$
  \array{
     E &\coloneqq& \Sigma \times F
     \\
     {}^{\mathllap{fb}}\downarrow & \swarrow_{\mathrlap{pr_1}}
     \\
     \Sigma
  }
  \,.
$$

This is then called the _[[field bundle]]_, which specifies the kind of values that the given field species may take at any point of spacetime. Since the space $F$ of field values is the [[fiber]] of this [[fiber bundle]] (def. \ref{FiberBundle}), it is sometimes also called the _[[field fiber]]_. (See also at _[[fiber bundles in physics]]_.)

Given a [[field bundle]] $E \overset{fb}{\to}\Sigma$, then a _[[field history]]_ is a [[section]] of that bundle
(def. \ref{Sections}). The discussion of [[field theory]] concerns the [[space of field histories|space of all possible field histories]],
hence the [[space of sections]] of the [[field bundle]] (example \ref{DiffeologicalSpaceOfFieldHistories} below).
This is a very "large" [[generalized smooth space]], called a _[[diffeological space]]_ (def. \ref{DiffeologicalSpace} below).

Or rather, in the presence of [[fermion fields]] such as the [[Dirac field]] (example \ref{DiracFieldBundle} below),
the [[Pauli exclusion principle]] demands that the [[field bundle]] is a [[supermanifold|super-manifold]],
and that the fermionic [[space of field histories]] (example \ref{DiracSpaceOfFieldHistories} below)
is a [[supergeometry|super-geometric]] [[generalized smooth space]]: a _[[super smooth set]]_ (def. \ref{SuperFormalSmoothSet} below).


This smooth structure on the [[space of field histories]] will be crucial when we discuss [[observables]]
of a [[field theory]] [below](#Observables), because these are smooth functions on the [[space of field histories]].
In particular it is this smooth structure which allows to derive that _linear_ observables of a [[free field theory]]
are given by [[distributions]] (prop. \ref{LinearObservablesAreTheCompactlySupportedDistributions}) below.
Among these are the point evaluation observables ([[delta distributions]]) which are traditionally denoted
by the same symbol as the [[field histories]] themselves.

Hence there are these aspects of the concept of "[[field (physics)|field]]" in [[physics]], which are closely related, but crucially different:

$\,$

**aspects of the concept of [[field (physics)|fields]]**


| aspect | [[term]] | [[type]] |  description | def. |
|--|------------|-|---------|----|
| [[field bundle|field component]] | $\phi^a$, $\phi^a_{,\mu}$ |  $J^\infty_\Sigma(E) \to \mathbb{R}$ |[[coordinate function]] on [[jet bundle]] of [[field bundle]] | def. \ref{FieldsAndFieldBundles}, def. \ref{JetBundleOfTrivialVectorBundleOverMinkowskiSpacetime} |
| [[field history]] | $\Phi$, $\frac{\partial \Phi}{\partial x^\mu}$ | $\Sigma \to J^\infty_\Sigma(E)$  | [[jet prolongation]] of [[section]] of [[field bundle]] | def. \ref{FieldsAndFieldBundles}, def. \ref{JetProlongation}  |
| [[observable|field observable]] | $\mathbf{\Phi}^a(x)$, $\partial_{\mu} \mathbf{\Phi}^a(x),   $ | $\Gamma_{\Sigma}(E) \to \mathbb{R}$  | [[derivative of a distribution|derivatives]] of [[delta-distribution|delta]]-[[functional]] on [[space of sections]] | def. \ref{Observable}, example \ref{PointEvaluationObservables} |
| averaging of [[observable|field observable]] | $\alpha^\ast \mapsto \underset{\Sigma}{\int} \alpha^\ast_a(x) \mathbf{\Phi}^a(x) \, dvol_\Sigma(x)$ | $\Gamma_{\Sigma,cp}(E^\ast) \to Obs(E_{scp},\mathbf{L})$ |  [[operator-valued distribution|observable-valued distribution]]  | def. \ref{RegularLinearFieldObservables} |
| [[algebra of quantum observables]] | $\left( Obs(E,\mathbf{L})_{\mu c},\, \star\right)$  | $\mathbb{C}Alg$  | [[non-commutative algebra]] [[structure]] on [[observable|field observables]] | def. \ref{WickAlgebraOfFreeQuantumField}, def. \ref{GeneratingFunctionsForCorrelationFunctions} |



$\,$

We now discuss these topics:

$\,$

* _[Field bundle](#FieldBundles)_

* _[Space of field histories](#NonFiniteDimensionalGeometry)_

* _[Infinitesimal geometry](#InfinitesimalGeometry)_

* _[Fermion fields and Supergeometry](#Supergeometry)_


$\,$

**[[field bundles]]**
 {#FieldBundles}

+-- {: .num_defn #FieldsAndFieldBundles}
###### Definition
**([[field (physics)|fields]] and [[field histories]])**

Given a [[spacetime]] $\Sigma$, then a _[[type]] of [[field|fields]]_ on $\Sigma$
is a [[smooth set|smooth]] [[fiber bundle]] (def. \ref{FiberBundle})

$$
  \array{E \\ \downarrow^{\mathrlap{fb}} \\ \Sigma }
$$

called the _[[field bundle]]_,

Given a [[type]] of [[field|fields]] on $\Sigma$ this way, then a  _[[field history]]_ of that type on $\Sigma$
is a [[term]] of that [[type]], hence is a smooth  [[section]] (def. \ref{Sections}) of this [[bundle]], namely a [[smooth function]] of the form

$$
  \Phi \;\colon\; \Sigma \longrightarrow E
$$

such that composed with the [[projection]] map it is the [[identity function]], i.e. such that

$$
  fb \circ \Phi = id
  \phantom{AAAAAAA}
  \array{
    && E
    \\
    & {}^{\mathllap{\Phi}}\nearrow & \downarrow^{\mathrlap{fb}}
    \\
    \Sigma & = & \Sigma
  }
  \,.
$$

The set of such [[sections]]/[[field histories]] is to be denoted

$$
 \label{SetOfFieldHistories}
  \Gamma_\Sigma(E)
  \;\coloneqq\;
  \left\{
    \array{
      && E
      \\
      & {}^{\mathllap{\Phi}}\nearrow & \downarrow^{\mathrlap{fb}}
      \\
      \Sigma &=& \Sigma
    }
    \phantom{fb}
  \right\}
$$


=--


+-- {: .num_remark #PossibleFieldHistories}
###### Remark
**([[possible worlds|possible]] field histories)**

After we give the set $\Gamma_\Sigma(E)$ of field histories (eq:SetOfFieldHistories) [[differential geometry|differential geometric]] structure, below in example \ref{DiffeologicalSpaceOfFieldHistories} and example \ref{SupergeometricSpaceOfFieldHistories},
we call it the _[[space of field histories]]_. This should be read as space of _[[possibility|possible]]_ field histories;
containing all field histories that qualify as being of the [[type]] specified by the [[field bundle]] $E$.

After we obtain [[equations of motion]] below in def. \ref{EulerLagrangeEquationsOnTrivialVectorFieldBundleOverMinkowskiSpacetime},
these serve as the "laws of nature" that field histories should obey, and they define the subspace of those
field histories that do solve the equations of motion; this will be denoted

$$
  \Gamma_\Sigma(E)_{\delta_{EL}\mathbf{L}= 0}
    \overset{\phantom{AAA}}{\hookrightarrow}
  \Gamma_\Sigma(E)
$$

and called the _[[on-shell]] [[space of field histories]]_ (eq:InclusionOfOnShellSpaceOfFieldHistories).


=--



For the time being, not to get distracted from the basic idea of
[[quantum field theory]], we will focus on the following simple special case of field bundles:

+-- {: .num_example #TrivialVectorBundleAsAFieldBundle}
###### Example
**([[trivial vector bundle]] as a [[field bundle]])**

In applications the [[field fiber]] $F = V$ is often a [[finite dimensional vector space]].
In this case the [[trivial bundle|trivial]] [[field bundle]] with [[fiber]] $F$ is
of course a _[[trivial vector bundle|trivial]] [[vector bundle]]_ (def. \ref{VectorBundle}).

Choosing any [[linear basis]] $(\phi^a)_{a = 1}^s$ of the field fiber, then over [[Minkowski spacetime]] (def. \ref{MinkowskiSpacetime}) we have canonical [[coordinates]] on the total space of the field bundle

$$
  ( (x^\mu), ( \phi^a ) )
  \,,
$$

where the index $\mu$ ranges from $0$ to $p$, while the index $a$ ranges from 1 to $s$.

If this trivial vector bundle is regarded as a [[field bundle]] according to def. \ref{FieldsAndFieldBundles}, then
a field history $\Phi$ is equivalently an $s$-[[tuple]] of [[real number|real]]-valued [[smooth functions]]
$\Phi^a \colon \Sigma \to \mathbb{R}$ on spacetime:

$$
  \Phi = ( \Phi^a )_{a = 1}^s
  \,.
$$

=--


+-- {: .num_example #RealScalarFieldBundle}
###### Example
**([[field bundle]] for [[real scalar field]])**

If $\Sigma$ is a [[spacetime]] and if the [[field fiber]]

$$
  F \coloneqq \mathbb{R}
$$

is simply the [[real line]], then the corresponding trivial [[field bundle]] (def. \ref{FieldsAndFieldBundles})

$$
  \array{
    \Sigma \times \mathbb{R}
    \\
    {}^{\mathllap{pr_1}}\downarrow
    \\
    \Sigma
  }
$$

is the _[[trivial fiber bundle|trivial]] [[real line bundle]]_ (a special case of example \ref{TrivialVectorBundleAsAFieldBundle}) and the corresponding [[field (physics)|field]] type (def. \ref{FieldsAndFieldBundles}) is called the _[[real scalar field]]_ on $\Sigma$. A configuration of this field is simply a [[smooth function]] on $\Sigma$ with values in the [[real numbers]]:

$$
  \label{SpaceOfFieldHistoriesOfRealScalarField}
  \Gamma_\Sigma(\Sigma \times \mathbb{R})
    \;\simeq\;
  C^\infty(\Sigma)
  \,.
$$

=--


+-- {: .num_example #Electromagnetism}
###### Example
**([[field bundle]] for [[electromagnetic field]])**

On [[Minkowski spacetime]] $\Sigma$ (def. \ref{MinkowskiSpacetime}), let the [[field bundle]] (def. \ref{FieldsAndFieldBundles}) be given by the
[[cotangent bundle]]

$$
  E \coloneqq T^\ast \Sigma
  \,.
$$

This is a [[trivial vector bundle]] (example \ref{TrivialVectorBundleAsAFieldBundle}) with canonical [[field (physics)|field]]
coordinates $(a_\mu)$.

A [[section]] of this bundle, hence a [[field (physics)|field]] [[trajectory]]/history, is a [[differential 1-form]]

$$
  A \in \Gamma_\Sigma(T^\ast \Sigma) = \Omega^1(\Sigma)
$$

on [[spacetime]]. Interpreted as the field of [[electromagnetism]] on $\Sigma$, this is often called the _[[vector potential]]_.
Then the [[de Rham differential]] (def. \ref{deRhamDifferential}) of the [[vector potential]] is a [[differential 2-form]]

$$
  F \coloneqq d A
$$

known as the _[[Faraday tensor]]_. In the canonical coordinate basis 2-forms this may be expanded as

$$
  \label{TensorFaraday}
  F
  =
  \underoverset{i = 1}{p}{\sum}
  E_i d x^0 \wedge d x^i
  +
  \underset{1 \leq i \lt j \leq p}{\sum}
  B_{i j} d x^i \wedge d x^j
  \,.
$$

Here $(E_i)_{i = 1}^p$ are called the components of the _[[electric field]]_, while $(B_{i j})$ are called the
components of the _[[magnetic field]]_.

=--



+-- {: .num_example #YangMillsFieldOverMinkowski}
###### Example
**([[field bundle]] for [[Yang-Mills theory|Yang-Mills]] [[field (physics)|field]] over [[Minkowski spacetime]])**

Let $\mathfrak{g}$ be a [[Lie algebra]] of [[finite number|finite]] [[dimension]] with [[linear basis]]
$(t_\alpha)$, in terms of which the [[Lie bracket]] is given by

$$
  \label{LieAlgebraStructureConstants}
  [t_\alpha, t_\beta]
  \;=\;
  C^\gamma{}_{\alpha \beta} t_\gamma
  \,.
$$

Over [[Minkowski spacetime]] $\Sigma$ (def. \ref{MinkowskiSpacetime}),
consider then the [[field bundle]] which is the [[cotangent bundle]] [[tensor product|tensored]] with the [[Lie algebra]] $\mathfrak{g}$

$$
  E \coloneqq T^\ast \Sigma \otimes \mathfrak{g}
  \,.
$$

This is the [[trivial vector bundle]] (example \ref{TrivialVectorBundleAsAFieldBundle}) with induced [[field (physics)|field]] [[coordinates]]

$$
  ( a_\mu^\alpha )
  \,.
$$

A [[section]] of this bundle is a [[Lie algebra-valued differential 1-form]]

$$
  A \in \Gamma_\Sigma(T^\ast \Sigma \otimes \mathfrak{g}) = \Omega^1(\Sigma, \mathfrak{g})
  \,.
$$

with components

$$
  A^\ast(a_\mu^\alpha) = A^\alpha_\mu
  \,.
$$

This is called a field history for _[[Yang-Mills theory|Yang-Mills]] [[gauge theory]]_.

For $\mathfrak{g} = \mathbb{R}$ is the [[line Lie algebra]], this reduces to the case of the [[electromagnetic field]] (example \ref{Electromagnetism}).

For $\mathfrak{g} = \mathfrak{su}(3)$ this is a [[field (physics)|field]] history for the [[gauge field]] of the [[strong nuclear force]] in [[quantum chromodynamics]].


=--

For readers familiar with the concepts of _[[principal bundles]]_ and _[[connections on a bundle]]_
we include the following example \ref{YangMillsFieldInInstantonSector} which generalizes the
[[Yang-Mills field]] over [[Minkowski spacetime]] from example \ref{YangMillsFieldOverMinkowski}
to the situation over general [[spacetimes]].

+-- {: .num_example #YangMillsFieldInInstantonSector}
###### Example
**(general [[Yang-Mills theory|Yang-Mills]] [[field (physics)|field]] in fixed [[instanton|topological sector]])**

Let $\Sigma$ be any [[spacetime]] [[manifold]] and let $G$ be a [[compact Lie group]]
with [[Lie algebra]] denoted $\mathfrak{g}$. Let $P \overset{is}{\to} \Sigma$ be a
$G$-[[principal bundle]] and $\nabla_0$ a chosen [[connection on a bundle|connection]] on it,
to be called the [[background field|background]] $G$-[[Yang-Mills theory|Yang-Mills]] field.

Then the [[field bundle]] (def. \ref{FieldsAndFieldBundles}) for $G$-[[Yang-Mills theory]] _in the [[instanton|topological sector]]_ $P$
is the [[tensor product of vector bundles]]

$$
  E \coloneqq \left(P \times^{ad}_G \mathfrak{g}\right) \otimes_\Sigma \left( T^\ast \Sigma \right)
$$

of the [[adjoint bundle]] of $P$ and the [[cotangent bundle]] of $\Sigma$.

With the choice of $\nabla_0$, every (other) connection $\nabla$ on $P$ uniquely decomposes as

$$
  \nabla = \nabla_0 + A
  \,,
$$

where

$$
  A \in \Gamma_\Sigma(E)
$$

is a [[section]] of the above [[field bundle]], hence a Yang-Mills field.


=--

$\,$

**[[space of field histories]]**
 {#NonFiniteDimensionalGeometry}

Given any [[field bundle]], we will eventually need to regard the set of all [[field histories]] $\Gamma_\Sigma(E)$
as a "[[smooth set]]" itself, a smooth _[[space of sections]]_, to which
constructions of [[differential geometry]] apply (such as for the discussion of [[observables]] and [[states]] [below](#Observables) ). Notably we need to be talking about [[differential forms]] on $\Gamma_\Sigma(E)$.

However, a [[space of sections]] $\Gamma_\Sigma(E)$ does not in general carry the structure of a [[smooth manifold]];
and it carries the correct smooth structure of an [[infinite dimensional manifold]]
only if $\Sigma$ is a [[compact space]] (see at _[[manifold structure of mapping spaces]]_).
Even if it does carry [[infinite dimensional manifold]] structure, inspection shows that
this is more [[structure]] than actually needed for the discussion of [[field theory]].
Namely it turns out below that all we need to know is what counts as
a _smooth family_ of [[sections]]/[[field histories]], hence which [[functions]] of [[sets]]

$$
  \Phi_{(-)} \;\colon\; \mathbb{R}^n \longrightarrow \Gamma_\Sigma(E)
$$

from any [[Cartesian space]] $\mathbb{R}^n$ (def. \ref{CartesianSpacesAndSmoothFunctionsBetweenThem}) into $\Gamma_\Sigma(E)$ count as [[smooth functions]],
subject to some basic consistency condition on this choice.

This [[structure]] on $\Gamma_\Sigma(E)$ is called the structure of a _[[diffeological space]]_:

+-- {: .num_defn #DiffeologicalSpace}
###### Definition
**([[diffeological space]])**

A _[[diffeological space]]_ $X$ is

1. a [[set]] $X_s \in $ [[Set]];

1. for each $n \in \mathbb{N}$ a choice of [[subset]]

   $$
     X(\mathbb{R}^n) \subset Hom_{Set}(\mathbb{R}^n_s, X_s) = \left\{ \mathbb{R}^n_s \to X_s  \right\}
   $$

   of the [[function set|set of functions]] from the underlying set $\mathbb{R}^n_s$ of $\mathbb{R}^n$ to $X_s$,
   to be called the _smooth functions_ or _plots_ from $\mathbb{R}^n$ to $X$;

1. for each [[smooth function]] $f \;\colon\; \mathbb{R}^{n_1} \longrightarrow \mathbb{R}^{n_2}$
   between [[Cartesian spaces]] (def. \ref{CartesianSpacesAndSmoothFunctionsBetweenThem}) a choice of function

   $$
     f^\ast \;\colon\; X(\mathbb{R}^{n_2}) \longrightarrow X(\mathbb{R}^{n_1})
   $$

   to be thought of as the precomposition operation

   $$
     \left(
       \mathbb{R}^{n_2} \overset{\Phi}{\longrightarrow} X
     \right)
     \;\overset{f^\ast}{\mapsto}\;
     \left(
       \mathbb{R}^{n_1} \overset{f}{\to} \mathbb{R}^{n_2} \overset{\Phi}{\to} X
     \right)
   $$

such that

1. ([[constant functions]] are smooth)

   $$
     X(\mathbb{R}^0) = X_s
     \,,
   $$

1. ([[functor|functoriality]])

   1. If $id_{\mathbb{R}^n} \;\colon\; \mathbb{R}^n \to \mathbb{R}^n$ is the [[identity function]] on $\mathbb{R}^n$, then $\left(id_{\mathbb{R}^n}\right)^\ast \;\colon\; X(\mathbb{R}^n) \to X(\mathbb{R}^n)$ is the identity function on the set of plots $X(\mathbb{R}^n)$;

   1. If  $\mathbb{R}^{n_1} \overset{f}{\to} \mathbb{R}^{n_2} \overset{g}{\to} \mathbb{R}^{n_3}$ are two [[composition|composable]] [[smooth functions]] between [[Cartesian spaces]] (def. \ref{CartesianSpacesAndSmoothFunctionsBetweenThem}), then pullback of plots along them consecutively equals the pullback along the [[composition]]:

      $$
        f^\ast \circ g^\ast
        =
        (g \circ f)^\ast
      $$

      i.e.

      $$
        \array{
          && X(\mathbb{R}^{n_2})
          \\
          & {}^{\mathllap{f^\ast}}\swarrow && \nwarrow^{\mathrlap{g^\ast}}
          \\
          X(\mathbb{R}^{n_1})
          && \underset{ (g \circ f)^\ast }{\longleftarrow} &&
          X(\mathbb{R}^{n_3})
        }
      $$

1. ([[sheaf|gluing]])

   If $\{ U_i \overset{f_i}{\to} \mathbb{R}^n\}_{i \in I}$ is a [[differentiably good open cover]] of a [[Cartesian space]]
   (def. \ref{DifferentiablyGoodOpenCover}) then the function which restricts
   $\mathbb{R}^n$-plots of $X$ to a set of $U_i$-plots

   $$
     X(\mathbb{R}^n)
       \overset{( (f_i)^\ast )_{i \in I}  }{\hookrightarrow}
     \underset{i \in I}{\prod} X(U_i)
   $$

   is a [[bijection]] onto the set of those [[tuples]] $(\Phi_i \in X(U_i))_{i \in I}$ of plots,
   which are "[[matching families]]" in that they agree on [[intersections]]:

   $$
     \phi_i\vert_{U_i \cap U_j} = \phi_j \vert_{U_i \cap U_j}
     \phantom{AAAAAA}
     \array{
       && U_i \cap U_j
       \\
       & \swarrow && \searrow
       \\
       U_i && && U_j
       \\
       & {}_{\mathrlap{\Phi_i}}\searrow && \swarrow_{\mathrlap{\Phi_j}}
       \\
       && X
     }
   $$

Finally, given $X_1$ and $X_2$ two diffeological spaces, then a [[smooth function]] between them

$$
  f \;\colon\; X_1 \longrightarrow X_2
$$

is

* a [[function]] of the underlying sets

  $$
    f_s \;\colon\; (X_1)_s \longrightarrow (X_2)_s
  $$

such that

* for $\Phi \in X(\mathbb{R}^n)$ a plot of $X_1$, then the [[composition]]
  $f_s \circ \Phi_s$ is a plot $f_\ast(\Phi)$ of $X_2$:

  $$
    \array{
      && \mathbb{R}^n
      \\
      & {}^{\mathllap{\Phi}}\swarrow && \searrow^{\mathrlap{f_\ast(\Phi)}}
      \\
      X_1 && \underset{f}{\longrightarrow} && X_2
    }
    \,.
  $$

(Stated more [[category theory|abstractly]], this says simply that [[diffeological spaces]]
are the [[concrete sheaves]] on the [[site]] of [[Cartesian spaces]] from def. \ref{DifferentiablyGoodOpenCover}.)

=--

For more background on [[diffeological spaces]] see also _[[geometry of physics -- smooth sets]]_.


+-- {: .num_example #SmoothManifoldsAreDiffeologicalSpaces}
###### Example
**([[Cartesian spaces]] are [[diffeological spaces]])**

Let $X$ be a [[Cartesian space]] (def. \ref{CartesianSpacesAndSmoothFunctionsBetweenThem}) Then it becomes a [[diffeological space]] (def. \ref{DiffeologicalSpace})
by declaring its plots $\Phi \in X(\mathbb{R}^n)$ to the ordinary [[smooth functions]]
$\Phi \colon \mathbb{R}^n \to X$.

Under this identification, a function $f \;\colon\; (X_1)_s \to (X_2)_s$ between the underlying sets
of two [[Cartesian spaces]] is a [[smooth function]] in the ordinary sense
precisely if it is a smooth function in the sense of [[diffeological spaces]].

Stated more [[category theory|abstractly]], this statement is an example of the _[[Yoneda embedding]]_
over a _[[subcanonical site]]_.

More generally, the same construction makes every [[smooth manifold]] a [[smooth set]].

=--


+-- {: .num_example #DiffeologicalSpaceOfFieldHistories}
###### Example
**([[diffeological space|diffeological]] [[space of field histories]])**

Let $E \overset{fb}{\to} \Sigma$ be a smooth [[field bundle]] (def. \ref{FieldsAndFieldBundles}).
Then the set $\Gamma_\Sigma(E)$ of [[field histories]]/[[sections]] (def. \ref{FieldsAndFieldBundles})
becomes a [[diffeological space]] (def. \ref{DiffeologicalSpace})

$$
  \label{SpaceOfFieldHistories}
  \Gamma_\Sigma(E) \in DiffeologicalSpaces
$$

by declaring that a smooth family $\Phi_{(-)}$ of field histories,
parameterized over any [[Cartesian space]] $U$ is a smooth function out of the [[Cartesian product]]
manifold of $\Sigma$ with $U$

$$
  \array{
    U \times \Sigma &\overset{\Phi_{(-)}(-)}{\longrightarrow}& E
    \\
    (u,x) &\mapsto& \Phi_u(x)
  }
$$

such that for each $u \in U$ we have $p \circ \Phi_{u}(-) = id_\Sigma$, i.e.

$$
  \array{
    && E
    \\
    & {}^{\mathllap{\Phi_{(-)}(-)}}\nearrow & \downarrow^{\mathrlap{fb}}
    \\
    U \times \Sigma &\underset{pr_2}{\longrightarrow}& \Sigma
  }
  \,.
$$

=--

The following example \ref{FrechetManifoldsAreDiffeologicalSpaces} is included only for readers who wonder how [[infinite-dimensional manifolds]]
fit in. Since we will never actually use [[infinite-dimensional manifold]]-structure, this example is may be ignored.

+-- {: .num_example #FrechetManifoldsAreDiffeologicalSpaces}
###### Example
**([[Fréchet manifolds]] are [[diffeological spaces]])**

Consider the particular type of [[infinite-dimensional manifolds]] called _[[Fréchet manifolds]]_.
Since ordinary [[smooth manifolds]] $U$ are an example, for $X$ a [[Fréchet manifold]] there is
a concept of [[smooth functions]] $U \to X$. Hence we may give $X$ the structure of a
[[diffeological space]] (def. \ref{DiffeologicalSpace}) by declaring the plots over
$U$ to be these smooth functions $U \to X$, with the evident postcomposition action.

It turns out that then that for $X$ and $Y$ two [[Fréchet manifolds]],
there is a [[natural bijection]] between the [[smooth functions]]
$X \to Y$ between them regarded as [[Fréchet manifolds]] and [regarded as [[diffeological spaces]].
Hence it does not matter which of the two perspectives we take (unless of course a [[diffeological space]]
more general than a [[Fréchet manifolds]] enters the picture, at which point the second definition generalizes,
whereas the first does not).

Stated more [[category theory|abstractly]], this means that [[Fréchet manifolds]] form a [[full subcategory]]
of that of [[diffeological spaces]] ([this prop.](Fréchet+manifold#FFEmbeddingOfFrechetInDiffeological)):

$$
  FrechetManifolds \hookrightarrow DiffeologicalSpaces
  \,.
$$

If $\Sigma$ is a [[compact space|compact]] [[smooth manifold]] and $E \simeq \Sigma \times F \to \Sigma$
is a [[trivial fiber bundle]] with [[fiber]] $F$ a [[smooth manifold]], then the set of [[sections]] $\Gamma_\Sigma(E)$ carries
a standard structure of a [[Fréchet manifold]] (see at _[[manifold structure of mapping spaces]]_).
Under the above inclusion of [[Fréchet manifolds]] into [[diffeological spaces]], this [[smooth structure]] agrees with
that from example \ref{DiffeologicalSpaceOfFieldHistories} (see [this prop.](Fréchet+manifold#CompatibilityWithDiffeologicalMappingSpaces))

=--


Once the step from [[smooth manifolds]] to [[diffeological spaces]] (def. \ref{DiffeologicalSpace}) is made,
characterizing the [[smooth structure]] of the space entirely by how we may probe it by mapping
smooth Cartesian spaces into it, it becomes clear that the underlying set $X_s$ of a diffeological space $X$
is not actually crucial to support the concept: The space is already entirely defined [[structuralism|structurally]]
by the system of smooth plots it has, and the underlying set $X_s$ is recovered from these as the set of plots
from the point $\mathbb{R}^0$.

This is crucial for [[field theory]]: the [[spaces of field histories]] of [[fermionic fields]] (def. \ref{FermionicBosonicFields} below)
such as the _[[Dirac field]]_ (example \ref{DiracSpaceOfFieldHistories} below) do not have underlying
sets of points the way [[diffeological spaces]] have. Informally, the reason is that a point
is a [[bosonic]] object, while and the nature of [[fermionic fields]] is [[antimodal type|the opposite of]]
bosonic.

But we may just as well drop the mentioning of the underlying set $X_s$ in the definition of [[generalized smooth spaces]].
By simply stripping this requirement off of def. \ref{DiffeologicalSpace} we obtain the following
more general and more useful definition (still "bosonic", though, the [[supergeometry|supergeometric]] version
is def. \ref{SuperFormalSmoothSet} below):

+-- {: .num_defn #SmoothSet}
###### Definition
**([[smooth set]])**

A _[[smooth set]]_ $X$ is

1. for each $n \in \mathbb{N}$ a choice of [[set]]

   $$
     X(\mathbb{R}^n) \in Set
   $$

   to be called the set of _smooth functions_ or _plots_ from $\mathbb{R}^n$ to $X$;

1. for each [[smooth function]] $f \;\colon\; \mathbb{R}^{n_1} \longrightarrow \mathbb{R}^{n_2}$
   between [[Cartesian spaces]] a choice of function

   $$
     f^\ast \;\colon\; X(\mathbb{R}^{n_2}) \longrightarrow X(\mathbb{R}^{n_1})
   $$

   to be thought of as the precomposition operation

   $$
     \left(
       \mathbb{R}^{n_2} \overset{\Phi}{\longrightarrow} X
     \right)
     \;\overset{f^\ast}{\mapsto}\;
     \left(
       \mathbb{R}^{n_1} \overset{f}{\to} \mathbb{R}^{n_2} \overset{\Phi}{\to} X
     \right)
   $$

such that

1. ([[functor|functoriality]])

   1. If $id_{\mathbb{R}^n} \;\colon\; \mathbb{R}^n \to \mathbb{R}^n$ is the [[identity function]] on $\mathbb{R}^n$, then $\left(id_{\mathbb{R}^n}\right)^\ast \;\colon\; X(\mathbb{R}^n) \to X(\mathbb{R}^n)$ is the [[identity function]] on the set of plots $X(\mathbb{R}^n)$.

   1. If $\mathbb{R}^{n_1} \overset{f}{\to} \mathbb{R}^{n_2} \overset{g}{\to} \mathbb{R}^{n_3}$ are two [[composition|composable]] [[smooth functions]] between [[Cartesian spaces]], then consecutive pullback of plots along them equals the pullback along the [[composition]]:

      $$
        f^\ast \circ g^\ast
        =
        (g \circ f)^\ast
      $$

      i.e.

      $$
        \array{
          && X(\mathbb{R}^{n_2})
          \\
          & {}^{\mathllap{f^\ast}}\swarrow && \nwarrow^{\mathrlap{g^\ast}}
          \\
          X(\mathbb{R}^{n_1})
          && \underset{ (g \circ f)^\ast }{\longleftarrow} &&
          X(\mathbb{R}^{n_3})
        }
      $$

1. ([[sheaf|gluing]])

   If $\{ U_i \overset{f_i}{\to} \mathbb{R}^n\}_{i \in I}$ is a [[differentiably good open cover]] of a [[Cartesian space]] (def. \ref{DifferentiablyGoodOpenCover})
   then the function which restricts
   $\mathbb{R}^n$-plots of $X$ to a set of $U_i$-plots

   $$
     X(\mathbb{R}^n)
       \overset{( (f_i)^\ast )_{i \in I}  }{\hookrightarrow}
     \underset{i \in I}{\prod} X(U_i)
   $$

   is a [[bijection]] onto the set of those [[tuples]] $(\Phi_i \in X(U_i))_{i \in I}$ of plots,
   which are "[[matching families]]" in that they agree on [[intersections]]:

   $$
     \phi_i\vert_{U_i \cap U_j} = \phi_j \vert_{U_i \cap U_j}
     \phantom{AAAA}
     \text{i.e.}
     \phantom{AAAA}
     \array{
       && U_i \cap U_j
       \\
       & \swarrow && \searrow
       \\
       U_i && && U_j
       \\
       & {}_{\mathrlap{\Phi_i}}\searrow && \swarrow_{\mathrlap{\Phi_j}}
       \\
       && X
     }
   $$

Finally, given $X_1$ and $X_2$ two [[smooth sets]], then a [[smooth function]] between them

$$
  f \;\colon\; X_1 \longrightarrow X_2
$$

is

* for each $n \in \mathbb{N}$ a [[function]]

  $$
    f_\ast(\mathbb{R}^n)
    \;\colon\;
    X_1(\mathbb{R}^n) \longrightarrow X_2(\mathbb{R}^n)
  $$

such that

* for each [[smooth function]] $g \colon \mathbb{R}^{n_1} \to \mathbb{R}^{n_2}$ between [[Cartesian spaces]] we have

  $$
    g^\ast_2 \circ f_\ast(\mathbb{R}^{n_2})
    =
    f_\ast(\mathbb{R}^{n_1}) \circ g^\ast_1
    \phantom{AAAAA}
    \text{i.e.}
    \phantom{AAAAA}
    \text{i.e.}
    \phantom{AAAAA}
    \array{
      X_1(\mathbb{R}^{n_2})
        &\overset{f_\ast(\mathbb{R}^{n_2})}{\longrightarrow}&
      X_2(\mathbb{R}^{n_2})
      \\
      \mathllap{g_1^\ast}\downarrow && \downarrow\mathrlap{g^\ast_2}
      \\
      X_1(\mathbb{R}^{n_1})
        &\underset{f_\ast(\mathbb{R}^{n_1})}{\longrightarrow}&
      X_2(\mathbb{R}^{n_1})
    }
  $$

Stated more [[category theory|abstractly]], this simply says that [[smooth sets]] are the _[[sheaves]]
on the [[site]] of [[Cartesian spaces]] from def. \ref{DifferentiablyGoodOpenCover}.

=--

Basing [[differential geometry]] on [[smooth sets]] is an instance of the general approach to [[geometry]] called _[[functorial geometry]]_
or _[[topos theory]]_. For more background on this see at _[[geometry of physics -- smooth sets]]_.

First we verify that the concept of smooth sets is a consistent generalization:

+-- {: .num_example #SmoothSetsDiffeologicalSpaces}
###### Example
**([[diffeological spaces]] are [[smooth sets]])**

Every [[diffeological space]] $X$ (def. \ref{DiffeologicalSpace}) is a [[smooth set]] (def. \ref{SmoothSet})
simply by [[forgetful functor|forgetting]] its underlying set of points and remembering only its sets of plot.

In particular therefore each [[Cartesian space]] $\mathbb{R}^n$ is canonically a [[smooth set]]
by example \ref{SmoothManifoldsAreDiffeologicalSpaces}.

Moreover, given any two [[diffeological spaces]], then the [[morphisms]] $f \colon X \to Y$
between them, regarded as diffeological spaces, are [[natural bijection|the same]] as the morphisms
as [[smooth sets]].

Stated more [[category theory|abstractly]], this means that we have [[full subcategory]] inclusions

$$
  CartesianSpaces
    \overset{\phantom{AAA}}{\hookrightarrow}
  DiffeologicalSpaces
    \overset{\phantom{AAA}}{\hookrightarrow}
  SmoothSets
  \,.
$$

=--


Recall, for the next proposition \ref{CartSpYpnedaLemma},  that
in the definition \ref{SmoothSet} of a [[smooth set]] $X$ the sets $X(\mathbb{R}^n)$
are abstract sets which are _to be thought of_ as would-be smooth functions "$\mathbb{R}^n \to X$".
Inside def. \ref{SmoothSet} this only makes sense in quotation marks, since inside that definition
the smooth set $X$ is only being defined, so that inside that definition there is not yet an actual
concept of smooth functions of the form "$\mathbb{R}^n \to X$".


But now that the definition of [[smooth sets]] and of [[morphisms]] between them has been stated,
and seeing that [[Cartesian space]] $\mathbb{R}^n$ are examples of [[smooth sets]], by
example \ref{SmoothSetsDiffeologicalSpaces}, there is now an actual concept of
smooth functions $\mathbb{R}^n \to X$, namely as smooth sets.
For the concept of smooth sets to be consistent, it ought to be true that this
_a posteriori_ concept of smooth functions from [[Cartesian spaces]] to [[smooth sets]]
coincides wth the _a priori_ concept, hence that we "may remove the quotation marks" in the above.
The following proposition says that this is indeed the case:


+-- {: .num_prop #CartSpYpnedaLemma}
###### Proposition
**(plots of a [[smooth set]] really are the [[smooth functions]] into the smooth set)**

Let $X$ be a [[smooth set]] (def. \ref{SmoothSet}). For $n \in \mathbb{R}$, there is a [[natural transformation|natural]] [[function]]

$$
  Hom_{SmoothSet}(\mathbb{R}^n , X) \overset{\phantom{AA}\simeq\phantom{AA}}{\longrightarrow} X(\mathbb{R}^n)
$$

from the set of homomorphisms of smooth sets from $\mathbb{R}^n$ (regarded as a smooth set via example \ref{SmoothSetsDiffeologicalSpaces})
to $X$, to the set of plots of $X$ over $\mathbb{R}^n$, given by evaluating on the [[identity function|identity]] plot $id_{\mathbb{R}^n}$.

This function is a _[[bijection]]_.

This says that the plots of $X$, which initially bootstrap $X$ into being as declaring the _would-be_ smooth functions
into $X$, end up being the _actual_ smooth functions into $X$.

=--


+-- {: .proof}
###### Proof

This elementary but profound fact is called the _[[Yoneda lemma]]_, here in its incarnation over the [[site]] of [[Cartesian spaces]] (def. \ref{CartesianSpacesAndSmoothFunctionsBetweenThem}).

=--


A key class of examples of [[smooth sets]] (def. \ref{SmoothSet}) that are not [[diffeological spaces]] (def. \ref{DiffeologicalSpace})
are universal smooth [[moduli spaces]] of [[differential forms]]:


+-- {: .num_example #UniversalSmoothModuliSpaceOfDifferentialForms}
###### Example
**(universal [[smooth set|smooth]] [[moduli spaces]] of [[differential forms]])**

For $k \in \mathbb{N}$ there is a [[smooth set]] (def. \ref{SmoothSet})

$$
  \mathbf{\Omega}^k \;\in\; SmoothSet
$$

defined as follows:

1. for $n \in \mathbb{N}$ the set of plots from $\mathbb{R}^n$ to $\mathbf{\Omega}^k$ is the
   set of smooth [[differential forms|differential k-forms]] on $\mathbb{R}^n$ (def. \ref{DifferentialnForms})

   $$
     \mathbf{\Omega}^k(\mathbb{R}^n) \;\coloneqq\; \Omega^k(\mathbb{R}^n)
   $$

1. for $f \colon \mathbb{R}^{n_1} \to \mathbb{R}^{n_2}$ a [[smooth function]] (def. \ref{CartesianSpacesAndSmoothFunctionsBetweenThem})
   the operation of fullback of plots along $f$ is just the [[pullback of differential forms]] $f^\ast$ from prop. \ref{PullbackOfDifferentialForms}
   $$
     \array{
       \mathbb{R}^{n_1} && \Omega^k(\mathbb{R}^{n_1})
       \\
       \downarrow^{\mathrlap{f}} && \uparrow^{\mathrlap{f^\ast}}
       \\
       \mathbb{R}^{n_2} && \Omega^k(\mathbb{R}^{n_2})
     }
   $$

That this is [[functor|functorial]] is just the standard fact (eq:PullbackOfDiffereentialFormsCompatibleWithComposition) from prop. \ref{PullbackOfDifferentialForms}.

For $k = 1$ the smooth set $\mathbf{\Omega}^0$ actually is a [[diffeological space]], in fact
under the identification of example \ref{SmoothSetsDiffeologicalSpaces} this is just the [[real line]]:

$$
  \mathbf{\Omega}^0 \simeq \mathbb{R}^1
  \,.
$$

But for $k \geq 1$ we have that the set of plots on $\mathbb{R}^0 = \ast$ is a [[singleton]]

$$
  \mathbf{\Omega}^{k \geq 1}(\mathbb{R}^0) \simeq \{0\}
$$

consisting just of the zero differential form. The only diffeological space with this property is
$\mathbb{R}^0 = \ast$ itself. But $\mathbf{\Omega}^{k \geq 1}$ is far from being that trivial:
even though its would-be underlying set is a single point, for all $n \geq k$ it admits
an infinite set of plots. Therefore the smooth sets $\mathbf{\Omega}^k$ for $k \geq$ are not
diffeological spaces.

That the [[smooth set]] $\mathbf{\Omega}^k$ indeed deserves to be addressed as the _universal [[moduli space]] of [[differential n-forms|differential k-forms]]_ follows from prop. \ref{CartSpYpnedaLemma}: The universal moduli space of $k$-forms
ought to carry a universal differential $k$-forms $\omega_{univ} \in \Omega^k(\mathbf{\Omega}^k)$
such that every differential $k$-form $\omega$ on any $\mathbb{R}^n$ arises as the [[pullback of differential forms]]
of this universal one along some _[[modulating morphism]]_ $f_\omega \colon X \to \mathbf{\Omega}^k$:

$$
  \array{
    \{\omega\} &\overset{(f_\omega)^\ast}{\longleftarrow}& \{\omega_{univ}\}
    \\
    \\
    X &\underset{f_\omega}{\longrightarrow}& \mathbf{\Omega}^k
  }
$$

But with prop. \ref{CartSpYpnedaLemma} this is precisely what the definition of the plots of $\mathbf{\Omega}^k$ says.

Similarly, all the usual operations on differential form now have their universal archetype on the
universal [[moduli spaces]] of differential forms

In particular, for $k \in \mathbb{N}$ there is a canonical [[morphism]] of [[smooth sets]] of the form

$$
  \mathbf{\Omega}^k \overset{\mathbf{d}}{\longrightarrow} \mathbf{\Omega}^{k+1}
$$

defined over $\mathbb{R}^n$ by the ordinary [[de Rham differential]] (def. \ref{deRhamDifferential})

$$
  \label{deRhamDifferentialUniversal}
  \Omega^k(\mathbb{R}^n) \overset{d}{\longrightarrow} \Omega^{k+1}(\mathbb{R}^n)
  \,.
$$

That this satisfies the compatibility with precomposition of plots

$$
  \array{
    \mathbb{R}^{n_1} && \Omega^k(\mathbb{R}^{n_1}) &\overset{d}{\longrightarrow}& \Omega^{k+1}(\mathbb{R}^{n_1})
    \\
    {}^{\mathllap{f}}\downarrow && \uparrow^{\mathrlap{f^\ast}} && \uparrow^{\mathrlap{f^\ast}}
    \\
    \mathbb{R}^{n_2} && \Omega^k(\mathbb{R}^{n_2}) &\underset{d}{\longrightarrow}& \Omega^k( \mathbb{R}^{n_2} )
  }
$$

is just the compatibility of [[pullback of differential forms]] with the [[de Rham differential]] of from prop. \ref{PullbackOfDifferentialForms}.

=--

The upshot is that we now have a good definition of [[differential forms]] on any [[diffeological space]]
and more generally on any [[smooth set]]:


+-- {: .num_defn #DifferentialFormsOnDiffeologicalSpaces}
###### Definition
**([[differential forms]] on [[smooth sets]])**

Let $X$ be a [[diffeological space]] (def. \ref{DiffeologicalSpace})
or more generally a [[smooth set]] (def. \ref{SmoothSet}) then a [[differential form|differential k-form]]
$\omega$ on $X$ is equivalently a [[morphism]] of [[smooth sets]]

$$
  X \longrightarrow \mathbf{\Omega}^k
$$

from $X$ to the universal [[smooth set|smooth]] [[moduli space]] of differential froms from
example \ref{UniversalSmoothModuliSpaceOfDifferentialForms}.

Concretely, by unwinding the definitions of $\mathbf{\Omega}^k$ and of [[morphisms]] of smooth sets, this
means that such a differential form is:

* for each $n \in \mathbb{N}$ and each plot $\mathbb{R}^n \overset{\Phi}{\to} X$
  an ordinary [[differential form]]

  $$
    \Phi^\ast(\omega) \in \Omega^\bullet(\mathbb{R}^n)
  $$

such that

* for each [[smooth function]] $f \;\colon\; \mathbb{R}^{n_1} \to \mathbb{R}^{n_2}$ between [[Cartesian spaces]]
  the ordinary [[pullback of differential forms]] along $f$ is compatible with these choices, in that
  for every plot $\mathbb{R}^{n_2} \overset{\Phi}{\to} X$ we have

  $$
    f^\ast\left(\Phi^\ast(\omega)\right)
    =
    ( f^\ast \Phi )^\ast(\omega)
  $$

  i.e.

  $$
    \array{
      \mathbb{R}^{n_1} && \overset{f}{\longrightarrow} && \mathbb{R}^{n_2}
      \\
      & {}_{\mathllap{f^\ast \Phi}}\searrow && \swarrow_{\mathrlap{\Phi}}
      \\
      && X
    }
    \phantom{AAAA}
    \array{
      \Omega^\bullet( \mathbb{R}^{n_1} ) && \overset{f^\ast}{\longleftarrow} && \Omega^\bullet(\mathbb{R}^{n_2})
      \\
      & {}_{\mathllap{(f^\ast \Phi)^\ast}}\nwarrow && \nearrow_{\mathrlap{\Phi^\ast}}
      \\
      && \Omega^\bullet(X)
    }
    \,.
  $$

We write $\Omega^\bullet(X)$ for the set of differential forms on the smooth set $X$
defined this way.

Moreover, given a [[differential form|differential k-form]]

$$
  X \overset{\omega}{\longrightarrow} \mathbf{\Omega}^k
$$

on a [[smooth set]] $X$ this way, then its [[de Rham differential]] $d \omega \in \Omega^{k+1}(X)$ is
given by the [[composition|composite]]
of [[morphisms]] of [[smooth sets]] with the universal de Rham differential from (eq:deRhamDifferentialUniversal):


$$
  \label{FormsOnSmoothSetDeRhamDifferential}
  d \omega
    \;\colon\;
  X
    \overset{\omega}{\longrightarrow}
  \mathbf{\Omega}^k
    \overset{d}{\longrightarrow}
  \mathbf{\Omega}^{k+1}
  \,.
$$

Explicitly this means simply that for $\Phi \colon U \to X$ a plot, then

$$
  \Phi^\ast (d\omega)
  \;=\;
  d\left( \Phi^\ast \omega\right)
  \;\in\;
  \Omega^{k+1}(U)
  \,.
$$

=--


The usual operations on ordinary [[differential forms]] directly generalize plot-wise
to differential forms on [[diffeological spaces]] and more generally on [[smooth sets]]:

+-- {: .num_defn #ExteriorCalculusOnDiffeologicalSpaces}
###### Definition
**([[exterior differential]] and [[exterior product]] on [[smooth sets]])**

Let $X$ be a [[diffeological space]] (def. \ref{DiffeologicalSpace}) or more generally a [[smooth set]] (def. \ref{SmoothSet}). Then

1. For $\omega \in \Omega^n(X)$ a [[differential form]] on $X$ (def. \ref{DifferentialFormsOnDiffeologicalSpaces})
   its [[exterior differential]]

   $$
     d \omega \in \Omega^{n+1}(X)
   $$

   is defined on any plot $\mathbb{R}^n \overset{\Phi}{\to} X$ as the ordinary [[exterior differential]]
   of the pullback of $\omega$ along that plot:

   $$
     \Phi^\ast(d \omega) \coloneqq d \Phi^\ast(\omega)
     \,.
   $$

1. For $\omega_1 \in \Omega^{n_1}$ and $\omega_2 \in \Omega^{n_2}(X)$ two differential forms on $X$ (def. \ref{DifferentialFormsOnDiffeologicalSpaces}) then their [[exterior product]]

   $$
     \omega_1 \wedge \omega_2 \;\in\; \Omega^{n_1 + n_2}(X)
   $$

   is the differential form defined on any plot $\mathbb{R}^n \overset{\Phi}{\to} X$ as
   the ordinary exterior product of the pullback of th differential forms $\omega_1$ and $\omega_2$
   to this plot:

   $$
     \Phi^\ast(\omega_1 \wedge \omega_2)
     \;\coloneqq\;
     \Phi^\ast(\omega_1) \wedge \Phi^\ast(\omega_2)
     \,.
   $$

=--

$\,$

**Infinitesimal geometry**
 {#InfinitesimalGeometry}

It is crucial in [[field theory]] that we consider [[field histories]] not only over
all of [[spacetime]], but also restricted to [[submanifolds]] of spacetime. Or rather,
what is actually of interest are the restrictions of the field histories to the _[[infinitesimal neighbourhoods]]_
(example \ref{InfinitesimalNeighbourhood} below)
of these submanifolds. This appears notably in the construction of _[[phase spaces]]_ [below](#PhaseSpace).
Moreover, [[fermion fields]] such as the [[Dirac field]] (example \ref{DiracFieldBundle} below)
take values in _[[graded object|graded]]_ [[infinitesimal]] spaces, called _[[super spaces]]_
(discussed [below](#Supergeometry)). Therefore "infinitesimal geometry", sometimes called
_[[formal geometry]]_ (as in "[[formal scheme]]") or _[[synthetic differential geometry]]_
or _[[synthetic differential supergeometry]]_, is a central aspect of [[field theory]].

In order to mathematically grasp what _[[infinitesimal neighbourhoods]]_ are, we appeal to the first magic algebraic property of differential
geometry from prop. \ref{AlgebraicFactsOfDifferentialGeometry}, which says that we may recognize
[[smooth manifolds]] $X$ [[formal dual|dually]] in terms of their [[commutative algebras]] $C^\infty(X)$
of [[smooth functions]] on them

$$
  C^\infty(-) \;\colon\; SmoothManifolds \overset{\phantom{AAA}}{\hookrightarrow} (\mathbb{R} Algebras)^{op}
  \,.
$$

But since there are of course more [[associative algebras|algebras]] $A \in \mathbb{R}Algebras$ than arise
this way from smooth manifolds, we may turn this around and try to regard any algebra $A$
as _defining_ a would-be [[space]], which would have $A$ as its [[algebra of functions]].

For example an _[[infinitesimally thickened point]]_ should be a space which is "so small"
that every smooth function $f$  on it which vanishes at the origin takes values so
tiny that some finite power of them is not just even more tiny, but actually vanishes:

+-- {: .num_defn #InfinitesimallyThickendSmoothManifold}
###### Definition
**([[infinitesimally thickened smooth manifold|infinitesimally thickened Cartesian space]])**

An _[[infinitesimally thickened point]]_

$$
  \mathbb{D} \coloneqq Spec(A)
$$

is represented by a [[commutative algebra]]
$A \in \mathbb{R}Alg$ which as a [[real vector space]] is a [[direct sum]]

$$
  A \simeq_{\mathbb{R}} \langle 1 \rangle \oplus V
$$

of the 1-dimensional space $\langle 1 \rangle = \mathbb{R}$ of multiples of 1 with
a [[finite dimensional vector space]] $V$ that is a [[nilpotent ideal]] in that for
each element $a \in V$ there exists a [[natural number]] $n \in \mathbb{N}$ such that

$$
  a^{n+1} = 0
  \,.
$$

More generally, an [[infinitesimally thickened manifold|infinitesimally thickened Cartesian space]]

$$
  \mathbb{R}^n \times \mathbb{D} \;\coloneqq\;  \mathbb{R}^n \times Spec(A)
$$

is represented by a [[commutative algebra]]

$$
  C^\infty(\mathbb{R}^n) \otimes A \;\in\; \mathbb{R} Alg
$$

which is the [[tensor product of algebras]] of the algebra of smooth functions
$C^\infty(\mathbb{R}^n)$ on an actual [[Cartesian space]] of some [[dimension]] $n$ (example \ref{AlgebraOfSmoothFunctionsOnCartesianSpaces}), with an algebra of functions $A \simeq_{\mathbb{R}} \langle 1\rangle \oplus V$ of an infinitesimally thickened point, as above.

We say that a _smooth function between two [[infinitesimally thickened manifolds|infinitesimally thickened Cartesian spaces]]_

$$
  \mathbb{R}^{n_1} \times Spec(A_1) \overset{f}{\longrightarrow} \mathbb{R}^{n_2} \times Spec(A_2)
$$

is by definition [[formal dual|dually]] an $\mathbb{R}$-algebra [[homomorphism]] of the form

$$
  C^\infty(\mathbb{R}^{n_1}) \otimes A_1
    \overset{f^\ast}{\longleftarrow}
  C^\infty(\mathbb{R}^{n_2}) \otimes A_2
  \,.
$$

=--


+-- {: .num_example #InfinitesimalNeighbourhoodsInTheRealLine}
###### Example
**([[infinitesimal neighbourhoods]] in the [[real line]] )**

Consider the [[quotient ring|quotient algebra]] of the [[formal power series algebra]] $\mathbb{R}[ [\epsilon] ]$
in a single parameter $\epsilon$ by the ideal
generated by $\epsilon^2$:

$$
  (\mathbb{R}[ [\epsilon] ])/(\epsilon^2)
  \;\simeq_{\mathbb{R}}\;
  \mathbb{R} \oplus \epsilon \mathbb{R}
  \,.
$$

(This is sometimes called the _[[algebra of dual numbers]]_, for no good reason.) The underlying [[real vector space]]
of this algebra is, as show, the [[direct sum]] of the multiples of 1 with the multiples of $\epsilon$. A general element
in this algebra is of the form

$$
   a + b \epsilon \in (\mathbb{R}[\epsilon])/(\epsilon^2)
$$

where $a,b \in \mathbb{R}$ are [[real numbers]]. The product in this algebra is given by
"multiplying out" as usual, and discarding all terms proportional to $\epsilon^2$:

$$
  \left(
    a_1 + b_1 \epsilon
  \right)
   \cdot
  \left(
    a_2 + b_2 \epsilon
  \right)
  \;=\;
  a_1 a_2 + ( a_1 b_2 + b_1 a_2 ) \epsilon
  \,.
$$


We may think of an element $a + b \epsilon$ as the truncation to first order
of a [[Taylor series]] at the origin of a [[smooth function]] on the [[real line]]

$$
  f \;\colon\; \mathbb{R} \to \mathbb{R}
$$

where $a = f(0)$ is the value of the function at the origin, and where $b = \frac{\partial f}{\partial x}(0)$ is its first [[derivative]] at the origin.

Therefore this algebra behaves like the algebra of smooth function on an [[infinitesimal neighbourhood]] $\mathbb{D}^1$
of $0 \in \mathbb{R}$ which is so tiny that its [[generalized element|elements]] $\epsilon \in \mathbb{D}^1 \hookrightarrow \mathbb{R}$
become, upon squaring them, not just tinier, but actually zero:

$$
  \epsilon^2 = 0
  \,.
$$

This intuitive picture is now made precise by the concept of [[infinitesimally thickened points]] def. \ref{InfinitesimallyThickendSmoothManifold}, if we simply set

$$
  \mathbb{D}^1
    \;\coloneqq\;
  Spec\left(
    \mathbb{R}[ [\epsilon] ]/(\epsilon^2)
  \right)
$$

and observe that there is the [[monomorphism|inclusion]] of infinitesimally thickened Cartesian spaces

$$
  \mathbb{D}^1 \overset{\phantom{AA}i\phantom{AA} }{\hookrightarrow} \mathbb{R}^1
$$

which is dually given by the algebra homomorphism

$$
  \array{
    \mathbb{R} \oplus \epsilon \mathbb{R}
      &\overset{i^\ast}{\longleftarrow}&
    C^\infty(\mathbb{R}^1)
    \\
    f(0) + \frac{\partial f}{\partial x}(0)  &\longleftarrow& \{f\}
  }
$$

which sends a [[smooth function]] to its value $f(0)$ at zero plus $\epsilon$ times its
[[derivative]] at zero. Observe that this is indeed a [[homomorphism]] of algebras due to the [[product law]]
of [[differentiation]], which says that

$$
  \begin{aligned}
    i^\ast(f \cdot g)
    & =
    (f \cdot g)(0) + \frac{\partial f \cdot g}{\partial x}(0) \epsilon
    \\
    & =
    f(0) \cdot g(0)
      +
    \left(
      \frac{\partial f}{\partial x}(0) \cdot g(0) +  f(0) \cdot \frac{\partial g}{\partial x}(0)
    \right) \epsilon
    \\
    & =
    \left(
      f(0) + \frac{\partial f}{\partial x}(0) \epsilon
    \right)
    \cdot
    \left(
      g(0) + \frac{\partial g}{\partial x}(0) \epsilon
    \right)
  \end{aligned}
$$

Hence we see that restricting a smooth function to the infinitesimal neighbourhood of a point is
equivalent to restricting attention to its [[Taylor series|] to the given order at that point:


$$
  \array{
    \mathbb{D}^1 &\overset{i}{\hookrightarrow}& \mathbb{R}^1
    \\
    & {}_{\mathllap{(\epsilon \mapsto f(0) + \frac{\partial f}{\partial x}(0) \epsilon) }}\searrow & \downarrow_{\mathrlap{f}}
    \\
    && \mathbb{R}^1
  }
$$

Similarly for each $k \in \mathbb{N}$ the algebra

$$
  (\mathbb{R}[ [ \epsilon ] ])/(\epsilon^{k+1})
$$

may be thought of as the algebra of [[Taylor series]] at the origin of $\mathbb{R}$ of [[smooth functions]] $\mathbb{R} \to \mathbb{R}$,
where all terms of order higher than $k$ are discarded. The corresponding [[infinitesimally thickened point]] is
often denoted

$$
  \mathbb{D}^1(k) \;\coloneqq\; Spec\left(  \left(\mathbb{R}[ [\epsilon] ]\right)/(\epsilon^{k+1}) \right)
  \,.
$$

This is now the [[subobject]] of the [[real line]]

$$
  \mathbb{D}^1(k) \overset{\phantom{AAA}}{\hookrightarrow} \mathbb{R}^1
$$

on those elements $\epsilon$ such that $\epsilon^{k+1} = 0$.

=--

([Kock 81](synthetic+differential+geometry#Kock81), [Kock 10](synthetic+differential+geometry#Kock10))


The following example \ref{UniquePointOfInfinitesimalLine} shows that infinitesimal thickening is invisible for ordinary spaces when
mapping _out_ of these. In contrast example \ref{SyntheticTangentVectorFields} further below shows that
the morphisms _into_ an ordinary space out of an infinitesimal space are interesting: these are [[tangent vectors]]
and their higher order infinitesimal analogs.

+-- {: .num_example #UniquePointOfInfinitesimalLine}
###### Example
**([[infinitesimal]] line $\mathbb{D}^1$ has unique [[global point]])**

For $\mathbb{R}^n$ any ordinary [[Cartesian space]] (def. \ref{CartesianSpacesAndSmoothFunctionsBetweenThem})
and $D^1(k) \hookrightarrow \mathbb{R}^1$ the order-$k$ [[infinitesimal neighbourhood]] of the
origin in the [[real line]] from example \ref{InfinitesimalNeighbourhoodsInTheRealLine},
there is exactly only one possible morphism of [[infinitesimally thickened smooth manifolds|infinitesimally thickened Cartesian spaces]] from $\mathbb{R}^n$ to $\mathbb{D}^1(k)$:

$$
  \array{
    \mathbb{R}^n && \overset{\exists !}{\longrightarrow} &6 \mathbb{D}^1(k)
    \\
    & {}_{\mathllap{\exists !}}\searrow && \nearrow_{\mathrlap{\exists !}}
    \\
    && \mathbb{R}^0 = \ast
  }
  \,.
$$

=--


+-- {: .proof}
###### Proof

By definition such a morphism is [[formal duality|dually]] an algebra homomorphism

$$
  C^\infty(\mathbb{R}^n)
    \overset{f^\ast}{\longleftarrow}
  \left(
    \mathbb{R}[ [\epsilon] ])/(\epsilon^{k+1}
  \right)
    \simeq_{\mathbb{R}}
  \mathbb{R} \oplus \mathcal{O}(\epsilon)
$$

from the higher order "[[algebra of dual numbers]]" to the [[algebra of functions|algebra of]] [[smooth functions]] (example \ref{AlgebraOfSmoothFunctionsOnCartesianSpaces}).

Now this being an $\mathbb{R}$-algebra homomorphism, its action on the multiples $c \in \mathbb{R}$ of the identity
is fixed:

$$
  f^\ast(1) = 1
  \,.
$$

All the remaining elements are proportional to $\epsilon$, and hence are nilpotent.
However, by the [[homomorphism]] property of an algebra homomorphism it follows that it must send
nilpotent elements $\epsilon$ to nilpotent elements $f(\epsilon)$, because

$$
  \begin{aligned}
    \left(f^\ast(\epsilon)\right)^{k+1}
      & = f^\ast\left( \epsilon^{k+1}\right)
    \\
     & = f^\ast(0)
     \\ & = 0
  \end{aligned}
$$

But the only nilpotent element in $C^\infty(\mathbb{R}^n)$ is the zero element, and hence it follows that

$$
  f^\ast(\epsilon) = 0
  \,.
$$

Thus $f^\ast$ as above is uniquely fixed.

=--

+-- {: .num_example #SyntheticTangentVectorFields}
###### Example
**([[synthetic differential geometry|synthetic]] [[tangent vector fields]])**

Let $\mathbb{R}^n$ be a [[Cartesian space]] (def. \ref{CartesianSpacesAndSmoothFunctionsBetweenThem}),
regarded as an [[infinitesimally thickened smooth manifold|infinitesimally thickened Cartesian space]] (def. \ref{InfinitesimallyThickendSmoothManifold}) and consider $\mathbb{D}^1 \coloneqq Spec( (\mathbb{R}[ [\epsilon] ])/(\epsilon^2) )$
the first order infinitesimal line from example \ref{InfinitesimalNeighbourhoodsInTheRealLine}.

Then homomorphisms of [[infinitesimally thickened smooth manifold|infinitesimally thickened Cartesian spaces]]
of the form

$$
  \array{
    \mathbb{R}^n \times \mathbb{D}^1
      && \overset{\tilde v}{\longrightarrow} &&
    \mathbb{R}^n
    \\
    & {}_{\mathllap{pr_1}}\searrow && \swarrow_{\mathrlap{id}}
    \\
    && \mathbb{R}^n
  }
$$

hence smoothly $X$-parameterized collections of morphisms

$$
  \tilde v_x \;\colon\; \mathbb{D}^1 \longrightarrow \mathbb{R}^n
$$

which send the unique base point $\Re(\mathbb{D}^1) = \ast$ (example \ref{UniquePointOfInfinitesimalLine}) to $x \in \mathbb{R}^n$,
are in [[natural bijection]] with [[tangent vector fields]]  $v \in \Gamma_{\mathbb{R}^n}(T \mathbb{R}^n)$ (example \ref{TangentVectorFields}).

=--


+-- {: .proof}
###### Proof

By definition, the morphisms in question are [[formal duality|dually]] $\mathbb{R}$-[[associative algebra|algebra]]
[[homomorphisms]] of the form

$$
  (C^\infty(\mathbb{R}^n) \oplus \epsilon C^\infty(\mathbb{R}^n))
  \longleftarrow
  C^\infty(\mathbb{R}^n)
$$

which are the identity modulo $\epsilon$. Such a morphism has to take any function $f \in C^\infty(\mathbb{R}^n)$ to

$$
  f + (\partial f) \epsilon
$$

for some smooth function $(\partial f) \in C^\infty(\mathbb{R}^n)$. The condition that this assignment makes an algebra homomorphism is equivalent to the statement that for all $f_1,f_2 \in C^\infty(\mathbb{R}^n)$ we have

$$
  (f_1 f_2 + (\partial (f_1 f_2))\epsilon )
  \;=\;
  (f_1 + (\partial f_1) \epsilon)
  \cdot
  (f_2 + (\partial f_2) \epsilon)
  \,.
$$

Multiplying this out and using that $\epsilon^2 = 0$, this is equivalent to

$$
  \partial(f_1 f_2) = (\partial f_1) f_2 + f_1 (\partial f_2)
  \,.
$$

This in turn means equivalently that $\partial\colon C^\infty(\mathbb{R}^n)\to C^\infty(\mathbb{R}^n)$ is a [[derivation]].

With this the statement follows with the third magic algebraic property of smooth functions (prop. \ref{AlgebraicFactsOfDifferentialGeometry}):
[[derivations of smooth functions are vector fields]].

=--


We need to consider infinitesimally thickened spaces more general than the
thickenings of just Cartesian spaces in def. \ref{InfinitesimallyThickendSmoothManifold}. But just as [[Cartesian spaces]] (def. \ref{CartesianSpacesAndSmoothFunctionsBetweenThem}) serve as the local
test geometries to induce the general concept of [[diffeological spaces]] and [[smooth sets]] (def. \ref{SmoothSet}),
so using infinitesimally thickened Cartesian spaces as test geometries immediately induces the corresponding
generalization of smooth sets with infinitesimals:


+-- {: .num_defn #FormalSmoothSet}
###### Definition
**([[formal smooth set]])**

A _[[formal smooth set]]_ $X$ is

1. for each [[infinitesimally thickened smooth manifold|infinitesimally thickened Cartesian space]]
   $\mathbb{R}^n \times Spec(A)$ (def. \ref{InfinitesimallyThickendSmoothManifold}) a [[set]]

   $$
     X(\mathbb{R}^n \times Spec(A)) \in Set
   $$

   to be called the set of _[[smooth functions]]_ or _plots_ from $\mathbb{R}^n \times Spec(A)$ to $X$;

1. for each [[smooth function]] $f \;\colon\; \mathbb{R}^{n_1} \times Spec(A_1) \longrightarrow \mathbb{R}^{n_2} \times Spec(A_2)$
   between [[infinitesimally thickened smooth manifold|infinitesimally thickened Cartesian spaces]] a choice of function

   $$
     f^\ast \;\colon\; X(\mathbb{R}^{n_2} \times Spec(A_2)) \longrightarrow X(\mathbb{R}^{n_1} \times Spec(A_1))
   $$

   to be thought of as the precomposition operation

   $$
     \left(
       \mathbb{R}^{n_2} \overset{\Phi}{\longrightarrow} X
     \right)
     \;\overset{f^\ast}{\mapsto}\;
     \left(
       \mathbb{R}^{n_1}\times Spec(A_1) \overset{f}{\to} \mathbb{R}^{n_2} \times Spec(A_2) \overset{\Phi}{\to} X
     \right)
   $$

such that

1. ([[functor|functoriality]])

   1. If $id_{\mathbb{R}^n \times Spec(A)} \;\colon\; \mathbb{R}^n \times Spec(A) \to \mathbb{R}^n \times Spec(A)$ is the [[identity function]] on $\mathbb{R}^n \times Spec(A)$, then $\left(id_{\mathbb{R}^n \times Spec(A)}\right)^\ast \;\colon\; X(\mathbb{R}^n \times Spec(A)) \to X(\mathbb{R}^n \times Spec(A))$ is the [[identity function]] on the set of plots $X(\mathbb{R}^n \times Spec(A))$;

   1. If  $\mathbb{R}^{n_1}\times Spec(A_1) \overset{f}{\to} \mathbb{R}^{n_2} \times Spec(A_2) \overset{g}{\to} \mathbb{R}^{n_3} \times Spec(A_3)$ are two [[composition|composable]] [[smooth functions]] between infinitesimally thickened Cartesian spaces, then pullback of plots along them consecutively equals the pullback along the [[composition]]:

      $$
        f^\ast \circ g^\ast = (g \circ f)^\ast
      $$

      i.e.

      $$
        \array{
          && X(\mathbb{R}^{n_2} \times Spec(A_2))
          \\
          & {}^{\mathllap{f^\ast}}\swarrow && \nwarrow^{\mathrlap{g^\ast}}
          \\
          X(\mathbb{R}^{n_1} \times Spec(A_1))
          && \underset{ (g \circ f)^\ast }{\longleftarrow} &&
          X(\mathbb{R}^{n_3} \times Spec(A_3))
        }
      $$

1. ([[sheaf|gluing]])

   If $\{ U_i \times Spec(A) \overset{f_i \times id_{Spec(A)}}{\to} \mathbb{R}^n \times Spec(A)\}_{i \in I}$ is such that
   $$\{ U_i  \overset{f_i  }{\to} \mathbb{R}^n \}_{i \in I}$$
   in a [[differentiably good open cover]] (def. \ref{DifferentiablyGoodOpenCover}) then the function which restricts
   $\mathbb{R}^n \times Spec(A)$-plots of $X$ to a set of $U_i \times Spec(A)$-plots

   $$
     X(\mathbb{R}^n \times Spec(A))
       \overset{( (f_i)^\ast )_{i \in I}  }{\hookrightarrow}
     \underset{i \in I}{\prod} X(U_i \times Spec(A))
   $$

   is a [[bijection]] onto the set of those [[tuples]] $(\Phi_i \in X(U_i))_{i \in I}$ of plots,
   which are "[[matching families]]" in that they agree on [[intersections]]:

   $$
     \phi_i\vert_{((U_i \cap U_j) \times Spec(A)} = \phi_j \vert_{(U_i \cap U_j)\times Spec(A)}
   $$

   i.e.

   $$
     \array{
       && (U_i \cap U_j) \times Spec(A)
       \\
       & \swarrow && \searrow
       \\
       U_i\times Spec(A) && && U_j \times Spec(A)
       \\
       & {}_{\mathrlap{\Phi_i}}\searrow && \swarrow_{\mathrlap{\Phi_j}}
       \\
       && X
     }
   $$

Finally, given $X_1$ and $X_2$ two [[formal smooth sets]], then a [[smooth function]] between them

$$
  f \;\colon\; X_1 \longrightarrow X_2
$$

is

* for each [[infinitesimally thickened smooth manifold|infinitesimally thickened Cartesian space]] $\mathbb{R}^n \times Spec(A)$ (def. \ref{InfinitesimallyThickendSmoothManifold}) a function

  $$
    f_\ast(\mathbb{R}^n \times Spec(A))
    \;\colon\;
    X_1(\mathbb{R}^n \times Spec(A)) \longrightarrow X_2(\mathbb{R}^n \times Spec(A))
  $$

such that

* for each [[smooth function]] $g \colon \mathbb{R}^{n_1} \times Spec(A_1) \to \mathbb{R}^{n_2} \times Spec(A_2)$ between
  infinitesimally thickened Cartesian spaces we have

  $$
    g^\ast_2 \circ f_\ast(\mathbb{R}^{n_2} \times Spec(A_2))
    =
    f_\ast(\mathbb{R}^{n_1} \times Spec(A_1)) \circ g^\ast_1
  $$

  i.e.

  $$
    \array{
      X_1(\mathbb{R}^{n_2} \times Spec(A_2))
        &\overset{f_\ast(\mathbb{R}^{n_2}\times Spec(A_2) )}{\longrightarrow}&
      X_2(\mathbb{R}^{n_2} \times Spec(A_2))
      \\
      \mathllap{g_1^\ast}\downarrow && \downarrow\mathrlap{g^\ast_2}
      \\
      X_1(\mathbb{R}^{n_1} \times Spec(A_1))
        &\underset{f_\ast(\mathbb{R}^{n_1})}{\longrightarrow}&
      X_2(\mathbb{R}^{n_1} \times Spec(A_1))
    }
  $$

=--

([Dubuc 79](Cahiers+topos#Dubuc79))

Basing [[synthetic differential geometry|infinitesimal geometry]] on [[formal smooth sets]] is an instance of the general approach to [[geometry]] called _[[functorial geometry]]_ or _[[topos theory]]_. For more background on this see at _[[geometry of physics -- manifolds and orbifolds]]_.

We have the evident generalization of example \ref{SmoothManifoldsAreDiffeologicalSpaces} to smooth geometry with [[infinitesimals]]:

+-- {: .num_example #YonedaLemmaForFormalSmoothSets}
###### Example
**([[infinitesimally thickened smooth manifolds|infinitesimally thickened Cartesian spaces]] are [[formal smooth sets]])**

For $X$ an [[infinitesimally thickened smooth manifold|infinitesimally thickened Cartesian space]] (def. \ref{InfinitesimallyThickendSmoothManifold}), it becomes a [[formal smooth set]] according to def. \ref{FormalSmoothSet}
by taking its plots out of some $\mathbb{R}^n \times \mathbb{D}$ to be the homomorphism of infinitesimally
thickened Cartesian spaces:

$$
  X(\mathbb{R}^n \times \mathbb{D})
  \;\coloneqq\;
  Hom_{FormalCartSp}( \mathbb{R}^n \times \mathbb{D}, X )
  \,.
$$

(Stated more [[category theory|abstractly]], this is an instance of the _[[Yoneda embedding]]_ over a _[[subcanonical site]]_.)

=--


+-- {: .num_example #FormalSmoothSetsIncludedSmoothSet}
###### Example
**([[smooth sets]] are [[formal smooth sets]])**

Let $X$ be a [[smooth set]] (def. \ref{SmoothSet}).
Then $X$ becomes a [[formal smooth set]] (def. \ref{FormalSmoothSet}) by declaring the
set of plots  $X(\mathbb{R}^n \times \mathbb{D})$ over
an [[infinitesimally thickened smooth manifold|infinitesimally thickened Cartesian space]] (def. \ref{InfinitesimallyThickendSmoothManifold})
to be [[equivalence classes]] of [[pairs]]

$$
  \mathbb{R}^n \times \mathbb{D} \longrightarrow \mathbb{R}^{k}
  \,,
  \phantom{AA}
  \mathbb{R}^k \longrightarrow X
$$

of a [[morphism]] of infinitesimally thickened Cartesian spaces and of a plot of $X$, as shown,
subject to the [[equivalence relation]] which identifies two  such pairs if there exists
a smooth function $f \colon \mathbb{R}^k \to \mathbb{R}^{k'}$ such that

$$
  \array{
    && \mathbb{R}^n \times \mathbb{D}
    \\
    & \swarrow && \searrow
    \\
    \mathbb{R}^k && \overset{f}{\longrightarrow} && \mathbb{R}^{k'}
    \\
    \mathbb{R}^k && \underset{f}{\longrightarrow} && \mathbb{R}^{k'}
    \\
    & \searrow && \swarrow
    \\
    && X
  }
$$

Stated more [[category theory|abstractly]] this says that $X$ as a [[formal smooth set]]
is the _[[left Kan extension]]_ (see [this example](Kan+extension#CoendFormulaForPresheavesOfSets)) of $X$ as a [[smooth set]] along the [[functor]]
that [[full subcategory|includes]] [[Cartesian spaces]] (def. \ref{CartesianSpacesAndSmoothFunctionsBetweenThem})
into [[infinitesimally thickened smooth manifold|infinitesimally thickened Cartesian spaces]] (def. \ref{InfinitesimallyThickendSmoothManifold}).

=--

+-- {: .num_defn #ReductionAndInfinitesimalShape}
###### Definition
**([[reduction modality|reduction]] and [[infinitesimal shape]])**

For $\mathbb{R}^n \times \mathbb{D}$ an [[infinitesimally thickened smooth manifold|infinitesimally thickened Cartesian space]]
(def. \ref{InfinitesimallyThickendSmoothManifold}) we say that the underlying ordinary [[Cartesian space]] $\mathbb{R}^n$ (def. \ref{CartesianSpacesAndSmoothFunctionsBetweenThem}) is its _[[reduced object|reduction]]_

$$
 \Re\left(
   \mathbb{R}^n \times \mathbb{D}
 \right)
 \;\coloneqq\;
 \mathbb{R}^n
 \,.
$$

There is the canonical inclusion morphism

$$
  \Re\left(
    \mathbb{R}^n \times \mathbb{D}
  \right)
  =
  \mathbb{R}^n
  \overset{\phantom{AAAA}}{\hookrightarrow}
  \mathbb{R}^n \times \mathbb{D}
$$

which [[formal dual|dually]] corresponds to the [[homomorphism]] of [[commutative algebras]]

$$
  C^\infty(\mathbb{R}^n)
    \longleftarrow
  C^\infty(\mathbb{R}^n)
    \otimes_{\mathbb{R}}
  A
$$

which is the identity on all smooth functions $f \in C^\infty(\mathbb{R}^n)$ and is zero on all elements $a \in V \subset A$
in the nilpotent ideal of $A$ (as in example \ref{UniquePointOfInfinitesimalLine}).

Given any [[formal smooth set]] $X$, we say that its _[[infinitesimal shape]]_ or _[[de Rham shape]]_ (also: _[[de Rham stack]]_)
is the [[formal smooth set]] $\Im X$ (def. \ref{FormalSmoothSet}) defined to have as plots the [[reduction modality|reductions]]
of the plots of $X$, according to the above:

$$
  (\Im X)( U ) \;\coloneqq\: X(\Re(U))
  \,.
$$

There is a canonical morphism of formal smooth set

$$
  \eta_X
    \;\colon\;
  X
    \longrightarrow
  \Im X
$$

which takes a plot

$$
  U = \mathbb{R}^n \times \mathbb{D} \overset{f}{\longrightarrow} X
$$

to the [[composition]]

$$
  \mathbb{R}^n \hookrightarrow \mathbb{R}^n \times \mathbb{D} \overset{f}{\hookrightarrow} X
$$

regarded as a plot of $\Im X$.

=--

+-- {: .num_example #MappingSpaceOutOfAnInfinitesimallyThickenedCartesianSpace}
###### Example
**([[mapping space]] out of an [[infinitesimally thickened smooth manifold|infinitesimally thickened Cartesian space]])**

Let $X$ be an [[infinitesimally thickened smooth manifold|infinitesimally thickened Cartesian space]] (def. \ref{InfinitesimallyThickendSmoothManifold}) and let $Y$ be a [[formal smooth set]] (def. \ref{FormalSmoothSet}).
Then the _[[mapping space]]_

$$
  [X,Y] \;\in\; FormalSmoothSet
$$

of smooth functions from $X$ to $Y$ is the [[formal smooth set]]
whose $U$-plots are the morphisms of [[formal smooth sets]]
from the [[Cartesian product]] of [[infinitesimally thickened smooth manifold|infinitesimally thickened Cartesian spaces]] $U \times X$ to $Y$,
hence the $U \times X$-plots of $Y$:

$$
  [X,Y](U) \;\coloneqq\; Y(U \times X)
  \,.
$$

=--


+-- {: .num_example #TangentBundleSynthetic}
###### Example
**([[synthetic differential geometry|synthetic]] [[tangent bundle]])**

Let $X \coloneqq \mathbb{R}^n$ be a [[Cartesian space]] (def. \ref{CartesianSpacesAndSmoothFunctionsBetweenThem})
regarded as an [[infinitesimally thickened smooth manifold|infinitesimally thickened Cartesian space]] (\ref{InfinitesimallyThickendSmoothManifold}) and thus regarded as a [[formal smooth set]] (def. \ref{FormalSmoothSet})
by example \ref{YonedaLemmaForFormalSmoothSets}.
Consider the infinitesimal line

$$
  \mathbb{D}^1
    \hookrightarrow
  \mathbb{R}^1
$$

from example \ref{InfinitesimalNeighbourhoodsInTheRealLine}. Then the [[mapping space]]
$[\mathbb{D}^1, X]$ (example \ref{MappingSpaceOutOfAnInfinitesimallyThickenedCartesianSpace})
is the total space of the [[tangent bundle]] $T X$ (example \ref{TangentVectorFields}).
Moreover, under restriction along the [[reduced object|reduction]] $\ast \longrightarrow \mathbb{D}^1$,
this is the full [[tangent bundle]] [[projection]], in that there is a [[natural isomorphism]] of
[[formal smooth sets]] of the form

$$
  \array{
    T X &\simeq& [\mathbb{D}^1, X]
    \\
    {}^{\mathllap{tb}}\downarrow && \downarrow^{\mathrlap{ [ \ast \to \mathbb{D}^1, X ]   }}
    \\
    X &\simeq& [\ast, X]
  }
$$

In particular this implies immediately that smooth [[sections]] (def. \ref{Sections}) of the tangent bundle

$$
  \array{
    && [\mathbb{D}^1, X] & \simeq T X
    \\
    & {}^{\mathllap{v}}\nearrow & \downarrow
    \\
    X &=& X
  }
$$

are equivalently morphisms of the form

$$
  \array{
    && X
    \\
    & {}^{\mathllap{\tilde v}}\nearrow & \downarrow^{\mathrlap{id}}
    \\
    X \times \mathbb{D}^1 &\underset{pr_1}{\longrightarrow}& X
  }
$$

which we had already identified with [[tangent vector fields]] (def. \ref{TangentVectorFields})
in example \ref{SyntheticTangentVectorFields}.

=--


+-- {: .proof}
###### Proof

This follows by an analogous argument as in example \ref{SyntheticTangentVectorFields},
using the [[Hadamard lemma]].

=--

While in [[infinitesimally thickened smooth manifolds|infinitesimally thickened Cartesian spaces]] (def. \ref{InfinitesimallyThickendSmoothManifold})
only [[infinitesimals]] to any [[finite number|finite]] order may exist, in [[formal smooth sets]] (def. \ref{FormalSmoothSet})
we may find infinitesimals to any arbitrary finite order:

+-- {: .num_example #InfinitesimalNeighbourhood}
###### Example
**([[infinitesimal neighbourhood]])**

Let $X$ be a [[formal smooth sets]] (def. \ref{FormalSmoothSet}) $Y \hookrightarrow X$
a sub-formal smooth set. Then the _[[infinitesimal neighbourhood]]_ to arbitrary infinitesimal
order of $Y$ in $X$
is the [[formal smooth set]] $N_X Y$ whose plots are those plots of $X$

$$
  \mathbb{R}^n \times Spec(A) \overset{f}{\longrightarrow} X
$$

such that their [[reduced object|reduction]] (def. \ref{ReductionAndInfinitesimalShape})

$$
  \mathbb{R}^n \hookrightarrow \mathbb{R}^n \times Spec(A) \overset{f}{\longrightarrow} X
$$

factors through a plot of $Y$.

=--

This allows to grasp the restriction of [[field histories]] to the [[infinitesimal neighbourhood]]
of a [[submanifold]] of [[spacetime]], which will be crucial for the discussion of [[phase spaces]]
[below](#PhaseSpace).

+-- {: .num_defn #FieldHistoriesOnInfinitesimalNeighbourhoodOfSubmanifoldOfSpacetime}
###### Definition
**([[field histories]] on [[infinitesimal neighbourhood]] of [[submanifold]] of [[spacetime]])**

Let $E \overset{fb}{\to} \Sigma$ be a [[field bundle]] (def. \ref{FieldsAndFieldBundles})
and let $S \hookrightarrow \Sigma$ be a [[submanifold]] of [[spacetime]].

We write $N_\Sigma(S) \hookrightarrow \Sigma$ for its [[infinitesimal neighbourhood]] in $\Sigma$ (def. \ref{InfinitesimalNeighbourhood}).


Then the _set of field histories restricted to $S$_, to be denoted

$$
  \label{SpaceOfFieldHistoriesInHigherCodimension}
  \Gamma_{S}(E) \coloneqq \Gamma_{N_\Sigma(S)}( E\vert_{N_\Sigma S} ) \in \mathbf{H}
$$

is the set of section of $E$ restricted to the [[infinitesimal neighbourhood]] $N_\Sigma(S)$ (example \ref{InfinitesimalNeighbourhood}).

=--

$\,$

We close the discussion of [[synthetic differential geometry|infinitesimal differential geometry]] by explaining how we may recover the concept of _[[smooth manifolds]]_ inside the more general [[formal smooth sets]] (def./prop. \ref{SmoothManifoldInsideDiffeologicalSpaces} below).
The key point is that the presence of [[infinitesimals]] in the theory allows an intrinsic definition of
[[local diffeomorphisms]]/[[formally étale morphism]] (def. \ref{FormalSmoothSetLocalDiffeomorphism} and example \ref{AbstractLocalDiffeomorphismsOfCartesianSpaces} below). It is noteworthy that the only role this concept plays in the development
of [[field theory]] below is that [[smooth manifolds]] admit [[triangulations]] by smooth [[singular simplices]] (def. \ref{SingularSimplicesInCartesianSpaces})
so that the concept of [[fiber integration|fiber]] [[integration of differential forms]] is well defined over manifolds.

+-- {: .num_defn #FormalSmoothSetLocalDiffeomorphism}
###### Definition
**([[local diffeomorphism]] of [[formal smooth sets]])**

Let $X,Y$ be [[formal smooth sets]] (def. \ref{FormalSmoothSet}). Then a [[morphism]] between them is called a _[[local diffeomorphism]]_ or _[[formally étale morphism]]_, denoted

$$
  f \;\colon\; X \overset{et}{\longrightarrow} Y
  \,,
$$

if $f$ if for each [[infinitesimally thickened smooth manifold|infinitesimally thickened Cartesian space]] (def. \ref{InfinitesimallyThickendSmoothManifold}) $\mathbb{R}^n \times \mathbb{D}$ we have a natural identification between the $\mathbb{R}^n \times \mathbb{D}$-plots of $X$ with those $\mathbb{R}^n n\times \mathbb{D}$-plots of $Y$ whose [[reduction modality|reduction]] (def. \ref{ReductionAndInfinitesimalShape}) comes from an $\mathbb{R}^n$-plot of $X$, hence if we have a [[natural transformation|natural]] [[fiber product]] of [[sets]] of plots

$$
  X(\mathbb{R}^n \times \mathbb{D})
  \;\simeq\;
  Y(\mathbb{R}^n \times \mathbb{D})
    \underset{Y(\mathbb{R}^n)}{\times^f}
  X(\mathbb{R}^n)
$$

i. e.

$$
  \array{
     && X(\mathbb{R}^n \times \mathbb{D})
     \\
     & \swarrow && \searrow
     \\
     Y(\mathbb{R}^n \times \mathbb{D}) && \text{(pb)} && X(\mathbb{R}^n)
     \\
     & \searrow && \swarrow
     \\
     && Y(\mathbb{R}^n )
  }
$$

for all [[infinitesimally thickened smooth manifold|infinitesimally thickened Cartesian spaces]] $\mathbb{R}^n \times \mathbb{D}$.

Stated more [[category theory|abstractly]], this means that the
[[naturality square]] of the [[unit of a monad|unit]] of the [[infinitesimal shape]] $\Im$ (def. \ref{ReductionAndInfinitesimalShape}) is a [[pullback square]]

$$
  \array{
    X &\overset{\eta_X}{\longrightarrow}& \Im X
    \\
    {}^{\mathllap{f}}\downarrow &\text{(pb)}& \downarrow^{\mathrlap{\Im f}}
    \\
    Y &\underset{\eta_Y}{\longrightarrow}& \Im Y
  }
$$

=--

([Khavkine-Schreiber 17, def. 3.1](local+diffeomorphism#KhavkineSchreiber17))


+-- {: .num_example #AbstractLocalDiffeomorphismsOfCartesianSpaces}
###### Example
**([[local diffeomorphism]] between [[Cartesian spaces]] from the general definition)**

For $X,Y \in CartSp$ two ordinary [[Cartesian spaces]] (def. \ref{CartesianSpacesAndSmoothFunctionsBetweenThem}),
regarded as [[formal smooth sets]] by example \ref{YonedaLemmaForFormalSmoothSets} then a [[morphism]]
$f \colon X \to Y$ between them is a [[local diffeomorphism]] in the general sense of def. \ref{FormalSmoothSetLocalDiffeomorphism}
precisely if it is so in the ordinary sense of def. \ref{LocalDiffeomorphismBetweenCartesianSpaces}.

=--

([Khavkine-Schreiber 17, prop. 3.2](geometry+of+physics+--+manifolds+and+orbifolds#KhavkineSchreiber17))


+-- {: .num_defn #SmoothManifoldInsideDiffeologicalSpaces}
###### Definition/Proposition
**([[smooth manifolds]])**

A _[[smooth manifold]]_ $X$ of [[dimension]] $n \in \mathbb{N}$ is

* a [[diffeological space]] (def. \ref{DiffeologicalSpace})

such that

1. there exists an [[indexed set]] $\{ \mathbb{R}^n \overset{\phi_i}{\to} X\}_{i \in I}$
   of morphisms of [[formal smooth sets]] (def. \ref{FormalSmoothSet}) from [[Cartesian spaces]] $\mathbb{R}^n$ (def. \ref{CartesianSpacesAndSmoothFunctionsBetweenThem}) (regarded as [[formal smooth sets]] via example \ref{SmoothManifoldsAreDiffeologicalSpaces}, example \ref{SmoothSetsDiffeologicalSpaces} and example \ref{FormalSmoothSetsIncludedSmoothSet})
   into $X$, (regarded as a [[formal smooth set]] via example \ref{SmoothSetsDiffeologicalSpaces} and example \ref{FormalSmoothSetsIncludedSmoothSet})
   such that

   1. every point $x \in X_s$ is in the [[image]] of at least one of the $\phi_i$;

   1. every $\phi_i$ is a [[local diffeomorphism]] according to def. \ref{FormalSmoothSetLocalDiffeomorphism};

1. the [[final topology]] induced by the set of plots of $X$ makes $X_s$ a [[paracompact Hausdorff space]].

=--

([Khavkine-Schreiber 17, example 3.4](geometry+of+physics+--+manifolds+and+orbifolds#KhavkineSchreiber17))

For more on [[smooth manifolds]] from the perspective of [[formal smooth sets]] see at _[[geometry of physics -- manifolds and orbifolds]]_.


$\,$

**[[fermion fields]] and [[supergeometry]]**
 {#Supergeometry}

Field theories of interest crucially involve [[fermionic fields]] (def. \ref{FermionicBosonicFields} below), such as the [[Dirac field]] (example \ref{DiracFieldBundle} below),
which are subject to the "[[Pauli exclusion principle]]", a key reason for the [[stability of matter]].
Mathematically this principle means that these
[[field (physics)|fields]] have [[field bundles]] whose [[field fiber]]
is not an ordinary [[manifold]], but an odd-graded _[[supermanifold]]_ (more on this in remark \ref{LagrangianDensityOfDiracFieldSupergeometricNature} and remark \ref{SupergeometricNatureOfDiracEquation} below).

This "[[supergeometry]]" is an immediate generalization of the
[[synthetic differential geometry|infinitesimal geometry]] [above](#InfinitesimalGeometry), where now the [[infinitesimal]]
elements in the [[algebra of functions]] may be equipped with a [[graded object|grading]]: one speaks of _[[superalgebra]]_.

The "super"-terminology for something as down-to-earth as the mathematical principle behind the [[stability of matter]]
may seem unfortunate. For better or worse, this terminology has become standard
since the middle of the 20th century. But the concept that today is called _[[supercommutative superalgebra]]_
was in fact first considered by [[Ausdehnungslehre|Grassmann 1844]] who got it right ("[[Ausdehnungslehre]]") but apparently
was too far ahead of his time and remained unappreciated.

Beware that considering [[supergeometry]] does _not_ necessarily involve considering "[[supersymmetry]]".
Supergeometry is the geometry of [[fermion fields]] (def. \ref{FermionicBosonicFields} below), and that all [[matter]] fields in the [[observable universe]] are fermionic
has been [[experiment|experimentally]] established since the [[Stern-Gerlach experiment]] in 1922. Supersymmetry,
on the other hand, is a hypothetical extension of [[spacetime]]-[[symmetry]]
within the context of [[supergeometry]]. Here we do not discuss supersymmetry; for details see instead at _[[geometry of physics -- supersymmetry]]_.


+-- {: .num_defn #SupercommutativeSuperalgebra}
###### Definition
**([[supercommutative superalgebra]])**

A _[[real number|real]] $\mathbb{Z}/2$-[[graded algebra]]_ or _[[superalgebra]]_ is an [[associative algebra]] $A$ over the [[real numbers]]
together with a [[direct sum]] decomposition of its underlying [[real vector space]]

$$
  A \simeq_{\mathbb{R}} A_{even} \oplus A_{odd}
  \,,
$$

such that the product in the algebra respects the multiplication in the [[cyclic group|cyclic]] [[group of order 2]] $\mathbb{Z}/2 = \{even, odd\}$:

$$
  \left.
  \array{
    A_{even} \cdot A_{even}
    \\
    A_{odd} \cdot A_{odd}
  }
  \right\}
  \subset A_{even}
  \phantom{AAAA}
  \left.
  \array{
    A_{odd} \cdot A_{even}
    \\
    A_{even} \cdot A_{odd}
  }
  \right\}
  \subset A_{odd}
  \,.
$$

This is called a _[[supercommutative superalgebra]]_ if for all elements $a_1, a_2 \in A$ which are of homogeneous degree
${\vert a_i \vert} \in \mathbb{Z}/2 = \{even, odd\}$ in that

$$
  a_i \in A_{{\vert a_i\vert}} \subset A
$$

we have

$$
  a_1 \cdot a_2 = (-1)^{{\vert a_1 \vert \vert a_2 \vert}} a_2 \cdot a_1
  \,.
$$

A _[[homomorphism]] of [[superalgebras]]_

$$
  f \;\colon\; A \longrightarrow A'
$$

is a [[homomorphism]] of [[associative algebras]] over the [[real numbers]] such that the $\mathbb{Z}/2$-[[graded object|grading]]
is respected in that

$$
  f(A_{even}) \subset A'_{even}
  \phantom{AAAAA}
  f(A_{odd}) \subset A'_{odd}
  \,.
$$

=--

For more details on superalgebra see at _[[geometry of physics -- superalgebra]]_.

+-- {: .num_example #GrassmannAlgebra}
###### Example
**(basic examples of [[supercommutative superalgebras]])**

Basic examples of [[supercommutative superalgebras]] (def. \ref{SupercommutativeSuperalgebra})
include the following:

1. Every [[commutative algebra]] $A$ becomes a [[supercommutative superalgebra]] by declaring it to be all in even degree:
   $A = A_{even}$.

1. For $V$ a [[finite dimensional vector space|finite dimensional]] [[real vector space]], then the
   [[Grassmann algebra]] $A \coloneqq \wedge^\bullet_{\mathbb{R}} V^\ast$ is a supercommutative superalgebra with
   $A_{even} \coloneqq \wedge^{even} V^\ast$ and $A_{odd} \coloneqq \wedge^{odd} V^\ast$.

   More explicitly, if $V = \mathbb{R}^s$ is a [[Cartesian space]] with canonical dual [[coordinates]]  $(\theta^i)_{i = 1}^s$
   then the [[Grassmann algebra]] $\wedge^\bullet (\mathbb{R}^s)^\ast$ is the real algebra which is [[generators and relations|generated]]
   from the $\theta^i$ regarded in odd degree and hence subject to the relation

   $$
     \theta^i \cdot \theta^j = - \theta^j \cdot \theta^i
     \,.
   $$

   In particular this implies that all the $\theta^i$ are [[infinitesimal]] (def. \ref{InfinitesimallyThickendSmoothManifold}):

   $$
     \theta^i \cdot \theta^i = 0
     \,.
   $$

1. For $A_1$ and $A_2$ two [[supercommutative superalgebras]], there is their _[[tensor product of algebras|tensor product]]_
   supercommutative superalgebra $A_1 \otimes_{\mathbb{R}} A_2$. For example for $X$ a [[smooth manifold]]
   with ordinary algebra of smooth functions $C^\infty(X)$ regarded as a supercommutative superalgebra
   by the first example above, the tensor product with a [[Grassmann algebra]] (second example above) is the
   supercommutative superalgebta

   $$
     C^\infty(X) \otimes_{\mathbb{R}} \wedge^\bullet((\mathbb{R}^s)\ast)
   $$

   whose elements may uniquely be expanded in the form

   $$
      f + f_i \theta^i + f_{i j} \theta^i \theta^j + f_{i j k} \theta^i \theta^j \theta^k + \cdots + f_{i_1 \cdots i_s} \theta^{i_1} \cdots \theta^{i_s}
     \,,
   $$

   where the $f_{i_1 \cdots i_k} \in C^\infty(X)$ are smooth functions on $X$ which are skew-symmetric in their indices.

=--

The following is the direct super-algebraic analog of
the definition of [[infinitesimally thickened smooth manifolds|infinitesimally thickened Cartesian spaces]] (def. \ref{InfinitesimallyThickendSmoothManifold}):


+-- {: .num_defn #SuperCartesianSpace}
###### Definition
**([[super Cartesian space]])**

A _[[superpoint]]_ $Spec(A)$ is represented by a [[super-commutative superalgebra]]
$A$ (def. \ref{SupercommutativeSuperalgebra}) which as a $\mathbb{Z}/2$-[[graded vector space]] ([[super vector space]]) is a [[direct sum]]

$$
  A \simeq_{\mathbb{R}} \langle 1 \rangle \oplus V
$$

of the 1-dimensional even vector space $\langle 1 \rangle = \mathbb{R}$ of multiples of 1, with
a [[finite dimensional vector space|finite dimensional]]  [[super vector space]]
$V$ that is a [[nilpotent ideal]] in  $A$ in that for
each element $a \in V$ there exists a [[natural number]] $n \in \mathbb{N}$ such that

$$
  a^{n+1} = 0
  \,.
$$

More generally, a [[super Cartesian space]]
$\mathbb{R}^n \times Spec(A)$ is represented by a [[super-commutative algebra]]
$C^\infty(\mathbb{R}^n) \otimes A \in \mathbb{R} Alg$ which is the [[tensor product of algebras]] of the algebra of smooth functions
$C^\infty(\mathbb{R}^n)$ on an actual [[Cartesian space]] of some [[dimension]] $n$, with an algebra of functions $A \simeq_{\mathbb{R}} \langle 1\rangle \oplus V$ of a [[superpoint]] (example \ref{GrassmannAlgebra}).

Specifically, for $s \in \mathbb{N}$, there is the superpoint

$$
  \label{StandardSuperpoints}
  \mathbb{R}^{0 \vert s}
    \;\coloneqq\;
  Spec\left(  \wedge^\bullet (\mathbb{R}^s)^\ast \right)
$$

whose [[algebra of functions]] is by definition the [[Grassmann algebra]] on $s$ generators $(\theta^i)_{i = 1}^s$ in odd degree (example
\ref{GrassmannAlgebra}).

We write

$$
  \begin{aligned}
    \mathbb{R}^{b\vert s}
      & \coloneqq
    \mathbb{R}^b \times \mathbb{R}^{0 \vert s}
    \\
    & =
    \mathbb{R}^b \times Spec( \wedge^\bullet(\mathbb{R}^s)^\ast )
    \\
     & =
     Spec\left(  C^\infty(\mathbb{R}^b) \otimes_{\mathbb{R}} \wedge^\bullet (\mathbb{R}^s)^\ast  \right)
  \end{aligned}
$$

for the corresponding super Cartesian spaces whose algebra of functions is as in example \ref{GrassmannAlgebra}.

We say that a _smooth function_ between two [[super Cartesian spaces]]

$$
  \mathbb{R}^{n_1} \times Spec(A_1) \overset{f}{\longrightarrow} \mathbb{R}^{n_2} \times Spec(A_2)
$$

is by definition [[formal dual|dually]] a [[homomorphism]] of [[supercommutative superalgebras]] (def. \ref{SupercommutativeSuperalgebra}) of the form

$$
  C^\infty(\mathbb{R}^{n_1}) \otimes A_1
    \overset{f^\ast}{\longleftarrow}
  C^\infty(\mathbb{R}^{n_2}) \otimes A_2
  \,.
$$

=--

+-- {: .num_example #SuperpointInducedByFiniteDimensionalVectorSpace}
###### Example
**([[superpoint]] induced by a [[finite dimensional vector space]])**

Let $V$ be a [[finite dimensional vector space|finite dimensional]] [[real vector space]]. With $V^\ast$
denoting its [[dual vector space]] write $\wedge^\bullet V^\ast$ for the [[Grassmann algebra]]
that it generates. This being a [[supercommutative algebra]], it defines a [[superpoint]] (def. \ref{SuperCartesianSpace}).

We denote this superpoint by

$$
  V_{odd} \simeq \mathbb{R}^{0 \vert dim(V)}
  \,.
$$

=--

All the [[differential geometry]] over [[Cartesian space]] that we discussed [above](#Geometry)
generalizes immediately to [[super Cartesian spaces]] (def. \ref{SuperCartesianSpace})
if we stricly adhere to the [[signs in supergeometry|super sign rule]] which says that
whenever two odd-graded elements swap places, a minus sign is picked up. In particular
we have the following generalization of the [[de Rham complex]] on [[Cartesian spaces]] discussed [above](#DifferentialFormsAndCartanCalculus).



+-- {: .num_defn #DifferentialFormOnSuperCartesianSpaces}
###### Definition
**([[super differential forms]] on [[super Cartesian spaces]])**


For $\mathbb{R}^{b\vert s}$ a [[super Cartesian space]] (def. \ref{SuperCartesianSpace}), hence the [[formal dual]]
of the [[supercommutative superalgebra]] of the form

$$
  C^\infty(\mathbb{R}^{b\vert s})
  \;=\;
  C^\infty(\mathbb{R}^b) \otimes_{\mathbb{R}} \wedge^\bullet \mathbb{R}^s
$$

with canonical even-graded [[coordinate functions]] $(x^i)_{i = 1^b}$ and odd-graded coordinate functions $(\theta^j)_{j = 1}^s$.

Then the _[[de Rham complex]] of [[super differential forms]] on $\mathbb{R}^{b\vert s}$_
is, in super-generalization of def. \ref{DifferentialnForms}, the $\mathbb{Z} \times (\mathbb{Z}/2)$-[[graded commutative algebra]]

$$
  \Omega^\bullet(\mathbb{R}^{b|s})
  \;\coloneqq\;
  C^\infty(\mathbb{R}^{b|s})
    \otimes_{\mathbb{R}}
   \wedge^\bullet \langle
      d x^1, \cdots, d x^b,
      \;
      d \theta^1, \cdots, d\theta^s
   \rangle
$$

which is generated over $C^\infty(\mathbb{R}^{b\vert s})$ from new generators

$$
  \underset{
    \text{deg} = (1,even)
  }{\underbrace{ d x^i }}
  \phantom{AAAAA}
  \underset{
    \text{deg} = (1,odd)
  }{
  \underbrace{
    d \theta^j
  }
  }
$$

whose [[differential]] is defined in degree-0 by

$$
  d f
    \;\coloneqq\;
  \frac{\partial f}{\partial x^i} d x^i
    +
  \frac{\partial f}{\partial \theta^j} d \theta^j
$$

and extended from there as a bigraded [[derivation]] of bi-degree $(1,even)$,
in super-generalization of def. \ref{deRhamDifferential}.

Accordingly, the operation of contraction with [[tangent vector fields]] (def. \ref{ContractionOfFormsWithVectorFields})
has bi-degree $(-1,\sigma)$ if the tangent vector has super-degree $\sigma$:

| generator | bi-degree |
|--|--|
| $\phantom{AA} x^a$ | (0,even) |
| $\phantom{AA} \theta^\alpha$ | (0,odd) |
| $\phantom{AA} dx^a$ | (1,even) |
| $\phantom{AA} d\theta^\alpha$ | (1,odd) |

| derivation | bi-degree |
|------------|-----------|
| $\phantom{AA} d$ | (1,even) |
| $\phantom{AA}\iota_{\partial x^a}$ | (-1, even) |
| $\phantom{AA}\iota_{\partial \theta^\alpha}$ | (-1,odd)  |

This means that if $\alpha \in \Omega^\bullet(\mathbb{R}^{b\vert s})$ is in bidegree $(n_\alpha, \sigma_\alpha)$,
and $\beta \in \Omega^\bullet(\mathbb{R}^{b \vert \sigma})$ is in bidegree $(n_\beta, \sigma_\beta)$, then

$$
  \alpha \wedge \beta
  \;
  =
  \;
  (- 1)^{n_\alpha n_\beta + \sigma_\alpha \sigma_\beta}
  \;
  \beta \wedge \alpha
  \,.
$$

Hence there are _two_ contributions to the sign picked up when exchanging two super-differential forms in the wedge product:

1. there is a "cohomological sign" which for commuting an $n_1$-forms past an $n_2$-form is $(-1)^{n_1 n_2}$;

1. in addition there is a "super-grading" sign which for commuting a $\sigma_1$-graded coordinate function past a $\sigma_2$-graded coordinate function (possibly under the de Rham differential) is $(-1)^{\sigma_1 \sigma_2}$.

For example:

$$
  x^{a_1} (dx^{a_2}) \;=\; + (dx^{a_2}) x^{a_1}
$$


$$
  \theta^\alpha (dx^a) \;=\; + (dx^a) \theta^\alpha
$$

$$
  \theta^{\alpha_1} (d\theta^{\alpha_2})
   \;=\;
  - (d\theta^{\alpha_2}) \theta^{\alpha_1}
$$

$$
  dx^{a_1}
  \wedge
  d x^{a_2}
  \;=\;
  -
  d x^{a_2}
  \wedge
  d x^{a_1}
$$


$$
  dx^a
  \wedge
  d \theta^{\alpha}
  \;=\;
  -
  d\theta^{\alpha}
  \wedge
  d x^a
$$

$$
  d\theta^{\alpha_1}
  \wedge
  d \theta^{\alpha_2}
  \;=\;
  +
  d\theta^{\alpha_2}
  \wedge
  d \theta^{\alpha_1}
$$


=--

(e.g. [Castellani-D'Auria-Fré 91 (II.2.106) and (II.2.109)](signs+in+supergeometry#CastellaniDAuriaFre91), [Deligne-Freed 99, section 6](signs+in+supergeometry#DeligneFreed99))

Beware that there is also _another_ sign rule for [[super differential forms]]
used in the literature. See at _[[signs in supergeometry]]_ for further discussion.




$\,$


It is clear now by direct analogy with the definition of [[formal smooth sets]] (def. \ref{FormalSmoothSet})
what the corresponding [[supergeometry|supergeometric]] generalization is. For definiteness we
spell it out yet once more:

+-- {: .num_defn #SuperFormalSmoothSet}
###### Definition
**([[super formal smooth set|super smooth set]])**

A _[[super formal smooth set|super smooth set]]_ $X$ is

1. for each [[super Cartesian space]]
   $\mathbb{R}^n \times Spec(A)$ (def. \ref{SuperCartesianSpace}) a [[set]]

   $$
     X(\mathbb{R}^n \times Spec(A)) \in Set
   $$

   to be called the set of _[[smooth functions]]_ or _plots_ from $\mathbb{R}^n \times Spec(A)$ to $X$;

1. for each [[smooth function]] $f \;\colon\; \mathbb{R}^{n_1} \times Spec(A_1) \longrightarrow \mathbb{R}^{n_2} \times Spec(A_2)$
   between [[super Cartesian spaces]] a choice of function

   $$
     f^\ast \;\colon\; X(\mathbb{R}^{n_2} \times Spec(A_2)) \longrightarrow X(\mathbb{R}^{n_1} \times Spec(A_1))
   $$

   to be thought of as the precomposition operation

   $$
     \left(
       \mathbb{R}^{n_2} \overset{\Phi}{\longrightarrow} X
     \right)
     \;\overset{f^\ast}{\mapsto}\;
     \left(
       \mathbb{R}^{n_1}\times Spec(A_1) \overset{f}{\to} \mathbb{R}^{n_2} \times Spec(A_2) \overset{\Phi}{\to} X
     \right)
   $$

such that

1. ([[functor|functoriality]])

   1. If $id_{\mathbb{R}^n \times Spec(A)} \;\colon\; \mathbb{R}^n \times Spec(A) \to \mathbb{R}^n \times Spec(A)$ is the [[identity function]] on $\mathbb{R}^n \times Spec(A)$, then $\left(id_{\mathbb{R}^n \times Spec(A)}\right)^\ast \;\colon\; X(\mathbb{R}^n \times Spec(A)) \to X(\mathbb{R}^n \times Spec(A))$ is the [[identity function]] on the set of plots $X(\mathbb{R}^n \times Spec(A))$.

   1. If $\mathbb{R}^{n_1}\times Spec(A_1) \overset{f}{\to} \mathbb{R}^{n_2} \times Spec(A_2) \overset{g}{\to} \mathbb{R}^{n_3} \times Spec(A_3)$
   are two [[composition|composable]] [[smooth functions]] between infinitesimally thickened Cartesian spaces, then
   pullback of plots along them consecutively equals the pullback along the [[composition]]:

      $$
        f^\ast \circ g^\ast
        =
        (g \circ f)^\ast
      $$

      i.e.

      $$
        \array{
          && X(\mathbb{R}^{n_2} \times Spec(A_2))
          \\
          & {}^{\mathllap{f^\ast}}\swarrow && \nwarrow^{\mathrlap{g^\ast}}
          \\
          X(\mathbb{R}^{n_1} \times Spec(A_1))
          && \underset{ (g \circ f)^\ast }{\longleftarrow} &&
          X(\mathbb{R}^{n_3} \times Spec(A_3))
        }
      $$

1. ([[sheaf|gluing]])

   If $\{ U_i \times Spec(A) \overset{f_i \times id_{Spec(A)}}{\to} \mathbb{R}^n \times Spec(A)\}_{i \in I}$ is such that
   $$\{ U_i  \overset{f_i  }{\to} \mathbb{R}^n \}_{i \in I}$$
   is a [[differentiably good open cover]] (def. \ref{DifferentiablyGoodOpenCover}) then the function which restricts
   $\mathbb{R}^n \times Spec(A)$-plots of $X$ to a set of $U_i \times Spec(A)$-plots

   $$
     X(\mathbb{R}^n \times Spec(A))
       \overset{( (f_i)^\ast )_{i \in I}  }{\hookrightarrow}
     \underset{i \in I}{\prod} X(U_i \times Spec(A))
   $$

   is a [[bijection]] onto the set of those [[tuples]] $(\Phi_i \in X(U_i))_{i \in I}$ of plots,
   which are "[[matching families]]" in that they agree on [[intersections]]:

   $$
     \phi_i\vert_{((U_i \cap U_j) \times Spec(A)} = \phi_j \vert_{(U_i \cap U_j)\times Spec(A)}
   $$

   i.e.

   $$
     \array{
       && (U_i \cap U_j) \times Spec(A)
       \\
       & \swarrow && \searrow
       \\
       U_i\times Spec(A) && && U_j \times Spec(A)
       \\
       & {}_{\mathrlap{\Phi_i}}\searrow && \swarrow_{\mathrlap{\Phi_j}}
       \\
       && X
     }
   $$

Finally, given $X_1$ and $X_2$ two [[super formal smooth sets]], then a [[smooth function]] between them

$$
  f \;\colon\; X_1 \longrightarrow X_2
$$

is

* for each [[super Cartesian space]] $\mathbb{R}^n \times Spec(A)$ a function

  $$
    f_\ast(\mathbb{R}^n \times Spec(A))
    \;\colon\;
    X_1(\mathbb{R}^n \times Spec(A)) \longrightarrow X_2(\mathbb{R}^n \times Spec(A))
  $$

such that

* for each [[smooth function]] $g \colon \mathbb{R}^{n_1} \times Spec(A_1) \to \mathbb{R}^{n_2} \times Spec(A_2)$ between
  super Cartesian spaces we have

  $$
    g^\ast_2 \circ f_\ast(\mathbb{R}^{n_2} \times Spec(A_2))
    =
    f_\ast(\mathbb{R}^{n_1} \times Spec(A_1)) \circ g^\ast_1
  $$

  i.e.

  $$
    \array{
      X_1(\mathbb{R}^{n_2} \times Spec(A_2))
        &\overset{f_\ast(\mathbb{R}^{n_2}\times Spec(A_2) )}{\longrightarrow}&
      X_2(\mathbb{R}^{n_2} \times Spec(A_2))
      \\
      \mathllap{g_1^\ast}\downarrow && \downarrow\mathrlap{g^\ast_2}
      \\
      X_1(\mathbb{R}^{n_1} \times Spec(A_1))
        &\underset{f_\ast(\mathbb{R}^{n_1})}{\longrightarrow}&
      X_2(\mathbb{R}^{n_1} \times Spec(A_1))
    }
  $$

=--

([Yetter 88](synthetic+differential+supergeometry#Yetter88))

Basing [[supergeometry]] on [[super formal smooth sets]] is an instance of the general approach to [[geometry]] called _[[functorial geometry]]_ or _[[topos theory]]_. For more background on this see at _[[geometry of physics -- supergeometry]]_.

In direct generalization of example \ref{SmoothManifoldsAreDiffeologicalSpaces} we have:

+-- {: .num_example #SuperSmoothSetSuperCartesianSpaces}
###### Example
**([[super Cartesian spaces]] are [[super formal smooth sets|super smooth sets]])**

Let $X$ be a [[super Cartesian space]] (def. \ref{SuperCartesianSpace}) Then it becomes a [[super formal smooth set|super smooth set]] (def. \ref{SuperFormalSmoothSet})
by declaring its plots $\Phi \in X(\mathbb{R}^n \times \mathbb{D})$ to the algebra homomorphisms
$ C^\infty(\mathbb{R}^n \times \mathbb{D}) \leftarrow C^\infty(\mathbb{R}^{b\vert s})$.

Under this identification, morphisms between [[super Cartesian spaces]] are in [[natural bijection]]
with their morphisms regarded as [[super formal smooth set|super smooth sets]].

Stated more [[category theory|abstractly]], this statement is an example of the _[[Yoneda embedding]]_
over a _[[subcanonical site]]_.

=--

Similarly, in direct generalization of prop. \ref{CartSpYpnedaLemma} we have:

+-- {: .num_prop #SuperCartSpYpnedaLemma}
###### Proposition
**(plots of a [[super formal smooth set|super smooth set]] really are the [[smooth functions]] into the smooth smooth set)**

Let $X$ be a [[super formal smooth set|super smooth set]] (def. \ref{SuperFormalSmoothSet}).
For $\mathbb{R}^n \times \mathbb{D}$ any [[super Cartesian space]] (def. \ref{SuperCartesianSpace})
there is a [[natural transformation|natural]] [[function]]

$$
  Hom_{SmoothSet}(\mathbb{R}^n , X) \overset{\simeq}{\longrightarrow} X(\mathbb{R}^n)
$$

from the set of homomorphisms of super smooth sets from $\mathbb{R}^n \times \mathbb{D}$ (regarded as a super smooth set via example \ref{SuperSmoothSetSuperCartesianSpaces})
to $X$, to the set of plots of $X$ over $\mathbb{R}^n \times \mathbb{D}$, given by evaluating on the [[identity function|identity]] plot $id_{\mathbb{R}^n \times \mathbb{D}}$.

This function is a _[[bijection]]_.

This says that the plots of $X$, which initially bootstrap $X$ into being as declaring the _would-be_ smooth functions
into $X$, end up being the _actual_ smooth functions into $X$.

=--

+-- {: .proof}
###### Proof

This is the statement of the _[[Yoneda lemma]]_ over the [[site]] of [[super Cartesian spaces]].

=--



We do not need to consider here [[supermanifolds]] more general than the [[super Cartesian spaces]] (def. \ref{SuperCartesianSpace}).
But for those readers familiar with the concept we include the following direct analog of
the characterization of [[smooth manifolds]] according to def./prop. \ref{SmoothManifoldInsideDiffeologicalSpaces}:

+-- {: .num_defn #SuperSmoothManifolds}
###### Definition/Proposition
**([[supermanifolds]])**

A _[[supermanifold]]_ $X$ of [[dimension]] super-dimension $(b,s) \in \mathbb{N} \times \mathbb{N}$ is

* a [[super smooth set]] (def. \ref{SuperFormalSmoothSet})

such that

1. there exists an [[indexed set]] $\{ \mathbb{R}^{b\vert s} \overset{\phi_i}{\to} X\}_{i \in I}$
   of morphisms of [[super formal smooth sets|super smooth sets]] (def. \ref{SuperFormalSmoothSet}) from [[super Cartesian spaces]] $\mathbb{R}^{b\vert s}$ (def. \ref{SuperCartesianSpace}) (regarded as [[super formal smooth set|super smooth sets]] via example \ref{SuperSmoothSetSuperCartesianSpaces}
   into $X$, such that

   1. for every plot $\mathbb{R}^n \times \mathbb{D} \to X$ there is a [[differentiably good open cover]] (def. \ref{DifferentiablyGoodOpenCover}) restricted to which the plot factors through the $\mathbb{R}^{b\vert s}_i$;

   1. every $\phi_i$ is a [[local diffeomorphism]] according to def. \ref{FormalSmoothSetLocalDiffeomorphism},
      now with respect not just to [[infinitesimally thickened points]], but with respect to [[superpoints]];

1. the [[bosonic modality|bosonic]] part of $X$ is a [[smooth manifold]] according to def./prop. \ref{SmoothManifoldInsideDiffeologicalSpaces}.

=--

Finally we have the evident generalization of the smooth moduli space $\mathbf{\Omega}^\bullet$ of [[differential forms]]
from example \ref{UniversalSmoothModuliSpaceOfDifferentialForms} to [[supergeometry]]

+-- {: .num_example #ModuliOfSDifferentialForms}
###### Example
**(universal [[smooth set|smooth]] [[moduli spaces]] of [[super differential forms]])**

For $n \in \mathbf{M}$ write

$$
  \mathbf{\Omega}^n \;\in\; SuperSmoothSet
$$

for the [[super smooth set]] (def. \ref{SuperSmoothSetSuperCartesianSpaces}) whose set of plots
on a [[super Cartesian space]] $U \in SuperCartSp$ (def. \ref{SuperCartesianSpace})
is the set of [[super differential forms]] (def. \ref{DifferentialFormOnSuperCartesianSpaces})
of cohomolgical degree $n$

$$
  \mathbf{\Omega}^n(U) \;\coloneqq\; \Omega^n(U)
$$

and whose maps of plots is given by [[pullback of differential forms|pullback]] of super differential forms.

The [[de Rham differential]] on [[super differential forms]] applied plot-wise yields a morpism
of super smooth sets

$$
  \label{SuperUniversalDeRhamDifferential}
  d \;\colon\; \mathbf{\Omega}^n \longrightarrow \mathbf{\Omega}^{n+1}
  \,.
$$

As before in def. \ref{DifferentialFormsOnDiffeologicalSpaces} we then define
for any [[super smooth set]] $X \in SuperSmoothSet$ its set of differential $n$-forms to be

$$
  \Omega^n(X)
   \;\coloneqq\;
  Hom_{SuperSmoothSet}(X,\mathbf{\Omega}^n)
$$

and we define the [[de Rham differential]] on these to be given by postcomposition with (eq:SuperUniversalDeRhamDifferential).

=--

$\,$

+-- {: .num_defn #FermionicBosonicFields}
###### Definition
**([[bosonic fields]] and [[fermionic fields]])**

For $\Sigma$ a [[spacetime]], such as [[Minkowski spacetime]] (def. \ref{MinkowskiSpacetime})
if a [[fiber bundle]] $E \overset{fb}{\longrightarrow} \Sigma$ with total space a [[super Cartesian space]] (def. \ref{SuperCartesianSpace})
(or more generally a [[supermanifold]], def./prop. \ref{SuperSmoothManifolds}) is regarded as a super-[[field bundle]] (def. \ref{FieldsAndFieldBundles}),
then

* the even-graded [[sections]] are called the _[[bosonic field|bosonic]]_ [[field histories]];

* the odd-graded [[sections]] are called the _[[fermionic field|fermionic]]_ [[field histories]].

In components, if $E = \Sigma \times F$ is a [[trivial bundle]] with [[fiber]] a [[super Cartesian space]] (def. \ref{SuperCartesianSpace})
with even-graded [[coordinates]] $(\phi^a)$ and odd-graded [[coordinates]] $(\psi^A)$, then the $\phi^a$ are called the
_[[bosonic field|bosonic]]_ field coordinates, and the $\psi^A$ are called the _[[fermionic field|fermionic]]_ field coordinates.

=--

What is crucial for the discussion of [[field theory]] is the following immediate [[supergeometry|supergeometric]] analog of the smooth structure on the [[space of field histories]] from example \ref{DiffeologicalSpaceOfFieldHistories}:

+-- {: .num_example #SupergeometricSpaceOfFieldHistories}
###### Example
**([[super smooth set|supergeometric]]  [[space of field histories]])**

Let $E \overset{fb}{\to} \Sigma$ be a super-[[field bundle]] (def. \ref{FieldsAndFieldBundles}, def. \ref{FermionicBosonicFields}).

Then the _[[space of sections]]_, hence the _[[space of field histories]]_, is the [[super formal smooth set]] (def. \ref{SuperFormalSmoothSet})

$$
  \Gamma_\Sigma(E) \in SuperSmoothSet
$$

whose plots $\Phi_{(-)}$ for a given [[Cartesian space]] $\mathbb{R}^n$ and
[[superpoint]] $\mathbb{D}$  (def. \ref{SuperCartesianSpace}) with the [[Cartesian products]]
$U \coloneqq \mathbb{R}^n \times \mathbb{D}$ and $U \times \Sigma$ regarded as
[[super formal smooth set|super smooth sets]] according to example \ref{SuperSmoothSetSuperCartesianSpaces} are defined to be the [[morphisms]]
of [[super formal smooth set|super smooth set]] (def. \ref{SuperFormalSmoothSet})

$$
  \array{
    U \times \Sigma &\overset{\Phi_{(-)}(-)}{\longrightarrow}& E
  }
$$

which make the following [[commuting diagram|diagram commute]]:

$$
  \array{
    && E
    \\
    & {}^{\mathllap{\Phi_{(-)}(-)}}\nearrow & \downarrow^{\mathrlap{fb}}
    \\
    U \times \Sigma &\underset{pr_2}{\longrightarrow}& \Sigma
  }
  \,.
$$

Explicitly, if $\Sigma$ is a [[Minkowski spacetime]] (def. \ref{MinkowskiSpacetime}) and $E = \Sigma \times F$
a [[trivial bundle|trivial]] [[field bundle]] with [[field fiber]] a [[super vector space]] (example \ref{TrivialVectorBundleAsAFieldBundle}, example \ref{FermionicBosonicFields}) this means [[formal duality|dually]] that a plot $\Phi_{(-)}$
of the super smooth set of field histories is a
[[homomorphism]] of [[supercommutative superalgebras]] (def. \ref{SupercommutativeSuperalgebra})

$$
  \array{
    C^\infty(U \times \Sigma) &\overset{\left(\Phi_{(-)}(-)\right)^\ast}{\longleftarrow}& C^\infty(E)
  }
$$

which make the following [[commuting diagram|diagram commute]]:

$$
  \array{
    && C^\infty(E)
    \\
    & {}^{\mathllap{\left( \Phi_{(-)}(-) \right)^\ast }}\nearrow & \uparrow^{\mathrlap{fb^\ast}}
    \\
    C^\infty(U \times \Sigma) &\underset{pr_2^\ast}{\longleftarrow}& C^\infty(\Sigma)
  }
  \,.
$$


=--

We will focus on discussing the [[supergeometry|supergeometric]] [[space of field histories]] (example \ref{SupergeometricSpaceOfFieldHistories}) of the _[[Dirac field]]_ (def. \ref{DiracFieldBundle} below). This we consider below in example \ref{DiracFieldBundle};
but first we discuss now some relevant basics of general [[supergeometry]].

Example \ref{SupergeometricSpaceOfFieldHistories} is really a special case of a general
relative [[mapping space]]-construction as in example \ref{MappingSpaceOutOfAnInfinitesimallyThickenedCartesianSpace}.
This immediately generalizes also to the [[supergeometry|supergeometric]] context.

+-- {: .num_defn #MappingSpaceOutOfASuperCartesianSpace}
###### Definition
**([[supergeometry|super]]-[[mapping space]] out of a [[super Cartesian space]])**

Let $X$ be a [[super Cartesian space]] (def. \ref{SuperCartesianSpace}) and let $Y$ be a [[super formal smooth sets|super smooth set]] (def. \ref{SuperFormalSmoothSet}).
Then the _[[mapping space]]_

$$
  [X,Y] \;\in\; SuperSmoothSet
$$

of super smooth functions from $X$ to $Y$ is the [[super formal smooth set]]
whose $U$-plots are the morphisms of [[super formal smooth set|super smooth set]]
from the [[Cartesian product]] of [[super Cartesian space]] $U \times X$ to $Y$,
hence the $U \times X$-plots of $Y$:

$$
  [X,Y](U) \;\coloneqq\; Y(U \times X)
  \,.
$$

=--

In direct generalization of the [[synthetic differential geometry|synthetic]] [[tangent bundle]]
construction (example \ref{TangentBundleSynthetic}) to supergeometry we have

+-- {: .num_defn #TangentBundleOdd}
###### Definition
**([[odd tangent bundle]])**

Let $X$ be a [[super formal smooth set|super smooth set]] (def. \ref{SuperFormalSmoothSet})
and $\mathbb{R}^{0\vert 1}$ the [[superpoint]] (eq:StandardSuperpoints) then the [[supergeometry|supergeometry]]-[[mapping space]]

$$
  \array{
    T_{odd} X & \coloneqq& [\mathbb{R}^{0\vert 1}, X]
    \\
    {}^{\mathllap{tb_{odd}}}\downarrow && \downarrow^{\mathrlap{ [ \ast \to \mathbb{R}^{0 \vert 1}, X ] }}
    \\
    X & = & X
  }
$$

is called the _[[odd tangent bundle]]_ of $X$.

=--

+-- {: .num_example #SuperpointsMapping}
###### Example
**([[mapping space]] of [[superpoints]])**

Let $V$ be a [[finite dimensional vector space|finite dimensional]] [[real vector space]] and
consider its corresponding [[superpoint]] $V_{odd}$ from exampe \ref{SuperpointInducedByFiniteDimensionalVectorSpace}.
Then the [[mapping space]] (def. \ref{MappingSpaceOutOfASuperCartesianSpace}) out of the
[[superpoint]] $\mathbb{R}^{0\vert 1}$ (def. \ref{SuperCartesianSpace}) into $V_{odd}$ is
the [[Cartesian product]] $V_{odd} \times V$


$$
  [\mathbb{R}^{0\vert 1}, V_{odd}]
  \;\simeq\;
  V_{odd} \times V
  \,.
$$

By def. \ref{TangentBundleOdd} this says that $V_{odd} \times V$ is the "[[odd tangent bundle]]" of $V_{odd}$.

=--


+-- {: .proof}
###### Proof

Let $U$ be any [[super Cartesian space]]. Then by definition we have the
following sequence of [[natural bijections]] of sets of plots

$$
  \begin{aligned}
    \left[
      \mathbb{R}^{0\vert 1}, V_{odd}
    \right](U)
    & =
    Hom_{SuperSmoothSet}( \mathbb{R}^{0\vert 1} \times U, V_{odd} )
    \\
    &
    \simeq
    Hom_{\mathbb{R}sAlg}( \wedge^\bullet(V^\ast)\,,\, C^\infty(U)[\theta]/(\theta^2) )
    \\
    &
    \simeq
    Hom_{\mathbb{R}Vect}( V^\ast \,,\, (C^\infty(U)_{odd} \oplus C^\infty(U)_{even}\langle \theta\rangle  )
    \\
    & \simeq
    Hom_{\mathbb{R}Vect}( V^\ast\,,\, C^\infty(U)_{odd} ) \,\times\, Hom_{\mathbb{R}Vect}( V^\ast, C^\infty(U)_{even} )
    \\
    & \simeq
    V_{odd}(U) \times V(U)
    \\
    & \simeq
    (V_{odd} \times V)(U)
  \end{aligned}
$$

Here in the third line we used that the [[Grassmann algebra]] $\wedge^\bullet V^\ast$ is [[free construction|free]]
on its generators in $V^\ast$, meaning that a homomorphism of [[supercommutative superalgebras]] out of the Grassmann algebra is uniquely
fixed by the underlying degree-preserving [[linear function]] on these generators. Since in a [[Grassmann algebra]]
all the generators are in odd degree, this is equivalently a linear map from $V^\ast$ to the odd-graded
[[real vector space]] underlying $C^\infty(U)[\theta](\theta^2)$,
which is the [[direct sum]] $C^\infty(U)_{odd} \oplus C^\infty(U)_{even}\langle \theta \rangle$.

Then in the fourth line we used that [[finite coproduct|finite]] [[direct sums]] are [[Cartesian products]],
so that linear maps into a direct sum are [[pairs]] of linear maps into the direct summands.

That all these [[bijections]] are [[natural bijection|natural]] means that they are compatible with
morphisms $U \to U'$ and therefore this says that $[\mathbb{R}^{0\vert 1}, V_{odd}]$ and $V_{odd} \times V$
are the same as seen by super-smooth plots, hence that they are [[isomorphism|isomorphic]] as
[[super formal smooth set|super smooth sets]].

=--

With this [[supergeometry]] in hand we finally turn to defining the [[Dirac field]] species:

+-- {: .num_example #DiracFieldBundle}
###### Example
**([[field bundle]] for [[Dirac field]])**

For $\Sigma$ being [[Minkowski spacetime]] (def. \ref{MinkowskiSpacetime}),
of dimension $2+1$, $3+1$, $5+1$ or $9+1$, let $S$ be the [[spin representation]] from prop. \ref{SpinorRepsByNormedDivisionAlgebra},
whose underlying [[real vector space]] is

$$
  S \;=\;
  \left\{
    \array{
      \mathbb{R}^2 \oplus \mathbb{R}^2 & \vert & p + 1 = 2+1
      \\
      \mathbb{C}^2 \oplus \mathbb{C}^2  &\vert& p + 1 = 3 + 1
      \\
      \mathbb{H}^2 \oplus \mathbb{H}^2 &\vert& p + 1 = 5 + 1
      \\
      \mathbb{O}^2  \oplus \mathbb{O}^2 &\vert& p + 1 = 9 + 1
    }
  \right.
$$

With

$$
  S_{odd} \simeq \mathbb{R}^{0 \vert dim(S)}
$$

the corresponding [[superpoint]] (example \ref{SuperpointInducedByFiniteDimensionalVectorSpace}),
then the [[field bundle]] for the _[[Dirac field]]_ on $\Sigma$ is

$$
  E \;\coloneqq\; \Sigma \times S_{odd} \overset{pr_1}{\to} \Sigma
  \,,
$$

hence the [[field fiber]] is the [[superpoint]] $S_{odd}$. This is the corresponding [[spinor bundle]]
on [[Minkowski spacetime]], with fiber in odd super-degree.

The traditional two-component [[spinor]] basis from remark \ref{TwoComponentSpinorNotation}
provides [[fermionic field]] coordinates (def. \ref{FermionicBosonicFields}) on the [[field fiber]] $S_{odd}$:

$$
  \left(
   \psi^A
  \right)_{A = 1}^4
   \;=\;
  \left(
     (\chi_a), (\xi^{\dagger \dot a})
  \right)_{a,\dot a = 1,2}
  \,.
$$

Notice that these are $\mathbb{K}$-valued odd functions: For instance if $\mathbb{K} = \mathbb{C}$ then each $\chi_a$ in turn has
two components, a [[real part]] and an [[imaginary part]].

A key point with the [[field bundle]] of the [[Dirac field]] (example \ref{DiracFieldBundle})
is that the field fiber coordinates $(\psi^A)$ or $\left((\chi_a), (\xi^{\dagger \dot a})\right)$
are now odd-graded elements in the function algebra on the field fiber, which is the
[[Grassmann algebra]] $C^\infty(S_{odd}) =  \wedge^\bullet(S^\ast)$. Therefore they anti-commute
with each other:

$$
  \label{DiracFieldCoordinatesAnticommute}
  \psi^\alpha  \psi^{\beta} = - \psi^{\beta} \psi^\alpha
  \,.
$$



<img src="https://ncatlab.org/nlab/files/DermisekAnticommutingSpinorFieldCoordinates.jpg" width="400">

> snippet grabbed from ([Dermisek 09](Dirac+field#DermisekI8))

=--


We analyze the special nature of the [[supergeometry|supergeometry]] [[space of field histories]] of the [[Dirac field]] a little (prop. \ref{DiracSpaceOfFieldHistories}) below
and conclude by highlighting the crucial role of [[supergeometry]] (remark \ref{DiracFieldSupergeometric} below)

+-- {: .num_defn #DiracSpaceOfFieldHistories}
###### Proposition
**([[space of field histories]] of the [[Dirac field]])**

Let $E = \Sigma \times S_{odd} \overset{pr_1}{\to}  \Sigma$ be the super-[[field bundle]] (def. \ref{FermionicBosonicFields}) for the [[Dirac field]] over [[Minkowski spacetime]] $\Sigma = \mathbb{R}^{p,1}$ from example \ref{DiracFieldBundle}.

Then the corresponding [[supergeometry|supergeometric]] [[space of field histories]]

$$
  \Gamma_\Sigma(\Sigma \times S_{odd})
  \;\in\;
  SuperSmoothSet
$$

from example \ref{SupergeometricSpaceOfFieldHistories} has the following properties:

1. For $U = \mathbb{R}^n$ an ordinary [[Cartesian space]] (with no super-geometric thickening, def. \ref{SuperCartesianSpace})
   there is only a single $U$-parameterized collection of [[field histories]], hence a single plot

   $$
     \Psi_{(-)}\;\colon\;\mathbb{R}^n \overset{ 0 }{\longrightarrow} \Gamma_\Sigma(\Sigma \times S_{odd})
   $$

   and this corresponds to the [[zero section]], hence to the trivial [[Dirac field]]

   $$
     \Psi^A_{(-)} = 0
     \,.
   $$

1. For $U = \mathbb{R}^{n \vert 1}$ a [[super Cartesian space]] (\ref{SuperCartesianSpace}) with a single super-odd
   dimension, then $U$-parameterized collections of field histories

   $$
     \Psi_{(-)} \;\colon\; \mathbb{R}^{n\vert 1} \longrightarrow \Gamma_\Sigma(\Sigma \times S_{odd})
   $$

   are in [[natural bijection]] with plots of sections of the [[bosonic field|bosonic]]-field bundle
   with field fiber $S_{even} = S$ the [[spin representation]] regarded as an ordinary vector space:

   $$
     \theta \Psi_{(-)} \;\colon\; \mathbb{R}^n \longrightarrow \Gamma_\Sigma(\Sigma \times S_{even})
     \,,
   $$

Moreover, these two kinds of plots determine the fermionic field space completely: It is
in fact [[isomorphism|isomorphic]], as a [[super vector space]], to the bosonic field space
shifted to odd degree (as in example \ref{SuperpointInducedByFiniteDimensionalVectorSpace}):

$$
  \Gamma_\Sigma(\Sigma \times S_{odd})
    \;\simeq\;
  \left(
    \Gamma_\Sigma(E\times S_{even})
  \right)_{odd}
  \,.
$$

=--


+-- {: .proof}
###### Proof

In the first case, the plot is a morphism of [[super Cartesian spaces]] (def. \ref{SuperCartesianSpace}) of the form

$$
  \mathbb{R}^n \times \mathbb{R}^{p,1} \longrightarrow S_{odd}
  \,.
$$

By definitions this is [[formal duality|dually]] homomorphism of real [[supercommutative superalgebras]]

$$
  C^\infty(\mathbb{R}^n \times \mathbb{R}^{p,1}) \longleftarrow \wedge^\bullet S^\ast
$$

from the [[Grassmann algebra]] on the [[dual vector space]] of the [[spin representation]] $S$
to the ordinary algebras of [[smooth functions]] on $\mathbb{R}^n \times \mathbb{R}^{p,1}$.
But the latter has no elements in odd degree, and hence all the Grassmann generators need to be
send to zero.

For the second case, notice that a morphism of the form

$$
  \mathbb{R}^{n\vert 1}
    \overset{\Psi_{(-)}}{\longrightarrow}
  S_{odd}
$$

is by def. \ref{TangentBundleOdd} [[natural bijection|naturally identified]] with a morphism of the form

$$
  \mathbb{R}^n \overset{}{\longrightarrow} [\mathbb{R}^{0 \vert 1}, S_{odd}] \simeq S_{odd} \times S_{even}
  \,,
$$

where the identification on the right is from example \ref{SuperpointsMapping}.

By the [[universal property|nature]] of [[Cartesian products]] these morphisms in turn
are [[natural bijection|naturally identified]] with [[pairs]] of morphisms of the form

$$
  \left(
    \array{
      \mathbb{R}^n &\overset{}{\longrightarrow}& S_{odd}\,,
      \\
      \mathbb{R}^n &\overset{}{\longrightarrow}& S_{even}
    }
  \right)
  \,.
$$

Now, as in the first point above, here the first component is uniquely fixed
to be the [[zero morphism]] $\mathbb{R}^n \overset{0}{\to} S_{odd}$;
and hence only the second component is free to choose. This is precisely the claim to be shown.


=--


+-- {: .num_remark #DiracFieldSupergeometric}
###### Remark
**([[supergeometry|supergeometric]] nature of the [[Dirac field]])**

Proposition \ref{DiracSpaceOfFieldHistories} how two basic facts about the [[Dirac field]],
which may superficially seem to be in tension with each other, are properly unified by [[supergeometry]]:

1. On the one hand a [[field history]] $\Psi$ of the [[Dirac field]] is _not_ an ordinary section of an ordinary [[vector bundle]].
   In particular its component functions $\psi^A$ anti-commute with each other, which is not the case for
   ordinary functions, and this is crucial for the [[Lagrangian density]] of the Dirac field to be
   well defined, we come to this below in example \ref{LagrangianDensityForDiracField}.

1. On the other hand a [[field history]] of the [[Dirac field]] is supposed to be a [[spinor]], hence
   a [[section]] of a [[spinor bundle]], which is an ordinary [[vector bundle]].

Therefore prop. \ref{DiracSpaceOfFieldHistories} serves to shows how, even though a Dirac field is not defined to be
an ordinary section of an ordinary vector bundle, it is nevertheless encoded by such an ordinary section:
One says that this ordinary section is a "[[superfield]]-component" of the Dirac field,
the one linear in a Grassmann variable $\theta$.


=--

$\,$

This concludes our discussion of the concept of _[[field (physics)|fields]]_ itself.
In the [following chapter](#FieldVariations) we consider the [[variational calculus]] of fields.


$\,$

## Field variations
 {#FieldVariations}

Given a [[field bundle]] as in def. \ref{FieldsAndFieldBundles} above, then we know what [[type]] of quantities the corresponding
[[field histories]] assign to a given spacetime point (a given [[event]]). Among all consistent such field histories, some are to qualify as those that "may occur in reality" if we think of the field theory as a means to describe parts of the [[observable universe]]. Moreover, if the reality to be described does not exhibit "action at a distance" then admissibility of its field histories should be determined over arbitrary small spacetime regions, in fact over the [[infinitesimal neighbourhood]] of any spacetime point (remark \ref{JetBundleInTermsOfSyntheticDifferentialGeometry} below). This means equivalently that the realized field histories should be those that satisfy a given _[[differential equation]]_, namely an [[equation]] between the [[partial derivatives]] of the field history at any spacetime point. This is called the _[[equation of motion]]_ of the field theory (def. \ref{EulerLagrangeEquationsOnTrivialVectorFieldBundleOverMinkowskiSpacetime} below).

In order to formalize this, it is useful to first collect all the possible partial derivatives that a field history may have at any given point into one big space of "field derivatives at spacetime points". This collection is called the _[[jet bundle]]_ of the [[field bundle]], given as def. \ref{JetBundleOfTrivialVectorBundleOverMinkowskiSpacetime} below.

Moving around in this space means to change the possible value of fields and their derivatives, hence to _vary_ the fields. Accordingly _[[variational calculus]]_ of fields is just [[differential calculus]] on the [[jet bundle]] of the [[field bundle]], this we consider in def. \ref{VariationalBicomplexOnSecondOrderJetBundleOverTrivialVectorBundleOverMinkowskiSpacetime} below.

$\,$


+-- {: .num_defn #JetBundleOfTrivialVectorBundleOverMinkowskiSpacetime}
###### Definition
**([[jet bundle]] of a [[trivial vector bundle]] over [[Minkowski spacetime]])**

Given a [[field fiber]] [[super vector space]] $F = \mathbb{R}^{b\vert s}$ with [[linear basis]] $(\phi^a)$,
then for $k \in \mathbb{N}$ a natural number,  the _order-$k$ [[jet bundle]]_

$$
  \array{
    J^k_{\Sigma}( E )
    \\
    \downarrow^{\mathrlap{jb_k}}
    \\
    \Sigma
  }
$$

over [[Minkowski spacetime]] $\Sigma$ of the [[trivial vector bundle]]

$$
  E \coloneqq \Sigma \times F
$$

is the [[super Cartesian space]] (def. \ref{SuperCartesianSpace}) which is spanned by coordinate functions to be denoted as follows:

$$
  \left(
     (x^\mu)
     \,,\,
     (\phi^a )
     \,,\,
     ( \phi^a_{,\mu} )
     \,,\,
     ( \phi^a_{,\mu_1\mu_2} )
     \,,\,
     \cdots
     \,,\,
     ( \phi^a_{,\mu_1 \cdots \mu_k} )
     \,,\,
     \cdots
  \right)
$$

where the indices $\mu, \mu_1, \mu_2, \cdots$ range from 0 to $p$, while the index $a$ ranges from $1$ to $b$ for the
even field coordinates, and them from $b+1$ to $b+s$ for the odd-graded field coordinates. In terms of these coordinates the [[bundle]] [[projection]] map $jb_k$ is just the one that remembers the spacetime coordinates $x^\mu$ and forgets the values of the field $\phi^a$ and its derivatives $\phi_{\mu}$. Similarly there are intermediate projection maps

$$
  \array{
    \cdots
     &\overset{jb_{3,2}}{\longrightarrow}&
    J^{2}_\Sigma(E)
      &\overset{jb_{2,1}}{\longrightarrow}&
    J^1_\Sigma(E)
      &\overset{jb_{1,0}}{\longrightarrow}&
    E
    \\
    && &{}_{\mathllap{jb_2}}\searrow& {}^{\mathllap{jb_1}}\downarrow  &\swarrow_{\mathrlap{fb}}&
    \\
    && && \Sigma &&
  }
$$

given by forgetting coordinates with more indices.

The _infinite-order [[jet bundle]]_

$$
  J^\infty_\Sigma(E) \in SuperSmoothSet
$$

is the [[direct limit]] of [[super formal smooth sets|super smooth sets]] (def. \ref{SuperFormalSmoothSet}) over these finite order jet bundles. Explicitly this means that it is the [[smooth set]] which is defined
by the fact that a smooth function (a plot, by prop. \ref{SuperCartSpYpnedaLemma})

$$
  U \overset{f}{\longrightarrow} J^\infty_\Sigma(E)
$$

from some [[super Cartesian space]] $U$ is equivalently a system of ordinary smooth functions
into all the finite-order jet spaces

$$
  \left(
    U \overset{f_k}{\longrightarrow} J^k_\Sigma(E)
  \right)_{k \in \mathbb{N}}
  \,,
$$

such that this system is compatible with the
above projection maps, i.e. such that

$$
  \underset{k \in \mathbb{N}}{\forall} \left(
    jb_{k+1,k} \circ f_{k+1} = f_k
  \right)
  \phantom{AAAAAAA}
  \array{
    && && U &&
    \\
    && & {}^{\mathllap{f_2}}\swarrow&  {}_{\mathllap{f_1}}\downarrow  &\searrow^{f_0}&
    \\
    \cdots
     &\overset{jb_{3,2}}{\longrightarrow}&
    J^{2}_\Sigma(E)
      &\overset{jb_{2,1}}{\longrightarrow}&
    J^1_\Sigma(E)
      &\overset{jb_1}{\longrightarrow}&
    E
    \\
    && &{}_{\mathllap{jb_2}}\searrow& {}^{\mathllap{jb_1}}\downarrow  &\swarrow_{\mathrlap{fb}}&
    \\
    && && \Sigma &&
  }
$$

=--

The coordinate functions $\phi^a_{\mu_1 \cdots \mu_k}$ on a [[jet bundle]] (def. \ref{JetBundleOfTrivialVectorBundleOverMinkowskiSpacetime})
are to be thought of as [[partial derivatives]] $\frac{\partial}{\partial x^{\mu_1}} \cdots \frac{\partial}{\partial x^{\mu_k}} \Phi^a$ of components $\Phi^a$ of would-be [[field histories]] $\Phi$. The power of the jet bundle is that it allows
to disentangle relations between would-be partial derivatives of field history components in themselves
from consideration of actual [[field histories]]. In traditional physics texts this is often done implicitly.
We may make it fully explit by the operation of _[[jet prolongation]]_ which reads in a [[field history]]
and records all its partial derivatives in the form of a section of the jet bundle:


+-- {: .num_defn #JetProlongation}
###### Definition
**([[jet prolongation]])**

Let $E \overset{fb}{\to} \Sigma$ be a [[field bundle]] (def. \ref{FieldsAndFieldBundles}) which happens to be a [[trivial vector bundle]]
over [[Minkowski spacetime]] as in example \ref{TrivialVectorBundleAsAFieldBundle}.

There is a  [[smooth function]] from the [[space of sections]] of $E$, the [[space of field histories]] (example \ref{SupergeometricSpaceOfFieldHistories}) to the space of sections of the [[jet bundle]] $J^\infty_\Sigma(E) \overset{jb^\infty}{\to} \Sigma$ (def. \ref{JetBundleOfTrivialVectorBundleOverMinkowskiSpacetime}) which records the field $\Phi$ and all its spacetimes [[derivatives]]:

$$
  \array{
    \Gamma_\Sigma(E)
      &\overset{j^\infty_\Sigma}{\longrightarrow}&
    \Gamma_\Sigma(J^\infty_\Sigma(E))
    \\
    (\Phi^a)
    &\mapsto&
    \left(
    \left( \Phi^a \right)
      \,,\,
      \left(  \frac{\partial \Phi^a}{\partial x^\mu}  \right)
      \,,\,
      \left( \frac{\partial^2 \Phi^a}{\partial x^{\mu_1} \partial x^{\mu_2}}  \right)
      \,,\,
      \cdots
    \right)
  }
  \,.
$$

This is called the operation of _[[jet prolongation]]_: $j^\infty_\Sigma(\Phi)$ is the jet prolongation of $\Phi$.

=--


+-- {: .num_remark #JetBundleInTermsOfSyntheticDifferentialGeometry}
###### Remark
**([[jet bundle]] in terms of [[synthetic differential geometry]])**

In terms of the [[synthetic differential geometry|infinitesimal geometry]] of [[formal smooth sets]]
(def. \ref{FormalSmoothSet}) the [[jet bundle]] $J^\infty_\Sigma(E) \overset{jb_\infty}{\to} \Sigma$ (def. \ref{JetBundleOfTrivialVectorBundleOverMinkowskiSpacetime})
of a [[field bundle]] $E \overset{fb}{\to}\Sigma$ has the following incarnation:

A [[section]] of the [[jet bundle]] over a point $x \in \Sigma$ of [[spacetime]] (an [[event]]),
is equivalently a section of the original [[field bundle]] over the [[infinitesimal neighbourhood]]
$\mathbb{D}_x$ of that point (example \ref{InfinitesimalNeighbourhood}):

$$
  \left\{
  \array{
     && J^\infty_\Sigma(E)
     \\
     & \nearrow & \downarrow^{\mathrlap{jb_\infty}}
     \\
     \{x\}
     &\hookrightarrow&
     \Sigma
  }
  \phantom{AA}
  \right\}
  \phantom{AA}
  \simeq
  \phantom{AA}
  \left\{
  \array{
    && E
    \\
    & {}^{\mathllap{}}\nearrow & \downarrow^{\mathrlap{fb}}
    \\
    \mathbb{D}_x &\hookrightarrow& \Sigma
  }
  \phantom{AA}
  \right\}
  \,.
$$

Moreover, given a [[field history]] $\Phi$, hence a [[section]] of the [[field bundle]],
then its [[jet prolongation]] $j^\infty(\Phi)$ (def. \ref{JetProlongation}) is that [[section]]
of the [[jet bundle]] which under the above identification is simply the restriction of
$\Phi$ to the [[infinitesimal neighbourhood]] of $x$:

$$
  \array{
    && E
    \\
    & {}^{\mathllap{\Phi}}\nearrow & \downarrow^{\mathrlap{fb}}
    \\
    \Sigma & = & \Sigma
  }
  \phantom{AAAA}\overset{j^\infty_\Sigma}{\mapsto} \phantom{AAAA}
  \array{
    && J^\infty_\Sigma(E)
    \\
    & {}^{\mathllap{j^\infty_\Sigma(\Phi)}}\nearrow & \downarrow^{\mathrlap{jb_\infty}}
    \\
    \Sigma &=& \Sigma
  }
  \phantom{AAAA}
  \overset{(-)\vert_{\{x\}} }{\mapsto}
  \phantom{AAAA}
  \array{
    && E
    \\
    & {}^{\mathllap{\Phi\vert_{\mathbb{D}_x}}}\nearrow & \downarrow^{\mathrlap{fb}}
    \\
    \mathbb{D}_x &\hookrightarrow& \Sigma
  }
  \,.
$$

This follows with an argument as in example \ref{InfinitesimalNeighbourhoodsInTheRealLine}.

Hence in [[synthetic differential geometry]] we have:

_The jet of a section $\Phi$ at $x$ is simply the restriction of that section to the [[infinitesimal neighbourhood]] of $x$._

=--

([[schreiber:Synthetic variational calculus|Khavkine-Schreiber 17, section 3.3]])


So the canonical [[coordinates]] on the jet bundle are the spacetime-point-wise _possible_ values of fields and field derivates,
while the [[jet prolongation]] picks the actual collections of field derivatives that may occur for an actual field
history.

+-- {: .num_example #JetFaraday}
###### Example
**(universal [[Faraday tensor]]/[[field strength]] on [[jet bundle]])**

Consider the [[field bundle]] (def. \ref{FieldsAndFieldBundles}) of the [[electromagnetic field]] (example \ref{Electromagnetism})
over [[Minkowski spacetime]] $\Sigma$ (def. \ref{MinkowskiSpacetime}), i.e. the [[cotangent bundle]] $E = T^\ast \Sigma$ (def. \ref{Differential1FormsOnCartesianSpaces}) with jet coordinates
$((x^\mu), (a_\mu), (a_{\mu,\nu}), \cdots )$ (def. \ref{JetBundleOfTrivialVectorBundleOverMinkowskiSpacetime}). Consider the functions on the [[jet bundle]] given by the linear combinations

$$
  \label{FaradayTensorJet}
  f_{\mu \nu}
    \;\coloneqq\;
  \tfrac{1}{2}\left(
    a_{\mu,\nu} - a_{\nu,\mu}
  \right)
$$

of the first order jets.

Then for an [[electromagnetism|electromagnetic]] [[field history]] ("[[vector potential]]"), hence a [[section]]

$$
  A \in \Gamma_\Sigma(T^\ast \Sigma) = \Omega^1(\Sigma)
$$

with components $A^\ast (a_\mu) = A_\mu$, its [[jet prolongation]] (def. \ref{JetProlongation})

$$
  j^\infty_\Sigma(A) \in \Gamma_\Sigma(J^\infty_\Sigma(T^\ast \Sigma))
$$

has components

$$
  \left(
    (A_\mu),
    \left(
      \frac{d A_\mu}{d x^\nu}
    \right)
    ,
    \cdots
  \right)
  \,.
$$

The [[pullback of differential forms|pullback]] of the functions $f_{\mu \nu}$ (eq:FaradayTensorJet)
along this jet prolongation are the components of the [[Faraday tensor]] of the field (eq:TensorFaraday):

$$
  \begin{aligned}
    \left(j^\infty_\Sigma(A)\right)^\ast(f_{\mu \nu})
    & =
    F_{\mu \nu}
    \\
    & =
    (d A)_{\mu \nu}
    \,.
  \end{aligned}
$$

More generally, for $\mathfrak{g}$ a [[Lie algebra]] and

$$
  E \coloneqq T^\ast \Sigma \otimes \mathfrak{g}
$$

the [[field bundle]] for [[Yang-Mills theory]] from
example \ref{YangMillsFieldOverMinkowski}, consider the functions on the [[jet bundle]]
given by

$$
  D_\mu a_\nu^\alpha
   \;\coloneqq\;
  a^\alpha_{[\nu,\mu]}
  +
  \tfrac{1}{2}
    \gamma^{\alpha}{}_{\beta \gamma}
    a^\beta_{[\mu} a^\gamma_{\nu]}
$$

where $(\gamma^\alpha{}_{\beta \gamma})$ are the structure constants of the Lie algebra as in (eq:LieAlgebraStructureConstants),
and where the square brackets around the indices denote anti-symmetrization.
For $\mathfrak{g} = \mathbb{R}$ the [[line Lie algebra]] this reduces to the universal [[Faraday tensor]] (eq:FaradayTensorJet) for
the [[electromagnetic field]] (example \ref{JetFaraday}).

For $A \in \Gamma_\Sigma(T^\ast \Sigma \otimes \mathfrak{g}) = \Omega^1(\Sigma,\mathfrak{g})$ a field history of
[[Yang-Mills theory]], hence a [[Lie algebra-valued differential 1-form]], then the value of this function on that field
are called the components of the _[[covariant exterior derivative]]_ or _[[field strength]]_

$$
  \begin{aligned}
    F_{\mu \nu}
     & \coloneqq
    A^\ast(D_\mu a_n)
    \\
    & =
    (d_A A)_{\mu \nu}
  \end{aligned}
$$

=--



While the [[jet bundle]] is not [[finite number|finite]] [[dimension|dimensional]],
reflecting the fact that there are arbitrarily high orders of spacetime derivatives of a field histories,
it turns out that it is only very "mildly [[infinite dimensional manifold|infinite dimensional]]"
in that
[[smooth  functions]] on jet bundles turn out to _locally_ depend on only finitely many of the jet coordinates
(i.e. only on a finite order of spacetime derivatives). This is the content
of the following prop. \ref{JetBundleIsLocallyProManifold}.

This reflects the _locality_ of [[Lagrangian field theory]] defined over [[jet bundles]]: If
functions on the jet bundle could depend on infinitely many jet coordinates, then by [[Taylor series]]
expansion of fields the function at one point over spacetime could in fact depend on field
history values at a _different_ point of spacetime. Such non-local dependence is ruled out by prop. \ref{JetBundleIsLocallyProManifold} below.

In practice this means that the situation is very convenient:

1. Any given [[local Lagrangian density]] (which will define a field theory, we come to this in def. \ref{LocalLagrangianDensityOnSecondOrderJetBundleOfTrivialVectorBundleOverMinkowskiSpacetime} below)
   will locally depend on some finite number $k$ of derivatives and may hence locally
   be treated as living on the ordinary manifold $J^k_\Sigma(E)$.

1. while at the same time all formulas (such as for the [[Euler-Lagrange equations]], def. \ref{EulerLagrangeEquationsOnTrivialVectorFieldBundleOverMinkowskiSpacetime}) work uniformly
without worries about fixing a maximal order of derivatives.

+-- {: .num_prop #JetBundleIsLocallyProManifold}
###### Proposition
**([[jet bundle]] is a [[locally pro-manifold]])**

Given a [[jet bundle]] $J^\infty_\Sigma(E)$ as in def. \ref{JetBundleOfTrivialVectorBundleOverMinkowskiSpacetime},
then a [[smooth function]] out of it

$$
  J^\infty_\Sigma(E) \longrightarrow X
$$

is such that around each point of $J^\infty_\Sigma(E)$ there is a [[neighbourhood]] $U \subset J^\infty_\Sigma(E)$
on which it is given by a function on a smooth function on $J^k_\Sigma(E)$ for some finite $k$.

=--

(see [Khavkine-Schreiber 17, section 2.2 and 3.3](locally+pro-manifold#KhavkineSchreiber17))


Example \ref{JetFaraday} shows that the [[de Rham differential]] (def. \ref{deRhamDifferential}) may be encoded in terms of
composing [[jet prolongation]] with a suitable function on the [[jet bundle]].
More generally, jet prolongation neatly encodes (possibly non-linear) [[differential operators]]:


+-- {: .num_defn #DifferentialOperator}
###### Definition
**([[differential operator]])**

Let $E_1 \overset{fb_1}{\to} \Sigma$ and $E_2 \overset{fb_2}{\to} \Sigma$
be two smooth [[fiber bundles]] over a common base space $\Sigma$. Then a
(possibly non-linear) _[[differential operator]]_ from [[sections]] of $E_1$
to sections of $E_2$ is a [[bundle morphism]] from the [[jet bundle]] of $E_1$ (def. \ref{JetBundleOfTrivialVectorBundleOverMinkowskiSpacetime})
to $E_2$:

$$
  \array{
    J^\infty_\Sigma(E_1)
      && \overset{\tilde D}{\longrightarrow} &&
    E_2
    \\
    & \searrow && \swarrow
    \\
    && \Sigma
  }
$$

or rather the function $D$ between the [[spaces of sections]] of these bundles
which this induces after [[composition]] with [[jet prolongation]] (def. \ref{JetProlongation}):

$$
  D
  \;\colon\;
  \Gamma_\Sigma(E_1)
    \overset{j^\infty_\Sigma}{\longrightarrow}
  \Gamma_\Sigma(J^\infty_\Sigma(E_1))
    \overset{\tilde D \circ (-)}{\longrightarrow}
  \Gamma_\Sigma(E_2)
  \,.
$$

If both $E_1$ and $E_2$ are [[vector bundles]] (def. \ref{VectorBundle})
so that their [[spaces of sections]] canonically are [[vector spaces]], then $D$
is called a _[[linear differential operator]]_ if it is a [[linear function]]
between these vector spaces. This means equivalently that $\tilde D$ is a [[linear function]]
in jet coordinates.

=--

+-- {: .num_defn #NormallyHyperbolicDifferentialOperator}
###### Definition
**([[normally hyperbolic differential operator]] on [[Minkowski spacetime]])**

Let $E \overset{fb}{\to} \Sigma$ be a [[field bundle]] (def. \ref{FieldsAndFieldBundles}) which is a [[vector bundle]] (def. \ref{VectorBundle}) over [[Minkowski spacetime]] (def. \ref{MinkowskiSpacetime}). Write $E^\ast \overset{}{\to} \Sigma$ for its [[dual vector bundle]] (def. \ref{DualVectorBundle})

A [[linear differential operator]] (def. \ref{DifferentialOperator})

$$
  P
    \;\colon\;
  \Gamma_\Sigma(E)
    \longrightarrow
  \Gamma_{\Sigma}(E^\ast)
$$

is of _second order_ if it has a coordinate expansion of the form

$$
  (P \Phi)_a
  \;=\;
  P^{\mu \nu}_{a b} \frac{\partial^2 \Phi^b}{\partial x^\mu \partial x^\nu}
  +
  P^\mu_{a b} \frac{\partial \Phi^b}{\partial x^\mu}
  +
  P_{a b} \Phi^b
$$

for $\{(P^{\mu \nu}_{a b}), (P^\mu_{a b}), P_{a b}\}$ [[smooth functions]] on $\Sigma$.

This is called a _[[normally hyperbolic differential operator]]_ if its _[[principal symbol]]_
$(P^{\mu \nu}_{a b})$ is proportional to the inverse [[Minkowski metric]] (prop./def. \ref{SpacetimeAsMatrices}) $(\eta^{\mu \nu})$,
i.e.

$$
  P^{\mu \nu}_{a b} = \eta^{\mu \nu} Q_{a b}
  \,.
$$

=--


+-- {: .num_defn #FormallyAdjointDifferentialOperators}
###### Definition
**([[formally adjoint differential operators]])**

Let $E \overset{fb}{\to} \Sigma$ be a [[smooth vector bundle]] (def. \ref{VectorBundle}) over [[Minkowski spacetime]]
$\Sigma = \mathbb{R}^{p,1}$  (def. \ref{MinkowskiSpacetime}) and write $E^\ast \to \Sigma$ for the [[dual vector bundle]] (def. \ref{DualVectorBundle}).

Then a [[pair]] of [[linear differential operators]] (def. \ref{DifferentialOperator}) of the form

$$
  P, P^\ast
   \;\colon\;
  \Gamma_\Sigma(E_1)
    \longrightarrow
  \Gamma_\Sigma(E^\ast)
$$

are called _[[formally adjoint differential operators]]_ via a [[bilinear map|bilinear]] [[differential operator]]

$$
  \label{FormallyAdjointDifferentialOperatorWitness}
  K \;\colon\;
  \Gamma_\Sigma(E) \otimes \Gamma_\Sigma(E)
    \longrightarrow
   \Gamma_\Sigma(\wedge^{p} T^\ast \Sigma)
$$

with values in [[differential n-form|differential p-forms]] (def. \ref{DifferentialnForms})
such that for all [[sections]] $\Phi_1, \Phi_2 \in \Gamma_\Sigma(E)$ we have

$$
  \left(
    P(\Phi_1) \cdot \Phi_2
    -
    \Phi_1 \cdot P^\ast(\Phi_2)
  \right) dvol_\Sigma
   \;=\;
  d K(\Phi_1, \Phi_2)
  \,,
$$

where $dvol_\Sigma$ is the [[volume form]] on [[Minkowski spacetime]] (eq:MinkowskiVolume) and
where $d$ denoted the [[de Rham differential]] (def. \ref{deRhamDifferential}).

=--

([Khavkine 14, def. 2.4](Green+hyperbolic+partial+differential+equation#Khavkine14))


$\,$

+-- {: .num_remark #ReplacingBundleMorphismsByDifferentialOperators}
###### Remark
**([[variational calculus]] -- replacing plain [[bundle morphisms]] by [[differential operators]])**

Various concepts in [[variational calculus]], especially the concept of _[[evolutionary vector fields]]_ (def. \ref{EvolutionaryVectorField} below)
and _[[gauge parameter|gauge parameterized]] implicit [[infinitesimal gauge symmetries]]_ (def. \ref{GaugeParametrizedInfinitesimalGaugeTransformation} below) follow from
concepts in plain [[differential geometry]] by systematically replacing
plain [[bundle morphisms]] by bundle morphisms out of the [[jet bundle]], hence by [[differential operators]] $\tilde D$
as in def. \ref{DifferentialOperator}.

=--

+-- {: .num_defn #VariationalBicomplexOnSecondOrderJetBundleOverTrivialVectorBundleOverMinkowskiSpacetime}
###### Definition
**([[variational derivative]] and [[total derivative|total spacetime derivative]] -- the [[variational bicomplex]])**

On the [[jet bundle]] $J^\infty_\Sigma(E)$ of a [[trivial vector bundle|trivial]] [[super vector space]]-[[vector bundle]]  over [[Minkowski spacetime]] as in def. \ref{JetBundleOfTrivialVectorBundleOverMinkowskiSpacetime} we may consider its [[de Rham complex]] of
[[super differential forms]] (def. \ref{DifferentialFormOnSuperCartesianSpaces}); we write its [[de Rham differential]] (def. \ref{deRhamDifferential}) in boldface:

$$
  d \;\colon\; \Omega^\bullet(J^\infty_\Sigma(E)) \longrightarrow \Omega^{\bullet+1}(J^\infty_\Sigma(E))
  \,.
$$

Since the jet bundle unifies spacetime with field values, we want to decompose this differential into
a contribution coming from forming the [[total derivatives]] of fields along spacetime ("[[horizontal derivatives]]"), and
actual _variation_ of fields at a fixed spacetime point ("[[vertical derivatives]]"):


The  _[[total derivative|total spacetime derivative]]_ or  _[[horizontal derivative]]_ on $J^\infty_\Sigma(E)$
is the map on [[differential forms]] on the jet bundle of the form

$$
  d
  \;\colon\;
  \Omega^\bullet( J^\infty_\Sigma(E) )
  \longrightarrow
  \Omega^{\bullet+1}( J^\infty_\Sigma(E) )
$$

which on functions $f \colon J^\infty_\Sigma(E) \to \mathbb{R}$ (i.e. on 0-forms) is defined by

$$
  \label{SpacetimeTotalDerivativeOnSmoothFunctions}
  \begin{aligned}
    d f
    & \coloneqq
    \frac{d f}{d x^\mu}
    \mathbf{d} x^\mu
    \\
    & \coloneqq
    \left(
      \frac{\partial f}{\partial x^\mu}
      +
      \frac{\partial f}{\partial \phi^a}
      \phi^a_{,\mu}
      +
      \frac{ \partial f }{ \partial \phi^a_{,\nu}}
      \phi^a_{,\nu \mu }
      +
      \cdots
    \right)
    \mathbf{d} x^\mu
  \end{aligned}
$$

and extended to all forms by the graded [[Leibniz rule]], hence  as a nilpotent [[derivation]] of degree +1.

The  _[[variational derivative]]_ or _[[vertical derivative]]_

$$
  \label{VariationalDerivative}
  \delta
  \;\colon\;
  \Omega^\bullet( J^\infty_\Sigma(E) )
  \longrightarrow
  \Omega^{\bullet+1}( J^\infty_\Sigma(E) )
$$

is what remains of the full [[de Rham differential]] when the total spacetime derivative ([[horizontal derivative]]) is subtracted:

$$
  \label{VerticalDerivative}
  \delta \coloneqq \mathbf{d} - d
  \,.
$$

We may then extend the [[horizontal derivative]] from functions on the jet bundle to all
[[differential forms]] on the jet bundle by declaring that

$$
  d \circ \mathbf{d} \;\coloneqq\; - \mathbf{d} \circ d
$$

which by (eq:VerticalDerivative) is equivalent to

$$
  \label{HorizontalAndVerticalDerivativeAnticommute}
  d \circ \;\delta\; = - \delta \circ d
  \,.
$$

For example

$$
  \begin{aligned}
    d \delta \phi
    & =
    - \delta d  \phi
    \\
    & =
    - \delta \left( \phi_{,\mu} d x^\mu \right)
    \\
    & = - \delta \phi_{,\mu} \wedge d x^\mu
    \,.
  \end{aligned}
$$


This defines a bigrading on the [[de Rham complex]] of $J^\infty_\Sigma(E)$, into horizontal degree $r$ and vertical degree $s$

$$
  \Omega^\bullet\left( J^\infty_\Sigma(E) \right)
  \;\coloneqq\;
  \underset{r,s}{\oplus} \Omega^{r,s}(E)
$$

such that the horizontal and vertical derivative increase horizontal or vertical degree, respectively:

$$
  \label{VariationalBicomplexDiagram}
  \array{
     C^\infty(J^\infty_\Sigma(E)) = & \Omega^{0,0}(E)
       &\overset{d}{\longrightarrow}&
     \Omega^{1,0}_\Sigma(E)
       &\overset{d}{\longrightarrow}&
     \Omega^{2,0}_\Sigma(E)
       &\overset{d}{\longrightarrow}&
     \cdots
       &\overset{d}{\longrightarrow}&
     \Omega^{p+1,0}_\Sigma(E)
     \\
     & \downarrow^{\mathrlap{\delta}} && \downarrow^{\mathrlap{\delta}} && \downarrow^{\mathrlap{\delta}}
     && \cdots && \downarrow^{\mathrlap{\delta}}
     \\
     &
     \Omega^{0,1}_\Sigma(E)
       &\overset{d}{\longrightarrow}&
     \Omega^{1,1}_\Sigma(E)
       &\overset{d}{\longrightarrow}&
     \Omega^{2,1}_\Sigma(E)
       &\overset{d}{\longrightarrow}&
     \cdots
       &\overset{d}{\longrightarrow}&
     \Omega^{p+1,1}_\Sigma(E)
     \\
     & \downarrow^{\mathrlap{\delta}} && \downarrow^{\mathrlap{\delta}} && \downarrow^{\mathrlap{\delta}}
     && \cdots && \downarrow^{\mathrlap{\delta}}
     \\
     &
     \Omega^{0,2}(E)
       &\overset{d}{\longrightarrow}&
     \Omega^{1,2}(E)
       &\overset{d}{\longrightarrow}&
     \Omega^{2,2}(E)
       &\overset{d}{\longrightarrow}&
     \cdots
       &\overset{d}{\longrightarrow}&
     \Omega^{p+1,2}_\Sigma(E)
     \\
     & \downarrow^{\mathrlap{\delta}} && \downarrow^{\mathrlap{\delta}} && \downarrow^{\mathrlap{\delta}}
     && \cdots && \downarrow^{\mathrlap{\delta}}
     \\
     & \vdots && \vdots && \vdots
  }
  \,.
$$

This is called the _[[variational bicomplex]]_.

Accordingly we will refer to the differential forms on the jet bundle often as _variational differential forms_.

=--

$\,$

**[[derivatives]] on [[jet bundle]]**

| def.  | symbols |  name in physics | name in mathematics |
|--|--|---|--|
| def. \ref{DifferentialFormOnSuperCartesianSpaces} | $\; \mathbf{d}$ | [[de Rham differential]]  | [[de Rham differential]] |
| \ref{VariationalBicomplexOnSecondOrderJetBundleOverTrivialVectorBundleOverMinkowskiSpacetime}  | $\; d \coloneqq d x^\mu \frac{d}{d x^\mu}$ | [[total derivative|total spacetime derivative]]   | [[horizontal derivative]]  |
| \ref{VariationalBicomplexOnSecondOrderJetBundleOverTrivialVectorBundleOverMinkowskiSpacetime} | $ \; \frac{d}{d x^\mu} \coloneqq \frac{\partial}{\partial x^\mu} +  \phi^a_{,\mu} \frac{\partial}{\partial \phi^a}  + \cdots $ | [[total derivative|total spacetime derivative]] <br/> along $\partial_\mu$  |  [[horizontal derivative]] <br/> along $\partial_\mu$ |
| \ref{VariationalBicomplexOnSecondOrderJetBundleOverTrivialVectorBundleOverMinkowskiSpacetime} | $\; \delta \coloneqq \mathbf{d} - d$ | [[variational derivative]]  | [[vertical derivative]] |
| \ref{EulerLagrangeOperatorForTivialVectorBundleOverMinkowskiSpacetime}  | $\; \delta_{EL} \mathbf{L} \coloneqq \mathbf{d}\mathbf{L} + d \Theta_{BFV}$ | [[Euler-Lagrange variational derivative|Euler-Lagrange variation]]  | [[Euler-Lagrange operator]] |
| \ref{BVComplexOfOrdinaryLagrangianDensity} | $\; s_{BV}$  | [[BV-differential]]  |  [[Koszul complex|Koszul differential]]  |
| \ref{LocalOffShellBRSTComplex} | $\; s_{BRST} $ | [[BRST differential]] |  [[Chevalley-Eilenberg complex|Chevalley-Eilenberg differential]]  |
| \ref{LocalBVBRSTComplexIsDerivedCriticalLocusOfEulerLagrangeForm} | $\; s $ | [[BV-BRST differential]] |  [[Chevalley-Eilenberg complex|Chevalley-Eilenberg]]-[[Koszul-Tate complex|Koszul-Tate differential]]  |
| \ref{BVVariationalBicomplex} | $\; s - d $ | [[local BV-BRST differential]] |   |
$\,$

+-- {: .num_example #BasicFactsAboutVarationalCalculusOnJetBundleOfTrivialVectorBundle}
###### Example
**(basic facts about [[variational calculus]])**

Given the jet bundle of a [[field bundle]] as in def. \ref{JetBundleOfTrivialVectorBundleOverMinkowskiSpacetime}, then
in its [[variational bicomplex]] (def. \ref{VariationalBicomplexOnSecondOrderJetBundleOverTrivialVectorBundleOverMinkowskiSpacetime})
we have the following:

* The spacetime [[total derivative]] ([[horizontal derivative]]) of a spacetime coordinate function $x^\mu$
  coincides with its ordinary de Rham differential

  $$
    \begin{aligned}
      d x^\mu
      & =
      \frac{\partial x^\mu}{ \partial x^\nu} \mathbf{d}x^\nu
      \\
      & = \mathbf{d} x^\mu
    \end{aligned}
  $$

  which hence is a horizontal 1-form

  $$
    \mathbf{d}x^\mu \;\in\; \Omega^{1,0}_\Sigma(E)
    \,.
  $$

* Therefore the variational derivative ([[vertical derivative|vertical derivative]]) of a spacetime coordinate function vanishes:

  $$
    \label{VariationalDerivativeOfSpacetimeCoordinateVanishes}
    \delta x^\mu = 0
    \,,
  $$

  reflective the fact that $x^\mu$ is not a field coordinate that could be varied.

* In particular the given [[volume form]] on $\Sigma$ gives a horizontal $p+1$-form on the jet bundle,
  which has the same coordinate expression (and which we denote by the same symbol)

  $$
    dvol_\Sigma =  d x^0 \wedge d x^1 \wedge \cdots \wedge d x^p
     \;\in\;
    \Omega^{p+1,0}
    \,.
  $$

* Generally any horizontal $k$-form is of the form

  $$
    f_{\mu_1 \cdots \mu_k} d x^{\mu_1} \wedge \cdots \wedge d x^{\mu_k}
    \;\in\;
    \Omega^{k,0}_{\Sigma}(E)
  $$

  for

  $$
    f_{\mu_1 \cdots \mu_k} = f_{\mu_1 \cdots \mu_k}\left((x^\mu), (\phi^a), (\phi^a_{,\mu}), \cdots\right)
    \in C^\infty(J^\infty_\Sigma(E))
  $$

  any smooth function of the spacetime coordinates and the field coordinates (locally depending only on a finite
  order of these, by prop. \ref{JetBundleIsLocallyProManifold}).

* In particular every horizontal $(p+1)$-form $\mathbf{L} \in \Omega^{p+1,0}(E)$ is proportional to the
  above volume form

  $$
    \mathbf{L} = L \, dvol_\Sigma
  $$

  for $L = L((x^\mu), (\phi^a), (\phi^a_{,\mu}), \cdots)$ some smooth function that may depend on all the
  spacetime and field coordinates.

* The spacetimes [[total derivatives]] /horizontal derivatives) of the variational derivative (vertical derivative) $\delta \phi$ of a field variable is the differential 2-form of horizontal degree 1 and vertical degree 1 given by

  $$
    \begin{aligned}
      d (\delta \phi^a)
      & =
      -
      \delta (d \phi_a)
      \\
      & =
      - (\delta \phi^a_{,\mu}) \wedge \mathbf{d} x^\mu
    \end{aligned}
    \,.
  $$

  In words this says that "the spacetime derivative of the variation of the field is the variation of its spacetime derivative".

=--

The following are less trivial properties of variational differential forms:

+-- {: .num_prop #PullbackAlongJetProlongationIntertwinesHorizontalDerivative}
###### Proposition
**([[pullback of differential forms|pullback]] along [[jet prolongation]] compatible with [[total derivative|total spacetime derivatives]])**

Let $E \overset{fb}{\to} \Sigma$ be a [[field bundle]] over a [[spacetime]] $\Sigma$ (def. \ref{FieldsAndFieldBundles}),
with induced [[jet bundle]] $J^\infty_\Sigma(E)$ (def. \ref{JetBundleOfTrivialVectorBundleOverMinkowskiSpacetime}).

Then for $\Phi \in \Gamma_\Sigma(E)$ any field history, the [[pullback of differential forms]] (def. \ref{PullbackOfDifferentialForms})

$$
  j^\infty_\Sigma(\Phi)^\ast
   \;\colon\;
  \Omega^\bullet(J^\infty_\Sigma(E))
    \longrightarrow
  \Omega^\bullet(\Sigma)
$$

along the [[jet prolongation]] of $\Phi$ (def. \ref{JetProlongation})

1. intertwines the [[de Rham differential]] on [[spacetime]] (def. \ref{Differential1FormsOnCartesianSpaces}) with the [[total spacetime derivative]] ([[horizontal derivative]]) on the [[jet bundle]] (def. \ref{VariationalBicomplexOnSecondOrderJetBundleOverTrivialVectorBundleOverMinkowskiSpacetime}):

   $$
     d \circ j^\infty_\Sigma(\Phi)^\ast
     \;=\;
     j^\infty_\Sigma(\Phi)^\ast \circ d
     \,.
   $$

1. annihilates all [[vertical differential forms]] (def. \ref{VariationalBicomplexOnSecondOrderJetBundleOverTrivialVectorBundleOverMinkowskiSpacetime}):

   $$
     j^\infty_\Sigma(\Phi)^\ast\vert_{\Omega^{r, \geq 1}_\Sigma(E)} = 0
     \,.
   $$

=--

+-- {: .proof}
###### Proof

The operation of [[pullback of differential forms]] along any [[smooth function]] intertwines the full [[de Rham differentials]]
(prop. \ref{PullbackOfDifferentialForms}). In particular we have that

$$
  d \circ j^\infty_\Sigma(\Phi)^\ast
  =
  j^\infty_\Sigma(\Phi)^\ast \circ \mathbf{d}
  \,.
$$

This means that the second statement immediately follows from the
first, by definition of the variational (vertical) derivative as the difference between
the full de Rham differential and the horizontal one:

$$
  \begin{aligned}
    j^\infty_\Sigma(\Phi)^\ast \circ \delta
    & =
    j^\infty_\Sigma(\Phi)^\ast \circ (\mathbf{d} - d)
    \\
    & =
    (d - d) \circ j^\infty_\Sigma(\Phi)^\ast
    \\
    & =
    0
  \end{aligned}
$$

It remains to see the first statement:

Since the [[jet prolongation]] $j^\infty_\Sigma(\Phi)$ preserves the spacetime coordinates $x^\mu$
(being a [[section]] of the [[jet bundle]]) it is immediate that the claimed relation
is satisfied on the
horizontal [[linear basis|basis]] 1-forms $\mathbf{d}x^\mu = d x^\mu$ (example \ref{BasicFactsAboutVarationalCalculusOnJetBundleOfTrivialVectorBundle}):

$$
  d j^\infty_\Sigma(\Phi)^\ast( \mathbf{d}x^\mu )
  =
  d^2 x^\mu = 0
  \phantom{AAAAA}
  j^\infty_\Sigma(\Phi)^\ast d \mathbf{d} x^\mu
  =
  j^\infty_\Sigma(\Phi)^\ast d^2 x^\mu
  \,.
$$

Therefore it finally remains only to check the first statement on smooth functions (0-forms).
So let

$$
  f
    =
  f\left(
    (x^\mu)
    \,,\,
    (\phi^a)
    \,,\,
    ( \phi^a_{,\mu} )
    \,,\,
    \cdots
  \right)
$$

be a smooth function on the jet bundle. Then by the [[chain rule]]

$$
  \begin{aligned}
    d j^\infty_\Sigma(\Phi)^\ast
    f\left(
      (x^\mu)
      \,,\,
      (\phi^a)
      \,,\,
      ( \phi^a_{,\mu} )
      \,,\,
      \cdots
    \right)
    & =
    d
    f\left(
      (x^\mu)
      \,,\,
      (\Phi^a)
      \,,\,
      \left(  \frac{\partial \Phi^a}{\partial x^\mu} \right)
      \,,\,
      \cdots
    \right)
    \\
    & =
    \left(
      \frac{\partial f}{\partial x^\mu}
      +
      \frac{\partial f}{\partial \phi^a}
      \frac{\partial \Phi^a}{\partial x^\mu}
      +
      \frac{\partial f}{\partial \phi^a_{,\nu}}
      \frac{\partial^2 \Phi^a}{\partial x^\nu \partial x^\mu}
      +
      \cdots
    \right)
    d x^\mu
  \end{aligned}
$$

That this is equal to $j^\infty_\Sigma(\Phi)^\ast d f$ follows by the very definition
of the total spacetime derivative of $f$ (eq:SpacetimeTotalDerivativeOnSmoothFunctions).


=--


+-- {: .num_prop #HorizontalVariationalComplexOfTrivialFieldBundleIsExact}
###### Proposition
**([[horizontal variational complex]] of [[trivial vector bundle|trivial]] [[field bundle]] is [[exact sequence|exact]])**

Let $E \overset{fb}{\to} \Sigma$ be a [[field bundle]] which is a [[trivial vector bundle]] over [[Minkowski spacetime]] (example \ref{TrivialVectorBundleAsAFieldBundle}). Then the [[chain complex]] of [[horizontal differential forms]] $\Omega^{s,0}_\Sigma(E)$
with the [[total spacetime derivative]] ([[horizontal derivative]]) $d$ (def. \ref{VariationalBicomplexOnSecondOrderJetBundleOverTrivialVectorBundleOverMinkowskiSpacetime})

$$
  \label{ExactSequenceTotalSpacetimeDerivative}
  \mathbb{R}
    \overset{}{\hookrightarrow}
  \Omega^{0,0}_\Sigma(E)
    \overset{d}{\longrightarrow}
  \Omega^{1,0}_\Sigma(E)
    \overset{d}{\longrightarrow}
  \Omega^{2,0}_\Sigma(E)
    \overset{d}{\longrightarrow}
    \cdots
    \overset{d}{\longrightarrow}
  \Omega^{p,0}_\Sigma(E)
    \overset{d}{\longrightarrow}
  \Omega^{p+1,0}_\Sigma(E)
$$

is [[exact sequence|exact]]: for all $0 \leq s \leq p$ the [[kernel]] of $d$ coincides with the [[image]] of $d$
in $\Omega^{s,0}_\Sigma(E)$.

More explicitly, this means that not only is every horizontally exact differential form $\omega = d \alpha$ horizontally closed
$d \omega = 0$ (which follows immediately from the fact that we have a [[cochain complex]] in the first place, hence that $d^2 = 0$),
but, conversely, if $\omega \in \Omega^{0 \leq s \leq p,0}_\Sigma(E)$ satisfies $d \omega = 0$, then there exists
$\alpha \in \Omega^{s-1,0}_\Sigma(E)$ with $\omega = d \alpha$.

=--

(e.g. [Anderson 89, prop. 4.3](variational+bicomplex#Anderson89))

We will encounter the extension of the [[exact sequence]] (eq:ExactSequenceTotalSpacetimeDerivative) further steps to the right below in example \ref{TrivialLagrangianDensities}.


$\,$

This concludes our discussion of [[variational calculus]] on the [[jet bundle]] of the [[field bundle]].
In the [next chapter](#Lagrangians) we apply this to [[Lagrangian densities]] on the [[jet bundle]], defining [[Lagrangian field theories]].

$\,$

## Lagrangians
  {#Lagrangians}


Given any [[type]] of [[field (physics)|fields]] (def. \ref{FieldsAndFieldBundles}), those [[field histories]] that
are to be regarded as "physically realizable" (if we think of the field theory as a description of the [[observable universe]])
should satisfy some [[differential equation]] -- the _[[equation of motion]]_ -- meaning that realizability of any field histories may
be checked upon restricting the configuration to the [[infinitesimal neighbourhoods]] (example \ref{InfinitesimalNeighbourhood}) of each spacetime point. This expresses the physical absence of "action at a distance" and is one aspect of what it means to have
a _[[local field theory]]_. By remark \ref{JetBundleInTermsOfSyntheticDifferentialGeometry} this means that
[[equations of motion]] of a field theory are [[equations]] among the [[coordinates]] of the [[jet bundle]] of the [[field bundle]].

For many field theories of interest, their [[differential equation|differential]] [[equation of motion]]
is not a random [[partial differential equations]], but is of the special kind that exhibits the "[[principle of extremal action]]" (prop. \ref{PrincipleOfExtremalAction} below)
determined by a _[[local Lagrangian density]]_
(def. \ref{LocalLagrangianDensityOnSecondOrderJetBundleOfTrivialVectorBundleOverMinkowskiSpacetime} below). These are called _[[Lagrangian field theories]]_, and this is what we consider here.

Namely among all the [[variational differential forms]] (def. \ref{VariationalBicomplexOnSecondOrderJetBundleOverTrivialVectorBundleOverMinkowskiSpacetime})
two kinds stand out, namley the 0-forms in $\Omega^{0,0}_\Sigma(E)$ -- the smooth functions -- and the horizontal $p+1$-forms
$\Omega^{p+1,0}_\Sigma(E)$ -- to be called the _[[Lagrangian densities]] $\mathbf{L}$_ (def. \ref{LocalLagrangianDensityOnSecondOrderJetBundleOfTrivialVectorBundleOverMinkowskiSpacetime} below) -- since these occupy the two "corners" of the [[variational bicomplex]] (eq:VariationalBicomplexDiagram).
There is not much to say about the 0-forms, but the [[Lagrangian densities]] $\mathbf{L}$ do inherit special structure
from their special position in the [[variational bicomplex]]:

Their [[variational derivative]] $\delta \mathbf{L}$ uniquely decomposes as

1.  the _[[Euler-Lagrange derivative]]_ $\delta_{EL} \mathbf{L}$ which is proportional to the variation of the fields
(instead of their derivatives)

1.  the [[total derivative|total spacetime derivative]] $d \Theta_{BFV}$
of a potential $\Theta_{BFV}$ for a _[[presymplectic current]]_ $\Omega_{BFV} \coloneqq \delta \Theta_{BFV}$.

This is prop. \ref{EulerLagrangeOperatorForTivialVectorBundleOverMinkowskiSpacetime} below:

$$
  \delta \mathbf{L}
    \;=\;
  \underset{ \text{Euler-Lagrange variation}
  }{\underbrace{\delta_{EL}\mathbf{L}}} - d \underset{\text{presymplectic current}}{\underbrace{\Theta_{BFV}}}
  \,.
$$

These two terms play a pivotal role in the theory: The condition that the first term vanishes
on [[field histories]] is a [[differential equation]] on field histories,
called the _[[Euler-Lagrange equation|Euler-Lagrange]] [[equation of motion]]_ (def. \ref{EulerLagrangeEquationsOnTrivialVectorFieldBundleOverMinkowskiSpacetime} below).
The space of solutions to this [[differential equation]], called the _[[on-shell]] [[space of field histories]]_

$$
  \label{InclusionOfOnShellSpaceOfFieldHistories}
  \Gamma_\Sigma(E)_{\delta_{EL}\mathbf{L} = 0}
    \overset{\phantom{AAA}}{\hookrightarrow}
  \Gamma_\Sigma(E)
$$

has the interpretation of the space of "physically realizable field histories".
This is the key object of study in the following chapters. Often this is
referred to as the space of _[[classical field theory|classical]] field histories_,
indicating that this does not yet reflect the full [[quantum field theory]].

Indeed, there is also the second term in the variational derivative of the Lagrangian density,
the [[presymplectic current]] $\Theta_{BFV}$, and this implies a [[presymplectic structure]] on
the on-shell space of field histories (def. \ref{PhaseSpaceAssociatedWithCauchySurface} below)
which encodes [[deformations]] of the algebra of
smooth functions on $\Gamma_\Sigma(E)$. This deformation is the _[[quantization]]_ of the field
theory to an actual [[quantum field theory]], which we discuss [below](#Quantization).

$$
  \array{
     &&& \delta \mathbf{L}
     \\
     &&& =
     \\
     &  & \delta_{EL}\mathbf{L} &- & d \Theta_{BFV}   &
     \\
     & \swarrow && && \searrow
     \\
     \array{
       \text{classical}
       \\
       \text{field theory}
     }
     && && &&
     \array{
       \text{deformation to}
       \\
       \text{quantum}
       \\
       \text{field theory}
     }
  }
$$



$\,$

+-- {: .num_defn #LocalLagrangianDensityOnSecondOrderJetBundleOfTrivialVectorBundleOverMinkowskiSpacetime}
###### Definition
**([[local Lagrangian density]])**

Given a [[field bundle]] $E$ over a $(p+1)$-dimensional [[Minkowski spacetime]] $\Sigma$ as in example \ref{TrivialVectorBundleAsAFieldBundle}, then a _[[local Lagrangian density]]_ $\mathbf{L}$ (for the type of field thus defined) is a [[horizontal differential form]] of degree $(p+1)$ (def. \ref{VariationalBicomplexOnSecondOrderJetBundleOverTrivialVectorBundleOverMinkowskiSpacetime}) on the corresponding [[jet bundle]]
(def. \ref{JetBundleOfTrivialVectorBundleOverMinkowskiSpacetime}):

$$
  \mathbf{L} \;\in \; \Omega^{p+1,0}_{\Sigma}(E)
  \,.
$$

By example \ref{BasicFactsAboutVarationalCalculusOnJetBundleOfTrivialVectorBundle}
in terms of the given [[volume form]] on spacetimes, any such Lagrangian density may uniquely be written as

$$
  \mathbf{L} = L \, dvol_\Sigma
$$

where the [[coefficient]] function (the _Lagrangian function_)
is a smooth function on the spacetime and field coordinates:

$$
  L = L((x^\mu), (\phi^a), (\phi^a_{,\mu}), \cdots )
  \,.
$$

where by prop. \ref{JetBundleIsLocallyProManifold} $L((x^\mu), \cdots)$ depends locally on an arbitrary but finite
order of derivatives $\phi^a_{,\mu_1 \cdots \mu_k}$.

We say that a [[field bundle]] $E \overset{fb}{\to} \Sigma$ (def. \ref{FieldsAndFieldBundles}) equipped with a [[local Lagrangian density]] $\mathbf{L}$
is (or defines) a _[[prequantum field theory|prequantum]] [[Lagrangian field theory]]_ on the [[spacetime]] $\Sigma$.

=--


+-- {: .num_remark #ParameterizedLagrangianDensities}
###### Remark
**(parameterized and [[physical unit]]-less [[Lagrangian densities]])**

More generally we may consider parameterized collections of [[Lagrangian densities]], i.e. functions

$$
  \mathbf{L}_{(-)}
  \;\colon\;
  U \longrightarrow \Omega^{p+1,0}_\Sigma(E)
$$

for $U$ some [[Cartesian space]] or generally some [[super Cartesian space]].

For example all [[Lagrangian densities]] considered in [[relativistic field theory]] are naturally [[smooth functions]] of the scale of the [[metric]] $\eta$ (def. \ref{SpacetimeAsMatrices})

$$
  \array{
    \mathbb{R}_{\gt 0}
      &\overset{}{\longrightarrow}&
    \Omega^{p+1,0}_\Sigma(E)
    \\
    r &\mapsto& \mathbf{L}_{r^2\eta}
  }
$$

But by the discussion in remark \ref{MinkowskiMetricAndPhysicalUnitOfLength}, in [[physics]] a rescaling of the [[metric]] is interpreted as reflecting but a change of [[physical units]] of [[length]]/[[distance]]. Hence if a [[Lagrangian density]] is supposed to express intrinsic content of a [[theory (physics)|physical theory]], it should remain unchanged under such a change of [[physical units]].

This is achieved by having the Lagrangian be parameterized by _further_ parameters, whose corresponding [[physical units]] compensate that of the metric such as to make the Lagrangian density "[[physical unit]]-less".

This means to consider parameter spaces $U$ equipped with an [[action]] of the multiplicative [[group]] $\mathbb{R}_{\gt 0}$ of [[positive real numbers]], and parameterized Lagrangians

$$
  \mathbf{L}_{(-)} \;\colon\; U \longrightarrow \Omega^{p+1,0}_\Sigma(E)
$$

which are [[invariant]] under this [[action]].

=--


+-- {: .num_remark #LocallyVariationalFieldTheory}
###### Remark
**([[locally variational field theory]] and Lagrangian [[circle n-bundle with connection|p-gerbe connection]])**

If the [[field bundle]] (def. \ref{FieldsAndFieldBundles}) is not just a [[trivial vector bundle]] over [[Minkowski spacetime]] (example \ref{TrivialVectorBundleAsAFieldBundle}) then a Lagrangian density for a given [[equation of motion]] may not exist
as a globally defined differential $(p+1)$-form, but only as a [[circle n-bundle with connection|p-gerbe connection]].
This is the case for _[[locally variational field theories]]_ such as the _[[charged particle]]_, the _[[WZW model]]_
and generally theories involving _[[higher WZW terms]]_. For more on this see the exposition at _[[schreiber:Higher Structures|Higher Structures in Physics]]_.

=--


+-- {: .num_example #LagrangianForFreeScalarFieldOnMinkowskiSpacetime}
###### Example
**([[local Lagrangian density]] for [[free field|free]] [[real scalar field]] on [[Minkowski spacetime]])**

Consider the [[field bundle]] for the [[real scalar field]] from example \ref{RealScalarFieldBundle},
i.e. the [[trivial line bundle]] over [[Minkowski spacetime]].

According to def. \ref{JetBundleOfTrivialVectorBundleOverMinkowskiSpacetime}
its [[jet bundle]] $J^\infty_\Sigma(E)$ has canonical coordinates

$$
  \left\{
     \{x^\mu\}, \phi, \{\phi_{,\mu}\}, \{\phi_{,\mu_1 \mu_2}\}, \cdots
  \right\}
  \,.
$$

In these coordinates, the [[local Lagrangian density]] $L \in \Omega^{p+1,0}(\Sigma)$ (def. \ref{LocalLagrangianDensityOnSecondOrderJetBundleOfTrivialVectorBundleOverMinkowskiSpacetime})
defining the [[free field|free]] [[real scalar field]] of [[mass]] $m \in \mathbb{R}$ on $\Sigma$ is

$$
  L
    \coloneqq
  \tfrac{1}{2}
  \left(
    \eta^{\mu \nu} \phi_{,\mu} \phi_{,\nu}
    -
    m^2 \phi^2
  \right)
  \mathrm{dvol}_\Sigma
  \,.
$$

This is naturally thought of as a collection of Lagrangians smoothly parameterized by the
[[metric]] $\eta$ and the [[mass]] $m$. For this to be [[physical unit]]-free in the sense of
remark \ref{ParameterizedLagrangianDensities} the [[physical unit]] of the parameter $m$ must be
that of the inverse metric, hence must be an inverse [[length]] according to remark \ref{MinkowskiMetricAndPhysicalUnitOfLength}
This is the _inverse [[Compton wavelength]]_  $\ell_m = \hbar / m c$ (eq:ComptonWavelength) and hence
the [[physical unit]]-free version of the Lagrangian density for the free scalar particle is

$$
  \mathbf{L}_{\eta,\ell_m}
  \:\coloneqq\;
  \tfrac{\ell_m^2}{2}
  \left(
    \eta^{\mu \nu} \phi_{,\mu} \phi_{,\nu}
    -
    \left( \tfrac{m c}{\hbar} \right)^2 \phi^2
  \right)
  \mathrm{dvol}_\Sigma
  \,.
$$


=--


+-- {: .num_example #ElectromagnetismLagrangianDensity}
###### Example
**([[local Lagrangian density]] for [[free field|free]] [[electromagnetism]] and [[Yang-Mills theory]])**

Consider the [[field bundle]] $T^\ast \Sigma \to \Sigma$ for the [[electromagnetic field]] on [[Minkowski spacetime]] from example \ref{Electromagnetism},
i.e. the [[cotangent bundle]], which over Minkowski spacetime happens to be a [[trivial vector bundle]] of [[rank of a vector bundle|rank]]
$p+1$. With [[fiber]] coordinates taken to be $(a_\mu)_{\mu = 0}^p$, the induced fiber coordinates on the
corresponding [[jet bundle]] $J^\infty_\Sigma(T^\ast \Sigma)$ (def. \ref{JetBundleOfTrivialVectorBundleOverMinkowskiSpacetime}) are
$( (x^\mu), (a_\mu), (a_{\mu,\nu}), (a_{\mu,\nu_1 \nu_2}), \cdots )$.

Consider then the [[local Lagrangian density]] (def. \ref{LocalLagrangianDensityOnSecondOrderJetBundleOfTrivialVectorBundleOverMinkowskiSpacetime}) given by

$$
  \label{ElectromagnetismLagrangian}
  \mathbf{L}
    \;\coloneqq\;
  \tfrac{1}{2}
  f_{\mu \nu} f^{\mu \nu} dvol_\Sigma
  \;\in\;
  \Omega^{p+1,0}_\Sigma(T^\ast \Sigma)
  \,,
$$

where $f_{\mu \nu} \coloneqq \tfrac{1}{2}(a_{\mu,\nu} - a_{\nu,\mu})$ are the components of the universal [[Faraday tensor]] on the [[jet bundle]] from example \ref{JetFaraday}.

This is the [[Lagrangian density]] that defines the Lagrangian field theory of _[[free field|free]] [[electromagnetism]]_.

Here for $A \in \Gamma_\Sigma(T^\ast \Sigma)$ an [[electromagnetic field]] history ([[vector potential]]),
then the [[pullback of differential forms|pullback]] of $f_{\mu \nu}$ along its [[jet prolongation]] (def. \ref{JetProlongation})
is the corresponding component of the [[Faraday tensor]] (eq:TensorFaraday):

$$
  \begin{aligned}
    \left(
      j^\infty_\Sigma(A)
    \right)^\ast(f_{\mu \nu})
    & =
    (d A)_{\mu \nu}
    \\
    & = F_{\mu \nu}
  \end{aligned}
$$

It follows that the pullback of the Lagrangian (eq:ElectromagnetismLagrangian) along the
jet prologation of the electromagnetic field is

$$
  \begin{aligned}
    \left(
      j^\infty_\Sigma(A)
    \right)^\ast \mathbf{L}
    & =
    \tfrac{1}{2}
    F_{\mu \nu} F^{\mu \nu} dvol_\Sigma
    \\
    & =
    \tfrac{1}{2} F \wedge \star_\eta F
  \end{aligned}
$$

Here $\star_\eta$ denotes the [[Hodge star operator]] of [[Minkowski spacetime]].

More generally, for $\mathfrak{g}$ a [[Lie algebra]] equipped
with a binary [[invariant polynomial]] $k$ and for $E = T^\ast \Sigma \otimes \mathfrak{g}$
the field bundle for [[Yang-Mills theory]] as in example \ref{YangMillsFieldOverMinkowski}
then the Lagrangian density for [[vacuum]] $\mathfrak{g}$-[[Yang-Mills theory]] is

$$
  \label{YangMillsLagrangian}
  \mathbf{L}
    \;\coloneqq\;
  \tfrac{1}{2}
  k_{\alpha \beta} f^\alpha_{\mu \nu} f^{\alpha \mu \nu} dvol_\Sigma
  \;\in\;
  \Omega^{p+1,0}_\Sigma(T^\ast \Sigma)
  \,,
$$


=--

+-- {: .num_example #LagrangianDensityForDiracField}
###### Example
**([[Lagrangian density]] for [[free field theory|free]] [[Dirac field]] on [[Minkowski spacetime]])**

For $\Sigma$ [[Minkowski spacetime]] of [[dimension]] $p + 1 \in \{3,4,6,10\}$ (def. \ref{MinkowskiSpacetime}),
consider the [[field bundle]] $\Sigma \times S_{odd} \to \Sigma$ for the [[Dirac field]] from example \ref{DiracFieldBundle}.
With the two-component [[spinor]] [[field fiber]] coordinates from remark \ref{TwoComponentSpinorNotation}, the [[jet bundle]] has induced fiber coordinates as follows:

$$
  \left(
   \left(\psi^\alpha\right)
   ,
   \left(
      \psi^\alpha_{,\mu}
   \right)
   ,
   \cdots
  \right)
   \;=\;
  \left(
     \left(
         (\chi_a), (\chi_{a,\mu}), \cdots
     \right),
     \left(
        ( \xi^{\dagger \dot a}), (\xi^{\dagger \dot a}_{,\mu}), \cdots
     \right)
  \right)
$$

All of these are odd-graded elements (def. \ref{SupercommutativeSuperalgebra}) in a [[Grassmann algebra]] (example \ref{GrassmannAlgebra}), hence anti-commute with each other, in generalization of (eq:DiracFieldCoordinatesAnticommute):

$$
  \label{DiracFieldJetCoordinatesAnticommute}
  \psi^\alpha_{,\mu_1 \cdots \mu_r}
  \psi^\beta_{,\mu_1 \cdots \mu_s}
  \;=\;
  -
  \psi^\beta_{,\mu_1 \cdots \mu_s}
  \psi^\alpha_{,\mu_1 \cdots \mu_r}
  \,.
$$

The  [[Lagrangian density]] (def. \ref{LocalLagrangianDensityOnSecondOrderJetBundleOfTrivialVectorBundleOverMinkowskiSpacetime})
of the _massless [[free field theory|free]] [[Dirac field]]_ on [[Minkowski spacetime]] is

$$
  \label{DiracFieldLagrangianMassless}
  \mathbf{L}
    \;\coloneqq\;
   \overline{\psi} \, \gamma^\mu \psi_{,\mu}\, dvol_\Sigma
   \,,
$$

given by the bilinear pairing $\overline{(-)}\Gamma(-)$ from prop. \ref{RealSpinorPairingsViaDivisionAlg}
of the field coordinate with its first spacetime derivative and
expressed here in two-component spinor field coordinates as in (eq:TwoComponentNotationForSpinorToVectorPairing), hence with the [[Dirac conjugate]] $\overline{\psi}$ (eq:DiracConjugate) on the left.

Specifically in [[spacetime]] [[dimension]] $p + 1 = 4$, the [[Lagrangian function]] for the _massive [[Dirac field]]_
of [[mass]] $m \in \mathbb{R}$ is

$$
  \begin{aligned}
    L
    & \coloneqq
    \underset{
      \text{kinetic term}
    }{
    \underbrace{
      i \, \overline{\psi} \, \gamma^\mu \, \psi_{,\mu}
    }
    }
    +
    \underset{
      \text{mass term}
    }{
    \underbrace{
      m \overline{\psi} \psi
    }}
  \end{aligned}
$$


This is naturally thought of as a collection of Lagrangians smoothly parameterized by the
[[metric]] $\eta$ and the [[mass]] $m$. For this to be [[physical unit]]-free in the sense of
remark \ref{ParameterizedLagrangianDensities} the [[physical unit]] of the parameter $m$ must be
that of the inverse metric, hence must be an inverse [[length]] according to remark \ref{MinkowskiMetricAndPhysicalUnitOfLength}
This is the _inverse [[Compton wavelength]]_  $\ell_m = \hbar / m c$ (eq:ComptonWavelength) and hence
the [[physical unit]]-free version of the Lagrangian density for the free Dirac field is

$$
  \mathbf{L}_{\eta,\ell_m}
    \;\coloneqq\;
  \ell_m
  \left(
    i \overline{\psi} \gamma^\mu \psi_{,\mu} + \left( \tfrac{m c}{\hbar} \right) \overline{\psi} \psi
  \right) dvol_\Sigma
  \,.
$$

=--

+-- {: .num_remark #RealityOfLagrangianDensityOfTheDiracField}
###### Remark
**([[real part|reality]] of the [[Lagrangian density]] of the [[Dirac field]])**

The kinetic term of the [[Lagrangian density]] for the [[Dirac field]] form def. \ref{LagrangianDensityForDiracField}
is a sum of two contributions, one for each [[chiral spinor]] component in the full [[Dirac spinor]] (remark \ref{TwoComponentSpinorNotation}):

$$
  \begin{aligned}
    i \overline{\psi} \gamma^\mu \psi_{,\mu}
    & =
    i
    \underset{
      -(\partial_\mu \xi^a ) \sigma^\mu_{a \dot c} \xi^{\dagger \dot c}
      + \partial_\mu(\chi^a \sigma^\mu_{a \dot c} \chi^{\dagger \dot c})
    }{
    \underbrace{
      \xi^a \sigma^\mu_{a \dot c} \partial_\mu \xi^{\dagger \dot c}
    }
    }
    +
    \xi^\dagger_{\dot a} \tilde \sigma^{\mu \dot a c} \partial_\mu \xi_c
    \\
    & =
    \xi^\dagger \tilde \sigma^\mu \partial_\mu \xi
    +
    \chi^\dagger \tilde \sigma^\mu \partial_\mu \chi
    +
    \partial_\mu(\xi \sigma^\mu \xi^\dagger)
  \end{aligned}
$$

Here the computation shown under the brace crucially uses that all these jet coordinates
for the Dirac field are anti-commuting, due to their [[supergeometry|supergeometric]] nature (eq:DiracFieldJetCoordinatesAnticommute).

Notice that a priori this is a function on the jet bundle with values in $\mathbb{K}$.
But in fact for $\mathbb{K} = \mathbb{C}$ it is real up to a [[total spacetime derivative]]:, because

$$
  \begin{aligned}
    \left(
      i \chi^\dagger \tilde \sigma^\mu  \partial_\mu\chi
    \right)^\dagger
    & =
    -i \left( \partial_\mu \chi\right)^\dagger \sigma^\mu \chi
    \\
    & =
    i \chi^\dagger \sigma^\mu \partial_\mu \chi + i \partial_\mu\left( \chi^\dagger \sigma^\mu \chi \right)
  \end{aligned}
$$

and similarly for $i \xi^\dagger \tilde \sigma^\mu  \partial_\mu\xi$

=--

(e.g. [Dermisek I-9](Dirac+field#DermisekI9))

$\,$

The beauty of [[Lagrangian field theory]] (def. \ref{LocalLagrangianDensityOnSecondOrderJetBundleOfTrivialVectorBundleOverMinkowskiSpacetime}) is that a choice of [[Lagrangian density]] determines
both the [[equations of motion]] of the fields as well as a [[presymplectic manifold|presymplectic structure]]
on the space of solutions to this equation (the "[[shell]]"), making it the "[[covariant phase space]]" of the theory.
All this we discuss [below](#PhaseSpace). But in fact all this key structure of the field theory is
nothing but the shadow (under "[[transgression of variational differential forms]]", def. \ref{TransgressionOfVariationalDifferentialFormsToConfigrationSpaces} below) of the following
simple relation in the [[variational bicomplex]]:


+-- {: .num_prop #EulerLagrangeOperatorForTivialVectorBundleOverMinkowskiSpacetime}
###### Proposition
**([[Euler-Lagrange form]] and [[presymplectic current]])**

Given a [[Lagrangian density]] $\mathbf{L} \in \Omega^{p+1,0}_\Sigma(E)$ as in def. \ref{LocalLagrangianDensityOnSecondOrderJetBundleOfTrivialVectorBundleOverMinkowskiSpacetime}, then its de Rham differential
$\mathbf{d}\mathbf{L}$, which by degree reasons equals $\delta \mathbf{L}$, has a _unique_ decomposition as a sum of two terms

$$
  \label{dLDecomposition}
  \mathbf{d} \mathbf{L}
  =
  \delta_{EL} \mathbf{L}
  -
  d \Theta_{BFV}
$$

such that $\delta_{EL}\mathbf{L}$ is proportional to the [[variational derivative]] of the fields (but not their derivatives, called a "[[source form]]"):

$$
  \delta_{EL} \mathbf{L}
    \;\in\;
  \Omega^{p+1,0}_{\Sigma}(E) \wedge \delta C^\infty(E)
    \;\subset\;
  \Omega^{p+1,1}_{\Sigma}(E)
  \,.
$$

The map

$$
   \delta_{EL} \;\colon\; \Omega^{p+1,0}_{\Sigma}(E) \longrightarrow \Omega^{p+1,0}_{\Sigma}(E) \wedge \delta \Omega^{0,0}_{\Sigma}(E)
$$

thus defined is called the _[[Euler-Lagrange operator]]_ and is explicitly given by

$$
  \label{EulerLagrangeEquationGeneral}
  \begin{aligned}
    \delta_{EL} L \, dvol_\Sigma
    & \coloneqq
    \frac{\delta_{EL} L}{\delta \phi^a}
    \delta \phi^a \wedge dvol_\Sigma
    \\
    & \coloneqq
    \left(
      \frac{\partial L}{\partial \phi^a}
      -
      \frac{d}{d x^\mu}
      \frac{\partial L}{\partial \phi^a_{,\mu}}
      +
      \frac{d^2}{d x^{\mu_1} d x^{\mu_2}}
      \frac{\partial L}{\partial \phi^a_{\mu_1, \mu_2}}
      -
      \cdots
    \right)
    \delta \phi^a
    \wedge
    dvol_\Sigma
    \,.
  \end{aligned}
$$

The [[smooth space|smooth subspace]] of the [[jet bundle]] on which the [[Euler-Lagrange form]]
vanishes

$$
  \label{ShellInJetBundle}
  \mathcal{E}
   \;\coloneqq\;
  \left\{
    x \in J^\infty_\Sigma(E)
    \;\vert\;
    \delta_{EL}\mathbf{L}(x) = 0
  \right\}
  \;\overset{i_{\mathcal{E}}}{\hookrightarrow}\;
  J^\infty_\Sigma(E)
  \,.
$$

is called the _[[shell]]_. The smaller subspace on which also all [[total spacetime derivatives]]
vanish (the "[[formally integrable PDE|formally integrable prolongation]]")
is the _prolonged [[shell]]_

$$
  \label{ProlongedShellInJetBundle}
  \mathcal{E}^\infty
   \;\coloneqq\;
  \left\{
    x \in J^\infty_\Sigma(E)
    \;\vert\;
    \left(
      \frac{d^k}{d x^{\mu_1} \cdots d x^{\mu_k}}
      \delta_{EL}\mathbf{L}
    \right)(x) = 0
  \right\}
   \overset{i_{\mathcal{E}^\infty}}{\hookrightarrow}
  J^\infty_\Sigma(E)
  \,.
$$

Saying something holds  "[[on-shell]]" is to mean that it holds after restriction to this
subspace. For example a [[variational differential form]] $\alpha \in \Omega^{\bullet,\bullet}_\Sigma(E)$
is said to _vanish on shell_ if $\alpha\vert_{\mathcal{E}^\infty} = 0$.


The remaining term $d \Theta_{BFV}$ in (eq:dLDecomposition) is unique, while the _presymplectic potential_

$$
  \label{PresymplecticPotential}
  \Theta_{BFV} \in \Omega^{p,1}_{\Sigma}(E)
$$

is not unique.

(For a [[field bundle]] which is a [[trivial vector bundle]] (example \ref{TrivialVectorBundleAsAFieldBundle}
over [[Minkowski spacetime]] (def. \ref{MinkowskiSpacetime}), prop. \ref{HorizontalVariationalComplexOfTrivialFieldBundleIsExact} says
that $\Theta_{BFV}$ is unique up to addition of total spacetime derivatives $d \kappa$, for $\kappa \in \Omega^{p-1,1}_\Sigma(E)$.)

One possible choice for the presymplectic current $\Theta_{BFV}$ is

$$
  \label{StandardThetaForTrivialVectorFieldBundleOnMinkowskiSpacetime}
  \begin{aligned}
    \Theta_{BFV}
    & \coloneqq \phantom{+}
      \frac{\partial L}{\partial \phi^a_{,\mu}}
      \delta \phi^a
      \; \wedge \iota_{\partial_\mu} dvol_\Sigma
    \\
    & \phantom{=}
      +
      \left(
        \frac{\partial L}{\partial \phi^a_{,\nu \mu}}
        \delta \phi^a_{,\nu}
        -
        \frac{d}{d x^\nu} \frac{\partial L}{\partial \phi^a_{,\mu \nu}}
        \delta \phi^a_{,\mu}
      \right)
    \wedge \iota_{\partial_\mu} dvol_\Sigma
    \\
    & \phantom{=} + \cdots
  \,,
  \end{aligned}
$$

where

$$
  \iota_{\partial_{\mu}} dvol_\Sigma
  \;\coloneqq\;
  (-1)^{\mu} d x^0 \wedge \cdots d x^{\mu-1} \wedge d x^{\mu+1} \wedge \cdots \wedge d x^p
$$

denotes the contraction (def. \ref{ContractionOfFormsWithVectorFields}) of the [[volume form]] with the [[vector field]] $\partial_\mu$.

The [[vertical derivative]] of a chosen presymplectic potential $\Theta_{BFV}$ is called a _[[pre-symplectic current]]_ for $\mathbf{L}$:

$$
  \label{PresymplecticCurrent}
  \Omega_{BFV}
   \;\coloneqq\;
   \delta \Theta_{BFV} \;\;\; \in \Omega^{p,2}_{\Sigma}(E)
  \,.
$$

Given a choice of $\Theta_{BFV}$ then the sum

$$
  \label{TheLepage}
  \mathbf{L} + \Theta_{BFV} \;\in\; \Omega^{p+1,0}_\Sigma(E) \oplus \Omega^{p,1}_\Sigma(E)
$$

is called the corresponding _[[Lepage form]]_. Its de Rham derivative is the sum of
the Euler-Lagrange variation and the presymplectic current:

$$
  \label{DerivativeOfLepageForm}
  \mathbf{d}( \mathbf{L} + \Theta_{BFV} )
  \;=\;
  \delta_{EL} \mathbf{L} + \Omega_{BFV}
  \,.
$$

(Its conceptual nature will be elucidated after the introduction of the [[local BV-complex]]
in example \ref{DerivedPresymplecticCurrentOfRealScalarField} below.)

=--


+-- {: .proof}
###### Proof

Using $\mathbf{L} = L dvol_\Sigma$ and that $d \mathbf{L} = 0$ by degree reasons (example \ref{BasicFactsAboutVarationalCalculusOnJetBundleOfTrivialVectorBundle}), we find

$$
  \begin{aligned}
    \mathbf{d}\mathbf{L}
    & =
    \left(
      \frac{\partial L}{\partial \phi^a} \delta \phi^a
      +
      \frac{\partial L}{\partial \phi^a_{,\mu}} \delta \phi^a_{,\mu}
      +
      \frac{\partial L}{\partial \phi^a_{,\mu_1 \mu_2}} \delta \phi^a_{,\mu_1 \mu_2}
      +
      \cdots
    \right)
    \wedge dvol_{\Sigma}
  \end{aligned}
  \,.
$$

The idea now is to have $d \Theta_{BFV}$ pick up those terms that would appear as [[boundary]] terms under the [[integral]]
$\int_\Sigma j^\infty_\Sigma(\Phi)^\ast \mathbf{d}L$ if we were to consider [[integration by parts]] to remove
spacetime derivatives of $\delta \phi^a$.

We compute, using example \ref{BasicFactsAboutVarationalCalculusOnJetBundleOfTrivialVectorBundle},
the total horizontal derivative of $\Theta_{BFV}$ from (eq:StandardThetaForTrivialVectorFieldBundleOnMinkowskiSpacetime) as follows:

$$
  \begin{aligned}
    d \Theta_{BFV}
    & =
    \left(
      d
      \left(
        \frac{\partial L}{\partial \phi^a_{,\mu}}
        \delta \phi^a
      \right)
      +
      d
      \left(
        \frac{\partial L}{\partial \phi^a_{,\nu \mu}}
        \delta \phi^a_{,\nu}
        -
        \frac{d}{d x^\nu} \frac{\partial L}{\partial \phi^a_{\mu \nu}}
        \delta \phi^a
      \right)
      +
      \cdots
  \right)
  \wedge \iota_{\partial_\mu} dvol_\Sigma
  \\
    & =
    \left(
      \left(
        \left(
           d \frac{\partial L}{\partial \phi^a_{,\mu}}
        \right) \wedge  \delta \phi^a
        -
        \frac{\partial L}{\partial \phi^a_{,\mu}} \delta d \phi^a
      \right)
      +
      \left(
        \left(d \frac{\partial L}{\partial \phi^a_{,\nu \mu}}\right) \wedge \delta \phi^a_{,\nu}
        -
        \frac{\partial L}{\partial \phi^a_{,\nu \mu}} \delta d \phi^a_{,\nu}
        -
        \left( d \frac{d}{d x^\nu} \frac{\partial L}{\partial \phi^a_{,\mu \nu}} \right) \wedge
        \delta \phi^a
        +
        \frac{d}{d x^\nu} \frac{\partial L}{\partial \phi^a_{,\mu \nu}}
        \delta d \phi^a
      \right)
          +
      \cdots
    \right)
    \wedge \iota_{\partial_\mu} dvol_\Sigma
    \\
    & =
    -
    \left(
      \left(
        \frac{d}{d x^\mu} \frac{\partial L}{\partial \phi^a_{,\mu}}
        \delta \phi^a
        +
        \frac{\partial L}{\partial \phi^a_{,\mu}}
        \delta \phi^a_{,\mu}
      \right)
      +
      \left(
        \frac{d}{d x^\mu}
        \frac{\partial L}{\partial \phi^a_{,\nu \mu}}
        \delta \phi^a_{,\nu}
        +
        \frac{\partial L}{\partial \phi^a_{,\nu \mu}}
        \delta \phi^a_{,\nu \mu}
        -
        \frac{d^2}{ d x^\mu d x^\nu}
        \frac{\partial L}{\partial \phi^a_{,\mu \nu}}
        \delta \phi^a
        -
        \frac{d}{d x^\nu}
        \frac{\partial L}{\partial \phi^a_{,\mu \nu}}
        \delta \phi^a_{,\mu}
      \right)
      + \cdots
    \right)
    \wedge dvol_\Sigma
    \,,
  \end{aligned}
$$

where in the last line we used that

$$
  d x^{\mu_1} \wedge \iota_{\partial_{\mu_2}} dvol_\Sigma
  =
  \left\{
    \array{
      dvol_\Sigma &\vert& \text{if}\, \mu_1 = \mu_2
      \\
      0 &\vert& \text{otherwise}
    }
  \right.
$$

Here the two terms proportional to $\frac{d}{d x^\nu} \frac{\partial L}{\partial \phi^a_{,\mu \nu}} \delta \phi^a_{,\mu}$
cancel out, and we are left with

$$
  d \Theta_{BFV}
  \;=\;
    -
      \left(
        \frac{d}{d x^\mu} \frac{\partial L}{\partial \phi^a_{,\mu}}
        -
        \frac{d^2}{ d x^\mu d x^\nu}
        \frac{\partial L}{\partial \phi^a_{,\mu \nu}}
        +
        \cdots
      \right)
      \delta \phi^a \wedge dvol_\Sigma
        -
      \left(
        \frac{\partial L}{\partial \phi^a_{,\mu}}
        \delta \phi^a_{,\mu}
        +
        \frac{\partial L}{\partial \phi^a_{,\nu \mu}}
        \delta \phi^a_{,\nu \mu}
        +
        \cdots
      \right)
      \wedge dvol_\Sigma
$$


Hence $-d \Theta_{BFV}$ shares with $\mathbf{d} \mathbf{L}$ the terms that are proportional to
$\delta \phi^a_{,\mu_1 \cdots \mu_k}$ for $k \geq 1$,
and so the remaining terms are proportional to $\delta \phi^a$, as claimed:

$$
  \mathbf{d}L + d \Theta_{BFV}
  =
  \underset{
    = \delta_{EL}\mathbf{L}
  }{
  \underbrace{
  \left(
    \frac{\partial L}{\partial \phi^a}
    -
    \frac{d}{d x^\mu}\frac{\partial L}{\partial \phi^a_{,\mu}}
    +
    \frac{d^2}{d x^\mu d x^\nu} \frac{\partial L}{\partial \phi^a_{,\mu\nu}}
    +
    \cdots
  \right)
  \delta \phi^a \wedge dvol_\Sigma
  }}
  \,.
$$


=--


The following fact is immediate from prop. \ref{EulerLagrangeOperatorForTivialVectorBundleOverMinkowskiSpacetime},
but of central importance, we futher amplify this in remark \ref{PresymplecticCurrentInterpretation} below:


+-- {: .num_prop #HorizontalDerivativeOfPresymplecticCurrentVanishesOnShell}
###### Proposition
**([[total derivative|total spacetime derivative]] of [[presymplectic current]] vanishes [[on-shell]])**

Let $(E,\mathbf{L})$ be a [[Lagrangian field theory]] (def. \ref{LocalLagrangianDensityOnSecondOrderJetBundleOfTrivialVectorBundleOverMinkowskiSpacetime}).
Then the [[Euler-Lagrange form]] $\delta_{EL} \mathbf{L}$ and the [[presymplectic current]]
(prop. \ref{EulerLagrangeOperatorForTivialVectorBundleOverMinkowskiSpacetime}) are related by

$$
  d \Omega_{BFV} = - \delta(\delta_{EL}\mathbf{L})
  \,.
$$

In particular this means that restricted to the prolonged shell $\mathcal{E}^\infty \hookrightarrow J^\infty_\Sigma(E)$ (eq:ProlongedShellInJetBundle) the total spacetime derivative of the [[presymplectic current]] vanishes:

$$
  \label{HorizontalDerivativeOfPresymplecticCurrentVanishesOnShell}
  d \Omega_{BFV} \vert_{\mathcal{E}^\infty} \;=\; 0
  \,.
$$

=--

+-- {: .proof}
###### Proof

By prop. \ref{EulerLagrangeOperatorForTivialVectorBundleOverMinkowskiSpacetime} we have

$$
  \delta \mathbf{L} = \delta_{EL} \mathbf{L} - d \Theta_{BFV}
  \,.
$$

The claim follows from applying the [[variational derivative]] $\delta$ to both sides,
using (eq:HorizontalAndVerticalDerivativeAnticommute): $\delta^2 = 0$ and $\delta \circ d = - d \circ \delta$.

=--



Many examples of interest fall into the following two special cases of prop. \ref{EulerLagrangeOperatorForTivialVectorBundleOverMinkowskiSpacetime}:

+-- {: .num_prop #ShellForSpacetimeIndependentLagrangians}
###### Example
**([[Euler-Lagrange form]] for [[spacetime]]-independent [[Lagrangian densities]])**

Let $(E,\mathbf{L})$ be a [[Lagrangian field theory]] (def. \ref{LocalLagrangianDensityOnSecondOrderJetBundleOfTrivialVectorBundleOverMinkowskiSpacetime})
whose [[field bundle]] $E$ is a [[trivial vector bundle]] $E \simeq \Sigma \times F$ over [[Minkowski spacetime]] $\Sigma$
(example \ref{TrivialVectorBundleAsAFieldBundle}).

In general the [[Lagrangian density]] $\mathbf{L}$ is a function of all the spacetime and field coordinates

$$
  \mathbf{L} = L((x^\mu), (\phi^a), (\phi^a_{,\mu}), \cdots) dvol_\Sigma
  \,.
$$

Consider the special case that $\mathbf{L}$ is _[[spacetime]]-independent_ in that the Lagrangian funtion $L$
is independent of the spacetime coordinate $(x^\mu)$.
Then the same evidently holds for the [[Euler-Lagrange form]] $\delta_{EL}\mathbf{L}$
(prop. \ref{EulerLagrangeOperatorForTivialVectorBundleOverMinkowskiSpacetime}).
Therefore in this case the [[shell]] (eq:ProlongedShellInJetBundle) is itself a [[trivial bundle]] over spacetime.

In this situation every point $\varphi$ in the jet fiber defines a constant section of the shell:

$$
  \label{ConstantSectionOfTrivialShellBundle}
  \Sigma \times \{\varphi\} \subset \mathcal{E}^\infty
  \,.
$$


=--


+-- {: .num_example #CanonicalMomentum}
###### Example
**([[canonical momentum]])**

Consider a [[Lagrangian field theory]] $(E, \mathbf{L})$ (def. \ref{LocalLagrangianDensityOnSecondOrderJetBundleOfTrivialVectorBundleOverMinkowskiSpacetime}) whose [[Lagrangian density]] $\mathbf{L}$

1. does not depend on the [[spacetime]]-[[coordinates]] (example \ref{ShellForSpacetimeIndependentLagrangians});

1. depends on spacetime derivatives of [[field (physics)|field]] coordinates (hence on [[jet bundle]] coordinates) at most to first order.

Hence if the [[field bundle]] $E \overset{fb}{\to} \Sigma$ is a [[trivial vector bundle]] over [[Minkowski spacetime]] (example \ref{TrivialVectorBundleAsAFieldBundle}) this means to consider the case that

$$
  \mathbf{L}
    \;=\;
   L\left(
     (\phi^a), (\phi^a_{,\mu})
   \right) \wedge dvol_\Sigma
  \,.
$$

Then the [[presymplectic current]] (def. \ref{EulerLagrangeOperatorForTivialVectorBundleOverMinkowskiSpacetime}) is (up to possibly a horizontally exact part) of the form

$$
  \label{CanonicalMomentumPresymplecticCurrent}
  \Omega_{BFV}
   \;=\;
  \delta p_a^\mu
  \wedge
  \delta \phi^a
  \wedge
  \iota_{\partial_\mu} dvol_\Sigma
$$

where

$$
  \label{CanonicalMomentumInCoordinates}
  p_a^\mu
    \;\coloneqq\;
  \frac{\partial L}{ \partial \phi^a_{,\mu}}
$$

denotes the [[partial derivative]] of the [[Lagrangian density|Lagrangian function]] with respect to the spacetime-[[derivatives]] of the [[field (physics)|field]] [[coordinates]].

Here

$$
  \begin{aligned}
    p_a
      & \coloneqq
    p_a^0
    \\
      & =
    \frac{\partial L}{\partial \phi^a_{,0}}
  \end{aligned}
$$

is called the _[[canonical momentum]]_ corresponding to the "[[canonical coordinate|canonical field coordinate]]" $\phi^a$.

In the language of [[multisymplectic geometry]] the full expression

$$
  p_a^\mu \wedge \iota_{\partial_\mu} dvol_\Sigma
  \;\in\;
  \Omega^{p,1}_\Sigma(E)
$$

is also called the "canonical multi-momentum", or similar.

=--

+-- {: .proof}
###### Proof

We compute:

$$
  \begin{aligned}
    \mathbf{d} \mathbf{L}
    & =
    \left(
      \frac{\partial L}{\partial \phi^a} \delta \phi^a
      +
      \frac{\partial L}{\partial \phi^a_{,\mu}} \delta \phi^a_{,\mu}
    \right)
    \wedge
    dvol_\Sigma
    \\
    & =
    \left(
      \frac{\partial L}{\partial \phi^a}
      -
      \frac{d}{d x^\mu} \frac{\partial L}{\partial \phi^a_{,\mu}}
    \right)
    \wedge
    dvol_\Sigma
    -
    d
    \underset{
      \Theta_{BFV}
    }{
    \underbrace{
      \left(
        \frac{\partial L}{\partial \phi^a_{,\mu}} \delta \phi^a
      \right)
      \wedge
      \iota_{\partial_\mu} dvol_\Sigma
    }
    }
  \end{aligned}
  \,.
$$

Hence

$$
  \begin{aligned}
    \Omega_{BFV}
    & \coloneqq
    \delta \Theta_{BFV}
    \\
    & =
    \delta
    \left(
      \frac{\partial L}{\partial \phi^a_{,\mu}}
      \delta \phi^a_{,\mu}
      \wedge \iota_{\partial_\mu} dvol_\Sigma
    \right)
    \\
    & =
     \delta
      \frac{\partial L}{\partial \phi^a_{,\mu}}
     \wedge
      \delta \phi^a_{,\mu}
      \wedge
      \iota_{\partial_\mu} dvol_\Sigma
    \\
    & =
    \delta p_a^\mu \wedge \delta \phi^a \wedge \iota_{\partial_\mu} dvol_\Sigma
  \end{aligned}
$$

=--


+-- {: .num_remark #PresymplecticCurrentInterpretation}
###### Remark
**([[presymplectic current]] is local version of ([[presymplectic form|pre-]])[[symplectic form]] of [[Hamiltonian mechanics]])**

In the simple but very common situation of example \ref{CanonicalMomentum} the [[presymplectic current]] (def. \ref{EulerLagrangeOperatorForTivialVectorBundleOverMinkowskiSpacetime}) takes the form (eq:CanonicalMomentumInCoordinates)

$$
  \Omega_{BFV}
   \;=\;
  \delta p_a^\mu
  \wedge
  \delta \phi^a
  \wedge
  \iota_{\partial_\mu} dvol_\Sigma
$$

with $\phi^a$ the [[field (physics)|field]] [[coordinates]] ("[[canonical coordinates]]")
and $p_a^\mu$ the "[[canonical momentum]]" (eq:CanonicalMomentumInCoordinates).

Notice that this is of the schematic form "$(\delta p_a \wedge \delta q^a) \wedge dvol_{\Sigma_p}$",
which is reminiscent of the wedge product of a [[symplectic form]] expressed in [[Darboux coordinates]] with
a [[volume form]] for a $p$-dimensional [[manifold]]. Indeed, below in _[Phase space](#PhaseSpace)_
we discuss that this [[presymplectic current]]  "[[transgression of variational differential forms|transgresses]]" (def. \ref{TransgressionOfVariationalDifferentialFormsToConfigrationSpaces} below)
to a [[presymplectic form]] of the schematic form "$d P_a \wedge d Q^a$" on the [[on-shell]] [[space of field histories]] (def. \ref{EulerLagrangeEquationsOnTrivialVectorFieldBundleOverMinkowskiSpacetime})
by [[integration of differential forms|integrating]] it over a [[Cauchy surface]] of [[dimension]] $p$. In good situations
this [[presymplectic form]] is in fact a [[symplectic form]] on the [[on-shell]] [[space of field histories]] (theorem \ref{PPeierlsBracket} below).

This shows that the [[presymplectic current]] $\Omega_{BFV}$ is the [[local field theory|local]] (i.e. [[jet bundle|jet level]]) avatar of the
[[symplectic form]] that governs the formulation of [[Hamiltonian mechanics]] in terms of [[symplectic geometry]].

In fact prop. \ref{HorizontalDerivativeOfPresymplecticCurrentVanishesOnShell} may be read as saying that
the [[presymplectic current]] is a _[[conserved current]]_ (def. \ref{SymmetriesAndConservedCurrents} below),
only that it takes values not in [[smooth functions]] of the field coordinates and jets, but in
[[variational differential form|variational 2-forms]] on fields. There is a [[conserved charge]] associated with
every [[conserved current]] (prop. \ref{ConservedCharge} below) and the conserved charge associated with the
[[presymplectic current]] is the ([[presymplectic form|pre-]])[[symplectic form]] on the [[phase space]]
of the field theory (def. \ref{PhaseSpaceAssociatedWithCauchySurface} below).

=--

+-- {: .num_example #FreeScalarFieldEOM}
###### Example
**([[Euler-Lagrange form]] and [[presymplectic current]] for [[free field|free]] [[real scalar field]])**

Consider the [[Lagrangian field theory]] of the [[free field|free]] [[real scalar field]]
from example  \ref{LagrangianForFreeScalarFieldOnMinkowskiSpacetime}.

Then the [[Euler-Lagrange operator|Euler-Lagrange form]] and [[presymplectic current]]
(prop. \ref{EulerLagrangeOperatorForTivialVectorBundleOverMinkowskiSpacetime}) are

$$
  \label{RealScalarFieldLEForm}
  \delta_{EL}\mathbf{L}
  \;=\;
  \left(\eta^{\mu \nu} \phi_{,\mu \nu} - m^2 \right) \delta \phi \wedge dvol_\sigma
  \;\in\;
  \Omega^{p+1,1}_{\Sigma}(E)
  \,.
$$

and

$$
  \Omega_{BFV}
  \;=\;
  \left(\eta^{\mu \nu} \delta \phi_{,\mu} \wedge \delta \phi \right) \wedge \iota_{\partial_\nu} dvol_{\Sigma}
  \;\in\;
  \Omega^{p,2}_{\Sigma}(E)
  \,,
$$

respectively.

=--

+-- {: .proof}
###### Proof

This is a special case of example \ref{CanonicalMomentum}, but we spell it out in detail again:

We need to show that [[Euler-Lagrange operator]] $\delta_{EL} \colon \Omega^{p+1,0}(\Sigma) \to \Omega^{p+1,1}_S(\Sigma)$ takes the [[local Lagrangian density]] for the [[free field|free]] [[scalar field]] to

$$
  \delta_EL L
  \;=\;
  \left(
    \eta^{\mu \nu} \phi_{,\mu \nu} - m^2 \phi
  \right)
  \delta \phi \wedge \mathrm{dvol}_\Sigma
  \,.
$$

First of all, the result of applying the [[variational derivative]] ([[vertical derivative]]) to the local Lagrangian density is

$$
  \delta L
    \;=\;
  \left(
    \eta^{\mu \nu} \phi_{,\mu} \delta \phi_{,\nu}
      -
    m^2 \phi \delta \phi
  \right)
  \wedge \mathrm{dvol}_\Sigma
  \,.
$$

By definition of the [[Euler-Lagrange operator]], in order to find $\delta_{EL}\mathbf{L}$ and $\Theta_{BFV}$, we need to exhibit this as the
sum of the form $(-) \wedge \delta \phi  - d \Theta_{BFV}$.

The key to find $\Theta_{BFV}$ is  to realize $\delta \phi_{,\nu}\wedge \mathrm{dvol}_\Sigma$ as a
[[total derivative|total spacetime derivative]] ([[horizontal derivative]]). Since $d \phi = \phi_{,\mu} d x^\mu$ this is accomplished by

$$
  \delta \phi_{,\nu} \wedge \mathrm{dvol}_\Sigma
  =
  \delta d \phi \wedge \iota_{\partial_\nu} \mathrm{dvol}_\Sigma
$$

Hence we may take the presymplectic potential (eq:PresymplecticPotential) of the free scalar field to be

$$
  \label{PresymplecticPotentialOfFreeScalarField}
  \Theta_{BFV}
    \coloneqq
  \eta^{\mu \nu} \phi_{,\mu} \delta \phi \wedge \iota_{\partial_\nu}
  \mathrm{dvol}_\Sigma
  \,,
$$

because with this we have

$$
  d \Theta_{BFV}
  =
  \eta^{\mu \nu}
  \left(
    \phi_{,\mu \nu} \delta \phi
    -
    \eta^{\mu \nu} \phi_{,\mu} \delta \phi_{,\nu}
  \right) \wedge \mathrm{dvol}_\Sigma
  \,.
$$

In conclusion this yields the decomposition of the vertical differential of the Lagrangian density

$$
  \delta L
  =
  \underset{
    = \delta_{EL} \mathcal{L}
  }{
  \underbrace{
    \left(
      \eta^{\mu \nu} \phi_{,\mu \nu}  - m^2 \phi
    \right)
    \delta \phi \wedge \mathrm{dvol}_\Sigma
  }
  }
  -
  d \Theta_{BFV}
  \,,
$$

which shows that $\delta_{EL} L$ is as claimed, and that $\Theta_{BFV}$ is a presymplectic potential current (eq:PresymplecticPotential).
Hence the presymplectic current itself is

$$
  \begin{aligned}
    \Omega_{BFV} &\coloneqq \delta \Theta_{BFV}
    \\
    & =
    \delta \left( \eta^{\mu \nu} \phi_{,\mu} \delta \phi \wedge \iota_{\partial_\nu} \mathrm{dvol}_\Sigma \right)
    \\
    & =
    \left(\eta^{\mu \nu} \delta \phi_{,\mu} \wedge \delta \phi \right) \wedge \iota_{\partial_\nu} dvol_{\Sigma}
  \end{aligned}
  \,.
$$

=--


+-- {: .num_example #ElectromagnetismEl}
###### Example
**([[Euler-Lagrange form]] for [[free field|free]] [[electromagnetism]])**

Consider the [[Lagrangian field theory]] of [[free field|free]] [[electromagnetism]] from example \ref{ElectromagnetismLagrangianDensity}.

The [[Euler-Lagrange variational derivative]] is

$$
  \delta_{EL} \mathbf{L}
  \;=\;
  \frac{d}{d x^\mu} f^{\mu \nu} \delta a_\nu
  \,.
$$

Hence the [[shell]] (eq:ShellInJetBundle) in this case is

$$
  \mathcal{E}
    =
  \Sigma \times \left\{ (\phi, (\phi_{,\mu}), (\phi_{,\mu \nu}) \cdots) \;\vert\;  \eta^{\mu \nu} \phi_{,\mu \nu} - m^2  = 0 \right\}
  \;\subset\;
  J^\infty_\Sigma(\Sigma \times \mathbb{R})
  \,.
$$


=--


+-- {: .num_example #PresymplecticCurrentDiracField}
###### Example
**([[Euler-Lagrange form]] and [[presymplectic current]] of [[Dirac field]])**

Consider the [[Lagrangian field theory]] of the [[Dirac field]] on [[Minkowski spacetime]] of [[dimension]] $p + 1 \in \{3,4,6,10\}$ (example \ref{LagrangianDensityForDiracField}).

Then

* the [[Euler-Lagrange variational derivative]] (def. \ref{EulerLagrangeOperatorForTivialVectorBundleOverMinkowskiSpacetime}) in the case of vanishing [[mass]] $m$ is

  $$
    \delta_{EL} \mathbf{L}
    \;=\;
    2 i\,
    \overline{\delta \psi}
    \,\gamma^\mu\, \psi_{,\mu}
    \,
    \wedge dvol_\Sigma
  $$

  and in the case that [[spacetime]] [[dimension]] is $p +1 = 4$ and arbitrary [[mass]] $m\in \mathbb{R}$, it is

  $$
    \delta_{EL} \mathbf{L}
     \;=\;
     \left(
       \overline{\delta \psi}
       \left(
          i \gamma^\mu \psi_{,\mu} + m \psi
       \right)
       +
       \left(
         - i \gamma^\mu\overline{\psi_{,\mu}} + m \overline{\psi}
       \right)
       (\delta \psi)
     \right)
     \,
     dvol_\Sigma
  $$


* its [[presymplectic current]] (def. \ref{EulerLagrangeOperatorForTivialVectorBundleOverMinkowskiSpacetime}) is

  $$
    \Omega_{BFV}
    \;=\;
    \overline{\delta \psi}\,\gamma^\mu \,\delta \psi \, \iota_{\partial_\mu} dvol_\Sigma
  $$


=--


+-- {: .proof}
###### Proof

In any case the [[canonical momentum]] of the [[Dirac field]] according to example \ref{CanonicalMomentum} is

$$
  \begin{aligned}
    p^\alpha_\mu
    & \coloneqq
    \frac{\partial }{\partial \psi^\alpha_{,\mu}}
    \left(
      i \overline {\psi} \, \gamma^\nu \, \psi_{,\nu}
      +
      m \overline{\psi} \psi
    \right)
    \\
    & =
    \overline{\psi}^\beta (\gamma^\mu)_\beta{}^\alpha
  \end{aligned}
$$

This yields the [[presymplectic current]] as claimed, by example \ref{CanonicalMomentum}.

Now regarding the [[Euler-Lagrange form]], first consider the massless case in spacetime dimension $p+1 \in \{3,4,6,10\}$, where

$$
  L
  \;=\;
  i \overline{\psi} \, \gamma^\mu \, \psi_{,\mu}
  \,.
$$

Then we compute as follows:

$$
  \begin{aligned}
    \delta_{EL} L
    & =
    i \,\overline{\delta \psi} \, \gamma^\mu \, \psi_{,\mu}
    \underset{
      = +
      i \,\overline{\delta \psi} \, \gamma^\mu \, \psi_{,\mu}
    }{
    \underbrace{
    -
    i \overline{\psi_{,\mu}} \, \gamma^\mu \, \delta \psi
    }
    }
    \\
    & =
    2 i \, \overline{\delta \psi} \, \gamma^\mu \, \psi_{,\mu}
  \end{aligned}
$$

Here the first equation is the general formula (eq:EulerLagrangeEquationGeneral) for the Euler-Lagrange variation, while the identity under the braces combines two facts (as in remark \ref{LagrangianDensityOfDiracFieldSupergeometricNature} above):

1. the symmetry (eq:SpinorToVectorPairingIsSymmetric) of the spinor pairing $\overline{(-)}\gamma^\mu(-)$ (prop. \ref{RealSpinorPairingsViaDivisionAlg});

1. the anti-commutativity (eq:DiracFieldJetCoordinatesAnticommute) of the Dirac field and jet coordinates, due to their [[supergeometry|supergeometric]] nature (remark \ref{DiracFieldSupergeometric}).

Finally in the special case of the massive Dirac field in spacetime dimension $p+1 = 4$ the Lagrangian function is

$$
  L
  \;=\;
  i \, \overline{\psi} \gamma^\mu \psi_{,\mu} + m \overline{\psi}\psi
$$

where now $\psi_\alpha$ takes values in the [[complex numbers]] $\mathbb{C}$ (as opposed to in $\mathbb{R}$, $\mathbb{H}$ or $\mathbb{O}$). Therefore we may now form the [[derivative]] equivalently by treeating $\psi$ and $\overline{\psi}$ as independent components of the field. This immediately yields the claim.

=--


+-- {: .num_example #TrivialLagrangianDensities}
###### Example
**(trivial [[Lagrangian densities]] and the [[Euler-Lagrange complex]])**

If a [[Lagrangian density]] $\mathbf{L}$ (def. \ref{LagrangianForFreeScalarFieldOnMinkowskiSpacetime})
is in the image of the [[total spacetime derivative]], hence horizontally exact (def. \ref{VariationalBicomplexOnSecondOrderJetBundleOverTrivialVectorBundleOverMinkowskiSpacetime})

$$
  \mathbf{L} \;=\; d \mathbf{\ell}
$$

for any $\mathbf{\ell} \in \Omega^{p,0}_\Sigma(E)$, then both its [[Euler-Lagrange form]] as well as its [[presymplectic current]]
(def. \ref{EulerLagrangeOperatorForTivialVectorBundleOverMinkowskiSpacetime}) vanish:

$$
  \delta_{EL}\mathbf{L} = 0
  \phantom{AA}
  \,,
  \phantom{AA}
  \Omega_{BFV} = 0
  \,.
$$

This is because with $\delta \circ d = - d \circ \delta$ (eq:HorizontalAndVerticalDerivativeAnticommute) the defining unique decomposition (eq:dLDecomposition) of $\delta \mathbf{L}$ is given by

$$
  \begin{aligned}
    \delta \mathbf{L}
    & =
    \delta d \mathbf{\ell}
    \\
    & =
    \underset{= \delta_{EL}\mathbf{L}}{\underbrace{0}}
     -
    d \underset{\Theta_{BFV}}{\underbrace{\delta \mathbf{l}}}
  \end{aligned}
$$

which then implies with (eq:PresymplecticCurrent) that

$$
  \begin{aligned}
    \Omega_{BFV}
    & \coloneqq
    \delta \Theta_{BFV}
    \\
    & =
    \delta \delta \mathbf{\ell}
    \\
    & =
    0
  \end{aligned}
$$

Therefore the [[Lagrangian densities]] which are [[total spacetime derivatives]]
are also called _trivial Lagrangian densities_.

If the [[field bundle]] $E \overset{fb}{\to} \Sigma$ is a [[trivial vector bundle]] (example \ref{TrivialVectorBundleAsAFieldBundle})
over [[Minkowski spacetime]] (def. \ref{MinkowskiSpacetime}) then also the converse is true:
Every Lagrangian density whose [[Euler-Lagrange form]] vanishes is a total spacetime derivative.

Stated more [[category theory|abstractly]], this means that the [[exact sequence]] of the total spacetime from prop. \ref{HorizontalVariationalComplexOfTrivialFieldBundleIsExact} extends to the right via the [[Euler-Lagrange variational derivative]]
$\delta_{EL}$ to an [[exact sequence]] of the form

$$
  \mathbb{R}
    \overset{}{\hookrightarrow}
  \Omega^{0,0}_\Sigma(E)
    \overset{d}{\longrightarrow}
  \Omega^{1,0}_\Sigma(E)
    \overset{d}{\longrightarrow}
  \Omega^{2,0}_\Sigma(E)
    \overset{d}{\longrightarrow}
    \cdots
    \overset{d}{\longrightarrow}
  \Omega^{p,0}_\Sigma(E)
    \overset{d}{\longrightarrow}
  \Omega^{p+1,0}_\Sigma(E)
    \overset{\delta_{EL}}{\longrightarrow}
  \Omega^{p+1,0}_\Sigma(E) \wedge \delta(C^\infty(E))
    \overset{\delta_{H}}{\longrightarrow}
  \cdots
  \,.
$$

In fact, as shown, this [[exact sequence]] keeps going to the right;
this is also called the _[[Euler-Lagrange complex]]_.

([Anderson 89, theorem 5.1](Euler-Lagrange+complex#Anderson89))

The next [[differential]] $\delta_{H}$ after the [[Euler-Lagrange variational derivative]] $\delta_{EL}$
is known as the _[[Helmholtz operator]]_. By definition of [[exact sequence]], the
[[Helmholtz operator]] detects whether a [[partial differential equation]] on [[field histories]],
induced by a [[variational differential form]] $P \in \Omega^{p+1,0}_\Sigma(E) \wedge \delta(C^\infty(E))$
as in (eq:EquationOfMotionEL) comes from varying a [[Lagrangian density]], hence whether it is the
[[equation of motion]] of a [[Lagrangian field theory]] via def. \ref{EulerLagrangeEquationsOnTrivialVectorFieldBundleOverMinkowskiSpacetime}.

This way [[homological algebra]] is brought to bear on core questions of [[field theory]].
For more on this see the exposition at _[[schreiber:Higher Structures|Higher Structures in Physics]]_.

=--

+-- {: .num_remark #LagrangianDensityOfDiracFieldSupergeometricNature}
###### Remark
**([[supergeometry|supergeometric]] nature of [[Lagrangian density]] of the [[Dirac field]])**

Observe that the [[Lagrangian density]] for the [[Dirac field]] (def. \ref{LagrangianDensityForDiracField}) makes sense (only) due to the [[supergeometry|supergeometric]] nature of the [[Dirac field]] (remark \ref{DiracFieldSupergeometric}): If the field jet coordinates $\psi_{,\mu_1 \cdots \mu_k}$ were not anti-commuting (eq:DiracFieldJetCoordinatesAnticommute) then the
Dirac's field Lagrangian density (def. \ref{LagrangianDensityForDiracField}) would be a [[total spacetime derivative]]
and hence be trivial according to example \ref{TrivialLagrangianDensities}.

This is because

$$
  d \left(
    \tfrac{1}{2}
    \overline{\psi} \,\gamma^\mu\, \psi
    \,
    \iota_{\partial_\mu} dvol_\Sigma
  \right)
  =
  \tfrac{1}{2} \overline{\psi_{,\mu}} \,\gamma^\mu\, \psi \, dvol_\Sigma
  +
  \underset{ = (-1) \tfrac{1}{2} \overline{\psi_{,\mu}} \,\gamma^\mu\, \psi \, dvol_\Sigma  }{
  \underbrace{
  \tfrac{1}{2}\overline{\psi} \,\gamma^\mu\, \psi_{,\mu} \, dvol_\Sigma
  }}
  \,.
$$

Here the identification under the brace uses two facts:

1. the symmetry (eq:SpinorToVectorPairingIsSymmetric) of the spinor bilinear pairing $\overline{(-)}\Gamma (-)$;

1. the anti-commutativity (eq:DiracFieldJetCoordinatesAnticommute) of the Dirac field and jet coordinates, due to their [[supergeometry|supergeometric]] nature (remark \ref{DiracFieldSupergeometric}).

The second fact gives the minus sign under the brace, which makes the total expression vanish, if the
Dirac field and jet coordinates indeed are anti-commuting (which, incidentally, means that we found
an "[[off-shell]] [[conserved current]]" for the Dirac field, see example \ref{DiracCurrent} below).

If however the Dirac field and jet coordinates did commute with each other, we would instead
have a plus sign under the brace, in which case the total horizontal derivative expression
above would equal the massless Dirac field Lagrangian (eq:DiracFieldLagrangianMassless),
thus rendering it trivial in the sense of example \ref{TrivialLagrangianDensities}.

The same [[supergeometry|supergeometric]] nature of the [[Dirac field]] will be necessary
for its intended [[equation of motion]], the _[[Dirac equation]]_ (example \ref{EquationOfMotionOfDiracFieldIsDiracEquation}) to derive from a
[[Lagrangian density]]; see the proof of example \ref{PresymplecticCurrentDiracField} below, and see remark \ref{SupergeometricNatureOfDiracEquation} below.

=--



$\,$

The key implication of the [[Euler-Lagrange form]] on the [[jet bundle]] is that it induces
the _[[equation of motion]]_ on the [[space of field histories]]:


+-- {: .num_defn #EulerLagrangeEquationsOnTrivialVectorFieldBundleOverMinkowskiSpacetime}
###### Definition
**([[Euler-Lagrange equation|Euler-Lagrange]] [[equation of motion]])**

Given a [[Lagrangian field theory]] $(E,\mathbf{L})$ (def. \ref{LocalLagrangianDensityOnSecondOrderJetBundleOfTrivialVectorBundleOverMinkowskiSpacetime} then the corresponding _[[Euler-Lagrange equation|Euler-Lagrange]] [[equations of motion]]_ is the condition on [[field histories]] (def. \ref{SupergeometricSpaceOfFieldHistories})

$$
  \Phi_{(-)} \;\colon\; U \longrightarrow \Gamma_\Sigma(E)
$$

to have a [[jet prolongation]] (def. \ref{JetProlongation})

$$
  j^\infty_\Sigma(\Phi_{(-)}(-) ) \;\colon\; U \times \Sigma \longrightarrow J^\infty_\Sigma(E)
$$

that factors through the [[shell]] inclusion $\mathcal{E} \overset{i_{\mathcal{E}}}{\hookrightarrow} J^\infty_\Sigma(E)$
(eq:ShellInJetBundle) defined by vanishing of the [[Euler-Lagrange form]] (prop. \ref{EulerLagrangeOperatorForTivialVectorBundleOverMinkowskiSpacetime})

$$
  \label{EquationOfMotionEL}
  j^\infty_\Sigma(\Phi_{(-)}(-))
    \;\colon\;
  U \times \Sigma
    \longrightarrow
  \mathcal{E}
    \overset{i_{\mathcal{E}}}{\hookrightarrow}
  J^\infty_\Sigma(E)
  \,.
$$

(This implies that $j^\infty_\Sigma(\Phi_{(-)})$ factors even through the prolonged shell $\mathcal{E}^\infty \overset{i_{\mathcal{E}^\infty}}{\hookrightarrow} J^\infty_\Sigma(E)$ (eq:ProlongedShellInJetBundle).)

In the case that the field bundle is a [[trivial vector bundle]] over [[Minkowski spacetime]] as in example \ref{TrivialVectorBundleAsAFieldBundle} this is the condition that
$\Phi_{(-)}$ satisfies the following [[differential equation]] (again using prop. \ref{EulerLagrangeOperatorForTivialVectorBundleOverMinkowskiSpacetime}):

$$
  \left(
    \frac{\partial L}{\partial \phi^a}
      -
    \frac{d}{d x^\mu}
    \frac{\partial L}{\partial \phi^a_{,\mu}}
    +
    \frac{d^2}{d x^\mu d x^\nu} \frac{\partial L}{\partial \phi^a_{,\mu\nu}}
    -
    \cdots
  \right)
  \left(
     (x^\mu),
     (\Phi^a),
     \left( \frac{\partial \Phi^a_{(-)}}{\partial x^\mu}\right),
     \left( \frac{\partial^2 \Phi^a_{(-)}}{\partial x^\mu \partial x^\nu} \right),
     \cdots
  \right)
  \;=\;
  0
  \,.
$$

The _[[on-shell]] [[space of field histories]]_ is the space of solutions to this condition, namely the
the sub-[[super formal smooth set|super smooth set]] (def. \ref{SuperFormalSmoothSet})
of the full [[space of field histories]] (eq:SpaceOfFieldHistories) (def. \ref{SupergeometricSpaceOfFieldHistories})

$$
  \label{OnShellFieldHistories}
  \Gamma_\Sigma(E)_{\delta_{EL} L = 0}
    \overset{\phantom{AAA}}{\hookrightarrow}
  \Gamma_\Sigma(E)
$$

whose plots are those $\Phi_{(-)} \colon U \to \Gamma_\Sigma(E)$ that factor through the shell (eq:EquationOfMotionEL).

More generally for $\Sigma_r \hookrightarrow \Sigma$ a [[submanifold]] of [[spacetime]], we write

$$
  \label{OnShellFieldHistoriesInHigherCodimension}
  \Gamma_{\Sigma_r}(E)_{\delta_{EL} L = 0}
    \overset{\phantom{AAA}}{\hookrightarrow}
  \Gamma_{\Sigma_r}(E)
$$

for the sub-[[super formal smooth set|super smooth ste]] of on-shell field histories restricted to the [[infinitesimal neighbourhood]]
of $\Sigma_r$ in $\Sigma$ (eq:SpaceOfFieldHistoriesInHigherCodimension).

=--

+-- {: .num_defn #FreeFieldTheory}
###### Definition
**([[free field theory]])**

A [[Lagrangian field theory]] $(E, \mathbf{L})$ (def. \ref{LocalLagrangianDensityOnSecondOrderJetBundleOfTrivialVectorBundleOverMinkowskiSpacetime})
with [[field bundle]] $E \overset{fb}{\to} \Sigma$ a [[vector bundle]]
(e.g. a [[trivial vector bundle]] as in example \ref{TrivialVectorBundleAsAFieldBundle})
is called a _[[free field theory]]_ if its [[Euler-Lagrange equation|Euler-Lagrange]] [[equations of motion]]
(def. \ref{EulerLagrangeEquationsOnTrivialVectorFieldBundleOverMinkowskiSpacetime}) is a
[[differential equation]] that is _[[linear differential equation]]_, in that with

$$
  \Phi_1, \Phi_2 \;\in\; \Gamma_\Sigma(E)_{\delta_{EL}\mathbf{L} = 0}
$$

any two [[on-shell]] [[field histories]] (eq:OnShellFieldHistories) and $c_1, c_2 \in \mathbb{R}$
any two [[real numbers]], also the [[linear combination]]

$$
  c_1 \Phi_1 + c_2 \Phi_2 \;\in\; \Gamma_\Sigma(E)
  \,,
$$

which a priori exists only as an element in the off-shell [[space of field histories]],
is again a solution to the [[equations of motion]] and hence an element of $\Gamma_\Sigma(E)_{\delta_{EL}\mathbf{L} = 0}$.

A [[Lagrangian field theory]] which is not a [[free field theory]] is called an _[[interaction|interacting]]_ [[field theory]].

=--

+-- {: .num_remark #FreeFieldTheoryRelevance}
###### Remark
**(relevance of [[free field theory]])**

In [[perturbative quantum field theory]] one considers [[interaction|interacting]] [[field theories]]
in the [[infinitesimal neighbourhood]] (example \ref{InfinitesimalNeighbourhood}) of [[free field theories]] (def. \ref{FreeFieldTheory})
inside some [[super formal smooth set|super smooth set]] of general [[Lagrangian field theories]].
While [[free field theories]] are typically of limited interest in themselves,
this [[perturbative quantum field theory|perturbation theory]] around them exhausts much of what is
known about [[quantum field theory]] in general, and therefore [[free field theories]] are of paramount importance
for the general theory.

We discuss the [[covariant phase space]] of [[free field theories]] below in _[Propagators](#Propagators)_
and their [[quantization]] below in _[Free quantum fields](#FreeQuantumFields) _.

=--

+-- {: .num_prop #EquationOfMotionOfFreeRealScalarField}
###### Example
**([[equation of motion]] of [[free field|free]] [[real scalar field]] is [[Klein-Gordon equation]])**

Consider the [[Lagrangian field theory]] of the [[free field|free]] [[real scalar field]]
from example \ref{LagrangianForFreeScalarFieldOnMinkowskiSpacetime}.

By example \ref{FreeScalarFieldEOM} its [[Euler-Lagrange form]] is

$$
  \delta_{EL}\mathbf{L}
    \;=\;
  \left(\eta^{\mu \nu} \phi_{,\mu \nu} - m^2 \right) \delta \phi \wedge dvol_\sigma
$$

Hence for $\Phi \in \Gamma_\Sigma(E) = C^\infty(X)$ a field trajectory,
its [[Euler-Lagrange equation|Euler-Lagrange]] [[equation of motion]]
according to def. \ref{EulerLagrangeEquationsOnTrivialVectorFieldBundleOverMinkowskiSpacetime} is

$$
  \eta^{\mu \nu} \frac{\partial^2 }{\partial x^\mu \partial x^\nu} \Phi - m^2 \Phi \;=\; 0
$$

often abbreviated as

$$
  \label{KleinGordonEquation}
  (\Box - m^2) \Phi \;=\; 0
  \,.
$$

This [[PDE]] is called the _[[Klein-Gordon equation]]_ on Minowski spacetime. If the [[mass]] $m$
vanishes, $m = 0$, then this is the _relativistic [[wave equation]]_.

Hence this is indeed a [[free field theory]] according to def. \ref{FreeFieldTheory}.

The corresponding [[linear differential operator]] (def. \ref{DifferentialOperator})

$$
  \label{KleinGordonOperator}
  (\Box - m^2)
    \;\colon\;
  \Gamma_\Sigma(\Sigma \times \mathbb{R})
     \longrightarrow
  \Gamma_\Sigma(\Sigma \times \mathbb{R})
$$

is called the _[[Klein-Gordon operator]]_.

=--

For later use we record the following basic fact about the [[Klein-Gordon equation]]:

+-- {: .num_example #FormallySelfAdjointKleinGordonOperator}
###### Example
**([[Klein-Gordon operator]] is [[formally adjoint differential operator|formally self-adjoint]] )**

The [[Klein-Gordon operator]] (eq:KleinGordonOperator)
is its own [[formal adjoint differential operator|formal adjoint]] (def. \ref{FormallyAdjointDifferentialOperators}) witnessed by the bilinear differential operator (eq:FormallyAdjointDifferentialOperatorWitness) given by

$$
  \label{WitnessForFormalSelfadjointnessOfKleinGordonEquation}
  K(\Phi_1, \Phi_2)
  \;\coloneqq\;
  \left(
    \frac{\partial \Phi_1}{\partial x^\mu} \Phi_2
    -
    \Phi_1 \frac{\partial \Phi_2}{\partial x^\mu}
  \right)
  \eta^{\mu \nu}\iota_{\partial_\nu} dvol_\Sigma
  \,.
$$

=--

+-- {: .proof}
###### Proof

$$
  \begin{aligned}
    d K(\Phi_1, \Phi_2)
    & =
    d
    \left(
      \frac{\partial \Phi_1}{\partial x^\mu} \Phi_2
      -
      \Phi_1 \frac{\partial \Phi_2}{\partial x^\mu}
    \right)
    \eta^{\mu \nu}\iota_{\partial_\nu} dvol_\Sigma
    \\
    &=
    \left(
    \left(
      \eta^{\mu \nu}\frac{\partial^2 \Phi_1}{\partial x^\mu \partial x^\nu} \Phi_2
      +
      \eta^{\mu \nu} \frac{\partial \Phi_1}{\partial x^\mu} \frac{\partial \Phi_2}{\partial x^\nu}
    \right)
    -
    \left(
      \eta^{\mu \nu}
      \frac{\partial \Phi_1}{\partial x^\nu} \frac{\partial \Phi_2}{\partial x^\mu}
      +
      \Phi_1 \eta^{\mu \nu} \frac{\partial^2 \Phi_2}{\partial x^\nu \partial x^\mu}
    \right)
    \right)
    dvol_\Sigma
    \\
    & =
    \left(
      \eta^{\mu \nu}\frac{\partial^2 \Phi_1}{\partial x^\mu \partial x^\nu} \Phi_2
      -
      \Phi_1 \eta^{\mu \nu} \frac{\partial^2 \Phi_2}{\partial x^\nu \partial x^\mu}
    \right)
    dvol_\Sigma
    \\
    & =
    \Box(\Phi_1) \Phi_2 - \Phi_1 \Box (\Phi_2)
  \end{aligned}
$$

=--



+-- {: .num_prop #MaxwellVacuumEquation}
###### Example
**([[equations of motion]] of [[vacuum]] [[electromagnetism]] are [[vacuum]] [[Maxwell's equations]])**

Consider the [[Lagrangian field theory]] of [[free field|free]] [[electromagnetism]]
on [[Minkowski spacetime]] from example \ref{ElectromagnetismLagrangianDensity}.

By example \ref{ElectromagnetismEl} its [[Euler-Lagrange form]] is

$$
  \delta_{EL}\mathbf{L}
    \;=\;
  \frac{d}{d x^\mu}f^{\mu \nu} \delta a_\nu
  \,.
$$

Hence for $A \in \Gamma_{\Sigma}(T^\ast \Sigma) = \Omega^1(\Sigma)$ a field trajectory ("[[vector potential]]"),
its [[Euler-Lagrange equation|Euler-Lagrange]] [[equation of motion]]
according to def. \ref{EulerLagrangeEquationsOnTrivialVectorFieldBundleOverMinkowskiSpacetime} is

$$
  \begin{aligned}
    & \frac{\partial}{\partial x^\mu} F^{\mu \nu} = 0
    \\
    \Leftrightarrow\;\;  &
    d \star_\eta F = 0
  \end{aligned}
  \,,
$$

where $F = d A$ is the [[Faraday tensor]] (eq:TensorFaraday).
(In the coordinate-free formulation in the second line "$\star_\eta$" denotes
the [[Hodge star operator]] induced by the [[pseudo-Riemannian metric]] $\eta$ on [[Minkowski spacetime]].)

These [[PDEs]] are called the _[[vacuum]] [[Maxwell's equations]]_.

This, too, is a [[free field theory]] according to def. \ref{FreeFieldTheory}.

=--



+-- {: .num_example #EquationOfMotionOfDiracFieldIsDiracEquation}
###### Example
**([[equation of motion]] of [[Dirac field]] is [[Dirac equation]])**

Consider the [[Lagrangian field theory]] of the [[Dirac field]]
on [[Minkowski spacetime]] from example \ref{LagrangianDensityForDiracField},
with [[field fiber]] the [[spin representation]] $S$ regarded as a [[superpoint]] $S_{odd}$ and
[[Lagrangian density]] given by the spinor bilinear pairing

$$
  L
   \;=\;
  i \overline{\psi} \gamma^\mu \partial_\mu \psi + m \overline{\psi}\psi
$$

(in spacetime dimension $p+1 \in \{3,4,6,10\}$ with $m = 0$ unless $p+1 = 4$).

From example \ref{PresymplecticCurrentDiracField} it follows that
the corresponding [[Euler-Lagrange equation|Euler-Lagrange]] [[equation of motion]] (def. \ref{EulerLagrangeEquationsOnTrivialVectorFieldBundleOverMinkowskiSpacetime}) is

$$
  \label{DiracEquation}
  \left(-i \gamma^\mu \partial_\mu + m\right)\psi \;=\; 0
  \,.
$$

This is the _[[Dirac equation]]_. In terms of the _[[Feynman slash notation]]_ from (eq:FeynmanSlashNotationForMasslessDiracOperator)
the corresponding [[differential operator]], the _[[Dirac operator]]_ reads

$$
  \left(
    - i \partial\!\!\!/\, + m
  \right)
  \psi = 0
  \,.
$$

Hence this is a [[free field theory]] according to def. \ref{FreeFieldTheory}.

Observe that the "square" of the [[Dirac operator]] is the [[Klein-Gordon operator]] $\Box - m^2$ (eq:KleinGordonEquation)

$$
  \begin{aligned}
    \left(
      +i \gamma^\mu \partial_\mu + m
    \right)
    \left(-i \gamma^\mu \partial_\mu + m\right)\psi
    &
    =
    \left(\partial_\mu \partial^\mu - m^2\right) \psi
    \\
    & =
    \left(\Box - m^2\right) \psi
  \end{aligned}
  \,.
$$

This means that a [[Dirac field]] which solves the [[Dirac equations]] is
in particular (on [[Minkowski spacetime]]) componentwise a [[solution]] to the [[Klein-Gordon equation]].

=--


+-- {: .num_prop #SupergeometricNatureOfDiracEquation}
###### Remark
**([[supergeometry|supergeometric]] nature of the [[Dirac equation]] as an [[Euler-Lagrange equation]])**

While the [[Dirac equation]] (eq:DiracEquation) of example \ref{EquationOfMotionOfDiracFieldIsDiracEquation}
would make sense in itself also if the field coordinates $\psi$ and jet coordinates $\psi_{,\mu}$ of the [[Dirac field]]
were not anti-commuting (eq:DiracFieldJetCoordinatesAnticommute), due to their [[supergeometry|supergeometric]] nature (remark \ref{DiracFieldSupergeometric}), it would,
by remark \ref{LagrangianDensityOfDiracFieldSupergeometricNature}, then no longer be the [[Euler-Lagrange equation]] of a [[Lagrangian density]],
hence then Dirac field theory would not be a [[Lagrangian field theory]].

=--

+-- {: .num_example #DiracOperatorOnDiracSpinorsIsFormallySelfAdjointDifferentialOperator}
###### Example
**([[Dirac operator]] on [[Dirac spinors]] is [[formally self-adjoint differential operator]])**

The _[[Dirac operator]], hence the [[differential operator]] corresponding to the [[Dirac equation]] of example \ref{EquationOfMotionOfDiracFieldIsDiracEquation} via def. \ref{DifferentialOperator}
is a [[formally self-adjoint differential operator|formally anti-self adjoint]] (def. \ref{FormallyAdjointDifferentialOperators}):

$$
  D^\ast = - D
  \,.
$$

=--

+-- {: .proof}
###### Proof


Regard the Dirac operator as taking values in the [[dual vector bundle|dual]] [[spin bundle]] by using the [[Dirac conjugate]] $\overline{(-)}$ (eq:DiracConjugate):

$$
  \array{
    \Gamma_\Sigma(\Sigma \times S)
      &\overset{D}{\longrightarrow}&
    \Gamma_\Sigma(\Sigma \times S^\ast)
    \\
   \Psi &\mapsto&
   \overline{(-)} \gamma^\mu \partial_\mu  \Psi
  }
$$

Then we need to show that there is $K(-,-)$ such that for all [[pairs]] of [[spinor]] [[sections]] $\Psi_1, \Psi_2$ we have

$$
  \overline{\Psi_2}\gamma^\mu (\partial_\mu \Psi_1)
  -
  \overline{\Psi_1}\gamma^\mu (-\partial_\mu \Psi_2)
  \;=\;
  d K(\psi_1, \psi_2)
  \,.
$$

But the spinor-to-vector pairing is symmetric (eq:SpinorToVectorPairingIsSymmetric),  hence this is equivalent to

$$
  \overline{\partial_\mu \Psi_1}\gamma^\mu \Psi_2
  +
  \overline{\Psi_1}\gamma^\mu (\partial_\mu \Psi_2)
  \;=\;
  d K(\psi_1, \psi_2)
  \,.
$$

By the [[product law]] of [[differentiation]], this is solved, for all $\Psi_1, \Psi_2$, by

$$
  K(\Psi_1, \Psi_2)
    \;\coloneqq\;
  \left( \overline{\Psi_1} \gamma^\mu \Psi_2\right)
  \,
  \iota_{\partial_\mu} dvol
  \,.
$$

=--



$\,$

This concludes our discussion of [[Lagrangian densities]] and their [[variational calculus]].
In the [next chapter](#Symmetries) we consider the [[infinitesimal symmetries of Lagrangians]].

$\,$

## Symmetries
 {#Symmetries}

We have introduced the concept of _[[Lagrangian field theories]]_ $(E,\mathbf{L})$ in terms of a [[field bundle]] $E$ equipped with a
[[Lagrangian density]] $\mathbf{L}$ on its [[jet bundle]] (def. \ref{LocalLagrangianDensityOnSecondOrderJetBundleOfTrivialVectorBundleOverMinkowskiSpacetime}).
Generally, given any [[object]] equipped with some [[structure]], it is of paramount interest to determine
the [[symmetries]], hence the [[isomorphisms]]/[[equivalences]] of the object that preserve the given [[structure]]
(this is the "[[Erlanger program]]", [Klein 1872](Erlangen+program#Klein1872)).

The [[infinitesimal symmetries of the Lagrangian density]] (def. \ref{SymmetriesAndConservedCurrents} below)
send one [[field history]] to an [[infinitesimal|infinitesimally]] nearby one which is
"[[equivalence|equivalent]]" for all purposes of [[field theory]]. Among these are the _[[infinitesimal gauge symmetries]]_
which will be of concern [below](#GaugeSymmetries).
A central theorem of [[variational calculus]] says that [[infinitesimal symmetries of the Lagrangian]]
correspond to _[[conserved currents]]_, this is [[Noether theorem|Noether's theorem I]], prop. \ref{NoethersFirstTheorem} below.
These conserved currents constitute an [[Lie algebra extension|extension]] of the [[Lie algebra]]
of symmetries, called the _[[Dickey bracket]]_.

But in (eq:DerivativeOfLepageForm) we have seen that the [[Lagrangian density]]
of a [[Lagrangian field theory]] is just one component, in [[codimension]] 0, of an inhomogeneous
"[[Lepage form]]" which in [[codimension]] 1 is given by the [[presymplectic potential current]] $\Theta_{BFV}$ (eq:PresymplecticPotential).
(This will be conceptually elucidated, after we have introduced the [[local BV-complex]], in example \ref{DerivedPresymplecticCurrentOfRealScalarField} below.) This means that in [[codimension]] 1 we are to
consider infinitesimal [[on-shell]] symmetries of the [[Lepage form]] $\mathbf{L} + \Theta_{BFV}$. These are
known as _[[Hamiltonian vector fields]]_ (def. \ref{HamiltonianForms} below) and the analog of [[Noether's theorem|Noether's theorem I]]
now says that these correspond to _[[Hamiltonian differential forms]]_. The [[Lie algebra]] of these
infinitesimal symmetries is called the _[[Poisson bracket Lie n-algebra|local Poisson bracket]]_ (prop. \ref{LocalPoissonBracket} below).



**[[Noether theorem]] and [[Hamiltonian Noether theorem]]**

| $\,$ [[variational differential forms|variational form]] $\,$  |   $\,$ [[symmetry]] $\,$ | $\,$ [[Cartan's homotopy formula|homotopy formula]] $\,$ | $\,$ physical quantity $\,\,\,$ | $\,$ [[Lie n-algebra|local symmetry algebra]] $\,$ |
|----|----------|----------------------------|---------------------------------|------|
| [[Lagrangian density]] $\mathbf{L}$ <br/> (def. \ref{LocalLagrangianDensityOnSecondOrderJetBundleOfTrivialVectorBundleOverMinkowskiSpacetime}) | $\mathcal{L}_v \mathbf{L} = d \tilde J$  | $ d(\underset{= J_v}{\underbrace{\tilde J - \iota_v \Theta_{BFV}}}) = \iota_v \, \delta_{EL}\mathbf{L}$ | [[conserved current]] $J_v$ <br/> (def. \ref{SymmetriesAndConservedCurrents}) | [[Dickey bracket]] |
| [[presymplectic current]] $\Omega_{BFV}$ <br/> (prop. \ref{EulerLagrangeOperatorForTivialVectorBundleOverMinkowskiSpacetime})  | $\mathcal{L}^{var}_v \Theta_{BFV} = \delta \tilde H$ | $\delta(\underset{= H_v}{\underbrace{\tilde H_v - \iota_v \Theta_{BFV}}}) = \iota_v \Omega_{BFV}$ | [[Hamiltonian differential form|Hamiltonian form]] $H_v$ <br/> (def. \ref{HamiltonianForms}) | [[Poisson bracket Lie n-algebra|local Poisson bracket]] <br/> (prop. \ref{LocalPoissonBracket}) |

$\,$

In _[Phase space](#PhaseSpace)_ below we [[transgression|transgress]] this [[Poisson bracket Lie n-algebra|local Poisson bracket]]
of [[infinitesimal symmetries]] of the [[presymplectic potential current]] to the "global" [[Poisson bracket]] on the _[[covariant phase space]]_ (def. \ref{PoissonBracketOnHamiltonianLocalObservables} below). This is the structure which then [further below](#Quantization) leads over to the
[[quantization]] ([[deformation quantization]]) of the [[prequantum field theory]] to a genuine [[perturbative quantum field theory]].
However, it will turn out that there may be an [[obstruction]] to this construction, namely the existence of
special infinitesimal symmetries of the Lagrangian densities, called _implicit [[gauge symmetries]]_ (discussed [further below](#GaugeSymmetries)).

$\,$

We now discuss these topics:

$\,$

* _[Infinitesimal symmetries of the Lagrangian density](#InfinitesimalSymmetriesOfTheLagrangianDensity)_

* _[Infinitesimal symmetries of the presymplectic potential current](#InfinitesimalSymmetriesOfThePresymplecticPotentialCurrent)_

$\,$

**[[infinitesimal symmetries]] of the [[Lagrangian density]]**
 {#InfinitesimalSymmetriesOfTheLagrangianDensity}

+-- {: .num_defn #Variation}
###### Definition
**(variation)**

Let $E \overset{fb}{\to} \Sigma$ be a [[field bundle]] (def. \ref{FieldsAndFieldBundles}).

A _variation_ is a [[vertical vector field]] $v$ on the [[jet bundle]] $J^\infty_\Sigma(E)$ (def. \ref{JetBundleOfTrivialVectorBundleOverMinkowskiSpacetime}) hence a vector field which
vanishes when evaluated in the [[horizontal differential forms]].

In the special case that the [[field bundle]] is [[trivial vector bundle]] over [[Minkowski spacetime]] as in example \ref{TrivialVectorBundleAsAFieldBundle},
a variation is of the form

$$
  v = v^a \partial_{\phi^a} + v^a_{,\mu} \partial_{\phi^a_{,\mu}} + v^a_{\mu_1 \mu_2} \partial_{\phi^a_{\mu_1 \mu_2}} + \cdots
$$

=--

The concept of variation in def. \ref{Variation} is very general, in that it allows to vary the
field coordinates independently from the corresponding jets. This generality is necessary for
discussion of symmetries of [[presymplectic currents]] in def. \ref{HamiltonianForms} below.
But for discussion of symmetries of [[Lagrangian densities]] we are interested in
explicitly varying just the [[field (physics)|field]] coordinates (def. \ref{EvolutionaryVectorField} below)
and inducing from this the corresponding variations of the field derivatives (prop. \ref{EvolutionaryVectorFieldProlongation}) below.

In order to motivate the following definition \ref{EvolutionaryVectorField}
of _[[evolutionary vector fields]]_ we follow remark \ref{ReplacingBundleMorphismsByDifferentialOperators}
saying that concepts in [[variational calculus]] are obtained from their analogous concepts
in plain [[differential calculus]] by replacing plain [[bundle morphisms]] by morphism out of
the [[jet bundle]]:

Given a [[fiber bundle]] $E \overset{fb}{\to} \Sigma$, then a _[[vertical vector field]]_ on $E$ is
a [[section]] of its [[vertical tangent bundle]] $T_\Sigma E$ (def. \ref{VerticalTangentBundle}), hence is a [[bundle morphism]]
of this form

$$
  \array{
    E && \overset{\text{vertical vector field}}{\longrightarrow} && T_\Sigma E
    \\
    & {}_{\mathllap{id}}\searrow && \swarrow
    \\
    && E
  }
$$

The variational version replaces the vector bundle on the left with its jet bundle:


+-- {: .num_defn #EvolutionaryVectorField}
###### Definition
**([[evolutionary vector fields]])**

Let $E \overset{fb}{\to} \Sigma$ be a [[field bundle]] (def. \ref{FieldsAndFieldBundles}). Then an _[[evolutionary vector field]]_ $v$ on $E$ is  "variational vertical vector field" on $E$, hence a smooth [[bundle]] [[homomorphism]]
out of the [[jet bundle]] (def. \ref{JetBundleOfTrivialVectorBundleOverMinkowskiSpacetime})



$$
  \array{
    J^\infty_\Sigma E
    && \overset{v}{\longrightarrow} &&
    T_\Sigma E
    \\
    & {}_{\mathllap{jb_{\infty,0}}}\searrow && \swarrow_{\mathllap{}}
    \\
    && E
  }
$$

to the [[vertical tangent bundle]] $T_\Sigma E \overset{}{\to} \Sigma$ (def. \ref{VerticalTangentBundle}) of $E \overset{fb}{\to} \Sigma$.

In the special case that the [[field bundle]] is a [[trivial vector bundle]] over [[Minkowski spacetime]] as in example \ref{TrivialVectorBundleAsAFieldBundle}, this means that an evolutionary vector field is
a [[tangent vector field]] (example \ref{TangentVectorFields}) on $J^\infty_\Sigma(E)$ of the special form

$$
  \begin{aligned}
    v
     & =
    v^a \partial_{\phi^a}
    \\
    & =
    v^a\left(
      (x^\mu), (\phi^a), (\phi^a_{,\mu}), \cdots
    \right) \partial_{\phi^a}
  \end{aligned}
  \,,
$$

where the [[coefficients]] $v^a \in C^\infty(J^\infty_\Sigma(E))$ are general [[smooth functions]]
on the [[jet bundle]] (while the cmponents are [[tangent vectors]] along the field coordinates $(\phi^a)$,
but not along the spacetime coordinates $(x^\mu)$ and not along the jet coordinates $\phi^a_{,\mu_1 \cdots \mu_k}$).

We write

$$
  \Gamma_E^{ev}\left( T_\Sigma E \right)
  \;\in\;
  \Omega^{0,0}_\Sigma(E) Mod
$$

for the space of evolutionary vector fields,
regarded as a [[module]] over the $\mathbb{R}$-[[associative algebra|algebra]]

$$
  \Omega^{0,0}_\Sigma(E)
  \;=\;
  C^\infty\left( J^\infty_\Sigma(E) \right)
$$

of [[smooth functions]] on the [[jet bundle]].


=--

An [[evolutionary vector field]] (def. \ref{EvolutionaryVectorField}) describes
an infinitesimal change of field values _depending_ on, possibly, the point in spacetime and the values of the field
and all its derivatives (locally to finite order, by prop. \ref{JetBundleIsLocallyProManifold}).

This induces a corresponding infinitesimal change of the derivatives of the fields, called the _prolongation_
of the evolutionary vector field:


+-- {: .num_prop #EvolutionaryVectorFieldProlongation}
###### Proposition
**(prolongation of [[evolutionary vector field]])**

Let $E \overset{fb}{\to} \Sigma$ be a [[fiber bundle]].

Given an [[evolutionary vector field]] $v$ on $E$ (def. \ref{EvolutionaryVectorField})
there is a unique [[tangent vector field]] $\hat v$ (example \ref{TangentVectorFields}) on the [[jet bundle]] $J^\infty_\Sigma(E)$ (def. \ref{JetBundleOfTrivialVectorBundleOverMinkowskiSpacetime}) such that

1. $\hat v$ agrees on field coordinates (as opposed to jet coordinates) with $v$:

   $$
     (jb_{\infty,0})_\ast(\hat v) = v
     \,,
   $$

   which means in the special case that $E \overset{fb}{\to} \Sigma$ is a [[trivial vector bundle]] over [[Minkowski spacetime]]
   (example \ref{TrivialVectorBundleAsAFieldBundle})
   that $\hat v$ is of the form

   $$
     \label{GenericComponentsForProlongationOfEvolutionaryVectorField}
     \hat v
     \;=\;
     \underset{
       = v
     }{
     \underbrace{
     v^a \partial_{\phi^a}
     }}
     \,+\,
     \hat v^a_{\mu} \partial_{\phi^a_{,\mu}}
     +
     \hat v^a_{\mu_1 \mu_2} \partial_{\phi^a_{,\mu_1 \mu_2}}
     +
     \cdots
   $$

1. contraction with $\hat v$ (def. \ref{ContractionOfFormsWithVectorFields}) anti-commutes with the [[total derivative|total spacetime derivative]] (def. \ref{VariationalBicomplexOnSecondOrderJetBundleOverTrivialVectorBundleOverMinkowskiSpacetime}):

   $$
     \label{ProlongedEvolutionaryVectorFieldContractionAnticommutedWithHorizontalDerivative}
     \iota_{\hat v} \circ d + d \circ \iota_{\hat v} = 0
     \,.
   $$

In particular [[Cartan's homotopy formula]] (prop. \ref{CartanHomotopyFormula})
for the [[Lie derivative]] $\mathcal{L}_{\hat v}$ holds with respect to the [[variational derivative]] $\delta$:

$$
 \label{HomotopyFormulaForLieDerivativeAlongProlongationOfEvolutionaryVectorField}
  \mathcal{L}_{\hat v} = \delta \circ \iota_{\hat v} + \iota_{\hat v} \circ \delta
$$

Explicitly, in the special case that the [[field bundle]] is a [[trivial vector bundle]] over [[Minkowski spacetime]] (example \ref{TrivialVectorBundleAsAFieldBundle}) $\hat v$ is given by

$$
  \label{ProlongationOfEvolutionaryVectorFieldExplicit}
  \hat v = \underoverset{n = 0}{\infty}{\sum} \frac{d^n v^a}{ d x^{\mu_1} \cdots d x^{\mu_n} } \partial_{\phi^a_{\mu_1 \cdots \mu_n}}
  \,.
$$


=--

+-- {: .proof}
###### Proof

It is sufficient to prove the coordinate version of the statement.
We prove this by [[induction]] over the maximal jet order $k$. Notice that the coefficient of $\partial_{\phi^a_{\mu_1 \cdots \mu_k}}$
in $\hat v$ is given by the contraction $\iota_{\hat v} \delta \phi^a_{\mu_1 \cdots \mu_k}$ (def. \ref{ContractionOfFormsWithVectorFields}).

Similarly (at "$k = -1$") the component of $\partial_{\mu_1}$ is given by $\iota_{\hat v} d x^{\mu}$. But by the second condition
above this vanishes:

$$
  \begin{aligned}
    \iota_{\hat v} d x^\mu
    & =
    d \iota_{\hat v} x^\mu
    \\
    & =
    0
  \end{aligned}
$$

Moreover, the coefficient of $\partial_{\phi^a}$ in $\hat v$ is fixed by the first condition above to be

$$
  \iota_{\hat v} \delta \phi^a
  =
  v^a
  \,.
$$

This shows the statement for $k = 0$. Now assume that the statement is true up to some $k \in \mathbb{N}$.
Observe that the coefficients of all $\partial_{\phi^a_{\mu_1 \cdots \mu_{k+1}}}$ are fixed by the
contractions with $\delta \phi^a_{\mu_1 \cdots \mu_{k} \mu_{k+1}} \wedge d x^{\mu_{k+1}}$. For this we find again from the second
condition and using $\delta \circ d + d \circ \delta = 0$ as well as the induction assumption that

$$
  \begin{aligned}
    \iota_{\hat v} \delta \phi^a_{\mu_1 \cdots \mu_{k+1}} \wedge d x^{\mu_{k+1}}
    & =
    \iota_{\hat v}  \delta d \phi^a_{\mu_1 \cdots \mu_k}
    \\
    & =
    d \iota_{\hat v} \delta \phi^a_{\mu_1 \cdots \mu_k}
    \\
    &
    = d \frac{d^k v^a}{d x^{\mu_1} \cdots d x^{\mu_k}}
    \\
    & =
    \frac{d^{k+1}v^a }{d x^{\mu_1} \cdots d x^{\mu_{k+1}}} d x^{\mu_{k+1}}
    \,.
  \end{aligned}
$$

This shows that $\hat v$ satisfying the two conditions given exists uniquely.

Finally formula (eq:HomotopyFormulaForLieDerivativeAlongProlongationOfEvolutionaryVectorField) for the [[Lie derivative]] follows from the second of the two conditions with [[Cartan's homotopy formula]]
$\mathcal{L}_{\hat v} = \mathbf{d} \circ \iota_{\hat v} + \iota_{\hat v} \circ \mathbf{d}$ (prop. \ref{CartanHomotopyFormula})
together with $\mathbf{d} = \delta + d$ (eq:VariationalDerivative).

=--


+-- {: .num_prop #EvolutionaryVectorFieldLieAlgebra}
###### Proposition
**([[evolutionary vector fields]] form a [[Lie algebra]])**

Let $E \overset{fb}{\to} \Sigma$ be a [[fiber bundle]]. For any two [[evolutionary vector fields]]
$v_1$, $v_2$ on $E$ (def. \ref{EvolutionaryVectorField}) the [[Lie bracket]] of [[tangent vector fields]]
of their prolongations $\hat v_1$, $\hat v_2$ (def. \ref{EvolutionaryVectorFieldProlongation})
is itself the prolongation $\widehat{[v_1, v_2]}$ of a unique evolutionary vector field $[v_1,v_2]$.

This defines the structure of a [[Lie algebra]] on evolutionary vector fields.

=--

+-- {: .proof}
###### Proof

It is clear that $[\hat v_1, \hat v_2]$ is still [[vertical vector field|vertical]], therefore, by
prop. \ref{EvolutionaryVectorFieldProlongation}, it is sufficient to show that contraction $\iota_{[v_1, v_2]}$ with this
vector field (def. \ref{ContractionOfFormsWithVectorFields}) anti-commutes with the [[horizontal derivative]] $d$,
hence that $[d, \iota_{[\hat v_1, \hat v_2]}] = 0$.

Now $[d, \iota_{[\hat v_1, \hat v_2]}]$ is an
operator that sends vertical 1-forms to horizontal 1-forms and vanishes on
horizontal 1-forms. Therefore it is sufficient to see that this operator
in fact also vanishes on all vertical 1-forms. But for this it is
sufficient that it commutes with the vertical derivative.
This we check by [[Cartan calculus]], using $[d,\delta] = 0$ and $[d, \iota_{\hat v_i}]$, by assumption:

$$
  \begin{aligned}
    {[ \delta, [ d,\iota_{[\hat v_1, \hat v_2]}] ]}
    & =
    - [d, [\delta, \iota_{[\hat v_1, \hat v_2]}]]
    \\
    & =
    - [d,  \mathcal{L}_{[\hat v_1, \hat v_2]}]
    \\
    & =
    -[d, [\mathcal{L}_{\hat v_1}, \iota_{\hat v_2}]  ]
    \\
    & =
    - [d, [ [\delta, \iota_{\hat v_1}], \iota_{\hat v_2}  ]]
    \\
    & =
    0
    \,.
  \end{aligned}
$$



=--

Now given an evolutionary vector field, we want to consider the [[flow]] that it
induces on the [[space of field histories]]:

+-- {: .num_defn #FlowOfFieldHistoriesAlongEvolutionaryVectorField}
###### Definition
**([[flow]] of [[field histories]] along [[evolutionary vector field]])**

Let $E \overset{fb}{\to} \Sigma$ be a [[field bundle]] (def. \ref{FieldsAndFieldBundles})
and let $v$ be an [[evolutionary vector field]] (def. \ref{EvolutionaryVectorField})
such that the ordinary [[flow]] of its prolongation $\hat v$ (prop. \ref{EvolutionaryVectorFieldProlongation})

$$
  \exp(t \hat v)
  \;\colon\; J^\infty_\Sigma(E) \longrightarrow J^\infty_\Sigma(E)
$$

exists on the [[jet bundle]] (e.g. if the order of derivatives of field coordinates that it depends
on is bounded).


For $\Phi_{(-)} \colon U_1 \to  \Gamma_\Sigma(E)$ a collection of  [[field histories]]
(hence a plot of the [[space of field histories]] (def. \ref{SupergeometricSpaceOfFieldHistories}) ) the _[[flow]]_ of $v$
through $\Phi_{(-)}$ is the [[smooth function]]

$$
  U_1 \times \mathbb{R}^1
   \overset{\exp(v)(\Phi_{(-)})}{\longrightarrow}
  \Gamma_\Sigma(E)
$$

whose unique factorization $\widehat{\exp(v)}(\Phi_{(-)})$ through the space of jets of field histories
(i.e. the [[image]] $im(j^\infty_\Sigma)$ of [[jet prolongation]], def. \ref{JetProlongation})

$$
  \array{
    && im(j^\infty_\Sigma) &\hookrightarrow& \Gamma_\Sigma(J^\infty_\Sigma(E))
    \\
    & {}^{\mathllap{\widehat{\exp(v)}(\Phi_{(-)})}} \nearrow& \downarrow^{\mathrlap{\simeq}}
    \\
    U_1 \times \mathbb{R}^1
      &\underset{ \exp(v)(\Phi) }{\longrightarrow}&
    \Gamma_{\Sigma}(E)_{}
  }
$$

takes a plot $t_{(-)} \;\colon\; U_2 \to \mathbb{R}^1$ of the [[real line]]
(regarded as a [[super formal smooth set|super smooth set]] via example \ref{SuperSmoothSetSuperCartesianSpaces}), to the plot

$$
  \label{LocalDataForFlowOfImplicitInfinitesimalGaugeSymmetry}
  (\exp(t(-) \hat v) \circ j^\infty_\Sigma(\Phi_{(-)})
    \;\colon\:
  U_1 \times U_2   \longrightarrow \Gamma_\Sigma\left( J^\infty_\Sigma(E) \right)
$$

of the [[smooth space|smooth]] [[space of sections]] of the [[jet bundle]].

(That $\exp(t(-) \hat v)$ indeed flows jet prolongations $j^\infty_\Sigma(\Phi(-))$ again to jet prolongations
is due to its defining relation to the [[evolutionary vector field]] $v$ from prop. \ref{EvolutionaryVectorFieldProlongation}.)

=--



+-- {: .num_defn #SymmetriesAndConservedCurrents}
###### Definition
**([[infinitesimal symmetries of the Lagrangian]] and [[conserved currents]])**

Let $(E,\mathbf{L})$ be a [[Lagrangian field theory]] (def. \ref{LocalLagrangianDensityOnSecondOrderJetBundleOfTrivialVectorBundleOverMinkowskiSpacetime}).

Then

1. an _[[infinitesimal symmetry of the Lagrangian]]_ is a variation $v$ (def. \ref{Variation})
   which arises as the prolongation $\hat v$ (prop. \ref{EvolutionaryVectorFieldProlongation})
   of  an [[evolutionary vector field]] $v$ (def. \ref{EvolutionaryVectorField}) such that the [[Lie derivative]] $\mathcal{L}_v$ of the Lagrangian density along $\hat v$ is a [[total derivative|total spacetime derivative]]

   $$
     \mathcal{L}_v \mathbf{L} = d \tilde J_v
   $$


1. an _[[on-shell]] [[conserved current]]_ is a horizontal $p$-form $J \in \Omega^{p,0}_\Sigma(E)$
   whose [[total derivative|total spacetime derivative]] vanishes on the prolonged [[shell]] (eq:ShellInJetBundle)

   $$
     d J\vert_{\mathcal{E}^\infty} = 0
     \,.
   $$

=--




+-- {: .num_prop #NoethersFirstTheorem}
###### Proposition
**([[Noether's theorem]] I)**

Let $(E,\mathbf{L})$ be a [[Lagrangian field theory]] (def. \ref{LocalLagrangianDensityOnSecondOrderJetBundleOfTrivialVectorBundleOverMinkowskiSpacetime}).

If $v$ is an [[infinitesimal symmetry of the Lagrangian]] (def. \ref{SymmetriesAndConservedCurrents})
with $\mathcal{L}_v \mathbf{L} = d \tilde J_v$, then

$$
  J_v \coloneqq \tilde J_v - \iota_v \Theta_{BFV}
$$

is an [[on-shell]] [[conserved current]] (def. \ref{SymmetriesAndConservedCurrents}), for $\Theta_{BFV}$
a presymplectic potential (eq:PresymplecticPotential) from def. \ref{EulerLagrangeOperatorForTivialVectorBundleOverMinkowskiSpacetime}.

=--

+-- {: .proof}
###### Proof

By [[Cartan's homotopy formula]] for the [[Lie derivative]] (prop. \ref{CartanHomotopyFormula})
and the decomposition of the variational derivative $\delta \mathbf{L}$ (eq:dLDecomposition)
and the fact that contraction $\iota_{\hat v}$ with the prolongtion of an evolutionary vector field vanishes on horizontal differential forms
(eq:GenericComponentsForProlongationOfEvolutionaryVectorField) and anti-commutes with the horizontal differential (eq:ProlongedEvolutionaryVectorFieldContractionAnticommutedWithHorizontalDerivative), by def. \ref{EvolutionaryVectorField},
we may re-express the defining equation for the symmetry as follows:

$$
  \begin{aligned}
    d \tilde J_v
    & =
    \mathcal{L}_v \mathbf{L}
    \\
    & =
    \iota_v \underset{= \delta_{EL}\mathbf{L} - d \Theta_{BFV}}{\underbrace{\mathbf{d} \mathbf{L}}}
    +
    \mathbf{d} \underset{= 0}{\underbrace{\iota_v \mathbf{L}}}
    \\
    & =
    \iota_v \delta_{EL} \mathbf{L}
    + d \iota_v \Theta_{BFV}
  \end{aligned}
$$

which is equivalent to

$$
  d(\underset{= J_v}{\underbrace{\tilde J_v - \iota_v \Theta_{BFV}}}) = \iota_v \delta_{EL}\mathbf{L}
$$

Since, by definition of the [[shell]] $\mathcal{E}$, the form $\frac{\delta_{EL} \mathbf{L}}{\delta v}$ vanishes on $\mathcal{E}$
this yields the claim.

=--


+-- {: .num_prop #FlowAlongImplicitInfinitesimalGaugeSymmetryPreservesOnShellSpaceofFieldHistories}
###### Proposition
**([[flow]] along [[infinitesimal symmetry of the Lagrangian]] preserves [[on-shell]] [[space of field histories]])**

Let $(E,\mathbf{L})$ be a [[Lagrangian field theory]] (def. \ref{LocalLagrangianDensityOnSecondOrderJetBundleOfTrivialVectorBundleOverMinkowskiSpacetime}).

For $v$ an [[infinitesimal symmetry of the Lagrangian]] (def. \ref{SymmetriesAndConservedCurrents})
the [[flow]] on the [[space of field histories]] (example \ref{DiffeologicalSpaceOfFieldHistories}) that it induces by def. \ref{FlowOfFieldHistoriesAlongEvolutionaryVectorField}
preserves the space of [[on-shell]] field histories (from prop. \ref{EulerLagrangeOperatorForTivialVectorBundleOverMinkowskiSpacetime}):

$$
  \array{
    \Gamma_\Sigma(E)_{\delta_{EL}\mathbf{L} = 0}
      &\hookrightarrow&
    \Gamma_\Sigma(E)
    \\
    {}^{\mathllap{\exp(\hat v)\vert_{\delta_{EL}\mathbf{L} = 0}  }}
    \uparrow
      &&
    \uparrow^{\mathrlap{\exp(\hat v)}}
    \\
    \Gamma_\Sigma(E)_{\delta_{EL}\mathbf{L} = 0}
      &\hookrightarrow&
    \Gamma_\Sigma(E)
  }
$$

=--


+-- {: .proof}
###### Proof

By def. \ref{EulerLagrangeEquationsOnTrivialVectorFieldBundleOverMinkowskiSpacetime} a field history
$\Phi$ is [[on-shell]] precisely if

$$
  j^\infty_\Sigma(\Phi(-))^\ast(\delta_{EL}\mathbf{L}) = 0
$$

and this is the case precisely if for
all [[bump functions]] $b \in C^\infty_{cp}(\Sigma)$ the [[integration of differential forms|integral]]
against $b dvol_\Sigma$ vanishes

$$
  \int_\Sigma j^\infty_\Sigma(\Phi(-))^\ast(\delta_{EL}\mathbf{L}) \, b dvol_\Sigma
  \;=\;
  0
  \,.
$$


Hence we need to show that this holds true also for all values $t$ of the flow parameter
if it holds at $t = 0$, hence that the above implies for  all bump functions $b$ that

$$
  \begin{aligned}
    \int_\Sigma
    \left(
      \exp(t \hat v)
        \circ
      j^\infty_\Sigma(\Phi(-))
    \right)^\ast (\delta_{EL}\mathbf{L})
    \, b dvol_\Sigma
    & =
    \int_\Sigma
      (j^\infty_\Sigma(\Phi(-)))^\ast
      \exp(t \hat v)^\ast
      (\delta_{EL}\mathbf{L})
      \,
      b dvol_\Sigma
    \\
    & =
    0
  \end{aligned}
$$

for all $t \in \mathbb{R}^1$. But since we know it holds true at one point $t = 0$,
it is in fact sufficient to show that the [[derivative]] of this smooth family of
differential forms with respect to $t$ vanishes at all $t$. This argument in turn is
the same at $t = 0$ as at any other value, so we consider the derivative at $t = 0$.

Now by definition of [[Lie derivatives]], the derivative of the above expression with respect to $t$ at $t = 0$ is given
by the Lie derivative $\mathcal{L}_{\hat v}$ via

$$
    \frac{d}{d t }
    \int_\Sigma
    \left(
        (j^\infty_\Sigma(\Phi(-)))^\ast
        \exp(t \hat v)^\ast
        (\delta_{EL}\mathbf{L})
    \right)
    \, b dvol_\Sigma
    \vert_{t = 0}
    =
    \int_\Sigma
    (j^\infty_\Sigma(\Phi(-)))^\ast
    \underset{= d (\iota_{\hat v}\Omega_{BFV} -\delta J_v)  \Omega_{BFV} }{
    \underbrace{
     \mathcal{L}_{\hat v}
     \delta_{EL}\mathbf{L}
     }}
     \,
     b dvol_\Sigma
  \,.
$$

We compute that the Lie derivative has the value indicated under the braces as follows:

$$
  \begin{aligned}
     \mathcal{L}_{\hat v} \delta_{EL}\mathbf{L}
     & =
     \iota_{\hat v}
       \underset{ = - d\Omega_{BFV} }{\underbrace{\delta \delta_{EL} \mathbf{L}} }
     + \delta \,\underset{= d J_v}{\underbrace{\iota_{\hat v} \delta_{EL}\mathbf{L}}}
     \\
     & =
     - \iota_{\hat v} d\Omega_{BFV}  + \delta d J_v
     \\
     & =
     d \left(\iota_{\hat v} \Omega_{BFV} - \delta J_v \right)
  \end{aligned}
$$

Here we first used [[Cartan's homotopy formula]] for evolutionary vector fields (eq:HomotopyFormulaForLieDerivativeAlongProlongationOfEvolutionaryVectorField),
then, under the braces,
the [[conserved current]] property of the presymplectic current (prop. \ref{HorizontalDerivativeOfPresymplecticCurrentVanishesOnShell}) as well as [[Noether's theorem|Noether's theorem I]] (prop. \ref{NoethersFirstTheorem}),
and finally
the defining verticality condition of prolongations of evolutionary vector fields (prop. \ref{EvolutionaryVectorFieldProlongation})
as well as the anti-commutativity of $\delta$ and $d$.

Hence continuing the computation of the derivative above we have

$$
  \begin{aligned}
    \frac{d}{d t }
    \int_\Sigma
    \left(
        (j^\infty_\Sigma(\Phi(-)))^\ast
        \exp(t \hat v)^\ast
        (\delta_{EL}\mathbf{L})
    \right)
    \, b dvol_\Sigma
    \vert_{t = 0}
    & =
    -
    \int_\Sigma
    (j^\infty_\Sigma(\Phi(-)))^\ast
    d (\iota_{\hat v} \Omega_{BFV} - \delta J_v)
    \,
    b dvol_\Sigma
    \\
    & =
    - \int_\Sigma d j^\infty_\Sigma(\Phi(-))^\ast (\iota_{\hat v}\Omega_{BFV} -  \delta J_v) \, b dvol_\Sigma
    \\
    & = 0
  \end{aligned}
$$

by prop. \ref{PullbackAlongJetProlongationIntertwinesHorizontalDerivative}.


=--


+-- {: .num_example #ScalarFieldEnergyMomentum}
###### Example
**([[energy-momentum]] of the [[scalar field]])**

Consider the [[Lagrangian field theory]] of the [[free field|free]] [[scalar field]] from def. \ref{LagrangianForFreeScalarFieldOnMinkowskiSpacetime}:

$$
  \mathbf{L}
  \;=\;
  \tfrac{1}{2}
  \left(
    \eta^{\mu \nu}\phi_{,\mu} \phi_{,\nu}
    -
    m^2 \phi^2
  \right)
  dvol_\Sigma
  \,.
$$

For $\nu \in \{0, 1, \cdots, p\}$ consider the vector field on the jet bundle given by

$$
  v_\nu
  \;\coloneqq\;
  \phi_{,\nu} \partial_{\phi}
  +
  \phi_{,\mu \nu} \partial_{\phi_{,\mu}}
  +
  \cdots
  \,.
$$

This describes infinitesimal translations of the fields in the direction of $\partial_\nu$.

And this is an [[infinitesimal symmetry of the Lagrangian]] (def. \ref{SymmetriesAndConservedCurrents}), since

$$
  \iota_{v_\nu} \mathbf{d}\mathbf{L}
  =
  d L \wedge \iota_{\partial_\nu} dvol_\Sigma
  \,.
$$

With the formula (eq:PresymplecticPotentialOfFreeScalarField) for the presymplectic potential

$$
  \Theta_{BFV}
    =
  \eta^{\mu \nu} \phi_{,\mu} \delta \phi \iota_{\partial_{\nu}} dvol_\Sigma
$$

it hence follows from [[Noether's theorem]] (prop. \ref{NoethersFirstTheorem}) that the corresponding
[[conserved current]] (def. \ref{SymmetriesAndConservedCurrents}) is

$$
  \begin{aligned}
    T_\nu
     & =
     L \, \iota_{\partial_\nu} dvol_\Sigma
     -
     \iota_{v_\nu}\Theta_{BFV}
     \\
     &
     =
     L \, \iota_{\partial_\nu} dvol_\Sigma
     -
     \eta^{\rho \mu} \phi_{,\rho} \phi_{,\nu}
     \,
     \iota_{\partial_\mu} dvol_\Sigma
     \\
     &  =
     (
     \underset{=: T^\mu_\nu}{
     \underbrace{
       \delta^\mu_\nu  L
       -
       \eta^{\rho \mu} \phi_{,\rho} \phi_{,\nu}
     }
     }
     )
     \,
     \iota_{\partial_\mu} dvol_\Sigma
   \end{aligned}
   \,.
$$

This [[conserved current]] is called the _[[energy-momentum tensor]]_.


=--


+-- {: .num_example #DiracCurrent}
###### Example
**([[Dirac current]])**

Consider the [[Lagrangian field theory]] of the [[free field theory|free]] [[Dirac field]] on [[Minkowski spacetime]] in spacetime dimension $p + 1 = 3+1$ (example \ref{LagrangianDensityForDiracField})

$$
  \mathbf{L} = i \overline{\psi} \gamma^\mu \psi_{,\mu} \, dvol_\Sigma
  \,.
$$

Then the prolongation (prop. \ref{EvolutionaryVectorFieldProlongation}) of the [[evolutionary vector field]] (def. \ref{EvolutionaryVectorField})

$$
  v \;\coloneqq\; i \psi_\alpha \partial_{\psi_\alpha}
$$

is an [[infinitesimal symmetry of the Lagrangian]] (def. \ref{SymmetriesAndConservedCurrents}). The [[conserved current]] that corresponds to this under [[Noether's theorem|Noether's theorem I]] (prop. \ref{NoethersFirstTheorem}) is

$$
  \overline{\psi} \gamma^\mu \psi \, \iota_{\partial_\mu} dvol_\Sigma
  \;\in\;
  \Omega^{p,0}_{\Sigma(E)}
  \,.
$$

This is called the _[[Dirac current]]_.

In fact, due to the [[supergeometry|supergeometric]] nature of the [[Dirac field]], the [[Dirac current]] is conserved even [[off-shell]], as discussed in remark \ref{LagrangianDensityOfDiracFieldSupergeometricNature}.

=--


+-- {: .proof}
###### Proof

By equation (eq:ProlongationOfEvolutionaryVectorFieldExplicit) the prolongation of $v$ is

$$
  \hat v
    =
  i \psi_\alpha \partial_{\psi_\alpha}
    +
  i \psi_{\alpha,\mu} \partial_{\psi_{\alpha,\mu}}
    +
   \cdots
  \,.
$$

Therefore

$$
  \begin{aligned}
    \mathcal{L}_{\hat v} \left(
      i \overline{\psi} \gamma^\mu \psi_{,\mu}
    \right)
    dvol_\Sigma
    & =
    \underset{
      = i \cdot (-i) \overline{\psi} \gamma^\mu \psi_{,\mu}
    }{
    \underbrace{
      i \overline{i \psi} \gamma^\mu \psi_{,\mu}
    }
    }
    dvol_\Sigma
    +
    \underset{
      i \cdot i \overline{\psi} \gamma^\mu \psi_{,\mu}
    }{
    \underbrace{
      i \overline{\psi} \gamma^\mu (i \psi_{,\mu})
    }
    }
    dvol_\Sigma
    \\ & =
    0
  \end{aligned}
$$

=--



$\,$

**[[infinitesimal symmetries]] of the [[presymplectic potential current]]**
 {#InfinitesimalSymmetriesOfThePresymplecticPotentialCurrent}

Evidently [[Noether's theorem|Noether's theorem I]] in [[variational calculus]] (prop. \ref{NoethersFirstTheorem})
is the special case for horizontal $p+1$-forms of a more general phenomenon relating
symmetries of variational forms to forms that are closed up to a contraction. The same phenomenon applied instead
to the [[presymplectic current]] yields the following:


+-- {: .num_defn #LieDerivativeVariational}
###### Definition
**(variational Lie derivative)**

Let $E \overset{fb}{\to} \Sigma$ be a [[field bundle]] (def. \ref{FieldsAndFieldBundles})
with [[jet bundle]] $J^\infty_\Sigma(E)$ (def. \ref{JetBundleOfTrivialVectorBundleOverMinkowskiSpacetime}).

For $v$ a vertical [[tangent vector field]] on the [[jet bundle]] (a variation def. \ref{Variation})
write

$$
  \label{LieDerivativeVariational}
  \mathcal{L}^{var}_{v}
    \;\coloneqq\;
  \delta \circ \iota_v + \iota_v \circ \delta
$$

for the _variational Lie derivative_ along $v$, analogous to [[Cartan's homotopy formula]] (prop. \ref{CartanHomotopyFormula})
but defined in terms of the variational derivative $\delta$ (eq:VariationalDerivative) as opposed to the full [[de Rham differential]].

Then for $v_1$ and $v_2$ two vertical vector fields, write

$$
  [v_1, v_2]^{var} \;\in \; \Gamma( T_{vert} J^\infty_\Sigma(E) )
$$

for the vector field whose contraction operator (def. \ref{ContractionOfFormsWithVectorFields}) is given by

$$
  \begin{aligned}
    \iota_{[v_1,v_2]^{var}}
     & =
    \left[
      \mathcal{L}^{var}_{v_1}, \iota_{v_2}
    \right]
    \\
    & \coloneqq
    \mathcal{L}^{var}_{v_1} \circ \iota_{v_2}
    -
    \iota_{v_2} \circ \mathcal{L}^{var}_{v_1}
  \end{aligned}
  \,,
$$

=--


+-- {: .num_defn #HamiltonianForms}
###### Definition
**([[Hamiltonian vector fields|infinitesimal symmetry of the presymplectic potential]] and [[Hamiltonian differential forms]])**

Let $(E,\mathbf{L})$ be a [[Lagrangian field theory]] (def. \ref{LocalLagrangianDensityOnSecondOrderJetBundleOfTrivialVectorBundleOverMinkowskiSpacetime}) with [[presymplectic potential current]] $\Theta_{BFV}$ (eq:PresymplecticPotential). Write $\mathcal{E} \hookrightarrow J^\infty_\Sigma(E)$ for the [[shell]] (eq:ShellInJetBundle).

Then:

1. An [[on-shell]] variation $v$ (def. \ref{Variation}) is an _[[infinitesimal symmetry]] of the [[presymplectic current]]_
   or _[[Hamiltonian vector field]]_ if [[on-shell]] (def. \ref{EulerLagrangeOperatorForTivialVectorBundleOverMinkowskiSpacetime})
   its variational Lie derivative along $v$ (def. \ref{LieDerivativeVariational}) is a [[variational derivative]]:

   $$
     (\delta \circ \iota_v + \iota_v \circ \delta)  \Theta_{BFV}  = \delta \tilde H_v
     \phantom{AAA}
     \text{on}\, \mathcal{E}
   $$

   for some variational form $\tilde H_v$.

1. A _[[Hamiltonian differential form]]_ $H$ (or _local Hamiltonian current_) is a variational form on the shell such that there
   exists a variation $v$ with

   $$
     \delta H = \iota_v \Omega_{BFV}
     \phantom{AA}
     \,
     \text{on}\, \mathcal{E}
     \,.
   $$

We write

$$
  \Omega^{p,0}_{\Sigma, Ham}(E)
  \;\coloneqq\;
  \left\{
    (H,v)
    \;\vert\;
    v \, \text{is a variation and}\,
    \iota_v \Omega_{BFV} = \delta H
  \right\}
$$

for the space of pairs consisting of a Hamiltonian differential forms [[on-shell]] and a corresponding variation.

=--


+-- {: .num_prop #HamiltonianDifferentialForms}
###### Proposition
**([[Hamiltonian Noether's theorem]])**

A variation $v$ is an infinitesimal symmetry of the presymplectic potential (def. \ref{HamiltonianForms})
with $\mathcal{L}^{var}_v ( \Theta_{BFV} ) = \delta \tilde H_v$ precisely if

$$
  H_v \coloneqq \tilde H_v - \iota_v \Theta_{BFV}
$$

is a [[Hamiltonian differential form]] for $v$.

=--


+-- {: .proof}
###### Proof

From the definition (eq:LieDerivativeVariational) of $\mathcal{L}^{var}_v$ we have

$$
  \begin{aligned}
    & \mathcal{L}^{var}_v \Theta_{BFV}
    =
    \delta \tilde H_v
    \\
    \Leftrightarrow\;\;
    &
    \delta \iota_v \Theta_{BFV} + \iota_v \underset{= \Omega_{BFV}}{\underbrace{\delta \Theta_{BFV}}} = \delta \tilde H_v
    \\
    \Leftrightarrow\;\;
    &
    \delta \left(
      \tilde H_v - \iota_v \Theta_{BFV}
    \right)
    =
    \iota_v \Omega_{BFV}
    \,,
  \end{aligned}
$$

where we used the definition (eq:PresymplecticCurrent) of $\Omega_{BFV}$ .

=--



$\,$





Since therefore both the [[conserved currents]] from [[Noether's theorem]] as well as
the [[Hamiltonian differential forms]] are generators of infinitesimal [[symmetries]] of certain variational forms
(namely of the [[Lagrangian density]] and of the [[presymplectic current]], respectively) they
form a [[Lie algebra]]. For the conserved currents this is sometimes known as the _[[Dickey bracket]] Lie algebra_.
For the Hamiltonian forms it is the _[[Poisson bracket Lie n-algebra|Poisson bracket Lie p+1-algebra]]_. Since here for simplicity
we are considering just vertical variations, we have just a plain [[Lie algebra]].
The [[transgression of variational differential forms|transgression]] of this Lie algebra of Hamiltonian forms
on the jet bundle to [[Cauchy surfaces]] yields a [[presymplectic structure]] on [[phase space]], this we discuss
[below](#PhaseSpace).


+-- {: .num_prop #LocalPoissonBracket}
###### Proposition
**([[Poisson bracket Lie n-algebra|local Poisson bracket]])**

Let $(E,\mathbf{L})$ be a [[Lagrangian field theory]] (def. \ref{LocalLagrangianDensityOnSecondOrderJetBundleOfTrivialVectorBundleOverMinkowskiSpacetime}).

On the space $\Omega^{p,0}_{\Sigma,Ham}(E)$ pairs $(H,v)$ of [[Hamiltonian differential forms]] $H$ with compatible variation $v$ (def. \ref{HamiltonianForms}) the following operation constitutes a [[Lie bracket]]:

$$
  \label{LocalPoissonLieBracket}
  \left\{(H_1, v_1),\, (H_2, v_2)\right\}
  \;\coloneqq\;
  (\iota_{v_1} \iota_{v_2} \Omega_{BFV},\, [v_1,v_2]^{var})
  \,,
$$

where $[v_1, v_2]^{var}$ is the variational Lie bracket from def. \ref{LieDerivativeVariational}.

We call this the _local Poisson Lie bracket_.

=--


+-- {: .proof}
###### Proof

First we need to check that the bracket is well defined in itself. It
is clear that it is linear and skew-symmetric, but what needs proof is that
it does indeed land in $\Omega^{p,0}_{\Sigma,Ham}(E)$, hence that the following
equation holds:

$$
  \delta \iota_{v_2} \iota_{v_1} \Omega_{BFV}
  \;=\;
  \iota_{[v_1, v_2]^{var}} \Omega_{BFV}
  \,.
$$



With def. \ref{LieDerivativeVariational} for $\mathcal{L}^{var}$ and $[-,-]^{var}$ we compute this as follows:

$$
  \begin{aligned}
    \delta \iota_{v_1} \iota_{v_2} \Omega_{BFV}
    & =
    \tfrac{1}{2} \delta \iota_{v_1} \iota_{v_2} \Omega_{BFV}
    -
    \tfrac{1}{2} (v_1 \leftrightarrow v_2)
    \\
    & =
    \tfrac{1}{2}
    \left(
      \mathcal{L}^{var}_{v_1} \iota_{v_2} \Omega_{BFV}
      -
      \iota_{v_1} \delta \iota_{v_2} \Omega_{BFV}
    \right)
    -
    \tfrac{1}{2} (v_1 \leftrightarrow v_2)
    \\
    & =
    \tfrac{1}{2}
    \left(
      \mathcal{L}^{var}_{v_1} \iota_{v_2} \Omega_{BFV}
      -
      \iota_{v_1} \mathcal{L}^{var}_{v_2} \Omega_{BFV}
      +
      \iota_{v_1} \iota_{v_2} \underset{= 0}{\underbrace{\delta \Omega_{BFV}}}
    \right)
    -
    \tfrac{1}{2} (v_1 \leftrightarrow v_2)
    \\
    & =
    [\mathcal{L}^{var}_{v_2}, \iota_{v_1}] \Omega_{BFV}
    \\
    & =
    \iota_{[v_1, v_2]^{var}} \Omega_{BFV}
    \,.
  \end{aligned}
$$

This shows that the bracket is well defined.

It remains to see that the bracket satifies the [[Jacobi identity]]:

$$
\left\{ (H_1, v_1), \left\{ (H_2, v_2), (H_3,v_3) \right\} \right\}
  \;+\; (cyclic)
   \;=\;
  0
$$

hence that

$$
  \left(  \iota_{v_1} \iota_{[v_2,v_3]^{var}}  \Omega_{BFV} ,\,   [v_1, [v_2, v_2]^{var}]^{var} \right)
  \;+\; (cyclic)
  \;=\; 0
  \,.
$$

Here $ [v_1, [v_2, v_3]^{var}]^{var} + (cyclic) = 0 $ holds because by def. \ref{LieDerivativeVariational} $[v_1,-]^{var}$
acts as a derivation,
and hence what remains to be shown is that

$$
  \iota_{v_1} \iota_{\left([v_2, v_3]^{var}\right)}   \Omega_{BFV} + (cyclic) = 0
$$

We check this by repeated uses of def. \ref{LieDerivativeVariational}, using in addition
that

1. $\delta \iota_{v_i} \Omega_{BFV} = 0$

   (since $\iota_{v_i} \Omega_{BFV} = \delta H_i$ by $v_i$ being Hamiltonian)

1. $\mathcal{L}^{var}_{v_i} \Omega_{BFV} = 0$

   (since in addition $\delta \Omega_{BFV} = 0$)

1. $\iota_{v_1} \iota_{v_2} \iota_{v_3} \Omega_{BFV} = 0$

   (since $\Omega_{BFV} \in \Omega^{p,2}_\Sigma(E)$ is of vertical degree 2, and since all variations $v_i$ are vertical by assumption).

So we compute as follows (a special case of [FRS 13b, lemma 3.1.1](Poisson+bracket+Lie+n-algebra#FRS13b)):

$$
  \begin{aligned}
    0
    & =
    \delta \iota_{v_1} \iota_{v_2} \iota_{v_3} \Omega_{BFV}
    \\
    & =
    \mathcal{L}^{var}_{v_1} \iota_{v_2} \iota_{v_3} \Omega_{BFV}
    -
    \iota_{v_1} \delta \iota_{v_2} \iota_{v_3} \Omega_{BFV}
    \\
    & =
    \iota_{[v_1, v_2]^{var}} \iota_{v_3} \Omega_{BFV}
    +
    \iota_{v_2} \mathcal{L}^{var}_{v_1} \iota_{v_3} \Omega_{BFV}
    -
    \iota_{v_1} \mathcal{L}^{var}_{v_2} \iota_{v_3} \Omega_{BFV}
    +
    \iota_{v_1} \iota_{v_2} \delta \iota_{v_3} \Omega_{BFV}
    \\
    & =
    \iota_{[v_1, v_2]^{var}} \iota_{v_3} \Omega_{BFV}
    +
    \iota_{v_2} \iota_{[v_1,v_3]^{var}} \Omega_{BFV}
    -
    \iota_{v_1} \iota_{[v_2, v_3]^{var}} \Omega_{BFV}
    \\
    & =
    -
    \iota_{v_1} \iota_{[v_2, v_3]^{var}} \Omega_{BFV}
    -
    \iota_{v_2} \iota_{[v_3, v_1]^{var}} \Omega_{BFV}
    -
    \iota_{v_3} \iota_{[v_1, v_2]^{var}} \Omega_{BFV}
    \,.
  \end{aligned}
$$

=--

$\,$

The [[Poisson bracket Lie n-algebra|local Poisson bracket]] [[Lie algebra]] $(\Omega^{p,0}_{\Sigma,Ham}(E), [-,-]^{var})$ from prop.
\ref{LocalPoissonBracket} is but the lowest stage of
a [[higher Lie theory|higher Lie theoretic]] structure called the _[[Poisson bracket Lie n-algebra|Poisson bracket Lie p-algebra]]_.
Here we will not go deeper into this [[schreiber:Higher Structures|higher structure]] (see at _[[schreiber:Higher Prequantum Geometry]]_
for more), but below we will need the following simple shadow of it:

+-- {: .num_lemma #HorizontallyExactFormsDropOutOfLocalLieBracket}
###### Lemma

The horizontally exact Hamiltonian forms constitute a [[Lie ideal]] for the
local Poisson Lie bracket (eq:LocalPoissonLieBracket).

=--

+-- {: .proof}
###### Proof

Let $E$ be a horizontally exact Hamiltonian form, hence

$$
  E = d K
$$

for some $K$. Write $e$ for a [[Hamiltonian vector field]] for $E$.

Then for $(H,v)$ any other pair consisting of a Hamiltonian form and a corresponding
Hamiltonian vector field, we have

$$
  \begin{aligned}
    \iota_v \, \iota_e \, \Omega_{BFV}
    & =
    \phantom{-}\iota_v \, \delta E
    \\
    & =
    \phantom{-}\iota_v \, \delta \, d \, K
    \\
    & =
    - \iota_v \, d \, \delta K
    \\
    & =
    \phantom{-}d \, \iota_v \, \delta \, K
    \,.
  \end{aligned}
$$

Here we used that the horizontal derivative anti-commutes with the
vertical one by construction of the [[variational bicomplex]], and
 that $\iota_e$ anti-commutes with the horizontal derivative $d$ since the variation $e$ (def. \ref{Variation}) is
by definition vertical.

=--



+-- {: .num_example #LocalPoissonBracketForRealScalarField}
###### Example
**([[Poisson bracket Lie n-algebra|local Poisson bracket]] for [[real scalar field]])**

Consider the [[Lagrangian field theory]] for the [[free field|free]] [[real scalar field]] from example \ref{LagrangianForFreeScalarFieldOnMinkowskiSpacetime}.

By example \ref{FreeScalarFieldEOM} its [[presymplectic current]] is

$$
  \Omega_{BFV}
   =
  \eta^{\mu \nu} \delta \phi_{,\mu} \wedge \delta \phi \wedge \iota_{\partial_\mu} dvol_\Sigma
  \,
$$

The corresponding [[Poisson bracket Lie n-algebra|local Poisson bracket algebra]] (prop. \ref{LocalPoissonBracket}) has in degree 0
[[Hamiltonian forms]] (def. \ref{HamiltonianDifferentialForms}) such as

$$
  Q \;\coloneqq\; \phi \,\iota_{\partial_0} dvol_\Sigma \in \Omega^{p,0}(E)
$$

and

$$
  P \;\coloneqq\; \eta^{\mu \nu} \phi_{,\mu} \, \iota_{\partial_\nu} dvol_{\Sigma} \in \Omega^{p,0}(E)
  \,.
$$

The corresponding [[Hamiltonian vector fields]] are

$$
 v_Q = -\partial_{\phi_{,0}}
$$

and

$$
  v_P = - \partial_{\phi}
  \,.
$$

Hence the corresponding [[Poisson bracket Lie n-algebra|local Poisson bracket]] is

$$
  \{P,Q\} = \iota_{v_P} \iota_{v_Q} \omega = \iota_{\partial_0} dvol_\Sigma
  \,.
$$

More generally for $b_1, b_2 \in C^\infty_{cp}(\Sigma)$ two [[bump functions]] then

$$
  \{ b_1 P, b_2 Q \} = b_1 b_2 \iota_{\partial_0} dvol_\Sigma
  \,.
$$

=--




+-- {: .num_example #LocalPoissonBracketForDiracField}
###### Example
**([[Poisson bracket Lie n-algebra|local Poisson bracket]] for [[free field theory|free]] [[Dirac field]])**

Consider the [[Lagrangian field theory]] of the [[free field theory|free]] [[Dirac field]] on [[Minkowski spacetime]] (example \ref{LagrangianDensityForDiracField}), whose [[presymplectic current]] is, according to example \ref{PresymplecticCurrentDiracField}, given by

$$
  \label{RecallPresymplecticCurrentOfDiracField}
  \Omega_{BFV}
  \;=\;
  (\overline{\delta \psi}) \, \gamma^\mu \, (\delta \psi) \, \iota_{\partial_\mu} dvol_\Sigma
  \,.
$$

Consider this specifically in [[spacetime]] [[dimension]] $p + 1 = 4$ in which case the components $\psi_\alpha$ are [[complex number]]-valued (by prop./def. \ref{SpacetimeAsMatrices}), so that the [[tuple]] $(\psi_\alpha)$ amounts to 8 real-valued coordinate functions. By changing complex coordinates, we may equivalently consider $(\psi_\alpha)$ as four coordinate functions, and $(\overline{\psi}^\alpha)$ as another four independent coordinate functions.

Using this coordinate transformation, it is immediate to find the following [[pairs]] of [[Hamiltonian vector fields]] and their [[Hamiltonian differential forms]] from def. \ref{HamiltonianForms} applied to (eq:RecallPresymplecticCurrentOfDiracField)

| [[Hamiltonian vector field]] | [[Hamiltonian differential form]] |
|------------------------------|-----------------------------------|
|  $\phantom{AA} \partial_{\psi_\alpha}$      | $\phantom{AA}\left(\overline{\delta \psi}\gamma^\mu\right)^\alpha\, \iota_{\partial_\mu} dvol_\Sigma$ |
| $\phantom{AA} \partial_{\overline{\psi}_\alpha}$ | $\phantom{AA}\left( \gamma^\mu \psi  \right)_\alpha \, \iota_{\partial_\mu} dvol_\Sigma$ |

and to obtain the following non-trivial [[Poisson bracket Lie n-algebra|local Poisson brackets]] (prop. \ref{LocalPoissonBracket}) (the other possible brackets vanish):

$$
  \left\{
     \left( \gamma^\mu \psi  \right)_\alpha \, \iota_{\partial_\mu} dvol_\Sigma
     \,,\,
     \left(\overline{\psi}\gamma^\mu\right)^\beta\, \iota_{\partial_\mu} dvol_\Sigma
  \right\}
  \;=\;
  \left(\gamma^\mu\right)_\alpha{}^{\beta} \, \iota_{\partial_\mu} dvol_\Sigma
  \,.
$$

Notice the signs: Due to the odd-grading of the field coordinate function $\psi$,
its variational derivative $\delta \psi$ has bi-degree $(1,odd)$ and the
contraction operation $\iota_{\psi}$ has bi-degree $(-1,odd)$, so that commuting it
past $\overline{\psi}$ picks up _two_ minus signs, a "cohomological" sign due to the differential form
degrees, and a "supergeometric" one (def. \ref{DifferentialFormOnSuperCartesianSpaces}):

$$
  \iota_{\partial_\psi} \overline{\delta \psi} \cdots
  =
  (-1) (-1) \overline{\delta \psi} \,\iota_{\partial_\psi} \cdots
  \,.
$$

For the same reason, the [[Poisson bracket Lie n-algebra|local Poisson bracket]]
is a _[[super Lie algebra]]_ with _symmetric_ super Lie bracket:


$$
  \left\{
     \left( \gamma^\mu \psi  \right)_\alpha \, \iota_{\partial_\mu} dvol_\Sigma
     \,,\,
     \left(\overline{\psi}\gamma^\mu\right)^\beta\, \iota_{\partial_\mu} dvol_\Sigma
  \right\}
  \;=\;
  +
  \left\{
     \left(\overline{\psi}\gamma^\mu\right)^\beta\, \iota_{\partial_\mu} dvol_\Sigma
     \,,\,
     \left( \gamma^\mu \psi  \right)_\alpha \, \iota_{\partial_\mu} dvol_\Sigma
  \right\}
  \,.
$$

=--


$\,$

This concludes our discussion of general infinitesimal symmetries. We pick this up again in the discussion of
_[Gauge symmetries](#GaugeSymmetries)_ below. First, in the [next chapter](#Observables) we discuss
the concept of [[observables]] in [[field theory]].

$\,$


## Observables
 {#Observables}


Given a [[Lagrangian field theory]] (def. \ref{LagrangianForFreeScalarFieldOnMinkowskiSpacetime}), then a general _[[observable]] quantity_ or just _[[observable]]_ for short (def. \ref{Observable} below),  is a [[smooth function]]

$$
  A \;\colon\; \Gamma_\Sigma(E)_{\delta_{EL}\mathbf{L} = 0} \longrightarrow \mathbb{C}
$$

on the [[on-shell]] [[space of field histories]] (example \ref{DiffeologicalSpaceOfFieldHistories}, example \ref{SupergeometricSpaceOfFieldHistories})
hence a [[smooth function|smooth]] "[[functional]]" of field histories. We think
of this as assigning to each physically realizable field history $\Phi$ the value $A(\Phi)$ of the given quantity as exhibited by
that field history. For instance concepts like "average [[field strength]] in the compact spacetime region $\mathcal{O}$" should be
observables. In particular the _field amplitude at spacetime point $x$_ should be an observable, denoted $\mathbf{\Phi}^a(x)$.

In much of the literature on [[field theory]], these point evaluation observables $\mathbf{\Phi}^a(x)$
(example below \ref{PointEvaluationObservables}) are eventually referred to as "fields" themselves,
blurring the distinction between

1. field species/[[field bundles]] $E$,

1. [[field histories]]/[[sections]] $\Phi$,

1. [[functions]] on the [[space of field histories]] $\mathbf{\Phi}^a(x)$.

In particular, the process of _[[quantization]]_ (discussed in _[Quantization](#Quantization)_ below)
affects the third of these concepts only, in that it deforms the [[associative algebra|algebra]] structure
on observables to a [[non-commutative algebra|non-commutative]] [[algebra of quantum observables]].
For this reason the observables $\mathbf{\Phi}^a(x)$ are often referred to as _quantum fields_.
But to understand the conceptual nature of [[quantum field theory]] it is important that the
$\mathbf{\Phi}^a(x)$ are really the _[[observables]]_ or _[[quantum observables]]_ on the space of field histories.

**[[field (physics)|fields]]**

| aspect | [[term]] | [[type]] |  description | def. |
|--|------------|-|---------|----|
| [[field bundle|field component]] | $\phi^a$, $\phi^a_{,\mu}$ |  $J^\infty_\Sigma(E) \to \mathbb{R}$ |[[coordinate function]] on [[jet bundle]] of [[field bundle]] | def. \ref{FieldsAndFieldBundles}, def. \ref{JetBundleOfTrivialVectorBundleOverMinkowskiSpacetime} |
| [[field history]] | $\Phi$, $\frac{\partial \Phi}{\partial x^\mu}$ | $\Sigma \to J^\infty_\Sigma(E)$  | [[jet prolongation]] of [[section]] of [[field bundle]] | def. \ref{FieldsAndFieldBundles}, def. \ref{JetProlongation}  |
| [[observable|field observable]] | $\mathbf{\Phi}^a(x)$, $\partial_{\mu} \mathbf{\Phi}^a(x),   $ | $\Gamma_{\Sigma}(E) \to \mathbb{R}$  | [[derivative of a distribution|derivatives]] of [[delta-distribution|delta]]-[[functional]] on [[space of sections]] | def. \ref{Observable}, example \ref{PointEvaluationObservables} |
| averaging of [[observable|field observable]] | $\alpha^\ast \mapsto \underset{\Sigma}{\int} \alpha^\ast_a(x) \mathbf{\Phi}^a(x) \, dvol_\Sigma(x)$ | $\Gamma_{\Sigma,cp}(E^\ast) \to Obs(E_{scp},\mathbf{L})$ |  [[operator-valued distribution|observable-valued distribution]]  | def. \ref{RegularLinearFieldObservables} |
| [[algebra of quantum observables]] | $\left( Obs(E,\mathbf{L})_{\mu c},\, \star\right)$  | $\mathbb{C}Alg$  | [[non-commutative algebra]] [[structure]] on [[observable|field observables]] | def. \ref{WickAlgebraOfFreeQuantumField}, def. \ref{GeneratingFunctionsForCorrelationFunctions} |

$\,$

There are various further conditions on [[observables]] which we will eventually consider, forming subspaces of
_[[gauge invariant]] observables_ (def. \ref{GaugeInvariantFunctionsIntermsOfLieAlgebroids}),
_[[local observables]]_ (def. \ref{LocalObservables} below), _Hamiltonian local observables_ (def. \ref{HamiltonianLocalObservables} below) and _[[microcausal functional|microcausal observables]]_ (def. \ref{MicrocausalFunctionals}). While in the end it is
only these special kinds of observables that matter, it is useful to first consider the unconstrained concept
and then consecutively characterize smaller subspaces of well-behaved observables.
In fact it is useful to consider yet more generally the observables on the full [[space of field histories]]
(not just the [[on-shell]] subspace), called the _off-shell observables_.


In the case that the [[field bundle]] is a [[vector bundle]] (example \ref{TrivialVectorBundleAsAFieldBundle}),
the [[off-shell]] [[space of field histories]]
is canonically a [[vector space]] and hence it makes sense to consider _[[linear map|linear]]_ off-shell observables, i.e.
those observables $A$ with $A(c \Phi) = c A(\Phi)$ and $A(\Phi_1 + \Phi_2) = A(\Phi_1) + A(\Phi_2)$.
It turns out that these are precisely the _[[compactly supported distributions]]_ in the sense of [[Laurent Schwartz]]
(prop. \ref{LinearObservablesAreTheCompactlySupportedDistributions} below).
This fact makes powerful tools from [[functional analysis]] and [[microlocal analysis]] available for the analysis of [[field theory]]
(discussed [below](#MicrolocalAnalysisAndUltravioletDivergence)).

More generally there are the [[multilinear map|multilinear]] off-shell observables, and these are analogously given by
_[[distributions of several variables]]_ (def. \ref{PolynomialObservables} below). In fully [[perturbative quantum field theory]]
one considers only the [[infinitesimal neighbourhood]] (example \ref{InfinitesimalNeighbourhood}) of a single [[on-shell]] [[field history]]
and in this case all [[observables]] are in fact given by such multilinear observables (def. \ref{LocalObservablesOnInfinitesimalNeighbourhood} below).

For a [[free field theory]] (def. \ref{FreeFieldTheory}) whose [[Euler-Lagrange equations|Euler-Lagrange]] [[equations of motion]] are given by a [[linear differential operator]] which behaves well in that it is  "[[Green hyperbolic differential operator|Green hyperbolic]]" (def. \ref{GreenHyperbolicDifferentialOperator} below) it follows that the actual [[on-shell]] linear observables are equivalently those off-shell observables which are
_spatially [[compactly supported distribution|compactly supported]] [[distributional solution of a PDE|distributional solutions]]_ to the [[formally adjoint differential operator|formally adjoint]]
[[equation of motion]] (prop. \ref{DistributionsOnSolutionSpaceAreTheGeneralizedPDESolutions} below);
and this equivalence is exhibited by [[composition]] with the _[[causal Green function]]_
(def. \ref{AdvancedAndRetardedGreenFunctions} below):

This is theorem \ref{LinearObservablesForGreeFreeFieldTheoryAreDistributionalSolutionsToTheEquationsOfMotion} below,
which is pivotal for passing from [[classical field theory]] to [[quantum field theory]]:

$$
  \left\{
    \,\,
    \array{
      \text{polynomial}
      \\
      \text{observables}
    }
    \,\,
  \right\}
    \underoverset{\simeq}{
       \text{causal propagator}
    }{\longleftarrow}
  \left\{
    \array{
      \text{spatially compactly supported}
      \\
      \text{distributions in several variables}
      \\
      \text{which are distributional solutions}
      \\
      \text{to the adjoint equations of motion}
    }
  \right\}
$$

This fact makes, in addition, the distributional analysis of [[linear differential equations]]
available for the analysis of [[free field theory]], notably the theory of _[[propagators]]_, such as _[[Feynman propagators]]_ (def. \ref{FeynmanPropagatorForKleinGordonEquationOnMinkowskiSpacetime} below), which we turn to
in _[Propagators](#Propagators)_ below.

The [[functional analysis]] and [[microlocal analysis]] ([below](#MicrolocalAnalysisAndUltravioletDivergence)) of linear [[observables]] re-expressed in [[distribution|distribution theory]]
via theorem \ref{LinearObservablesForGreeFreeFieldTheoryAreDistributionalSolutionsToTheEquationsOfMotion} solves the
issues that the original formulation of [[perturbative quantum field theory]] by [[Schwinger-Tomonaga-Feynman-Dyson]] in the 1940s
was notorious for suffering from ([Feynman 85](Schwinger-Tomonaga-Feynman-Dyson#Feynman85SuchABunchOfWords)): The [[normal ordered product]] of
quantum observables in a [[Wick algebra]] of observables follows from [[Hörmander's criterion]] for the [[product of distributions]]
to be well-defined (this we discuss in _[Free quantum fields](#FreeQuantumFields)_ below) and the
_[[renormalization]]_ freedom in the construction of the [[S-matrix]] is governed by the mechanism of
_[[extensions of distributions]]_ (this we discuss in _[Renormalization](#Renormalization)_ below).


Among the polynomial on-shell observables characterized this way, the focus is furthermore on the _[[local observables]]_:

In _[[local field theory]]_ the idea is that both the [[equations of motion]] as well as the observations
are fully determined by their restriction to [[infinitesimal neighbourhoods]] of spacetime points ([[events]]).
For the equations of motion this means that they are [[partial differential equations]] as we have seen
[above](#EulerLagrangeEquationsOnTrivialVectorFieldBundleOverMinkowskiSpacetime). For the observables
it should mean that they must be averages over regions of spacetime of functions of the value of the field histories and their derivatives
_at any point_ of spacetime.
Now a "smooth function of the value of the field histories and their derivatives at any point"
is precisely a smooth function on the [[jet bundle]] of the [[field bundle]] (example \ref{JetBundleOfTrivialVectorBundleOverMinkowskiSpacetime})
pulled back via [[jet prolongation]] (def. \ref{JetProlongation}).
If this is to be averaged over spacetime it needs to be the coefficient of a horizontal $p+1$-form (prop. \ref{VariationalBicomplexOnSecondOrderJetBundleOverTrivialVectorBundleOverMinkowskiSpacetime}).

In mathematical terminology these desiderata say that the [[local observables]] in a local field theory should be precisely the
"[[transgression of variational differential forms|transgressions]]" (def. \ref{TransgressionOfVariationalDifferentialFormsToConfigrationSpaces} below) of horizontal variational $p+1$-forms
(with compact spacetime support, def. \ref{SpacetimeSupport} below) to the [[space of field histories]] (example \ref{DiffeologicalSpaceOfFieldHistories}). This is
def. \ref{LocalObservables} below.

A key example of a [[local observable]] in [[Lagrangian field theory]] (def. \ref{LocalLagrangianDensityOnSecondOrderJetBundleOfTrivialVectorBundleOverMinkowskiSpacetime}) is the _[[action functional]]_ (example \ref{ActionFunctional} below). This is the [[transgression of variational differential forms|transgression]]
of the [[Lagrangian density]] itself, or rather of its product with an "[[adiabatic switching]] function" that
localizes its [[support]] in a compact spacetime region. In typical cases the physical quantity whose observation is
represented by the action functional is the difference of the [[kinetic energy|kinetic]] energy-momentum minus the [[potential energy]]
of a field history averaged over the given region of spacetime.

The [[equations of motion]] of a [[Lagrangian field theory]] say that those field histories
are physically realized which are [[critical points]] of this [[action functional]] observable. This is
the _[[principle of extremal action]]_ (prop. \ref{PrincipleOfExtremalAction} below).

This formalizes what it means for a [[field (physics)|field]] history $\Phi$ to be "realizable" (physically admissible)
(a solution to the [[Euler-Lagrange equations]], def. \ref{EulerLagrangeEquationsOnTrivialVectorFieldBundleOverMinkowskiSpacetime})
and what the ([[local observable|local]]) [[observable]] quantities on field histories are (def. \ref{LocalObservables}).
It remains to formalize what it means for the [[physical system]] to be in some definite _[[state]]_
so that the [[observable]] quantities take some definite value, reflecting the properties of that state.

Whatever formalization for _[[states]]_ of a [[field theory]] one considers, at the very least
the [[space of states]] $States$ should come with a pairing [[linear map]]

$$
  \array{
    Obs \otimes States & \longrightarrow&  \mathcal{C}
    \\
    \left( A , \langle - \rangle \right) &\mapsto& \langle A \rangle
  }
$$

which reads in an [[observable]] quantity $A$ and a state, to be denoted $\langle - \rangle$,
and produces the [[complex number]] $\langle A \rangle$
which is the "value of the observable quantity $A$ in the case that the physical system is in the state $\langle -\rangle$".

One might imagine that
it is fundamentally possible to pinpoint the exact [[field history]] that the
[[physical system]] is found in. From this perspective, fixing a [[state]] should simply mean to
pick such a [[field history]], namely an element $\Phi \in \Gamma_{\Sigma}(E)_{\delta_{EL}\mathbf{L} = 0}$
in the [[on-shell]] [[space of field histories]].
If we write $\langle -\rangle_{\Phi}$ for this state, its pairing map with the [[observables]] would simply be
[[evaluation]] of the observable, being a function on the field history space, on that particular element in this space:

$$
  \langle A \rangle_{\Phi} \coloneqq A(\Phi)
  \,.
$$

However, in the practice of [[experiment]] a field history can never be known precisely, without remaining uncertainty.
Moreover, [[quantum physics]] (to which we finally come [below](#Quantization)), suggests that this is
true not just in practice, but even in principle. Therefore we should allow [[states]] to be a kind of [[probability distributions]]
on the [[space of field histories]], and regard the pairing $\langle A \rangle$ of a state $\langle - \rangle$ with an observable
$A$ as a kind of _[[expectation value]]_ of the function $A$ averaged with respect to this probability distribution.
Specifically, if the observable quantity $A$ is (a smooth approximation to) a [[characteristic function]]
of a [[subset]] $S \subset \Gamma_{\Sigma}(E)_{\delta_{EL}\mathbf{L} = 0}$ of the [[space of field histories]], then its value in a given state should be the [[probability]] to find the [[physical system]] in that subset of field histories.

But, moreover, the [[superposition principle]] of [[quantum physics]] says that the actually observable observables
are only those of the form $A^\ast A$ (for $A^\ast$ the image under the star-operation on the [[star algebra]]
of observables.

This finally leads to the definition of _[[states]]_ in def. \ref{States} below.



$\,$

We now discuss these topics:

$\,$

* _[General observables](#GeneralObservables)_

* _[Polynomial off-shell observables and Distributions](#LinearOffShellObservablesAreDistributions)_

* _[Polynomial on-shell observables and Distributional solutions to PDEs](#PolynomialOnShellObservablesAreDistributionalSolutionsToTheEquationsOfMotion)_

* _[Local observables and Transgression](#LocalObservablesByTransgression)_

* _[Infinitesimal observables](#InfinitesimalObservables)_

* _[States](#StatesArePositiveLinearFunctionals)_

$\,$

**General observables**
{#GeneralObservables}

+-- {: .num_defn #Observable}
###### Definition
**([[observables]])**

Let $(E,\mathbf{L})$ be a [[Lagrangian field theory]] (def. \ref{LocalLagrangianDensityOnSecondOrderJetBundleOfTrivialVectorBundleOverMinkowskiSpacetime})
with $\Gamma_\Sigma(E)_{\delta_{EL} \mathbf{L} = 0}$ its [[on-shell]] [[space of field histories]] (def. \ref{EulerLagrangeEquationsOnTrivialVectorFieldBundleOverMinkowskiSpacetime}).

Then the _space of [[observables]]_ is the [[super formal smooth set]] (def. \ref{SuperFormalSmoothSet})
which is the [[mapping space]]

$$
  Obs(E,\mathbf{L})
  \;\coloneqq\;
  \left[
    \Gamma_\Sigma(E)_{\delta_{EL}\mathbf{L} = 0}
    \,,\,
    \mathbb{C}
  \right]
$$

from the [[on-shell]] [[space of field histories]] to the [[complex numbers]].

Similarly there is the space of _off-shell observables_

$$
  Obs(E)
  \;\coloneqq\;
  \left[
    \Gamma_\Sigma(E)
    \,,\,
    \mathbb{C}
  \right]
  \,.
$$

Every off-shell observables induces an on-shell observable by [[restriction]], this yields a smooth function

$$
  \label{OffShellObservablesRestrictToOnShellObservables}
  Obs(E)
    \overset{(-)_{\delta_{EL}\mathbf{L} = 0}}{\longrightarrow}
  Obs(E,\mathbf{L})
$$

similarly we may consider the observables on the sup-spaces of field histories with restricted causal support
according to def. \ref{CompactlySourceCausalSupport}. We write

$$
  Obs(E_{scp})
  \;\coloneqq\;
  \left[ \Gamma_{\Sigma,scp}(E), \mathbb{C}  \right]
$$

and

$$
  \label{SpaceOfObservablesOnFieldHistoriesOfSpatiallyCompactSupport}
  Obs(E_{scp}, \mathbf{L})
  \;\coloneqq\;
  \left[ \Gamma_{\Sigma,scp}(E)_{\delta_{EL} \mathbf{L} = 0}, \mathbb{C}  \right]
$$

for the spaces of (off-shell) observables on [[field histories]] with spatially compact support (def. \ref{CompactlySourceCausalSupport}).

$\,$

**Observables on bosonic fields**

In the case that $E$ is a purely [[bosonic]] [[field bundle]] in [[smooth manifolds]] so that $\Gamma_\Sigma(E)_{\delta_{EL}\mathbf{L} = 0}$
is a [[diffeological space]] (def. \ref{DiffeologicalSpaceOfFieldHistories}, def. \ref{EulerLagrangeEquationsOnTrivialVectorFieldBundleOverMinkowskiSpacetime})
this means that a single [[observable]] $A \in Obs_{E,\mathbf{L}}$ is equivalently a [[smooth function]] (def. \ref{DiffeologicalSpace})

$$
  A
    \;\colon\;
  \Gamma_\Sigma(E)_{\delta_{EL} \mathbf{L} = 0}
    \longrightarrow
  \mathbb{C}
  \,.
$$

Explicitly, by def. \ref{SmoothSet} (and similarly by def. \ref{SuperFormalSmoothSet}) this means that
$A$ is for each [[Cartesian space]] $U$ (generally: [[super Cartesian space]], def. \ref{SuperCartesianSpace})
a [[natural transformation|natural]] function of plots

$$
  A_U
  \;\colon\;
  \left\{
    \array{
      U \times \Sigma && \overset{\Phi_{(-)}}{\longrightarrow} && E
      \\
      & {}_{\mathllap{pr_2}}\searrow &&  \swarrow_{\mathrlap{fb}}
      \\
      && \Sigma
    }
  \right\}_{\delta_{EL}\mathbf{L} = 0}
    \;\overset{}{\longrightarrow}\;
  \left\{
    U \to \mathbb{C}
  \right\}
  \,.
$$

**Observables on fermionic fields**

In the case that $E$ has purely [[fermionic]] [[fibers]] (def. \ref{FermionicBosonicFields}), such as for the [[Dirac field]] (example \ref{DiracFieldBundle})
with
$E = \Sigma\times S_{odd}$  then the only point in $Obs_{E,\mathbf{L}}$ is the zero-observable,
instead an observable is now a morphism

$$
  (\theta \mapsto \theta A)
    \;\colon\;
  \mathbb{R}^{0\vert 1}
    \longrightarrow
  Obs_{E,\mathbf{L}}
$$

and its component $A$ is a bosonic observable as above.

=--

The most basic kind of observables are the following:

+-- {: .num_example #PointEvaluationObservables}
###### Example
**(point evaluation observables -- field observables)**

Let $(E,\mathbf{L})$ be a [[Lagrangian field theory]] (def. \ref{LocalLagrangianDensityOnSecondOrderJetBundleOfTrivialVectorBundleOverMinkowskiSpacetime})
whose [[field bundle]] (def. \ref{FieldsAndFieldBundles}) over some [[spacetime]] $\Sigma$
happens to be a [[trivial vector bundle]] in even degree (i.e. bosonic) with [[field fiber]] [[coordinates]] $(\phi^a)$ (example \ref{TrivialVectorBundleAsAFieldBundle}).
With respect to these coordinates a [[field history]], hence a [[section]] of the [[field bundle]]

$$
  \Phi \;\in \; \Gamma_\Sigma(E)
$$

has components $(\Phi^a)$ which are [[smooth functions]] on [[spacetime]].

Then for every index $a$ and every point $x \in \Sigma$ in [[spacetime]] (every [[event]]) there is an [[observable]] (def. \ref{Observable})
denoted $\mathbf{\Phi}^a(x)$ which is given by

$$
  \mathbf{\Phi}^a(x)
  \;\colon\;
  \Phi_{(-)}
    \mapsto
  \Phi_{(-)}^a(x)
  \,,
$$

hence which on a test space $U$ (a [[Cartesian space]] or more generally [[super Cartesian space]], def. \ref{SuperCartesianSpace}) sends a $U$-parameterized collection of fields

$$
  \Phi_{(-)} \colon U \to \Gamma_\Sigma(E)_{\delta_{EL}\mathbf{L} = 0}
$$

to their $U$-parameterized collection of values at $x$ of their $a$-th component.

Notice how the various aspects of the concept of "field" are involved here, all closely related
but crucially different:

$$
  \array{
    \mathbf{\Phi}^a(x)
    &\colon&
    \Phi
    &\overset{\phantom{AA}}{\mapsto}&
    \Phi^a(x)
    &=&
    \phi^a & \circ \Phi(x)
    \\
    \array{
      \text{field}
      \\
      \text{observable}
    }
    &&
    \array{
      \text{field}
      \\
      \text{history}
    }
    &&
    \array{
      \text{field}
      \\
      \text{value}
    }
    &&
    \array{
      \text{field}
      \\
      \text{component}
    }
  }
$$


=--






$\,$


**Polynomial off-shell Observables and Distributions**
{#LinearOffShellObservablesAreDistributions}

We consider here _linear observables_ (def. \ref{LinearObservables} below) and more generally
_quadratic observables_ (def. \ref{QuadraticObservables}) and generally _polynomial observables_ (def. \ref{PolynomialObservables} below) for [[free field theories]] and discuss how these are equivalently given by
[[integration]] against [[generalized functions]] called _[[distributions]]_ (prop. \ref{LinearObservablesAreTheCompactlySupportedDistributions} and prop. \ref{DistributionsAreGeneralizedFunctions} below).

This is the basis for the discussion of [[quantum observables]] for [[free field theories]] [further below](#FreeQuantumFields).

$\,$

+-- {: .num_defn #LinearObservables}
###### Definition
**([[linear map|linear]] [[off-shell]] [[observables]])**

Let $(E,\mathbf{L})$ be a [[Lagrangian field theory]] (def. \ref{LocalLagrangianDensityOnSecondOrderJetBundleOfTrivialVectorBundleOverMinkowskiSpacetime})
whose [[field bundle]] $E$ (def. \ref{FieldsAndFieldBundles}) is a [[super vector bundle|super]] [[vector bundle]]
(as in example \ref{TrivialVectorBundleAsAFieldBundle} and as opposed to more general non-linear [[fiber bundles]]).

This means that the
[[off-shell]] [[space of field histories]] $\Gamma_\Sigma(E)$ (example \ref{SupergeometricSpaceOfFieldHistories})
inherits the structure of a [[super vector space|super]] [[vector space]] by spacetime-pointwise (i.e. [[event]]-wise) scaling and addition of
[[field histories]].

Then an [[off-shell]] [[observable]] (def. \ref{Observable})

$$
  A \;\colon\; \Gamma_\Sigma(E)_{\delta_{EL}\mathbf{L} = 0} \longrightarrow \mathbb{C}
$$

is a _linear observable_ if it is a [[linear function]] with respect to this vector space structure, hence if

$$
  A\left( c \Phi_{(-)}) = c A(\Phi_{(-)} \right)
  \phantom{AAAA}
  \text{and}
  \phantom{AAAA}
  A\left(\Phi_{(-)} + \Phi'_{(-)} \right)
  =
  A\left( \Phi_{(-)}) + A(\Phi'_{(-)} \right)
$$

for all plots of [[field histories]] $\Phi_{(-)}, \Phi'_{(-)}$.

We write

$$
  LinObs(E,\mathbf{L}) \hookrightarrow Obs(E,\mathbf{L})
$$

for the subspace of linear observables inside all observables (def. \ref{Observable}) and similarly

$$
  LinObs(E) \hookrightarrow Obs(E)
$$

for the linear off-shell observables inside all off-shell observables, and similarly
for the subspaces of linear oobservables on field histories of spatially compact supprt (eq:SpaceOfObservablesOnFieldHistoriesOfSpatiallyCompactSupport):

$$
  \label{LinearObservablesOnSpatiallyCompactlySupportedOnShellFieldHistories}
  LinObs(E_{scp}, \mathbf{L})
    \hookrightarrow
  Obs(E_{scp}, \mathbf{L})
$$

and

$$
  LinObs(E_{scp})
    \hookrightarrow
  Obs(E_{scp})
  \,.
$$



=--


+-- {: .num_example #LinearPointEvaluationObservables}
###### Example
**(point evaluation observables are linear)**

Let $(E,\mathbf{L})$ be a [[Lagrangian field theory]] (def. \ref{LocalLagrangianDensityOnSecondOrderJetBundleOfTrivialVectorBundleOverMinkowskiSpacetime})
over [[Minkowski spacetime]] (def. \ref{MinkowskiSpacetime}),
whose [[field bundle]] $E$ (def. \ref{FieldsAndFieldBundles}) is the [[trivial vector bundle]]
with field [[coordinates]] $(\phi^a)$ (example \ref{TrivialVectorBundleAsAFieldBundle}).

Then for each field component index $a$ and point $x \in \Sigma$ of [[spacetime]] (each [[event]])
the point evaluation observable (example \ref{PointEvaluationObservables})

$$
  \array{
    \Gamma_\Sigma(E)_{\delta_{EL}\mathbf{L} = 0}
      &\overset{\mathbf{\Phi}^a(x)}{\longrightarrow}&
    \mathbb{C}
    \\
    \phi &\mapsto& \phi^a(x)
  }
$$

is a linear observable according to def. \ref{LinearObservables}. The [[distribution]]
that it corresponds to under prop. \ref{LinearObservablesAreTheCompactlySupportedDistributions}
is the _[[Dirac delta-distribution]]_ at the point $x$ combined with the [[Kronecker delta]] on the index $a$:
In the [[generalized function]]-notation of remark \ref{LinearObservablesAsGeneralizedFunctions} this reads:

$$
  \Phi^a(x) \;\colon\; \Phi \mapsto \int_\Sigma \Phi^b(y) \delta_b^a \delta(x,y) \, dvol_\Sigma(y)
  \,.
$$

=--


+-- {: .num_prop #LinearObservablesAreTheCompactlySupportedDistributions}
###### Proposition
**([[linear map|linear]] [[off-shell]] [[observables]] of [[scalar field]] are the [[compactly supported distributions]])**

Let $(E,\mathbf{L})$ be a [[Lagrangian field theory]] (def. \ref{LocalLagrangianDensityOnSecondOrderJetBundleOfTrivialVectorBundleOverMinkowskiSpacetime})
over [[Minkowski spacetime]] (def. \ref{MinkowskiSpacetime}),
whose [[field bundle]] $E$ (def. \ref{FieldsAndFieldBundles}) is the [[trivial vector bundle|trivial]] [[real line bundle]]
(as for the [[real scalar field]], example \ref{RealScalarFieldBundle}).
This means that the [[off-shell]] [[space of field histories]] $\Gamma_\Sigma(E) \simeq C^\infty(\Sigma)$ (eq:SpaceOfFieldHistoriesOfRealScalarField) is the
[[real vector space]] of [[smooth functions]] on [[Minkowski spacetime]] and that every linear observable $A$ (def. \ref{LinearObservables})
gives a [[linear function]]

$$
  A_\ast \;\colon\; C^\infty(\Sigma)_{\delta_{EL}\mathbf{L} = 0} \longrightarrow \mathbb{C}
  \,.
$$

This [[linear function]] $A_\ast$ is in fact
a _[[compactly supported distribution]]_, in the sense of [[functional analysis]], in that it satisfies
the following [[Fréchet vector space]] [[continuous function|continuity condition]]:

* **[[Fréchet space|Fréchet]] [[continuous linear functional]]**

  A [[linear function]] $A_\ast \;\colon\; C^\infty(\mathbb{R}^{p,1}) \to \mathbb{R}$ is called _[[continuous function|continuous]]_ if
  there exists

  1. a [[compact subset]] $K \subset \mathbb{R}^{p,1}$ of [[Minkowski spacetime]];

  1. a [[natural number]] $k \in \mathbb{N}$;

  1. a [[positive number|positive]] [[real number]] $C \in \mathbb{R}_+$

  such that for all [[on-shell]] [[field histories]]

  $$
    \Phi \in C^\infty(\Sigma)_{\delta_{EL}\mathbf{L} = 0}
  $$

  the following [[inequality]] of [[absolute values]] ${\vert -\vert}$ of [[partial derivatives]] holds

  $$
    {\vert A_\ast(\Phi)\vert}
    \;\leq\;
    C \underset{{\vert \alpha \vert} \leq k}{\sum} \, \underset{x \in K}{sup} {\vert \partial^\alpha \Phi(x)\vert}
    \,,
  $$

  where the sum is over all multi-indices $\alpha \in \mathbb{N}^{p+1}$ (eq:PartialDerivativeWithManyIndices)
  whose total degree ${\vert \alpha\vert} \coloneqq \alpha_0 + \cdots + \alpha_{p}$ is bounded by $k$,
  and where

  $$
    \partial^\alpha \Phi
    \;\coloneqq\;
    \frac{\partial^{{\vert \alpha\vert}} \Phi }{ \partial^{\alpha_0} x^0 \partial^{\alpha_1} x^1 \cdots \partial^{\alpha^p} x^p  }
  $$

  denotes the corresponding [[partial derivative]] (eq:PartialDerivativeWithManyIndices).

This identification constitutes a [[linear isomorphism]]

$$
  \array{
    LinObs(\Sigma \times \mathbb{R}) &\overset{\simeq}{\longrightarrow}& \mathcal{E}'(\Sigma)
    \\
    \array{
      \text{linear off-shell}
      \\
      \text{observables}
      \\
      \text{of the scalar field}
    }
    &&
    \array{
      \text{compactly supported}
      \\
      \text{distributions}
      \\
      \text{on spacetime}
    }
  }
  \,,
$$

saying that all [[compactly supported distributions]] arise from linear off-shell observables of the [[scalar field]] this way, and uniquely so.

=--

For **proof** see at _[[distributions are the smooth linear functionals]]_, [this prop.](distributions+are+the+smooth+linear+functionals#CompactlySupportedDistributionsAreTheSmoothLinearFunctionals)

The identification from prop. \ref{LinearObservablesAreTheCompactlySupportedDistributions} of linear off-shell observables
with [[compactly  supported distributions]] makes available powerful tools from [[functional analysis]]. The key fact is the
following:


+-- {: .num_prop #DistributionsAreGeneralizedFunctions}
###### Proposition
**([[distributions]] are [[generalized functions]])**

For $n \in \mathbb{N}$, every [[compactly supported function|compactly supported]] [[smooth function]]
$b \in C^\infty_{cp}(\mathbb{R}^n)$ on the [[Cartesian space]] $\mathbb{R}^n$ induces a [[distribution]] (prop. \ref{LinearObservablesAreTheCompactlySupportedDistributions}), hence a [[continuous linear functional]],
by [[integration]] against $b$ times the [[volume form]].

$$
  \array{
    C^\infty(\mathbb{R}^n) &\longrightarrow& \mathbb{R}
    \\
    f &\mapsto& \int_{\mathbb{R}^n} f(x) b(x) \, dvol(x)
  }
$$


The distributions arising this way are called the _[[non-singular distributions]]_.

This construction is clearly a [[linear function|linear]] [[monomorphism|inclusion]]

$$
  C^\infty_{cp}(\mathbb{R}^n) \overset{\phantom{AAA}}{\hookrightarrow} \mathcal{E}'(\mathbb{R}^n)
$$

and in fact this is a [[dense subspace]] inclusion for the space of compactly supported distributions
$\mathcal{E}'(\mathbb{R}^n)$ equipped with the [[dual space]] topology ([this def.](dual+vector+space#LinearDualOfATopologicalVectorSpace)) to the [[Fréchet space]] structure on $C^\infty(\mathbb{R}^n)$ from prop. \ref{LinearObservablesAreTheCompactlySupportedDistributions}.

Hence every [[compactly supported distribution]] $u$ is the [[limit of a sequence|limit]] of a [[sequence]]  $\{b_n\}_{n \in \mathbb{N}}$
of [[compactly supported function|compactly supported]] [[smooth functions]]  in that for every [[smooth function]] $f \in C^\infty(\mathbb{R}^n)$ we have that the value $u(f) \in \mathbb{R}$  is the [[limit of a sequence|limit]] of [[integrals]]
against $b_n dvol$:

$$
  u(f)
    \;=\;
  \underset{n \to \infty}{\lim}\, \int_{\mathbb{R}^n} f(x) b_n(x) dvol(x)
  \,.
$$

=--

(e. g. [Hörmander 90, theorem 4.1.5](non-singular+distributionFourier+transform#Hoermander90Fourier+transform#Hoermander90))

Proposition \ref{DistributionsAreGeneralizedFunctions} with prop. \ref{LinearObservablesAreTheCompactlySupportedDistributions} implies that with due care we may think of _all_ linear off-shell observables as arising from [[integration]] of [[field histories]]
against some "[[generalized function|generalized smooth functions]]" (namely a [[limit of a sequence|limit]] of actual smooth functions):

+-- {: .num_remark #LinearObservablesAsGeneralizedFunctions}
###### Remark
**([[linear map|linear]] [[off-shell]] [[observables]] of [[real scalar field]] as [[integration]] against [[generalized functions]])**

Let $(E,\mathbf{L})$ be a [[Lagrangian field theory]] (def. \ref{LocalLagrangianDensityOnSecondOrderJetBundleOfTrivialVectorBundleOverMinkowskiSpacetime})
over [[Minkowski spacetime]] (def. \ref{MinkowskiSpacetime}),
whose [[field bundle]] $E$ (def. \ref{FieldsAndFieldBundles}) is a [[trivial vector bundle]] with field
coordinates $(\phi^a)$.

Prop. \ref{LinearObservablesAreTheCompactlySupportedDistributions} implies immediately that in this
situation linear off-shell observables $A$ (def. \ref{LinearObservables}) correspond to [[tuples]] $(A_a)$
of [[compactly supported distributions]] via

$$
  A(\Phi) = \underset{a}{\sum} A_a(\Phi^a)
  \,.
$$

With prop. \ref{DistributionsAreGeneralizedFunctions} it follows furthermore that
there is a [[sequence]] of [[tuples]] of [[smooth functions]] $\{(\alpha_n)_{a}\}_{n \in \mathbb{N}}$ such that $A_a$
is the [[limit of a sequence|limit]] of the [[integrations]] against these:

$$
  A(\Phi)
  \;=\;
  \underset{n \to \infty}{\lim}
  \,
  \int_\Sigma \Phi^a(x) (\alpha_n)_a(x) \, dvol(x)
  \,,
$$

where now the [[sum]] over the index $a$ is again left notationally implicit.

For handling distributions/linear off-shell observables it is therefore useful to adopt, with due care,
shorthand notation as if the [[limit of a sequence|limits]] of the [[sequences]] of [[smooth functions]] $(\alpha_n)_a$ actually existed,
as "[[generalized functions]]" $\alpha_a$, and to set

$$
  \int_\Sigma \Phi^a(x) \alpha_a(x) \, dvol(x)
  \;\coloneqq\;
  A(\Phi)
  \,,
$$

This suggests that basic operations on functions, such as their pointwise product,
should be [[extension|extended]] to [[distributions]], e.g. to a _[[product of distributions]]_.
This turns out to exist, as long as the high-frequency modes in the [[Fourier transform of distributions|Fourier transform of]]
the distributions being multiplied cancel out -- the mathematical reflection of "[[UV-divergences]]" in [[quantum field theory]].
This we turn to in _[Free quantum fields](#FreeQuantumFields)_ below.

=--

These considerations generalize from the [[field bundle]] of the [[real scalar field]] to general [[field bundles]] (def. \ref{FieldsAndFieldBundles})
as long as they are [[smooth vector bundles]] (def. \ref{VectorBundle}):

+-- {: .num_defn #TVSStructureOnSpacesOfSmoothSections}
###### Definition
**([[Fréchet space|Fréchet]] [[topological vector space]] on [[spaces of smooth sections]] of a [[smooth vector bundle]])**

Let $E \overset{fb}{\to} \Sigma$ be a [[field bundle]] (def. \ref{FieldsAndFieldBundles}) which is a [[smooth vector bundle]] (def. \ref{VectorBundle}) over [[Minkowski spacetime]] (def. \ref{MinkowskiSpacetime});
hence, up to [[isomorphism]], a [[trivial vector bundle]] as in example \ref{TrivialVectorBundleAsAFieldBundle}.

On its [[real vector space]] $\Gamma_\Sigma(E)$ [[space of sections|of smooth sections]] consider the [[seminorms]] indexed by a [[compact subset]] $K \subset \Sigma$ and a [[natural number]] $k \in \mathbb{N}$  and given by

$$
  \array{
    \Gamma_\Sigma(E) &\overset{p_K^k}{\longrightarrow}&
    [0,\infty)
    \\
    \Phi &\mapsto&  \underset{ {\vert \alpha\vert} \leq k}{max} \left( \underset{x \in K}{sup} {\vert \partial^\alpha \Phi(x)\vert}\right) \,,
  }
$$

where on the right we have the [[absolute values]] of the [[partial derivatives]] of $\Phi$ index by $\alpha$ (eq:PartialDerivativeWithManyIndices) with respect to any choice of [[norm]] on the [[fibers]].

This makes $\Gamma_\Sigma(E)$ a [[Fréchet space|Fréchet]] [[topological vector space]].

For $K \subset \Sigma$ any [[closed subset]] then the sub-space of sections

$$
  \Gamma_{\Sigma,K}(E) \hookrightarrow \Gamma_\Sigma(E)
$$

of sections whose [[support]] is inside $K$ becomes a [[Fréchet space|Fréchet]] [[topological vector spaces]] with the induced [[subspace topology]], which makes these be [[closed subspaces]].

Finally, the [[vector spaces]] of smooth sections with prescribed causal support (def. \ref{CompactlySourceCausalSupport})
are [[inductive limits]] of vector spaces $\Gamma_{\Sigma,K}(E)$ as above, and hence they inherit
[[topological vector space]] [[structure]] by forming the corresponding [[inductive limit]] in the [[category]]
of [[topological vector spaces]]. For instance

$$
  \Gamma_{\Sigma,cp}(E)
  \;\coloneqq\;
  \underset{\underset{ {K \subset \Sigma} \atop {K\, \text{compact}} }{\longrightarrow}}{\lim}
  \Gamma_{\Sigma,K}(E)
$$

etc.

=--

([Bär 14, 2.1](space+of+sections#Baer14))



+-- {: .num_defn #DistributionalSections}
###### Definition
**([[distribution|distributional]] [[sections]])**

Let $E \overset{fb}{\to} \Sigma$ be a [[smooth vector bundle]] (def. \ref{VectorBundle}) over [[Minkowski spacetime]] (def. \ref{MinkowskiSpacetime}).

The [[vector space|vector]] [[spaces of smooth sections]] with restricted support from def. \ref{CompactlySourceCausalSupport} structures of [[topological vector spaces]] via def. \ref{TVSStructureOnSpacesOfSmoothSections}. We denote the [[dual topological vector spaces]] by

$$
  \Gamma'_{\Sigma}( E ^*)
    \;\coloneqq\;
  (\Gamma_{\Sigma,cp}(E))^*
  \,.
$$

This is called the space of _distributional sections_ of the bundle $\tilde{E}^*$.

The _[[support of a distribution|support of a distributional section]]_ $supp(u)$ is the set of points in $\Sigma$ such that
for every neighbourhood of that point $u$ does not vanish on all sections with support in that neighbourhood.

Imposing the same restrictions to the [[supports of distributions|supports of distributional sections]] as in def. \ref{CompactlySourceCausalSupport}, we have the following subspaces of distributional sections:

$$
  \Gamma'_{\Sigma,cp}(E^\ast) ,
  \Gamma'_{\Sigma,\pm cp}(E^\ast) ,
  \Gamma'_{\Sigma,scp}(E^\ast) ,
  \Gamma'_{\Sigma,fcp}(E^\ast) ,
  \Gamma'_{\Sigma,pcp}(E^\ast) ,
  \Gamma'_{\Sigma,tcp}(E^\ast)
  \;\subset\;
  \Gamma'_{\Sigma}(E^\ast) .
$$

=--

([Sanders 13](Green+hyperbolic+differential+operator#Sanders12), [Bär 14](Green+hyperbolic+differential+operator#Baer14))

As before in prop. \ref{DistributionsAreGeneralizedFunctions} the actual [[smooth sections]] yield
examples of distributional sections, and all distributional sections arise as [[limit of a sequence|limits]]
of integrations against smooth sections:

+-- {: .num_prop #NonSingularDistributionalSections}
###### Proposition
**([[non-singular distribution|non-singular distributional sections]])**

Let $E \overset{fb}{\to} \Sigma$ be a [[smooth vector bundle]] over [[Minkowski spacetime]] and let
$s \in \{cp, \pm cp, scp, tcp\}$ be any of the [[support]] conditions from def. \ref{CompactlySourceCausalSupport}.

Then the operation of regarding a [[compact support|compactly supported]] [[smooth section]] of the [[dual vector bundle]]
as a [[functional]] on sections with this support property is a [[dense subspace]] inclusion into the
[[topological vector space]] of distributional sections from def. \ref{DistributionalSections}:

$$
  \array{
    \Gamma_{\Sigma,cp}(\tilde E)
      &\overset{\phantom{A}u_{(-)}\phantom{A} }{\hookrightarrow}&
    \Gamma'_{\Sigma,s}(E)
    \\
    b &\mapsto& \left( \Phi \mapsto \underset{\Sigma}{\int} b(x) \cdot \Phi(x) \, dvol_\Sigma(x) \right)
  }
$$

=--

([Bär 14, lemma 2.15](Green+hyperbolic+differential+equation#Baer14}))




+-- {: .num_prop #DistributionsWithCausalSupports}
###### Proposition
**(distribution dualities with causally restricted supports)**

Let $E \overset{fb}{\to} \Sigma$ be a  [[smooth vector bundle]] (def. \ref{VectorBundle}) over [[Minkowski spacetime]] (def. \ref{MinkowskiSpacetime}).

Then there are the following [[isomorphisms]] of [[topological vector spaces]] between a) [[dual spaces]] of [[spaces of sections]]
with restricted causal support (def. \ref{CompactlySourceCausalSupport}) and equipped with the topology from def. \ref{TVSStructureOnSpacesOfSmoothSections} and b) spaces of distributional sections with restricted supports, according to def. \ref{DistributionalSections}:


$$
\begin{aligned}
  \Gamma_{\Sigma,cp}(E)^* &\simeq \Gamma'_{\Sigma}(E^\ast) ,
  \\
  \Gamma_{\Sigma,+cp}(E)^* &\simeq \Gamma'_{\Sigma,fcp}(E^\ast) ,
  \\
  \Gamma_{\Sigma,-cp}(E)^* &\simeq \Gamma'_{\Sigma,pcp}(E^\ast) ,
  \\
  \Gamma_{\Sigma,scp}(E)^* &\simeq \Gamma'_{\Sigma,tcp}(E^\ast) ,
  \\
  \Gamma_{\Sigma,fcp}(E)^* &\simeq \Gamma'_{\Sigma,+cp}(E^\ast) ,
  \\
  \Gamma_{\Sigma,pcp}(E)^* &\simeq \Gamma'_{\Sigma,-cp}(E^\ast) ,
  \\
  \Gamma_{\Sigma,tcp}(E)^* &\simeq \Gamma'_{\Sigma,scp}(E^\ast) ,
  \\
  \Gamma_{\Sigma}(E)^* &\simeq \Gamma'_{\Sigma,cp}(E^\ast) .
\end{aligned}
$$

=--

([Sanders 13, thm. 4.3](Green+hyperbolic+differential+operator#Sanders12), [Bär 14, lem. 2.14](Green+hyperbolic+differential+operator#Baer14))



The concept of linear observables naturally generalizes to that of [[multilinear map|multilinear observables]]:

+-- {: .num_defn #QuadraticObservables}
###### Definition
**([[quadratic form|quadratic]] [[off-shell]] [[observables]])**

Let $(E,\mathbf{L})$ be a [[Lagrangian field theory]] (def. \ref{LocalLagrangianDensityOnSecondOrderJetBundleOfTrivialVectorBundleOverMinkowskiSpacetime})
over a [[spacetime]] $\Sigma$
whose [[field bundle]] $E$ (def. \ref{FieldsAndFieldBundles}) is a [[super vector bundle|super]] [[vector bundle]].

The _[[external tensor product|external]] [[tensor product of vector bundles]]_ of the [[field bundle]]
$E \overset{fb}{\to} \Sigma$ with itself, denoted

$$
  E \boxtimes E \overset{}{\to} \Sigma \times \Sigma
$$

is the [[vector bundle]] over the [[Cartesian product]] $\Sigma \times \Sigma$, of [[spacetime]] with itself,
whose [[fiber]] over a pair of points $(x_1,x_2)$ is the [[tensor product]] $E_{x_1} \otimes E_{x_2}$ of the corresponding field fibers.

Given a [[field history]], hence a [[section]]  $\phi \in \Gamma_\Sigma(E)$ of the [[field bundle]], there is then
the induced section $\phi \boxtimes \phi \in \Gamma_{\Sigma \times \Sigma}(E \boxtimes E)$.

We say that an [[off-shell]] [[observable]]

$$
  A \;\colon\; \Gamma_\Sigma(E) \longrightarrow \mathbb{C}
$$

is _[[quadratic form|quadratic]]_ if it comes from a "[[bilinear map|bilinear]] observable", namely a smooth function on the [[space of sections]]
of the [[external tensor product|external]] [[tensor product of vector bundles|tensor product of]] the [[field bundle]]
with itself

$$
  B
   \;\colon\;
  \Gamma_{\Sigma \times \Sigma}(E \boxtimes E)_{\delta_{EL}\mathbf{L} = 0}
    \longrightarrow
  \mathbb{C}
  \,,
$$

as

$$
  A(\Phi) = B(\Phi,\Phi)
  \,.
$$

More explicitly: By prop. \ref{LinearObservablesAreTheCompactlySupportedDistributions} the quadratic observable $A$
is given by a [[compactly supported distribution]] [[distribution of two variables|of two variables]]
which in the notation of remark \ref{LinearObservablesAsGeneralizedFunctions} comes from a [[matrix]] of
[[generalized functions]]
$\beta_{a_1 a_2} \in \mathcal{E}'(\Sigma \times \Sigma, E \boxtimes E)$ as

$$
  A(\Phi)
    \;=\;
  \int_{\Sigma \times \Sigma} \Phi^{a_1}(x_1) \beta_{a_1 a_2}(x_1,x_2) \Phi^{a_2}(x_2)\, dvol_\Sigma(x_1) dvol_\Sigma(x_2)
  \,.
$$

This notation makes manifest how the concept of  quadratic observables is a generalization of that of [[quadratic forms]] coming from  [[bilinear forms]].

=--


+-- {: .num_defn #PolynomialObservables}
###### Definition
**([[polynomial]] [[off-shell]] [[observables]])**

Let $(E,\mathbf{L})$ be a [[Lagrangian field theory]] (def. \ref{LocalLagrangianDensityOnSecondOrderJetBundleOfTrivialVectorBundleOverMinkowskiSpacetime})
over a [[spacetime]] $\Sigma$
whose [[field bundle]] $E$ (def. \ref{FieldsAndFieldBundles}) is a [[super vector bundle|super]] [[vector bundle]].

An [[off-shell]] [[observable]] (def. \ref{Observable})

$$
  A \;\colon\; \Gamma_\Sigma(E)_{\delta_{EL}\mathbf{L} = 0} \longrightarrow \mathbb{C}
$$

is _[[polynomial]]_ if it is the [[sum]] of a constant, and a linear observable (def. \ref{LinearObservables}),
and a quadratic observable (def. \ref{QuadraticObservables}) and so on:

$$
  \begin{aligned}
    A(\Phi)
     & = \phantom{+}
    \alpha
    \\
    &
    \phantom{=}
      +
    \int_{\Sigma} \Phi^a(x) \alpha_a(x) \, dvol_\Sigma(x)
    \\
    &
    \phantom{=}
     +
    \int_{\Sigma^2} \Phi^{a_1}(x_1) \Phi^{a_2}(x_2) \alpha_{a_1 a_2}(x_1, x_2) \, dvol_\Sigma(x_1) dvol_\Sigma(x_2)
    \\
    &
    \phantom{=}
     +
    \int_{\Sigma^3} \Phi^{a_1}(x_1) \Phi^{a_2}(x_2) \Phi^{a_3}(x_3) \alpha_{a_1 a_2 a_3}(x_1,x_2,x_3) \, dvol_\Sigma(x_1) dvol_\Sigma(x_2) dvol_\Sigma(x^3)
    \\
    &
    \phantom{=}
     +
    \cdots
  \,.
  \end{aligned}
$$

=--

In summary, the above establishes that the [[Schwartz space|Schwartz]] theory of ([[compactly supported distributions|compactly supported]])
[[distributions]] neatly applies to characterize smooth polynomial observables on the [[diffeological space|diffeological]]
[[space of field histories]] for a [[field bundle]] which is a [[vector bundle]].


$\,$



**Polynomial on-shell Observables and Distributional solutions to PDEs**
{#PolynomialOnShellObservablesAreDistributionalSolutionsToTheEquationsOfMotion}

While every off-shell observable induces an on-shell observables
simply by restriction (eq:OffShellObservablesRestrictToOnShellObservables),
different off-shell observables may restrict to the _same_ on-shell observale.
It is therefore useful to find a condition on off-shell observables
that makes them equivalent to on-shell observables under restriction.
Here we discuss
in the case of sufficiently well behaved [[free field theory|free field]] [[equations of motion]]
-- namely [[Green hyperbolic differential equations]], def. \ref{GreenHyperbolicDifferentialOperator} below --
that this on-shell condition on the linear off-shell observables (def. \ref{LinearObservables})
is that they are [[distributional solution of a PDE|distributional solutions]] to the  [[formally adjoint differential operator|formal adjoint]] to the [[equations of motion]], under their identification with [[distributions]] via prop. \ref{LinearObservablesAreTheCompactlySupportedDistributions}.

While in general the [[equations of motion]] are not [[Green hyperbolic differential equations|Green hyperbolic]] --
namely not in the presence of implicit [[infinitesimal gauge symmetries]] discussed in _[Gauge symmetries](#GaugeSymmetries)_ below --
it turns out that up to a suitable notion of [[equivalence]] they are equivalent to those that are, this we discuss in _[Gauge fixing](#GaugeFixing)_ below.

$\,$


+-- {: .num_defn #DistributionalDerivatives}
###### Definition
**([[derivatives of distributions]] and [[distributional solutions of PDEs]])**

Given a [[pair]] of [[formally adjoint differential operators]] $P, P^\ast \colon \Gamma_\Sigma(E) \to \Gamma_\Sigma(E^\ast)$
(def. \ref{FormallyAdjointDifferentialOperators})
then the _[[derivative of distributions|distributional derivative]]_
of a [[distribution|distributional section]] $u \in \Gamma'_\Sigma(E)$ (def. \ref{DistributionalSections})
by $P$ is the distributional section $P u \in \Gamma'_\Sigma(E^\ast)$

$$
  P u
     \;\coloneqq\;
  u(P^\ast(-)) \;\colon\; \Gamma_{\Sigma,cp}(E^\ast)
  \,.
$$

If

$$
  P u = 0 \;\in\; \Gamma'_\Sigma(E^\ast)
$$

then we say that $u$ is a [[distributional solution]] (or [[generalized solution]]) of the homogeneous [[differential equation]]
defined by $P$.

=--

+-- {: .num_example #DistributionalPDESolutionsFromOrdinaryPDESolutions}
###### Example
**(ordinary [[PDE]] solutions are [[generalized solutions of a PDE|generalized solutions]])**

Let $E \overset{fb}{\to} \Sigma$ be a [[smooth vector bundle]] over [[Minkowski spacetime]]
and let $P, P^\ast \colon \Gamma_\Sigma(E) \to \Gamma_\Sigma(E^\ast)$ be a [[pair]] of [[formally adjoint differential operators]].

Then for every [[non-singular distribution|non-singular distributional section]] $u_{\Phi} \in \Gamma'_{\Sigma}(E^\ast)$
coming from an actual smooth section $\Phi \in \Gamma_\Sigma(E)$ via prop. \ref{NonSingularDistributionalSections}
the [[derivative of distributions]] (def. \ref{DistributionalDerivatives}) is the distributional section
induced from the ordinary derivative of smooth functions:

$$
  P u_\Phi \;=\; u_{P \Phi}
  \,.
$$

In particular $u_\Phi$ is a [[generalized solution of a PDE|distributional solution]] to the [[PDE]] precisely
if $\Phi$ is an ordinary solution:

$$
  P u_\Phi \;=\; 0
  \phantom{AAA}
  \Leftrightarrow
  \phantom{AAA}
  P \Phi = 0
  \,.
$$


=--


+-- {: .proof}
###### Proof

For all $b \in \Gamma_{\Sigma,cp}(E)$ we have

$$
  \begin{aligned}
    (P u_\Phi)(b)
    & =
    u_\Phi(P^\ast b)
    \\
    & =
    \int u \cdot P^\ast b \, dvol
    \\
    & =
    \int (P u) \cdot b \, dvol
    \\
    & =
    u_{P \Phi}(b)
  \end{aligned}
$$

where all steps are by the definitions except the third, which is by the definition of
[[formally adjoint differential operator]] (def. \ref{FormallyAdjointDifferentialOperators}),
using that by the [[compact support]] of $b$ and the [[Stokes theorem]] (prop. \ref{StokesTheorem})
the term $K(\Phi,b)$ in def. \ref{FormallyAdjointDifferentialOperators} does not contribute to the [[integral]].

=--




+-- {: .num_defn #AdvancedAndRetardedGreenFunctions}
###### Definition
**([[advanced and retarded Green functions]] and [[causal Green function]])**

Let $E \overset{fb}{\to} \Sigma$ be a [[field bundle]] (def. \ref{FieldsAndFieldBundles}) which is a [[vector bundle]] (def. \ref{VectorBundle}) over [[Minkowski spacetime]] (def. \ref{MinkowskiSpacetime}).
Let $P \;\colon\;\Gamma_\Sigma(E) \to \Gamma_\Sigma(E^\ast)$ be a [[differential operator]] (def. \ref{DifferentialOperator}) on its [[space of smooth sections]].

Then a [[linear map]]

$$
  \mathrm{G}_{P,\pm}
    \;\colon\;
  \Gamma_{\Sigma, cp}(E^\ast)
    \longrightarrow
  \Gamma_{\Sigma, \pm cp}(E)
$$


from [[spaces of smooth sections]] of [[compact support]] to spaces of sections of causally sourced future/past support (def. \ref{CompactlySourceCausalSupport}) is called an _[[advanced or retarded Green function]]_ for $P$, respectively, if

1. for all $\Phi \in \Gamma_{\Sigma,cp}(E_1)$ we have

   $$
     \label{AdvancedRetardedGreenFunctionIsLeftInverseToDiffOperator}
     G_{P,\pm} \circ P(\Phi) = \Phi
   $$

   and

   $$
     \label{AdvancedRetardedGreenFunctionIsRightInverseToDiffOperator}
     P \circ G_{P,\pm}(\Phi) = \Phi
   $$

1. the [[support]] of $G_{P,\pm}(\Phi)$ is in the [[closed future cone]] or [[closed past cone]] of the support of $\Phi$, respectively.

If the advanced/retarded Green functions $G_{P\pm}$ exists, then the difference

$$
  \label{CausalGreenFunction}
  \mathrm{G}_P \coloneqq \mathrm{G}_{P,+} - \mathrm{G}_{P,-}
$$

is called the _[[causal Green function]]_.

=--

(e.g. [Bär 14, def. 3.2, cor. 3.10](Green+hyperbolic+differential+equation#Baer14}))


+-- {: .num_defn #GreenHyperbolicDifferentialOperator}
###### Definition
**([[Green hyperbolic differential equation]])**

Let $E \overset{fb}{\to} \Sigma$ be a [[field bundle]] (def. \ref{FieldsAndFieldBundles}) which is a [[vector bundle]] (def. \ref{VectorBundle}) over [[Minkowski spacetime]] (def. \ref{MinkowskiSpacetime}).

A [[differential operator]] (def. \ref{NormallyHyperbolicDifferentialOperator})

$$
  P
    \;\colon\;
  \Gamma_\Sigma(E)
    \longrightarrow
  \Gamma_{\Sigma}(E^\ast)
$$

is called a _[[Green hyperbolic differential operator]]_ if $P$ as well as its [[formal adjoint differential operator]] $P^\ast$ (def. \ref{FormallyAdjointDifferentialOperators}) admit [[advanced and retarded Green functions]] (def. \ref{AdvancedAndRetardedGreenFunctions}).

=--

([Bär 14, def. 3.2](Green+hyperbolic+partial+differential+equation##Baer14}), [Khavkine 14, def. 2.2](Green+hyperbolic+partial+differential+equation#Khavkine14))


The two archtypical examples of [[Green hyperbolic differential equations]] are the [[Klein-Gordon equation]]
and the [[Dirac equation]] on [[Minkowski spacetime]]. For the moment we just cite the existence of the
[[advanced and retarded Green functions]] for these, we will work these out in detail below in _[Propagators](#Propagators)_.

+-- {: .num_example #GreenHyperbolicKleinGordonEquation}
###### Example
**([[Klein-Gordon equation]] is a [[Green hyperbolic differential equation]])**

The [[Klein-Gordon equation]], hence the [[Euler-Lagrange equation|Euler-Lagrange]] [[equation of motion]]
of the [[free field theory|free]] [[scalar field]] (example \ref{EquationOfMotionOfFreeRealScalarField})
is a [[Green hyperbolic differential equation]] (def. \ref{GreenHyperbolicDifferentialOperator})
and [[formal adjoint differential operator|formally self-adjoint]] (example \ref{FormallySelfAdjointKleinGordonOperator}).

=--

(e. g. [Bär-Ginoux-Pfaeffle 07](Klein-Gordon+equation#BaerGinouxPfaeffle07), [Bär 14, example 3.3](#Baer14))

+-- {: .num_example #GreenHyperbolicDiracOperator}
###### Example
**([[Dirac operator]] is [[Green hyperbolic differential operator|Green hyperbolic]])**

The [[Dirac equation]], hence the [[Euler-Lagrange equation|Euler-Lagrange]] [[equation of motion]]
of the [[mass|massive]] [[free field theory|free]] [[Dirac field]]  (example \ref{EquationOfMotionOfDiracFieldIsDiracEquation}) is a [[Green hyperbolic differential equation]] (def. \ref{GreenHyperbolicDifferentialOperator})
and [[formally adjoint differential operator|formally anti self-adjoint]] (example \ref{DiracOperatorOnDiracSpinorsIsFormallySelfAdjointDifferentialOperator}).

=--

([Bär 14, corollary 3.15, example 3.16](#Baer14))


+-- {: .num_example #CausalGreenFunctionOfFormallyAdjointDifferentialOperatorAreFormallyAdjoint}
###### Example
**([[causal Green functions]] of [[formally adjoint differential operator|formally adjoint]] [[Green hyperbolic differential operators]] are [[formally adjoint differential operator|formally adjoint]])**

Let

$$
  P, P^\ast \;\colon\;\Gamma_\Sigma(E) \overset{}{\longrightarrow} \Gamma_\Sigma(E^\ast)
$$

be a pair of [[Green hyperbolic differential operators]] (def. \ref{GreenHyperbolicDifferentialOperator}) which are [[formally adjoint differential operator|formally adjoint]] (def. \ref{FormallyAdjointDifferentialOperators}).  Then also their [[causal Green functions]] $\mathrm{G}_P$ and $G_{P^\ast}$ (def. \ref{AdvancedAndRetardedGreenFunctions}) are [[formally adjoint differential operators]], up to a sign:

$$
  \left(
    \mathrm{G}_P
  \right)^\ast
  \;=\;
  - \mathrm{G}_{P^\ast}
  \,.
$$

=--

([Khavkine 14, (24), (25)](Green+hyperbolic+partial+differential+equation#Khavkine14))

We did not require that the [[advanced and retarded Green functions]] of a [[Green hyperbolic differential operator]] are unique;
in fact this is automatic:

+-- {: .num_prop #AdvancedAndRetardedGreenFunctionsForGreenHyperbolicOperatorAreUnique}
###### Proposition
**([[advanced and retarded Green functions]] of [[Green hyperbolic differential operator]] are unique)**

The [[advanced and retarded Green functions]] (def. \ref{AdvancedAndRetardedGreenFunctions}) of a [[Green hyperbolic differential operator]] (def. \ref{GreenHyperbolicDifferentialOperator}) are unique.

=--

([Bär 14, cor. 3.12](Green+hyperbolic+differential+operator#Baer14})


Moreover we did not require that the [[advanced and retarded Green functions]] of a [[Green hyperbolic differential operator]]
come from [[integral kernels]] ("[[propagators]]"). This, too, is automatic:

+-- {: .num_prop #GreenFunctionsAreContinuous}
###### Proposition
**([[causal Green functions]] of [[Green hyperbolic differential operators]] are [[continuous linear maps]])**

Given a [[Green hyperbolic differential operator]] $P$ (def. \ref{GreenHyperbolicDifferentialOperator}), the advanced, retarded and causal Green functions of $P$ (def. \ref{AdvancedAndRetardedGreenFunctions}) are [[continuous linear maps]] with respect to the [[topological vector space]] structure from def. \ref{TVSStructureOnSpacesOfSmoothSections} and also have a unique continuous [[extension]] to the spaces of sections with larger support (def. \ref{CompactlySourceCausalSupport}) as follows:

$$
\begin{aligned}
  \mathrm{G}_{P,+}
    &\;\colon\;
  \Gamma_{\Sigma, pcp}(\tilde E^\ast)
    \longrightarrow
  \Gamma_{\Sigma, pcp}(E) ,
  \\
  \mathrm{G}_{P,-}
    &\;\colon\;
  \Gamma_{\Sigma, fcp}(\tilde E^\ast)
    \longrightarrow
  \Gamma_{\Sigma, fcp}(E) ,
  \\
  \mathrm{G}_{P}
    &\;\colon\;
  \Gamma_{\Sigma, tcp}(\tilde E^\ast)
    \longrightarrow
  \Gamma_{\Sigma}(E) ,
\end{aligned}
$$

such that we still have the relation

$$
  \mathrm{G}_P = \mathrm{G}_{P,+} - \mathrm{G}_{P,-}
$$

and

$$
  P \circ \mathrm{G}_{P,\pm} = \mathrm{G}_{P,\pm} \circ P = id
$$

and

$$
  supp \mathrm{G}_{P,\pm}(\tilde{\alpha}^*) \subseteq J^\pm(supp \tilde{\alpha}^*)
  \,.
$$

By the _[[Schwartz kernel theorem]]_ the continuity of $\mathrm{G}_{\pm}, \mathrm{G}$
implies that there are [[integral kernels]]

$$
  \Delta_{\pm}  \;\in\; \Gamma'_{\Sigma \times \Sigma}( E \boxtimes_\Sigma E )
$$

such that, in the notation of [[generalized functions]],

$$
  (G_{\pm} \alpha^\ast)(x)
   \;=\;
  \underset{\Sigma}{\int}
    \Delta_\pm(x,y) \cdot \alpha^\ast(y) \, dvol_\Sigma(y)
  \,.
$$

These [[integral kernels]] are called the _[[advanced and retarded propagators]]_. Similarly the combination

$$
  \label{CausalPropagator}
  \Delta \;\coloneqq\; \Delta_+ - \Delta_-
$$

is called the _[[causal propagator]]_.

=--

([Bär 14, thm. 3.8, cor. 3.11](Green+hyperbolic+differential+operator#Baer14))




We now come to the main theorem on polynomial observables:

+-- {: .num_lemma #ExactSequenceOfGreenHyperbolicSystem}
###### Lemma
**([[exact sequence]] of [[Green hyperbolic differential operator]])**

Let $\Gamma_\Sigma(E) \overset{P}{\longrightarrow} \Gamma_\Sigma(E^\ast)$ be a [[Green hyperbolic differential operator]] (def. \ref{GreenHyperbolicDifferentialOperator}) with [[causal Green function]] $\mathrm{G}$ (def. \ref{GreenHyperbolicDifferentialOperator}). Then the sequences

$$
  \label{GreenOperatorExactSequenceFirst}
  \array{
  0
    &\to&
  \Gamma_{\Sigma,cp}(E)
   &\overset{P}{\longrightarrow}&
  \Gamma_{\Sigma,cp}(E^\ast)
    &\overset{\mathrm{G}_P}{\longrightarrow}&
  \Gamma_{\Sigma,scp}(E)
    &\overset{P}{\longrightarrow}&
  \Gamma_{\Sigma,scp}(E^\ast)
     &\to&
  0
  \\
  \\
  0
    &\to&
  \Gamma_{\Sigma,tcp}(E)
   &\overset{P}{\longrightarrow}&
  \Gamma_{\Sigma,tcp}(E^\ast)
    &\overset{\mathrm{G}_P}{\longrightarrow}&
  \Gamma_{\Sigma}(E)
    &\overset{P}{\longrightarrow}&
  \Gamma_{\Sigma}(E^\ast)
     &\to&
  0
  }
$$

of these operators restricted to functions with causally restricted supports as indicated (def. \ref{CompactlySourceCausalSupport})
are [[exact sequence]]s of [[topological vector spaces]] and continuous [[linear map]]s between them.

Under passing to [[dual spaces]] and using the isomorphisms of spaces of distributional sections (def. \ref{DistributionalSections}) from prop. \ref{DistributionsWithCausalSupports} this yields the following dual [[exact sequence]] of [[topological vector spaces]] and continuous [[linear map]] between them:

$$
  \label{GreenHyperbolicOperatorDualExactSequence}
  \array{
  0
    &\to&
  \Gamma'_{\Sigma,tcp}(E)
   &\overset{P^*}{\longrightarrow}&
  \Gamma'_{\Sigma,tcp}(E^\ast)
    &\overset{-\mathrm{G}_{P^*}}{\longrightarrow}&
  \Gamma'_{\Sigma}(E)
    &\overset{P^*}{\longrightarrow}&
  \Gamma'_{\Sigma}(E^\ast)
    &\to&
  0
  \\
  \\
  0
    &\to&
  \Gamma'_{\Sigma,cp}(E)
   &\overset{P^*}{\longrightarrow}&
  \Gamma'_{\Sigma,cp}(E^\ast)
    &\overset{-\mathrm{G}_{P^*}}{\longrightarrow}&
  \Gamma'_{\Sigma,scp}(E)
    &\overset{P^*}{\longrightarrow}&
  \Gamma'_{\Sigma,scp}(E^\ast)
     &\to&
  0
  }
$$

=--

This is due to [[Igor Khavkine]], based on ([Khavkine 14, prop. 2.1](#Khavkine14));
for **proof** see at _[[Green hyperbolic differential operator]]_  [this lemma](Green+hyperbolic+partial+differential+equation#ExactSequenceOfGreenHyperbolicSystem).


+-- {: .num_cor #OnShellSpaceOfFieldHistoriesForFreeFieldTheoryGreenHyperbolic}
###### Corollary
**([[on-shell]] [[space of field histories]] for [[Green hyperbolic differential operator|Green hyperbolic]] [[free field theories]])**

Let $(E,\mathbf{L})$ be a [[free field theory]] [[Lagrangian field theory]] (def. \ref{LagrangianDensityForDiracField})
whose [[Euler-Lagrange equation|Euler-Lagrange]] [[equation of motion]] $P \Phi = 0$ is [[Green hyperbolic differential operator|Green hyperbolic]] (def. \ref{GreenHyperbolicDifferentialOperator}).

Then the [[on-shell]] [[space of field histories]] (or of [[field histories]] with spatially compact support, def. \ref{CompactlySourceCausalSupport}) is, as a [[vector space]], [[linear isomorphism|linearly isomorphic]]
to the [[quotient space]] of [[compact support|compactly supported]] sections (or of temporally compactly supported sections, def. \ref{CompactlySourceCausalSupport}) by the [[image]] of the [[differential operator]] $P$, and this isomorphism
is given by the [[causal Green function]] $\mathrm{G}_P$ (eq:CausalGreenFunction)

$$
  \label{SolutionSpaceIsomorphicToQuotientByImP}
  \array{
    \Gamma_{\Sigma,tcp}(E^\ast)/im(P)
      &\underoverset{\simeq}{\phantom{A}\mathrm{G}_P \phantom{A}}{\longrightarrow}&
    ker(P) \;=\; \Gamma_{\Sigma}(E)_{\delta_{EL}\mathbf{L} = 0}
    \\
    \Gamma_{\Sigma,cp}(E^\ast)/im(P)
      &\underoverset{\simeq}{\phantom{A}\mathrm{G}_P\phantom{A}}{\longrightarrow}&
    ker_{scp}(P) \;=\; \Gamma_{\Sigma,scp}(E)_{\delta_{EL}\mathbf{L} = 0}
    \,.
  }
$$

=--


+-- {: .proof}
###### Proof

This is a direct consequence of the [[exact sequence|exactness]] of the sequence (eq:GreenOperatorExactSequenceFirst)
in lemma \ref{ExactSequenceOfGreenHyperbolicSystem}.

We spell this out for the statement for $\Gamma_{\Sigma,scp}(E)_{\delta_{EL} \mathbf{L} = 0}$,
which follows from the first line in (eq:GreenOperatorExactSequenceFirst), the first statement
similarly follows from the second line of (eq:GreenOperatorExactSequenceFirst):

First the [[on-shell]] [[space of field histories]] is the [[kernel]] of $P$, by definition
of [[free field theory]] (def. \ref{LagrangianDensityForDiracField})

$$
  \Gamma_{\Sigma,scp}(E)_{\delta_{EL} \mathbf{L} = 0}
  \;=\;
  ker_{scp}(P)
  \,.
$$

Second, exactness of the sequence (eq:GreenOperatorExactSequenceFirst) at $\Gamma_{\Sigma,scp}(E)$ means that the
[[kernel]] $ker_{scp}(P)$ of $P$ equals the [[image]] $im(\mathrm{G}_{P})$. But by exactness of the sequence
at $\Gamma_{\Sigma,cp}(E^\ast)$ it follows that $\mathrm{G}_P$ becomes [[injective]] on the [[quotient space]]
$\Gamma_{\Sigma,cp}(E)^\ast/im(P)$. Therefore on this quotient space it becomes an isomorphism onto its [[image]].

=--

+-- {: .num_reamrk #LinearOnShellObservablesAreTheGeneralizedPDESolutionsNaiveVersion}
###### Remark

Under passing to [[dual vector spaces]], the linear isomorphism in corollary \ref{OnShellSpaceOfFieldHistoriesForFreeFieldTheoryGreenHyperbolic}
in turn yields [[linear isomorphisms]] of the form

$$
  \label{DualSolutionSpaceIsomorphicToQuotientByImP}
  \array{
    \left(\Gamma_{\Sigma,cp}(E^\ast)/im(P)\right)^\ast
      &\underoverset{\simeq}{(-)\circ \mathrm{G}_P}{\longleftarrow}&
    \left(ker_{scp}(P)\right)^\ast
    \\
    \left(\Gamma_\Sigma(E^\ast)/im(P)\right)^\ast
      &\underoverset{\simeq}{(-)\circ \mathrm{G}_P }{\longleftarrow}&
    \left(ker(P)\right)^\ast
  }
  \,.
$$

Except possibly for the issue of [[continuous map|continuity]] this says that
the linear on-shell [[observables]] (def. \ref{LinearObservables}) of a [[Green hyperbolic differential equation|Green hyperbolic]] [[free field theory]] are equivalently those linear off-shell observables which
are [[generalized solution of a PDE|generalized solutions]] of the [[formally adjoint differential operator|formally dual]]
[[equation of motion]] according to def. \ref{DistributionalDerivatives}.

That this remains true also for [[topological vector space]] [[structure]] follows with the dual exact sequence
(eq:GreenHyperbolicOperatorDualExactSequence). This is the statement of prop. \ref{DistributionsOnSolutionSpaceAreTheGeneralizedPDESolutions} below.

=--


+-- {: .num_prop #DistributionsOnSolutionSpaceAreTheGeneralizedPDESolutions}
###### Proposition
**([[distributions|distributional sections]] on a [[Green hyperbolic differential equation|Green hyperbolic]] solution space are the [[generalized PDE solutions]])**

Let $P, P \ast \;\colon\; \Gamma_\Sigma(E) \overset{}{\longrightarrow} \Gamma_\Sigma(E^\ast)$ be a pair of  [[Green hyperbolic differential operators]] (def. \ref{GreenHyperbolicDifferentialOperator}) which are [[formally adjoint differential operator|formally adjoint]] (def. \ref{FormallyAdjointDifferentialOperators}).

Then a [[continuous linear functional]] on the solution space

$$
  u_{sol} \in \left(ker(P)\right)^\ast
$$

is equivalently a [[distribution|distributional section]] (def. \ref{DistributionalSections})
whose [[support of a distribution|support]] is spacelike compact (def. \ref{CompactlySourceCausalSupport}, prop. \ref{DistributionsWithCausalSupports})

$$
  u \in \Gamma'_{\Sigma,scp}(E^\ast)
$$

and which is a [[distributional solution of a PDE|distributional solution]] (def. \ref{DistributionalDerivatives}) to the differential equation

$$
  P^\ast u = 0
  \,.
$$

Similarly, a [[continuous linear functional]] on the subspace of solutions that have spatially compact support (def. \ref{CompactlySourceCausalSupport})

$$
  u_{sol} \in \left(ker(P)_{scp}\right)^\ast
$$

is equivalently a [[distribution|distributional section]] (def. \ref{DistributionalSections})
without constraint on its [[support of a distribution|distributional support]]

$$
  u \in \Gamma'_{\Sigma}(E^\ast)
$$

and which is a [[distributional solution of a PDE|distributional solution]] (def. \ref{DistributionalDerivatives}) to the differential equation

$$
  P^\ast u = 0
  \,.
$$


Moreover, these [[linear isomorphisms]] are both given by composition with the [[causal Green function]] $\mathrm{G}$ (def. \ref{AdvancedAndRetardedGreenFunctions}):

$$
  \array{
    \left(ker(P)\right)^\ast
       &\underoverset{\simeq}{(-)\circ \mathrm{G}}{\longrightarrow}&
     \left\{
       u \in  \Gamma'_{\Sigma,scp}(E^\ast)
       \,\vert\,
       P^\ast u = 0
     \right\}
    \\
    \left(ker_{scp}(P)\right)^\ast
       &\underoverset{\simeq}{(-)\circ \mathrm{G}}{\longrightarrow}&
     \left\{
       u \in  \Gamma'_{\Sigma}(E^\ast)
       \,\vert\,
       P^\ast u = 0
     \right\}
  }
  \,.
$$

=--

This follows from the [[exact sequence]] in lemma \ref{ExactSequenceOfGreenHyperbolicSystem}.
For details of the **proof** see at _[[Green hyperbolic differential operator]]_ [this prop.](Green+hyperbolic+partial+differential+equation#DistributionsOnSolutionSpaceAreTheGeneralizedPDESolutions),
due to [[Igor Khavkine]].

In conclusion we have found the following:


+-- {: .num_theorem #LinearObservablesForGreeFreeFieldTheoryAreDistributionalSolutionsToTheEquationsOfMotion}
###### Theorem
**(linear [[observables]] of [[Green hyperbolic differential operator|Green]] [[free field theory]] are the [[distributional solution of a PDE|distributional solutions]] to the [[formally adjoint differential operator|formally adjoint]] [[equations of motion]])**

Let $(E,\mathbf{L})$ be a [[Lagrangian field theory|Lagrangian]] [[free field theory]] (def. \ref{FreeFieldTheory})
which is a [[free field theory]] (def. \ref{FreeFieldTheory})
whose [[Euler-Lagrange equation|Euler-Lagrange]] [[differential equation|differential]] [[equation of motion]] $P \Phi = 0$ (def. \ref{EulerLagrangeEquationsOnTrivialVectorFieldBundleOverMinkowskiSpacetime}) is [[Green hyperbolic differential equation|Green hyperbolic]] (def. \ref{GreenHyperbolicDifferentialOperator}), such as the [[Klein-Gordon equation]] (example \ref{GreenHyperbolicKleinGordonEquation})
or the [[Dirac equation]] (example \ref{GreenHyperbolicDiracOperator}). Then:

1. The linear off-shell observables (def. \ref{LinearObservables}) are equivalently the
   [[compactly supported distribution|compactly supported distributional sections]]  (def. \ref{DistributionalSections})
   of the [[dual vector bundle]] (def. \ref{DualVectorBundle}) of the [[field  bundle]]:

   $$
     LinObs(E)
      \;\simeq\;
     \Gamma'_{\Sigma,cp}(E^\ast)
   $$

1. The linear on-shell [[observables]] (def. \ref{LinearObservables}) are equivalently
   those spacelike compactly supported [[distribution|compactly distributional sections]]  (def. \ref{DistributionalSections})
   which are [[distributional solution of a PDE|distributional solutions]] of the [[formally adjoint differential operator|formally adjoint]] [[equations of motion]] (def. \ref{FormallyAdjointDifferentialOperators}), and this isomorphism is exhibited by precomposition with the [[causal propagator]] $\mathrm{G}$:

   $$
     LinObs(E,\mathbf{L})
      \;\underoverset{\simeq}{\phantom{A} \mathrm{G}_P \phantom{A}}{\longleftarrow}\;
     \left\{
       A \in \Gamma'_{\Sigma,scp}(E^\ast)
       \;\vert\;
       P^\ast A = 0
     \right\}
   $$

   Similarly the linear on-shell observables on spacelike compactly supported on-shell field histories (eq:SpaceOfObservablesOnFieldHistoriesOfSpatiallyCompactSupport) are equivalently the [[distributional solution of a PDE|distributional solutions]] without constraint on their [[support of a distribution|support]]:

   $$
     LinObs(E_{scp},\mathbf{L})
      \;\underoverset{\simeq}{\phantom{A} \mathrm{G}_P \phantom{A}}{\longleftarrow}\;
     \left\{
       A \in \Gamma'_{\Sigma}(E^\ast)
       \;\vert\;
       P^\ast A = 0
     \right\}
   $$

=--


+-- {: .proof}
###### Proof

The first statement follows with prop. \ref{LinearObservablesAreTheCompactlySupportedDistributions}
applied componentwise. The same proof applies verbatim to the subspace of solutions,
showing that $LinObs(E,\mathbf{L}) \simeq \left( ker(P)\right)^\ast$, with the [[dual topological vector space]] on the right.
With this the second statement follows by prop. \ref{DistributionsOnSolutionSpaceAreTheGeneralizedPDESolutions}.

=--

We will be interested in those linear observables which under the identification from theorem \ref{LinearObservablesForGreeFreeFieldTheoryAreDistributionalSolutionsToTheEquationsOfMotion} correspond to the [[non-singular distributions]] (because on these the [[Poisson-Peierls bracket]] of the theory is defined, theorem \ref{PPeierlsBracket} below):

+-- {: .num_defn #RegularLinearFieldObservables}
###### Definition
**(regular linear field observables and [[operator-valued distribution|observable-valued distributions]])**

Let $(E,\mathbf{L})$ be a [[free field theory|free]] [[Lagrangian field theory]] (def. \ref{FreeFieldTheory}) whose [[Euler-Lagrange equation|Euler-Lagrange]] [[equations of motion]] (prop. \ref{EulerLagrangeFormIsSectionOfLocalCotangentBundleOfJetBundleGaugeActionLieAlgebroid}) is [[Green hyperbolic differential equation|Green hyperbolic]] (def. \ref{GreenHyperbolicDifferentialOperator}).

Define the _regular_ linear field observables among the linear on-shell observables (def. \ref{LinearObservables}) to be the [[non-singular distributions]] on the [[on-shell]] [[space of field histories]], hence the [[image]]

$$
  LinObs(E_{scp},\mathbf{L})
    \hookrightarrow
  LinObs(E_{scp},\mathbf{L})
$$

of the map

$$
  \label{RegularLinearObservables}
  \array{
    \mathbf{\Phi}
      &\colon&
    \Gamma_{\Sigma,cp}(E^\ast)
      &\longrightarrow&
    LinObs(E_{scp},\mathbf{L})
      &\hookrightarrow&
    Obs(E_{scp},\mathbf{L})
    \\
    && \alpha^\ast
    &\mapsto&
    \left(
      \Phi
        \mapsto
      \underset{\Sigma}{\int} \alpha^\ast_a(x) \cdot \Phi^a(x)
       \, dvol_\Sigma(x)
    \right)
  }
$$

By lemma \ref{ExactSequenceOfGreenHyperbolicSystem} every $\Phi \in \Gamma_{\Sigma,scp}(E)$ is in the image of $\mathrm{G}$ and by example \ref{CausalGreenFunctionOfFormallyAdjointDifferentialOperatorAreFormallyAdjoint} this implies that the [[kernel]] of this map is the [[image]] of $P \;\colon\; \Gamma_{\Sigma,cp}(E) \to \Gamma_{\Sigma,cp}(E^\ast)$:

$$
  \label{RegularLinearObservablesAreCompactlySupportedSectionsModuloImageOfP}
  LinObs(E_{scp},\mathbf{L})^{reg}
   \;\simeq\;
  \Gamma_{\Sigma,scp}(E^\ast)/im(P)
  \,.
$$

The point-evaluation field observables $\mathbf{\Psi}^a(x)$ (example \ref{PointEvaluationObservables}) are linear observables (example \ref{LinearPointEvaluationObservables}) but far from being regular (eq:RegularLinearObservables)
(except in [[spacetime]] [[dimension]] $p +1 = 0+1$). But the regular observables are precisely the
averages ("smearings") of these point evaluation observables against compactly supported weights.

Viewed this way, the defining inclusion of the regular linear observables (eq:RegularLinearObservables) is itself
an _[[operator-valued distribution|observable valued distribution]]_

$$
  \label{AverageOfFieldObservableIsRegularLinearObservables}
  \array{
    \mathbf{\Phi} &\colon& \Gamma_{\Sigma,cp}(E^\ast) &\hookrightarrow& LinObs(E,\mathbf{L})
    \\
    && \alpha^\ast &\mapsto& \underset{\Sigma}{\int} \alpha^\ast_a(x) \mathbf{\Phi}^a(x)\, dvol_\Sigma(x)
  }
$$

which to a "smearing function" $\alpha^\ast$ assigns the observable which is the field observable smeared by (i.e. averaged against)
that smearing function.

Below in _[Free quantum fields](#FreeQuantumFields)_ we discuss how the [[polynomial Poisson algebra]] of regular polynomial observables of a [[free field theory]] may be [[deformation quantization|deformed]] to a [[non-commutative algebra|non-commutative]] [[algebra of quantum observables]]. Often this may be [[representation|represented]] by [[linear operators]] acting on some [[Hilbert space]].
In this case then $\mathbf{\Phi}$ above becomes a [[continuous linear functional]] from $\Gamma_{\Sigma,cp}(E)$ to a space of
linear operators on some Hilbert space. As such it is then called an _[[operator-valued distribution]]_.

=--


$\,$


**Local observables**
 {#LocalObservablesByTransgression}

We now discuss the sub-class of those [[observables]] which are "[[local field theory|local]]".

+-- {: .num_defn #SpacetimeSupport}
###### Definition
**(spacetime support)**

Let $E \overset{fb}{\to} \Sigma$ be a [[field bundle]] over a [[spacetime]] $\Sigma$ (def. \ref{FieldsAndFieldBundles}),
with induced [[jet bundle]] $J^\infty_\Sigma(E)$

For every [[subset]] $S \subset \Sigma$ let

$$
  \array{
    J^\infty_\Sigma(E)\vert_S
      &\overset{\iota_S}{\hookrightarrow}&
    J^\infty_\Sigma(E)
    \\
    \downarrow &(pb)& \downarrow
    \\
    S &\hookrightarrow& \Sigma
  }
$$

be the corresponding restriction of the [[jet bundle]] of $E$.

The _spacetime support  _ $supp_\Sigma(A)$ of a [[differential form]] $A \in \Omega^\bullet(J^\infty_\Sigma(E))$
on the [[jet bundle]] of $E$ is the [[topological closure]] of the maximal subset $S \subset \Sigma$
such that the restriction of $A$ to the jet bundle restrited to this subset vanishes:

$$
  supp_\Sigma(A) \coloneqq Cl( \{ x \in \Sigma |  \iota_{\{x\}^\ast A = 0} \} )
$$

We write

$$
  \Omega^{r,s}_{\Sigma,cp}(E)
  \coloneqq
  \left\{
    A \in \Omega^{r,s}_\Sigma(E)
    \;\vert\;
    supp_\Sigma(A) \, \text{is compact}
  \right\}
    \;\hookrightarrow\;
  \Omega^{r,s}_\Sigma(E)
$$

for the subspace of differential forms on the jet bundle whose spacetime support is a [[compact subspace]].

=--

+-- {: .num_defn #TransgressionOfVariationalDifferentialFormsToConfigrationSpaces}
###### Definition
**([[transgression of variational differential forms]] to [[space of field histories]])**


Let $E \overset{fb}{\to} \Sigma$ be a [[field bundle]] over a [[spacetime]] $\Sigma$ (def. \ref{FieldsAndFieldBundles}).
and let
$$
  \Sigma_r \hookrightarrow \Sigma
$$

be a [[submanifold]] of [[spacetime]] of dimension $r \in \mathbb{N}$. Recall the [[space of field histories]]
restricted to its [[infinitesimal neighbourhood]], denoted $\Gamma_{\Sigma_r}(E)$ (def. \ref{FieldsAndFieldBundles}).


Then the operation of _[[transgression of variational differential forms]]_ to $\Sigma_r$ is the [[linear map]]

$$
  \tau_{\Sigma_r}
   \;\colon\;
  \Omega^{\bullet,\bullet}_{\Sigma,cp}(E)
    \overset{  }{\longrightarrow}
  \Omega^\bullet\left(
    \Gamma_{\Sigma_r}(E)
   \right)
$$

that sends a variational differential form $A \in \Omega^{\bullet,\bullet}_{\Sigma,cp}(E)$
to the differential form $\tau_{\Sigma_r} \in \Omega^\bullet(\Gamma_{\Sigma_r}(E))$
(def. \ref{DifferentialFormsOnDiffeologicalSpaces}, example \ref{ModuliOfSDifferentialForms})
which to a smooth family on field histories

$$
  \Phi_{(-)}(-) \;\colon\; U \times N_\Sigma \Sigma_r \longrightarrow E
$$

assigns the differential form given by first forming the [[pullback of differential forms]] along the family of [[jet prolongation]] $j^\infty_\Sigma(\Phi_{(-)})$ followed by the [[integration of differential forms]] over $\Sigma_r$:

$$
  (\tau_{\Sigma}A)_\Phi
    \;\coloneqq\;
  \int_{\Sigma_r}  (j^\infty_\Sigma(\Phi_{(-)}))^\ast A
  \;\in\;
  \Omega^\bullet(U)
  \,.
$$


=--


+-- {: .num_remark #TransgressionToDimensionrSupportedOnHorizontalrForms}
###### Remark
**([[transgression of variational differential forms|transgression]] to dimension $r$ picks out horizontal $r$-forms)**

In def. \ref{TransgressionOfVariationalDifferentialFormsToConfigrationSpaces}
we regard [[integration of differential forms]] over $\Sigma_r$ as an operation defined on differential forms
of all degrees, which vanishes except on forms of degree $r$, and hence transgression of variational differential forms
to $\Sigma_r$ vanishes except on the subspace

$$
  \Omega^{r,\bullet}_\Sigma(E)
  \;\subset\;
  \Omega^{\bullet,\bullet}_\Sigma(E)
$$

of forms of horizontal degree $r$.

=--

+-- {: .num_example #ActionFunctional}
###### Example
**([[adiabatic switching|adiabatically switched]] [[action functional]])**

Given a [[field bundle]] $E \overset{fb}{\longrightarrow} \Sigma$,
consider a [[local Lagrangian density]] (def. \ref{LocalLagrangianDensityOnSecondOrderJetBundleOfTrivialVectorBundleOverMinkowskiSpacetime})

$$
  \mathbf{L} \in \Omega^{p+1,0}_\Sigma(E)
  \,.
$$

For any [[bump function]] $b \in C^\infty_{cp}(\Sigma)$, the [[transgression of variational differential forms|transgression]] of $b \mathbf{L}$
(def. \ref{TransgressionOfVariationalDifferentialFormsToConfigrationSpaces}) is called the _[[action functional]]_

$$
  \mathcal{S}_b \mathbf{L}
    \coloneqq
  \tau_{\Sigma}
  \left(
    b \mathbf{L}
  \right)
  \;\colon\;
  \Gamma_\Sigma(E)
    \longrightarrow
  \mathbb{R}
$$

induced by $\mathbf{L}$, "[[adiabatic switching|adiabatically switched]]" by $b$.

Specifically if the field bundle is a [[trivial vector bundle]] as in example \ref{TrivialVectorBundleAsAFieldBundle},
such that the Lagrangian density may be written in the form

$$
  \mathbf{L}
    \;=\;
  L
  \left(
    (x^\mu), (\phi^a), (\phi^a_{,\mu}),
    \cdots
  \right)
  \,
  b dvol_\Sigma
   \;\in\;
  \Omega^{p+1,0}_{\Sigma,cp}( E )
  \,.
$$

then its action functional takes a field history $\Phi$ to the value

$$
  \mathcal{S}_{b \mathbf{L}}(\Phi)
  \:\colon\;
  \int_\Sigma
    L
    \left(
      x,
      \left( \Phi^a(x) \right),
      \left(\frac{\partial \Phi^a}{\partial x^\mu}(x)\right),
      \cdots
    \right)
    \,
  b(x)
  dvol_\Sigma(x)
$$

=--


+-- {: .num_prop #TransgressionOfVariationaldifferentialFormsCompatibleWithVariationalDerivative}
###### Proposition
**([[transgression of variational differential forms|transgression]] compatible with [[variational derivative]])**

Let $E \overset{fb}{\to} \Sigma$ be a [[field bundle]] over a [[spacetime]] $\Sigma$ (def. \ref{FieldsAndFieldBundles})
and let $\Sigma_r \hookrightarrow \Sigma$ be a [[submanifold]] possibly [[manifold with boundary|with boundary]]
$\partial \Sigma_r \hookrightarrow \Sigma_r$. Write

$$
  \Gamma_{\Sigma_r}(E) \overset{(-)\vert_{\partial \Sigma_r}}{\longrightarrow} \Gamma_{\partial \Sigma_r}(E)
$$

for the boundary restriction map.

Then the operation of [[transgression of variational differential forms]] (def. \ref{TransgressionOfVariationalDifferentialFormsToConfigrationSpaces})

$$
  \tau_{\Sigma} \;\colon\; \Omega^{\bullet,\bullet}_{\Sigma,cp}(E) \longrightarrow \Omega^\bullet\left(\Gamma_{\Sigma_r}(E)\right)
$$

is compatible with the [[variational derivative]] $\delta$ and with the [[total derivative|total spacetime derivative]] $d$
in the following way:

1. On variational forms that are in the image of the total spacetime derivative
   a transgressive variant of the [[Stokes' theorem]] (prop. \ref{StokesTheorem}) holds:

   $$
     \tau_{\Sigma_r}(d \alpha) \;=\; ((-)\vert_{\partial \Sigma})^\ast \tau_{\partial \Sigma_r}( \alpha)
   $$

1. Transgression intertwines, up to a sign, the [[variational derivative]] $\delta$ on variational differential forms with the
   plain de Rham differential on the space of field histories:

   $$
     \tau_{\Sigma}\left(
       \delta \alpha
     \right)
     \;=\;
     (-1)^{p+1}\, d \,\tau_{\Sigma}(\alpha)
     \,.
   $$

=--


+-- {: .proof}
###### Proof

Regarding the first statement, consider a horizontally exact variational form

$$
  d \alpha \in \Omega^{r,s}_{\Sigma,cp}(E)
  \,.
$$

By prop. \ref{PullbackAlongJetProlongationIntertwinesHorizontalDerivative} the pullback of this form
along the jet prolongation of fields is exact in the $\Sigma$-direction:

$$
  (j^\infty_\Sigma\Phi_{(-)})^\ast(d \alpha )
  \;=\;
  d_\Sigma (j^\infty_\Sigma\Phi_{(-)})^\ast \alpha
  \,,
$$

(where we write $d = d_U + d_\Sigma$ for the de Rham differential on $U \times \Sigma$).
Hence by the ordinary [[Stokes' theorem]] (prop. \ref{StokesTheorem}) restricted to any $\Phi_{(-)} \colon U \to \Gamma_{\Sigma_r}(E)$
with restriction $(-)\vert_{\partial \Sigma_r} \circ \Phi_{(-)} \colon U \to \Gamma_{\Sigma_r}(E)$
the relation

$$
  \begin{aligned}
    (\Phi_{(-)})^\ast \tau_{\Sigma_r}(d \alpha)
    & =
    \int_{\Sigma_r}
      d_{\Sigma_r} (j^\infty_\Sigma\Phi_{(-)})^\ast\alpha
    \\
    & = \int_{\partial \Sigma_r} (j^\infty_\Sigma\Phi_{(-)})^\ast\alpha
    \\
    & = \int_{\partial \Sigma_r} (j^\infty_\Sigma ( (-)\vert_\Sigma \circ \Phi_{(-)}) )^\ast\alpha
    \\
    & =
    ( (-)\vert_\Sigma \circ \Phi_{(-)} )^\ast \tau_{\partial \Sigma_r}(\alpha)
    \\
    & =
    (\Phi_{(-)})^\ast ((-)\vert_{\Sigma_r})^\ast \tau_{\partial \Sigma_r}(\alpha)
    \,.
  \end{aligned}
  \,.
$$


Regarding the second statement: by the [[Leibniz rule]] for de Rham differential
([[product law]] of [[differentiation]]) it is sufficient to check the claim on variational
derivatives of local coordinate functions

$$
  \delta \phi^a_{\mu_1 \cdots \mu_k} b
  \in
  \Omega^{0,1}_\Sigma(E)
  \,.
$$

The [[pullback of differential forms]] (prop. \ref{PullbackOfDifferentialForms})
along the [[jet prolongation]] $j^\infty_\Sigma(\Phi_{(-)}) \colon U \times \Sigma \to J^\infty_\Sigma(E)$ has two contributions:
one from the variation along $\Sigma$, the other from variation along $U$:


1. By prop. \ref{PullbackAlongJetProlongationIntertwinesHorizontalDerivative},
for _fixed_ $u \in U$ the pullback of $\delta \phi^a_{\mu_1 \cdots \mu_k}$ along the jet prolongation vanishes.

1. For  fixed $x \in \Sigma$, the pullback of the full de Rham differential $\mathbf{d} \phi^a_{\mu_1\cdots \mu_k}$ is

   $$
     \begin{aligned}
       (\Phi_{(-)}(x))^\ast( \mathbf{d} \phi^a_{\mu_1\cdots \mu_k} )
       & =
       d_U (\Phi_{(-)}(x))^\ast(\phi^a_{\mu_1\cdots \mu_k})
       \\
       & =
       d_U \frac{ \partial^k \Phi_{(-)}(x)}{\partial x^{\mu^1} \cdots \partial x^{\mu_k}}
     \end{aligned}
   $$

   (since the full de Rham differentials always commute with pullback of differential forms by prop. \ref{PullbackOfDifferentialForms}),
   while the pullback of the horizontal derivative
$d \phi^a_{\mu_1\cdots \mu_k} = \phi^a_{\mu_1 \cdots \mu_{k} \mu_{k+1}} \mathbf{d}x^{\mu_{k+1}}$
vanishes at fixed $x \in \Sigma$.

This implies over the given smooth family $\Phi_{(-)}$ that

$$
  \begin{aligned}
    \tau_\Sigma\left(
      \delta \phi^a_{,\mu_1 \cdots \mu_k} b
    \right)\vert_{\Phi_{(-)}}
    & =
    \tau_\Sigma\left(
       \mathbf{d} ( \phi^a_{,\mu_1 \cdots \mu_k} b)
    \right)
    \vert_{\Phi_{(-)}}
      -
    \underset{ = 0 }{
    \underbrace{
    \tau_\Sigma
    \left(
      d (\phi^a_{,\mu_1 \cdots \mu_k} b)
    \right)\vert_{\Phi_{(-)}}
    }}
    \\
    & =
    \int_\Sigma d_U (\Phi_{(-)})^\ast ( \phi^a_{\mu_1\cdots \mu_k} b )
    \\
    & = (-1)^{p+1} d_U \int_\Sigma  (\Phi_{(-)})^\ast ( \phi^a_{\mu_1\cdots \mu_k} b )
    \\
    & = (-1)^{p+1} d_U \tau_{\Sigma}( \Phi_{(-)} )^\ast ( \phi^a_{\mu_1 \cdots \mu_k} )
    \,.
  \end{aligned}
$$

and since this holds covariantly for all smooth families $\Phi_{(-)}$, this implies the claim.

=--



+-- {: .num_example #VariationOfTheActionFunctional}
###### Example
**([[variational derivative|variation]] of the [[action functional]])**

Given a [[Lagrangian field theory]] $(E,\mathbf{L})$ (def. \ref{LocalLagrangianDensityOnSecondOrderJetBundleOfTrivialVectorBundleOverMinkowskiSpacetime})
then the derivative of its [[adiabatic switching|adiabatically switched]] [[action functional]]
(def. \ref{ActionFunctional}) equals the [[transgression of variational differential forms|transgression]]
of the [[Euler-Lagrange variational derivative]] $\delta_{EL} \mathbf{L}$ (def. \ref{EulerLagrangeOperatorForTivialVectorBundleOverMinkowskiSpacetime}):

$$
  d \mathcal{S}_{b \mathbf{L}}
  \;=\;
  \tau_\Sigma( b \delta_{EL}\mathbf{L} )
  \,.
$$

=--

+-- {: .proof}
###### Proof

By the second statement of prop. \ref{TransgressionOfVariationaldifferentialFormsCompatibleWithVariationalDerivative} we have

$$
  \begin{aligned}
    d \mathcal{S}_{b \mathbf{L}}
    & =
    \tau_\Sigma( \delta ( b \mathbf{L} )  )
  \end{aligned}
  \,,
$$

Moreover, by prop. \ref{EulerLagrangeOperatorForTivialVectorBundleOverMinkowskiSpacetime} this is

$$
  \begin{aligned}
    \cdots
    & =
    \tau_\Sigma( \delta_{EL} b \mathbf{L} + d \Theta_{BFV,b} )
    \\
    & =
    \tau_\Sigma( \delta_{EL} b \mathbf{L} ) + \underset{= 0}{\underbrace{\tau_\Sigma( d \Theta_{BFV,b} )}}
  \end{aligned}
  \,,
$$

where the second term vanishes by the first statement of prop. \ref{TransgressionOfVariationaldifferentialFormsCompatibleWithVariationalDerivative}.

=--


+-- {: .num_prop #PrincipleOfExtremalAction}
###### Proposition
**([[principle of extremal action]])**

Let $(E,\mathbf{L})$ be a [[Lagrangian field theory]] (def. \ref{LocalLagrangianDensityOnSecondOrderJetBundleOfTrivialVectorBundleOverMinkowskiSpacetime}).

The [[de Rham differential]] $d \mathcal{S}_{b\mathbf{L}}$ of the [[action functional]] (example \ref{VariationOfTheActionFunctional})
vanishes at a field history

$$
  \Phi \in \Gamma_\Sigma(E)
$$

for all [[adiabatic switchings]] $b \in C^\infty_{cp}(\Sigma)$ constant on some
subset $\mathcal{O} \subset \Sigma$ (def. \ref{CutoffFunctions}) on those smooth collections of field histories

$$
  \Phi_{(-)} \;\colon\; U \longrightarrow \Gamma_\Sigma(E)
$$

around $\Phi$ which, as functions on $U$, are constant outside $\mathcal{O}$ (example \ref{DiffeologicalSpaceOfFieldHistories}, example \ref{SupergeometricSpaceOfFieldHistories})
precisely if $\Phi$ solves the [[Euler-Lagrange equation|Euler-Lagrange]] [[equations of motion]]
(def. \ref{EulerLagrangeEquationsOnTrivialVectorFieldBundleOverMinkowskiSpacetime}):

$$
  \left(
  \underset{ { {\mathcal{O} \subset \Sigma} \atop { b\vert_{\mathcal{O}} = const } } \atop { \Phi_{(-)}\vert_{\Sigma \setminus \mathcal{O}} = const }  }{\forall}
  \left(
     (\Phi_{(-)})^\ast d \mathcal{S}_{b \mathbf{L}}(\Phi) = 0
  \right)
  \right)
  \;\Leftrightarrow\;
  \left(
    j^\infty_\Sigma(\Phi)^\ast \left( \frac{\delta_{EL} L}{\delta \phi^a} \right) = 0
  \right)
  \,.
$$

=--


+-- {: .proof}
###### Proof

By prop. \ref{TransgressionOfVariationaldifferentialFormsCompatibleWithVariationalDerivative} we have

$$
  (\Phi_{(-)})^\ast d \mathcal{S}_{b \mathbf{L}}
  \;=\;
   \int_\Sigma
   j^\infty_\Sigma(\Phi_{(-)})^\ast (  \delta_{EL}  b \mathbf{L} )
   \,.
$$

By the assumption on $\Phi_{(-)}$ it follows that after pullback to $U$ the switching function $b$ is constant, so that
it commutes with the differentials:

$$
  (\Phi_{(-)})^\ast
  d \mathcal{S}_{b \mathbf{L}}
  \;=\;
   \int_\Sigma
   b
   j^\infty_\Sigma(\Phi_{(-)})^\ast (  \delta_{EL}   \mathbf{L} )
   \,.
$$

This vanishes at $\Phi$ for all $\Phi_{(-)}$ precisely if all components of $j^\infty_\Sigma(\Phi_{(-)})^\ast (  \delta_{EL}   \mathbf{L} )$
vanish, which is the statement of the Euler-Lagrange equations of motion.

=--


+-- {: .num_defn #LocalObservables}
###### Definition
**([[local observables]])**

Given a [[Lagrangian field theory]] $(E,\mathbf{L})$ (def. \ref{LocalLagrangianDensityOnSecondOrderJetBundleOfTrivialVectorBundleOverMinkowskiSpacetime}) with  [[on-shell]] [[space of histories]] $\Gamma_\Sigma(E)_{\delta_{EL} \mathbf{L} = 0}$ (eq:OnShellFieldHistories)
then the space

$$
  \label{GlobalObservables}
  Obs_\Sigma(E)
  \;\coloneqq\;
  C^\infty( \Gamma_\Sigma(E) )
$$

of _[[observables]]_ is simply the space of [[complex numbers|complex]]-valued [[smooth functions]]

$$
  A \;\colon\;  \Gamma_\Sigma(E)_{\delta_{EL}\mathbf{L} = 0} \longrightarrow \mathbb{C}
$$

on the [[on-shell]] [[space of field histories]] (eq:OnShellFieldHistories).
This is a [[star-algebra]] under pointwise [[complex conjugation]].

(That we consider functions with values in [[complex numbers]] instead of [[real numbers]] is a
reflection of the [[superposition principle]] in [[quantum physics]], more about this below.)

On the other hand the _[[local observables]]_ are the [[horizontal differential form|horizontal p+1-forms]]

1. of compact spacetime support (def. \ref{SpacetimeSupport})

1. modulo [[total spacetime derivatives]]

1. restricted to the [[shell]] $\mathcal{E}^\infty$ (eq:ProlongedShellInJetBundle):

$$
  LocObs_\Sigma(E) \;\coloneqq\; \left(\Omega^{p+1,0}_{\Sigma,cp}(E)/(im(d))\right)\vert_{\mathcal{E}^\infty}
$$

which we may identify with the subspace of all observables (eq:GlobalObservables)
on those that arise as the [[image]] under
[[transgression of variational differential forms]] $\tau_\Sigma$ (def. \ref{TransgressionOfVariationalDifferentialFormsToConfigrationSpaces})
of local observables to [[functionals]] on the [[on-shell]] [[space of field histories]] (eq:OnShellFieldHistories):

$$
  LocObs_\Sigma(E)
    \overset{\tau_\Sigma}{\hookrightarrow}
  \in
  C^\infty\left( \Gamma_\Sigma(E)_{\delta_{EL}\mathbf{L} = 0} \right)
  \,.
$$

This is a sub-vector space inside all observables which is in general not closed under the product of functions. We write

$$
  \mathcal{F}
    \;\coloneqq\;
  \langle LocObs_\Sigma \rangle_{C^\infty\left(\Gamma_\Sigma(E)\right)_{\delta_{EL}\mathbf{L} = 0}}
$$

for the smallest subalgebra of observables, under the pointwise product, that contains all the local observables.
This is called the algebra of _multilocal observables_.

> maybe better consider formal power series of observables around a background solution

=--


+-- {: .num_example }
###### Example
**([[local observables]] of the [[real scalar field]])**

Consider the [[field bundle]] of the [[real scalar field]] (example \ref{RealScalarFieldBundle}).

A typical example of [[local observables]] (def. \ref{LocalObservables}) in this case is
the "field amplitude averaged over a given spacetime region"
determined by a [[bump function]] $b \in C^\infty_{cp}(\Sigma)$. On an on-shell field history $\Phi$ this observable
takes as value the integral

$$
  \tau_\Sigma(b \phi)(\Phi) \;=\;  \int_\Sigma \Phi(x) b(x) dvol_\Sigma(x)
  \,.
$$

=--


+-- {: .num_example }
###### Example
**([[local observables]] of the [[electromagnetic field]])**

Consider the [[field bundle]] for [[free field theory|free]] [[electromagnetism]] on [[Minkowski spacetime]] $\Sigma$.

Then for $b \in C^\infty(\Sigma)$ a [[bump function]] on [[spacetime]], the [[transgression of variational differential forms|transgression]]
of the universal [[Faraday tensor]] (def. \ref{JetFaraday}) against $b$ times the [[volume form]] is a [[local observable]]
(def. \ref{LocalObservables}), namely the _[[field strength]]_ (eq:TensorFaraday) of the [[electromagnetic field]]
averaged over spacetime.

=--





$\,$







**Infinitesimal observables**
 {#InfinitesimalObservables}

The definition of [[observables]] in def. \ref{Observable} and specifically of [[local observables]] in def. \ref{LocalObservables} uses explicit restriction to the [[shell]],
hence, by the [[principle of extremal action]] (prop. \ref{PrincipleOfExtremalAction}) to the "[[critical locus]]" of the [[action functional]]. Such [[critical loci]] are often hard to
handle explicitly. It helps to consider a "[[homological resolution]]" that is given, in good circumstances, by the corresponding
"[[derived critical locus]]". These we consider in detail below in _[Reduced phase space](#ReducedPhaseSpace)_.
In order to have good control over these resolutions, we here consider the first _[[perturbative quantum field theory|perturbative]]_
aspect of [[field theory]], namely we consider the restriction of [[local observables]] to just an
[[infinitesimal neighbourhood]] of a background [[on-shell]] field history:


+-- {: .num_defn #LocalObservablesOnInfinitesimalNeighbourhood}
###### Definition
**([[local observables]] around [[infinitesimal neighbourhood]] of background [[on-shell]] field history)**


Let $(E,\mathbf{L})$ be a [[Lagrangian field theory]] (def. \ref{LocalLagrangianDensityOnSecondOrderJetBundleOfTrivialVectorBundleOverMinkowskiSpacetime})
whose [[field bundle]] $E$ is a [[trivial vector bundle]] (example \ref{TrivialVectorBundleAsAFieldBundle}) and whose [[Lagrangian density]] $\mathbf{L}$ is spacetime-independent (example \ref{ShellForSpacetimeIndependentLagrangians}).
Let $\Sigma \times \{\varphi\} \hookrightarrow \mathcal{E}$ be a constant section of the shell (eq:ConstantSectionOfTrivialShellBundle)
as in example \ref{ShellForSpacetimeIndependentLagrangians}.

Then we write

$$
  LocObs_\Sigma(E,\varphi)
$$

for the restriction of the [[local observables]] (def. \ref{LocalObservables}) to the fiberwise
[[infinitesimal neighbourhood]] (example \ref{InfinitesimalNeighbourhood}) of $\Sigma \times \{\varphi\}$.

Explicitly, this means the following:

First of all, by prop. \ref{JetBundleIsLocallyProManifold} the dependence of the Lagrangian density $\mathbf{L}$
on the order of field derivatives is bounded by some $k \in \mathbb{N}$ on some [[neighbourhood]] of $\varphi$ and hence,
by the spacetime independence of $\mathbf{L}$, on some neighbourhood of $\Sigma \times \{\varphi\}$.

Therefore we may restrict without loss to the order-$k$ jets. By slight abuse of notation we still write

$$
  \mathcal{E} \hookrightarrow J^k_\Sigma(E)
$$

for the corresponding shell. It follows then that the restriction of the ring $\Omega^{0,0}_{\Sigma,cp}(E)$ of smooth functions
on the jet bundle to the [[infinitesimal neighbourhood]] (example \ref{InfinitesimalNeighbourhood})
is equivalently the [[formal power series ring]] over $C^\infty_{cp}(\Sigma)$
in the variables

$$
  ((\phi^a- \varphi^a),
   (\phi^a_{,\mu}- \varphi^a_{,\mu}),
   \cdots,
   (\phi^a_{,\mu_1 \cdots \mu_k} - \varphi^a_{,\mu_1 \cdots \mu_k})
  )
$$

We denote this by

$$
  \label{FunctionsOnInfNbh}
  \Omega^{0,0}_{\Sigma,cp}(E,\varphi)
    \;\coloneqq\;
  C^\infty_{cp}(\Sigma)\left[ \left[ (\phi^a - \varphi^a ), (\phi^a_{,\mu} -\varphi^a_{,\mu}), \cdots, (\phi^a_{,\mu_1 \cdots \mu_k}- \varphi^a_{,\mu_1 \cdots \mu_k}) \right] \right]
  \,.
$$

A key consequence is that the further restriction of this ring to the [[shell]] $\mathcal{E}^\infty$ (eq:ProlongedShellInJetBundle)
is now simply the further [[quotient ring]] by the ideal generated by the [[total spacetime derivatives]]
of the components $\frac{\partial_{EL}L}{\delta \phi^a}$ of
the [[Euler-Lagrange form]] (prop. \ref{EulerLagrangeOperatorForTivialVectorBundleOverMinkowskiSpacetime}).

$$
  \label{ObservablesOnInfinitesimalNeighbourhoodOfZeroInShellInFieldFiber}
  \begin{aligned}
    \Omega^{0,0}_{\Sigma,cp}(E,\varphi)\vert_{\mathcal{E}}
      & \coloneqq
    \Omega^{0,0}_{\Sigma,cp}(E,\varphi)
      /
    \left(
      \frac{d^k}{ d x^{\mu_1} \cdots d x^{\mu_l}} \frac{\delta_{EL} L}{\delta \phi^a}
    \right)_{ { a \in \{1, \cdots, s\} }  \atop { { l \in \{1, \cdots, k\} } \atop { \mu_r \in \{0, \cdots, p\} }   } }
    \\
    & =
  C^\infty_{cp}(\Sigma)\left[ \left[ (\phi^a - \varphi^a ), (\phi^a_{,\mu} -\varphi^a_{,\mu}), \cdots, (\phi^a_{,\mu_1 \cdots \mu_k}- \varphi^a_{,\mu_1 \cdots \mu_k}) \right] \right]
   /
  \left(
    \frac{d^k}{ d x^{\mu_1} \cdots d x^{\mu_l}} \frac{\delta_{EL} L}{\delta \phi^a}
  \right)_{ { a \in \{1, \cdots, s\} }  \atop { { l \in \{1, \cdots, k\} } \atop { \mu_r \in \{0, \cdots, p\} }   } }
  \end{aligned}
  \,.
$$

Finally the [[local observables]] restricted to the infinitesimal neighbourhood is the module

$$
  \label{LocalObservablesRestrictedToInfinitesimalNeighbourhood}
  LocObs_\Sigma(E,\varphi)
    \;\simeq\;
  \left(
     \Omega^{0,0}_{\Sigma,cp}(E,\varphi)\vert_{\mathcal{E}} \langle dvol_\Sigma \rangle
  \right)/(im(d))
  \,.
$$


=--

The space of local observables in def. \ref{LocalObservablesOnInfinitesimalNeighbourhood} is the
[[quotient]] of a [[formal power series algebra]] by the components of the [[Euler-Lagrange form]]
and by the [[image]] of the horizontal spacetime [[de Rham differential]]. It is convenient
to also conceive of the components of the [[Euler-Lagrange form]] as the [[image]] of a [[differential]],
for then the algebra of local observables obtaines a [[cochain cohomology|cohomological]] interpretation,
which will lend itself to computation. This differential, whose image is the components of the
[[Euler-Lagrange form]], is called the _[[BV-differential]]. We introduce this
now first (def. \ref{BVComplexOfOrdinaryLagrangianDensity} below) in a direct ad-hoc way.
Further [below](#ReducedPhaseSpace) we discuss the conceptual nature of this differential
as part of the construction of the [[reduced phase space]] as a [[derived critical locus]] (example \ref{DerivedProlongedShellInAbsenceOfExplicitGaugeSymmetries} below).


+-- {: .num_defn #BVComplexOfOrdinaryLagrangianDensity}
###### Definition
**([[local BV-complex]] of ordinary [[Lagrangian density]])**

Let $(E,\mathbf{L})$ be a [[Lagrangian field theory]] (def. \ref{LocalLagrangianDensityOnSecondOrderJetBundleOfTrivialVectorBundleOverMinkowskiSpacetime})
whose [[field bundle]] $E$ is a [[trivial vector bundle]] (example \ref{TrivialVectorBundleAsAFieldBundle}) and whose [[Lagrangian density]] $\mathbf{L}$ is spacetime-independent (example \ref{LocalObservablesOnInfinitesimalNeighbourhood}).
Let $\Sigma \times \{\varphi\} \hookrightarrow \mathcal{E}^\infty$ be a constant section of the shell (eq:ConstantSectionOfTrivialShellBundle).

In correspondence with def. \ref{LocalObservablesOnInfinitesimalNeighbourhood}, write

$$
  \Gamma_{\Sigma,cp}(T_\Sigma J^\infty_\Sigma E,\varphi)
  \simeq
  \Gamma_{\Sigma,cp}(J^\infty_\Sigma T_\Sigma E,\varphi)
  \;\in\;
  \Omega^{0,0}_{\Sigma,cp}(E) Mod
$$

for the restriction of [[vertical vector fields]] on the [[jet bundle]] to the fiberwise [[infinitesimal neighbourhood]]
(example \ref{InfinitesimalNeighbourhood}) of $\Sigma \times {\varphi}$.

Now we regard this as a _[[graded module]]_ over $\Omega^{0,0}_{\Sigma,cp}(E,\varphi)$ (eq:FunctionsOnInfNbh) concentrated in degree $-1$:

$$
  \Gamma_{\Sigma,cp}(J^\infty_\Sigma T_\Sigma E,\varphi)[-1]
  \;\in\;
  \Omega^{0,0}_{\Sigma,cp}(E) Mod^{\mathbb{Z}}
  \,.
$$

This is called the module of _[[antifields]]_ corresponding the given [[type]] of [[field (physics)|fields]] encoded by $E$.

If the [[field bundle]] is a [[trivial vector bundle]] (example \ref{TrivialVectorBundleAsAFieldBundle}) with field coordinates
$(\phi^a)$, then we write

$$
  \label{AntifieldCoordinates}
  \overline{\phi}_{a,\mu_1 \cdots \mu_l}
  \;\coloneqq\;
  \left(
     \partial_{(\phi^a_{\mu_1 \cdots \mu_l})}
  \right)[-1]
  \;\in\;
  \Gamma_{\Sigma,cp}(T_\Sigma J^\infty_\Sigma E,\varphi)[-1]
$$

for the vector field generator that takes derivatives along $\partial_{\phi^a_{,\mu_1 \cdots \mu_k}}$, but regarded now in degree -1.

Evaluation of vector fields in the
[[total spacetime derivatives]] $\frac{d^l}{d x^{\mu_1} \cdots d x^{\mu_l}} \delta\mathbf{L} \in \Omega^{p,0}_\Sigma(E) \wedge \delta \Omega^{0,0}_\Sigma(E)$ of the [[variational derivative]]  (prop. \ref{EulerLagrangeOperatorForTivialVectorBundleOverMinkowskiSpacetime}) yields a [[linear map]]
over $\Omega^{\bullet,\bullet}_{\Sigma,cp}(E,\varphi)$ (eq:ObservablesOnInfinitesimalNeighbourhoodOfZeroInShellInFieldFiber)

$$
  \iota_{(-)}\delta_{EL} \mathbf{L}
   \;\colon\;
  \Gamma_{\Sigma,cp}( J^\infty_\Sigma T_\Sigma E,\varphi)[-1]
    \longrightarrow
  \Omega^{p+1,0}_{\Sigma,cp}(E,\varphi)
  \,.
$$

If we use the [[volume form]] $dvol_\Sigma$ on [[spacetime]] $\Sigma$ to induce an identification

$$
  \Omega^{p+1,0}_\Sigma(E) \;\simeq\; C^\infty(J^\infty_\Sigma(E))\langle dvol_\sigma\rangle
$$

with respect to which the [[Lagrangian density]] decomposes as

$$
  \mathbf{L} = L dvol_\Sigma
$$

then this is a $\Omega^{0,0}_\sigma(E,\varphi)$-[[linear map]] of the form

$$
  \iota_{(-)}{\delta L_{EL}}
    \;\colon\;
  \Gamma_{\Sigma,cp}^{ev}(T_\Sigma E,\varphi)[-1]
    \longrightarrow
  \Omega^{0,0}_{\Sigma,cp}(E,\varphi)
  \,.
$$

In the special case that the [[field bundle]] $E \overset{fb}{\to} \Sigma$ is a [[trivial vector bundle]]
(example \ref{TrivialVectorBundleAsAFieldBundle}) with [[field (physics)|field]] coordinates $(\phi^a)$
so that the Euler-Lagrange variational derivative has the coordinate expansion

$$
  \delta_L
  \;=\;
  \frac{\delta_{EL}\mathbf{L}}{\delta \phi^a} \delta \phi^a
$$

then this map is given on the [[antifield]] basis elements (eq:AntifieldCoordinates) by

$$
  \iota_{(-)} {\delta L_{EL}}
  \;\colon\;
  \overline{\phi}_{a,\mu_1 \cdots \mu_l}
    \;\mapsto\;
  \frac{d^l}{d x^{\mu_1} \cdots d x^{\mu_l}} \frac{\delta_{EL} L}{\delta \phi^a}
  \,.
$$

Consider then the [[symmetric algebra|graded symmetric algebra]]

$$
  C^\infty( J^\infty_\Sigma((T_\Sigma E)[-1] \times_\Sigma E, \varphi) )
  \;\coloneqq\;
  Sym_{\Omega^{0,0}_{\Sigma,cp}(E,\varphi)}\left(
    \Gamma_{\Sigma,cp}(J^\infty_\Sigma T_\Sigma E,\varphi)[-1]
  \right)
$$

which is generated over $\Omega^{0,0}_{\Sigma,cp}(E,\varphi)$ from the module of vector fields in degree -1.

If we think of a single vector field as a fiber-wise [[linear function]] on the [[cotangent bundle]],
and of a [[multivector field]] similarly as a [[multilinear function]] on the cotangent bundle, then we may
think of this as the algebra of functions on the [[infinitesimal neighbourhood]] (example \ref{InfinitesimalNeighbourhood}) of $\varphi$
inside the [[graded manifold]] $(T_\Sigma E)[-1] \times_\Sigma E$.


Let now

$$
  \label{BVDifferentialForOrdinaryLagrangian}
  s_{BV}
  \;\colon\;
  C^\infty( J^\infty_\Sigma((T_\Sigma E)[-1] \times_\Sigma E, \varphi) )
    \;\longrightarrow\;
  C^\infty( J^\infty_\Sigma((T_\Sigma E)[-1] \times_\Sigma E, \varphi) )
$$

be the unique extension of the linear map $\iota_{(-)}{\delta_{EL} L}$ to an $\mathbb{R}$-linear [[derivation]] of degree +1 on this algebra.


The resulting [[differential graded-commutative algebra]] over $\mathbb{R}$

$$
  \Omega^{0,0}_{\Sigma,cp}(E,\varphi)\vert_{\mathcal{E}_{BV}}
    \;\coloneqq\;
  \left(
  C^\infty( J^\infty_\Sigma((T_\Sigma E)[-1] \times_\Sigma E, \varphi) )
    \,,\,
    s_{BV}
  \right)
$$

is called the _[[local BRST cohomology|local]] [[BV-complex]]_
of the Lagrangian field theory at the background solution $\varphi$.
This is the CE-algebra of the infintiesimal neighbourhood of $\Sigma \times \{\varphi\}$
in the derived prolonged shell (def. \ref{DerivedProlongedShell}).
In this case, in the absence of any explicit infinitesimal gauge symmetries,
this is an example of a _[[Koszul complex]]_.

There are canonical homomorphisms of [[dgc-algebras]], one from the
algebra of functions $\Omega^{0,0}_{\Sigma,cp}(E,\varphi)$ on the [[infinitesimal neighbourhood]]
of the background solution $\varphi$ to the local BV-complex
and from there to the
local observables on the  neighbourhood of the background solution $\varphi$ (eq:ObservablesOnInfinitesimalNeighbourhoodOfZeroInShellInFieldFiber), all considered
with compact spacetime support:

$$
    \Omega^{0,0}_{\Sigma,cp}(E,\varphi)
      \longrightarrow
    \Omega^{0,0}_{\Sigma,cp}(E,\varphi)\vert_{\mathcal{E}_{BV}}
      \longrightarrow
    \Omega^{0,0}_{\Sigma,cp}(E,\varphi)\vert_{\mathcal{E}}
$$

such that the composite is the canonical [[quotient]] [[coprojection]].

Similarly we obtain a factorization for the entire [[variational bicomplex]]:

$$
  \label{ComparisonMorphismFromOrdinaryBVComplexToLocalObservables}
    \Omega^{\bullet,\bullet}_\Sigma(E,\varphi)
      \longrightarrow
    \Omega^{\bullet,\bullet}_\Sigma(E,\varphi)\vert_{\mathcal{E}_{BV}}
      \longrightarrow
    \Omega^{\bullet,\bullet}_\Sigma(E,\varphi)\vert_{\mathcal{E}}
    \,,
$$

where $\Omega^{\bullet,\bullet}_\Sigma(E,\varphi)\vert_{\mathcal{E}_{BV}}$
is now triply graded, with three anti-commuting differentials $d$ $\delta$ and $s_{BV}$.

By construction this is now such that the local observables (def. \ref{LocalObservables})
are the [[cochain cohomology]] of this complex in horizontal form degree p+1, vertical degree 0
and BV-degree 0:

$$
  LocObs_\Sigma(E) \simeq \Omega^{p+1,0}_{\Sigma,cp}(E)/(im(s_{BV} + d))
  \,.
$$

=--




$\,$

**States**
 {#StatesArePositiveLinearFunctionals}


+-- {: .num_defn #States}
###### Definition
**([[states]])**

Given a [[Lagrangian field theory]] $(E,\mathbf{L})$, then a (classical) _[[state]]_ is a [[function]] from
the space $Obs_\Sigma$ of [[observables]] to the complex numbers

$$
  \langle -\rangle
  \;\colon\;
  Obs_\Sigma \longrightarrow \mathbb{C}
$$

such that

1. (linearity) this is a [[linear map]];

1. (positivity) for any $A \in Obs$ we have that $\langle A^\ast A \rangle \geq 0$

=--

Below we consider _[[quantum states]]_. These are defined formally in just the same way, only that
now the algebra of observables is equipped with another product, which changes the meaning of
the product expression $A^\ast A$.



$\,$

This concludes our discussion of [[observables]]. In the [next chapter](#PhaseSpace) we consider the
construction of the [[covariant phase space]] and of the [[Poisson-Peierls bracket]] on [[observables]].

$\,$

## Phase space
  {#PhaseSpace}

It might seem that with the construction of the [[local observables]] (def. \ref{LocalObservables})
on the [[on-shell]] [[space of field histories]] (prop. \ref{EulerLagrangeOperatorForTivialVectorBundleOverMinkowskiSpacetime})
the [[field theory]] defined by a [[Lagrangian density]] (def. \ref{LocalLagrangianDensityOnSecondOrderJetBundleOfTrivialVectorBundleOverMinkowskiSpacetime}) has been completely analyzed:
This data specifies, in principle, which [[field histories]] are realized, and which [[observable]] properties these have.

In particular, if the [[Euler-Lagrange equation|Euler-Lagrange]] [[equations of motion]] (def. \ref{EulerLagrangeEquationsOnTrivialVectorFieldBundleOverMinkowskiSpacetime})
admit [[Cauchy surfaces]] (def. \ref{CauchySurface} below), i.e. spatial [[codimension]] 1 slices of [[spacetimes]]
such that a [[field history]] is uniquely specified already by its restriction to the [[infinitesimal neighbourhood]]
of that spatial slice, then a sufficiently complete collection of [[local observables]] whose spacetime support (def. \ref{SpacetimeSupport})
[[covering|covers]] that Cauchy surface allows to _predict_ the evolution of the field histories through time
from that Cauchy surface.

This is all what one might think a theory of physical fields should accomplish, and in fact this is essentially
all that was thought to be required of a theory of nature from about [[Isaac Newton]]'s time to about [[Max Planck]]'s time.

But we have seen that a remarkable aspect of [[Lagrangian field theory]] is that the [[de Rham differential]] of the [[local Lagrangian density]] $\mathbf{L}$ (def. \ref{LocalLagrangianDensityOnSecondOrderJetBundleOfTrivialVectorBundleOverMinkowskiSpacetime}) decomposes into
_two_ kinds of [[variational differential forms]] (prop. \ref{EulerLagrangeOperatorForTivialVectorBundleOverMinkowskiSpacetime}),
one of which is the [[Euler-Lagrange form]] which determines the [[equations of motion]] (eq:EulerLagrangeEquationGeneral).

However, there is a second contribution: The _[[presymplectic current]]_ $\Omega_{BFV} \in \Omega^{p,2}_{\Sigma}(E)$ (eq:PresymplecticCurrent).
Since this is of horizontal degree $p$,
its [[transgression of variational differential forms|transgression]] (def. \ref{TransgressionOfVariationalDifferentialFormsToConfigrationSpaces}) implies a further structure on the [[space of field histories]]
 restricted to [[spacetime]] [[submanifolds]] of dimension $p$ (i.e. of spacetime "[[codimension]] 1").
There may be such submanifolds such that this restriction to their [[infinitesimal neighbourhood]] (example \ref{InfinitesimalNeighbourhood}) does not actually change the [[on-shell]] [[space of field histories]],
these are called the _[[Cauchy surfaces]]_ (def. \ref{CauchySurface} below).

By the [[Hamiltonian Noether theorem]] (prop. \ref{HamiltonianDifferentialForms}) the [[presymplectic current]] induces [[infinitesimal symmetries]] acting on [[field histories]] and [[local observables]], given by the [[Poisson bracket Lie n-algebra|local Poisson bracket]] (prop. \ref{LocalPoissonBracket}).
The [[transgression of variational differential forms|transgression]] (def. \ref{TransgressionOfVariationalDifferentialFormsToConfigrationSpaces}) of the [[presymplectic current]]
to these [[Cauchy surfaces]] yields the corresponding [[infinitesimal symmetry]] group acting on the [[on-shell]] [[field histories]],
whose [[Lie bracket]] is the _[[Poisson bracket]]_ pairing on [[on-shell]] [[observables]] (example \ref{EvaluationOfTransgressedVariationalFormsOnTangentVectorsForFreeFieldTheory} below). This data, the [[on-shell]] [[space of field histories]] on the [[infinitesimal neighbourhood]] of a [[Cauchy surface]] equipped with [[infinitesimal symmetry]] exhibited by the [[Poisson bracket]] is called the _[[phase space]]_ of the theory (def. \ref{PhaseSpaceAssociatedWithCauchySurface}) below.

In fact if enough [[Cauchy surfaces]] exist, then the [[presymplectic forms]] associated with
any one choice turn out do agree after [[pullback of differential forms|pullback]] to the full [[on-shell]] [[space of field histories]], exhibiting this as the _[[covariant phase space]]_ of the theory (prop. \ref{CovariantPhaseSpace} below) which is hence manifestly independent of aa choice of space/time splitting. Accordingly, also the [[Poisson bracket]] on [[on-shell]] [[observables]] exists in a covariant form; for [[free field theories]] with [[Green hyperbolic differential equation|Green hyperbolic]] [[equations of motion]] (def. \ref{GreenHyperbolicDifferentialOperator}) this is called the _[[Peierls-Poisson bracket]]_ (theorem \ref{PPeierlsBracket} below). The [[integral kernel]] for this [[Peierls-Poisson bracket]] is called the _[[causal propagator]]_ (prop. \ref{GreenFunctionsAreContinuous}).
Its "[[normal ordered product|normal ordered]]" or "[[positive real number|positive]] [[frequency]] component", called the _[[Hadamard propagator]]_ (def. \ref{StandardHadamardDistributionOnMinkowskiSpacetime} below) as well as the corresponding [[time-ordered product|time-ordered]] variant, called the _[[Feynman propagator]]_ (def. \ref{FeynmanPropagatorForKleinGordonEquationOnMinkowskiSpacetime} below), which we discuss in detail in _[Propagators](#Propagators)_ below,
control the [[causal perturbation theory]] for constructing [[perturbative quantum field theory]] by [[deformation quantization|deforming]]
the commutative pointwise product of [[on-shell]] [[observables]] to a [[non-commutative algebra|non-commutative product]] governed to first order by the [[Peierls-Poisson bracket]].

To see how such a [[deformation quantization]] comes about conceptually from the [[phase space]] strucure,
notice from the basic principles of [[homotopy theory]] that given any [[structure]] on a [[space]]
which is [[invariant]] with respect to a [[symmetry group]] [[action|acting]] on the space
(here: the [[presymplectic current]])
then the true structure at hand is the [[homotopy quotient]] of that [[space]] by that [[symmetry group]].
We will explain this further below. This here just to point out that the [[homotopy quotient]] of the
[[phase space]] by the [[Hamiltonian vector field|infinitesimal symmetries of the presymplectic current]]
is called the _[[symplectic groupoid]]_ and that the _true_ [[algebra of observables]] is hence
the ([[polarization|polarized]]) [[groupoid convolution algebra|convolution algebra of functions]]
on this groupoid. This turns out to the "[[algebra of quantum observables]]" and the passage from the
naive [[local observables]] on [[presymplectic manifold|presymplectic]] [[phase space]] to
this non-commutative algebra of functions on its [[homotopy quotient]] to the [[symplectic groupoid]]
is called _[[quantization]]_. This we discuss in much detail [below](#Quantization); for the
moment this is just to motivate why the [[covariant phase space]] is the crucial construction to be
extracted from a [[Lagrangian field theory]].

$\,$

$$
  \array{
  \left\{
    \array{
      \text{on-shell space}
      \\
      \text{ of field histories}
      \\
      \text{restricted to}
      \\
      \text{Cauchy surface}
    }
  \right\}
   &\overset{\array{ \text{homotopy} \\ \text{quotient} \\ \text{by} \\ \text{infinitesimal} \\ \text{symmetries} }}{\longrightarrow}
   &
   \left\{
       \array{
         \text{covariant}
         \\
         \text{phase space}
       }
   \right\}
   &\overset{ \array{\text{Lie algebra} \\ \text{of functions} } }{\longrightarrow}&
   \left\{
      \array{
        \text{Poisson algebra}
        \\
        \text{of observables}
      }
   \right\}
   \\
   &
     \searrow
   &
     \Big\downarrow{}^\mathrlap{{\text{Lie integration}}}
   &&
     {}^{\mathllap{quantization}}\Big\downarrow
   \\
   && \left\{
      \array{
        \text{symplectic}
        \\
        \text{groupoid}
      }
   \right\}
   &
   \overset{
      \array{
         \text{polarized}
         \\
         \text{convolution}
         \\
         \text{algebra}
      }
   }{\longrightarrow}&
   \left\{
      \array{
         \text{quantum algebra}
         \\
         \text{of observables}
      }
   \right\}
   }
$$

$\,$

We now discuss these topics:

$\,$

* _[Covariant phase space](#PreymplecticPhaseSpace)_

* _[BV-Resolution of the covariant phase space](#BVResolutionOfTheCovariantPhaseSpace)_

* _[Hamiltonian local observables](#HamiltonianLocalObservablesOnACauchySurface)_

$\,$

**Covariant phase space**
 {#PreymplecticPhaseSpace}

+-- {: .num_defn #CauchySurface}
###### Definition
**([[Cauchy surface]])**

Given a [[Lagrangian field theory]] $(E, \mathbf{L})$ on a [[spacetime]] $\Sigma$ (def. \ref{LocalLagrangianDensityOnSecondOrderJetBundleOfTrivialVectorBundleOverMinkowskiSpacetime}), then a
_[[Cauchy surface]]_ is a [[submanifold]] $\Sigma_p \hookrightarrow \Sigma$ (def. \ref{SmoothManifoldInsideDiffeologicalSpaces}) such that the
restriction map from the [[on-shell]] [[space of field histories]] $\Gamma_\Sigma(E)_{\delta_{EL}\mathbf{L} = 0}$
(eq:OnShellFieldHistories) to the space $\Gamma_{\Sigma_p}(E)_{\delta_{EL}\mathbf{L} = 0}$ (eq:OnShellFieldHistoriesInHigherCodimension) of on-shell field histories
restricted to the [[infinitesimal neighbourhood]] of $\Sigma_p$ (example \ref{InfinitesimalNeighbourhood}) is an [[isomorphism]]:

$$
  \label{CauchySurfaceIsomorphismOnHistorySpace}
  \Gamma_\Sigma(E)_{\delta_{EL} \mathbf{L} = 0 }
    \underoverset{\simeq}{(-)\vert_{N_\Sigma \Sigma_p}}{\longrightarrow}
  \Gamma_{\Sigma_p}(E)_{\delta_{EL}\mathbf{L} = 0}
  \,.
$$

=--


+-- {: .num_defn #PhaseSpaceAssociatedWithCauchySurface}
###### Definition
**([[phase space]] associated with a [[Cauchy surface]])**

Given a [[Lagrangian field theory]] $(E, \mathbf{L})$ on a [[spacetime]] $\Sigma$ (def. \ref{LocalLagrangianDensityOnSecondOrderJetBundleOfTrivialVectorBundleOverMinkowskiSpacetime})
and given a [[Cauchy surface]] $\Sigma_p \hookrightarrow \Sigma$ (def. \ref{CauchySurface})
then the corresponding _[[phase space]]_ is

1. the [[super smooth set]] $\Gamma_{\Sigma_p}(E)_{\delta_{EL}\mathbf{L} = 0}$ (eq:OnShellFieldHistoriesInHigherCodimension)
   of [[on-shell]] [[field histories]] restricted to the [[infinitesimal neighbourhood]] of $\Sigma_p$;

1. equipped with the [[differential 2-form]] (as in def. \ref{DifferentialFormsOnDiffeologicalSpaces})

   $$
     \label{TransgressionOfPresymplecticCurrentToCauchySurface}
     \omega_{\Sigma_p}
     \;\coloneqq\;
     \tau_{\Sigma_p}\left(\Omega_{BFV}\right)
     \;\in\;
     \Omega^2\left(
       \Gamma_{\Sigma_p}(E)_{\delta_{EL}\mathbf{L} = 0}
     \right)
   $$

   which is the distributional [[transgression of variational differential forms|transgression]] (def. \ref{TransgressionOfVariationalDifferentialFormsToConfigrationSpaces})
   of the [[presymplectic current]] $\Omega_{BFV}$ (def. \ref{EulerLagrangeOperatorForTivialVectorBundleOverMinkowskiSpacetime})
   to $\Sigma_p$.

   This $\omega_{\Sigma_p}$ is a [[closed differential form]] in the sense of def. \ref{DifferentialFormsOnDiffeologicalSpaces},
   due to prop. \ref{TransgressionOfVariationaldifferentialFormsCompatibleWithVariationalDerivative}
   and using that $\Omega_{BFV} = \delta \Theta_{BFV}$ is closed by definition (eq:PresymplecticCurrent).
   As such this is called the _[[presymplectic form]]_ on the phase space.

=--


+-- {: .num_example #EvaluationOfTransgressedVariationalFormsOnTangentVectorsForFreeFieldTheory}
###### Example
**(evaluation of [[transgression of variational differential forms|transgressed variational form]] on [[tangent vectors]] for [[free field theory]])**

Let $(E,\mathbf{L})$ be a [[Lagrangian field theory]] (def. \ref{LocalLagrangianDensityOnSecondOrderJetBundleOfTrivialVectorBundleOverMinkowskiSpacetime}) which is [[free field theory|free]] (def. \ref{FreeFieldTheory}) hence
whose [[field bundle]] is a some [[smooth vector bundle|smooth]] [[super vector bundle]] (example \ref{TrivialVectorBundleAsAFieldBundle})
and whose [[Euler-Lagrange equation|Euler-Lagrange]] [[equation of motion]] is [[linear differential equation|linear]].
Then the [[synthetic differential geometry|synthetic]] [[tangent bundle]] (def. \ref{TangentBundleSynthetic}) of the [[on-shell]] [[space of field histories]] $\Gamma_{\Sigma}(E)_{\delta_{EL}\mathbf{L} = 0}$ (eq:OnShellFieldHistories)
with spacelike compact support (def \ref{CompactlySourceCausalSupport})
is canonically identified with the [[Cartesian product]] of this [[super smooth set]] with itself

$$
  T\left(
    \Gamma_{\Sigma,scp}(E)_{\delta_{EL} \mathbf{L} = 0}
  \right)
  \;\simeq\;
  \left(\Gamma_{\Sigma,scp}(E)_{\delta_{EL} \mathbf{L} = 0}\right)
  \times
  \left(\Gamma_{\Sigma,scp}(E)_{\delta_{EL} \mathbf{L} = 0}\right)
  \,.
$$

With field coordinates as in example \ref{TrivialVectorBundleAsAFieldBundle}, we may expand the
[[presymplectic current]] as

$$
  \Omega_{BFV}
  =
  \left(\Omega_{BFV}\right)^{\mu_1, \cdots, \mu_{k_1}, \nu_1, \cdots, \nu_{k_2}, \kappa}_{a_1 a_2}
  \delta \phi^{a_1}_{\mu_1 \cdots \mu_k} \wedge \delta \phi^{a_2}_{\nu_1 \cdots \nu_{k_2}}
  \wedge
  \iota_{\partial_\kappa} dvol_\Sigma
  \,,
$$

where the components $(\Omega_{BFV})_{a_1 a_2}^{\mu_1, \cdots, \mu_{k_1}, \nu_1, \cdots, \nu_{k_2}, \kappa}$
are smooth functions on the [[jet bundle]].

Under these identifications the value of the [[presymplectic form]] $\omega_{\Sigma_p}$ (eq:TransgressionOfPresymplecticCurrentToCauchySurface)
on two [[tangent vectors]] $\vec \Phi_1, \vec \Phi_2 \in \Gamma_{\Sigma,scp}(E)$
at a point $\Phi_1, \Phi_2 \in \Gamma_{\Sigma,scp}(E)$ is

$$
  \omega_{\Sigma_p}(\vec \Phi_1, \vec \Phi_2)
  \;=\;
  \underset{\Sigma_p}{\int}
  \left(\Omega_{BFV}\right)^{\mu_1, \cdots, \mu_{k_1}, \nu_1, \cdots, \nu_{k_2}, \kappa}_{a_1 a_2}(\Phi_1(x), \Phi_2(x))
  \left(
  \frac{\partial}{\partial x^{\mu_1}}
  \cdots
  \frac{\partial}{\partial x^{\mu_{k_1}}}
  \vec \Phi_1(x)
  \right)
  \left(
  \frac{\partial}{\partial x^{\nu_1}}
  \cdots
  \frac{\partial}{\partial x^{\nu_{k_2}}}
  \vec \Phi_2(x)
  \right)
  \,
  \iota_{\partial_\kappa} dvol_\Sigma(x)
  \,.
$$

=--


+-- {: .num_example #PresymplecticFormForFreeRealScalarField}
###### Example
**([[presymplectic form]] for [[free field|free]] [[real scalar field]])**

Consider the [[Lagrangian field theory]] for the [[free field|free]] [[real scalar field]]
from example \ref{LagrangianForFreeScalarFieldOnMinkowskiSpacetime}.

Under the identification of example \ref{EvaluationOfTransgressedVariationalFormsOnTangentVectorsForFreeFieldTheory} the [[presymplectic form]] on the [[phase space]] (def. \ref{PhaseSpaceAssociatedWithCauchySurface})
associated with a [[Cauchy surface]] $\Sigma_p \hookrightarrow \Sigma$
is given by

$$
  \begin{aligned}
    \omega_{\Sigma_p}(\vec \Phi_1, \vec\Phi_2)
    & =
    \int_{\Sigma_{p}}
    \left(
      \frac{\partial \vec \Phi_1}{\partial x^\mu}(x) \vec \Phi_2(x)
      -
      \vec \Phi_1(x) \frac{\partial \vec \Phi_2}{\partial x^\mu}(x)
    \right)
    \eta^{\mu \nu}
    \iota_{\partial_\mu} dvol_{\Sigma_{p}}(x)
    \\
    & =
    \underset{\Sigma_p}{\int} K(\vec \Phi_1, \vec \Phi_2)
    \,.
  \end{aligned}
$$

Here the first equation follows via example \ref{EvaluationOfTransgressedVariationalFormsOnTangentVectorsForFreeFieldTheory} from the form of $\Omega_{BFV}$ from example \ref{FreeScalarFieldEOM},
while the second equation
identifies the integrand as the witness $K$ for the [[formally adjoint differential operator|formally self-adjointness]] of the [[Klein-Gordon equation]] from example \ref{FormallySelfAdjointKleinGordonOperator}.

=--


+-- {: .num_example #PresymplecticFormForFreeDiracField}
###### Example
**([[presymplectic form]] for [[free field theory|free]] [[Dirac field]])**

Consider the [[Lagrangian field theory]] of the [[free field theory|free]] [[Dirac field]] (example \ref{LagrangianDensityForDiracField}).

Under the identification of example \ref{EvaluationOfTransgressedVariationalFormsOnTangentVectorsForFreeFieldTheory} the [[presymplectic form]] on the [[phase space]] (def. \ref{PhaseSpaceAssociatedWithCauchySurface}) associated with a [[Cauchy surface]] $\Sigma_p \hookrightarrow \Sigma$
is given by

$$
  \begin{aligned}
    \omega_{\Sigma_p}(\theta_1 \vec \Psi_1, \theta_2 \vec\Psi_2)
    & =
    \int_{\Sigma_{p}}
    \left(
      \overline{\theta_1 \vec \psi_1}\gamma^\mu \left( \theta_2 \vec \Psi_2 \right)
    \right)
    \iota_{\partial_\mu} dvol_{\Sigma_{p}}(x)
    \\
    & =
    \underset{\Sigma_p}{\int} K(\vec \Phi_1, \vec \Phi_2)
    \,.
  \end{aligned}
$$

Here the first equation follows via example \ref{EvaluationOfTransgressedVariationalFormsOnTangentVectorsForFreeFieldTheory} from the form of $\Omega_{BFV}$ from example \ref{PresymplecticCurrentDiracField},
while the second equation
identifies the integrand as the witness $K$ for the [[formally adjoint differential operator|formally self-adjointness]] of the [[Dirac equation]] from example \ref{DiracOperatorOnDiracSpinorsIsFormallySelfAdjointDifferentialOperator}.

=--


+-- {: .num_prop #CovariantPhaseSpace}
###### Proposition
**([[covariant phase space]])**

Consider $(E, \mathbf{L})$ a [[Lagrangian field theory]] on a [[spacetime]] $\Sigma$ (def. \ref{LocalLagrangianDensityOnSecondOrderJetBundleOfTrivialVectorBundleOverMinkowskiSpacetime}).

Let

$$
  \Sigma_{tra} \overset{tra}{\hookrightarrow} \Sigma
$$

be a [[submanifold]] [[manifold with boundary|with two boundary components]]
$\partial \Sigma_{tra} = \Sigma_{in} \sqcup \Sigma_{out}$ ,
both of which are [[Cauchy surfaces]] (def. \ref{CauchySurface}).

Then the corresponding inclusion diagram

$$
  \array{
    && \Sigma_{tra}
    \\
    & {}^{\mathllap{in}}\nearrow && \nwarrow^{\mathrm{out}}
    \\
    \Sigma_{in}
    && &&
    \Sigma_{out}
  }
$$

induces a [[Lagrangian correspondence]] between the associated [[phase spaces]] (def. \ref{PhaseSpaceAssociatedWithCauchySurface})

$$
  \array{
    && \Gamma_{\Sigma_{tra}}(E)_{\delta_{EL} \mathbf{L} = 0}
    \\
    & {}^{\mathllap{ (-)\vert_{in} }}\swarrow && \searrow^{\mathrlap{ (-)\vert_{out} }}
    \\
    \Gamma_{\Sigma^{(in)}}(E)_{\delta_{EL}\mathbf{L}= 0}
    && &&
    \Gamma_{\Sigma^{(out)}}(E)_{\delta_{EL}\mathbf{L}= 0}
    \\
    & {}_{\mathllap{\omega_{in}}}\searrow && \swarrow_{\mathrlap{\omega_{out}}}
    \\
    && \mathbf{\Omega}^{2}
  }
$$

in that the [[pullback of differential forms|pullback]] of the
two [[presymplectic forms]] (eq:TransgressionOfPresymplecticCurrentToCauchySurface) coincides on the
space of field histories:

$$
  \left( (-)\vert_{in}\right)^\ast\left( \omega_{in}\right)
  \;=\;
  \left( (-)\vert_{out} \right)^\ast \left( \omega_{out} \right)
  \phantom{AAAA}
  \in
  \Omega^2
  \left(
    \Gamma_{\Sigma_{tra}}(E)_{\delta_{EL} \mathbf{L} = 0}
  \right)
  \,.
$$

Hence there is a well defined [[presymplectic form]]

$$
  \omega \in \Omega^2\left(  \Gamma_\Sigma(E)_{\delta_{EL}\mathbf{L}} = 0 \right)
$$

on the genuine [[space of field histories]], given by $\omega \coloneqq i^\ast \omega_{\Sigma_p}$
for any Cauchy surface $\Sigma_p \overset{i}{\hookrightarrow} \Sigma$. This [[presymplectic smooth space]]

$$
  \left(
    \Gamma_\Sigma(E)_{\delta_{EL}\mathbf{L}}
    \,,\,
    \omega
  \right)
$$

is therefore called the _[[covariant phase space]]_ of the [[Lagrangian field theory]] $(E,\mathbf{L})$.

=--


+-- {: .proof}
###### Proof

By prop. \ref{HorizontalDerivativeOfPresymplecticCurrentVanishesOnShell} the
total spacetime derivative $d \Omega_{BFV}$ of the [[presymplectic current]] vanishes [[on-shell]]:

$$
  d \Omega_{BFV} = - \delta \delta_{EL} \mathbf{L}
$$

in that the [[pullback of differential forms|pullback]] (def. \ref{PullbackOfDifferential1FormsOnCartesianSpaces})
along the [[shell]] inclusion $\mathcal{E} \overset{i_{\mathcal{E}}}{\hookrightarrow} J^\infty_\Sigma(E)$ (eq:ShellInJetBundle)
vanishes:

$$
  \begin{aligned}
    (i_{\mathcal{E}})^\ast
    \left(
     d \Omega_{BFV}
    \right)
    & =
    - (i_{\mathcal{E}})^\ast
    \left(
     \delta \delta_{EL} \mathcal{L}
    \right)
    \\
    & =
    - \delta
    \underset{
      = 0
    }{
    \underbrace{
    (i_{\mathcal{E}})^\ast
    \left(
      \delta_{EL} \mathbf{L}
    \right)
    }
    }
    \\
    & = 0
  \end{aligned}
$$

This implies that the transgression of $d \Omega_{BFV}$ to
the [[on-shell]] [[space of field histories]] $\Gamma_{\Sigma_{tra}}(E)_{\delta_{EL}\mathbf{L} = 0}$ vanishes
(since by definition (eq:EquationOfMotionEL) that involves pulling back through the shell inclusion)

$$
  \tau_{\Sigma_{tra}}(d \Omega_{BFV}) = 0
  \,.
$$

But then the claim follows with prop. \ref{TransgressionOfVariationaldifferentialFormsCompatibleWithVariationalDerivative}:

$$
  \begin{aligned}
    0
    & =   \tau_{\Sigma_{tra}}(d \Omega_{BFV})
    \\
    & = ((-)\vert_{\Sigma_{tra}})^\ast \tau_{\partial \Sigma_{tra}} \Omega_{BFV}
    \,.
  \end{aligned}
$$

=--


+-- {: .num_theorem #PPeierlsBracket}
###### Theorem
**([[polynomial Poisson algebra|polynomial Poisson bracket]] on [[covariant phase space]] -- the [[Peierls bracket]])**

Let $(E,\mathbf{L})$ be a [[Lagrangian field theory]] (def. \ref{LocalLagrangianDensityOnSecondOrderJetBundleOfTrivialVectorBundleOverMinkowskiSpacetime}) such that

1. it is a [[free field theory]] (def. \ref{FreeFieldTheory})

1. whose [[Euler-Lagrange equation|Euler-Lagrange]] [[equation of motion]] $P \Phi = 0$ (def. \ref{EulerLagrangeEquationsOnTrivialVectorFieldBundleOverMinkowskiSpacetime}) is

   1. [[formally adjoint differential operator|formally self-adjoint]] or [[formally adjoint differential operator|formally anti self-adjoint]] (def. \ref{FormallyAdjointDifferentialOperators}) such that

      * the integral over the witness $K$ (eq:FormallyAdjointDifferentialOperatorWitness) is the
      [[presymplectic form]] (eq:TransgressionOfPresymplecticCurrentToCauchySurface): $\omega_{\Sigma_p} = \underset{\Sigma_p}{\int} K$;

   1. [[Green hyperbolic differential operator|Green hyperbolic]] (def. \ref{GreenHyperbolicDifferentialOperator}).

Write

$$
  \mathrm{G}_P
    \;\colon\;
    LinObs(E_{scp},\mathbf{L})^{reg}
        \overset{\mathrm{G}_P}{\longrightarrow}
    \Gamma_{\Sigma,scp}(E)_{\delta_{EL}\mathbf{L} = 0}
$$

for the linear map
from regular linear field observables (def. \ref{RegularLinearFieldObservables}) to on-shell [[field histories]] with spatially compact support (def. \ref{CompactlySourceCausalSupport}) given under the identification (eq:RegularLinearObservablesAreCompactlySupportedSectionsModuloImageOfP)
by the [[causal Green function]] $\mathrm{G}_P$ (def. \ref{AdvancedAndRetardedGreenFunctions}).

Then for every [[Cauchy surface]] $\Sigma_p \hookrightarrow \Sigma$ (def. \ref{CauchySurface}) this map is an inverse to the
[[presymplectic form]] $\omega_{\Sigma_p}$ (def. \ref{PhaseSpaceAssociatedWithCauchySurface})
in that, under the identification of tangent vectors to field histories from example \ref{EvaluationOfTransgressedVariationalFormsOnTangentVectorsForFreeFieldTheory}, we have that the composite

$$
  \label{ForGreenHyperbolicFreeFieldTheoryCausalGreenFunctionIsInverseToPresymplecticFormOnRegularLinearObservables}
  \array{
    \omega_{\Sigma_p}(\mathrm{G}_P(-),(-))
    \;=\;
    ev
    &\colon&
    LinObs(E_{scp},\mathbf{L})^{reg} &\otimes& \Gamma_{\Sigma,scp}(E)
      &\longrightarrow&
    \mathbb{C}
    \\
    && (A &,& \Phi) &\mapsto& A(\Phi)
  }
$$

equals the [[evaluation map]] of observables on field histories.

This means that for every [[Cauchy surface]] $\Sigma_p$ the [[presymplectic form]] $\omega_{\Sigma_p}$ restricts to a _[[symplectic form]]_
on regular linear observables. The corresponding _[[Poisson bracket]]_ is

$$
  \left\{
    -,-
  \right\}_{\Sigma_p}
  \;\coloneqq\;
  \omega_{\Sigma_p}(\mathrm{G}_P(-), \mathrm{G}_P(-))
  \;\;\colon\;\;
  LinObs(E_{scp},\mathbf{L})^{reg} \otimes LinObs(E_{scp},\mathbf{L})^{reg}
    \longrightarrow
  \mathbb{R}
  \,.
$$

Moreover, equation (eq:ForGreenHyperbolicFreeFieldTheoryCausalGreenFunctionIsInverseToPresymplecticFormOnRegularLinearObservables)
implies that this is the _covariant [[Poisson bracket]]_ in the sense of the [[covariant phase space]] (def. \ref{CovariantPhaseSpace})
in that it does not actually depend on the choice of [[Cauchy surface]].

An equivalent expression for the Poisson bracket that makes its independence from the choice of Cauchy surface
manifest is the _$P$-[[Peierls bracket]]_ given by

$$
  \label{ThePPeierlsBracket}
  \array{
    LinObs(E_{scp},\mathbf{L})^{reg} \otimes LinObs(E_{scp},\mathbf{L})^{reg}
      &\overset{\{-,-\}}{\longrightarrow}&
    \mathbb{R}
    \\
    (\alpha^\ast, \beta^\ast)
      &\mapsto&
    \underset{\Sigma}{\int}
    \mathrm{G}(\alpha^\ast) \cdot \beta^\ast
      \,
    dvol_\Sigma
  }
$$

where on the left $\alpha^\ast, \beta^\ast \in \Gamma_{\Sigma,cp}(E^\ast) \simeq LinObs(E_{scp},\mathbf{L})^{reg}$

Hence under the given assumptions, for every Cauchy surface the [[Poisson bracket]]
associated with that Cauchy surface equals the invariantly ("covariantly") defined [[Peierls bracket]]

$$
  \{-,-\}_{\Sigma_p} = \{-,-\}
  \,.
$$

Finally this means that in terms of the [[causal propagator]] $\Delta$ (eq:CausalPropagator) the
covariant [[Peierls-Poisson bracket]] is given in [[generalized function]]-notation by

$$
  \label{CausalPropagatorPPeierlsBracket}
  \{\alpha^\ast, \beta^\ast\}
  \;=\;
  \underset{\Sigma}{\int} \underset{\Sigma}{\int}
    \alpha^\ast(x) \cdot \Delta(x,y) \cdot \beta^\ast(y)
  \, dvol_\Sigma(x)\, dvol_\Sigma(y)
$$

Therefore, while the point-evaluation field observables $\mathbf{\Phi}^a(x)$ (def. \ref{PointEvaluationObservables}) are not themselves regular observables (def. \ref{RegularLinearFieldObservables}),
the [[Peierls-Poisson bracket]] (eq:CausalPropagatorPPeierlsBracket) is induced from the
following distributional bracket between them

$$
  \left\{
    \mathbf{\Phi}^a(x)
    ,
    \mathbf{\Phi}^b(y)
  \right\}
  \;=\;
  \Delta^{a b}(x,y)
$$

with the [[causal propagator]] (eq:CausalPropagator) on the right, in that with the identification (eq:AverageOfFieldObservableIsRegularLinearObservables) the [[Peierls-Poisson bracket]] on
regular linear observables arises as follows:

$$
  \begin{aligned}
    \left\{
      \underset{\Sigma}{\int} \alpha^\ast_a(x) \mathbf{\Phi}^a(x) \, dvol_\Sigma(x)
      \,,\,
      \underset{\Sigma}{\int} \beta^\ast_b(y) \mathbf{\Phi}^b(y) \, dvol_\Sigma(y)
    \right\}
    & =
    \underset{\Sigma}{\int} \underset{\Sigma}{\int}
      \alpha^\ast_a(x)
      \underset{= \Delta^{a b}(x,y)}{
      \underbrace{
      \left\{
        \mathbf{\Phi}^a(x),
        \mathbf{\Phi}^b(y)
      \right\}
      }
      }
      \beta^\ast_b(y)
      \, dvol_\Sigma(x)\, dvol_\Sigma(y)
    \\
    & =
    \underset{\Sigma}{\int} \underset{\Sigma}{\int}
      \alpha^\ast_a(x)
      \Delta^{a b}(x,y)
      \beta^\ast_b(y)
      \, dvol_\Sigma(x)\, dvol_\Sigma(y)
  \end{aligned}
$$


=--

([Khavkine 14, lemma 2.5](Green+hyperbolic+partial+differential+equation#Khavkine14))



+-- {: .proof}
###### Proof

Consider two more Cauchy surfaces $\Sigma_p^\pm \hookrightarrow I^\pm(\Sigma) \hookrightarrow \Sigma$, in the [[future]] $I^+$ and in the [[past]] $I^-$ of $\Sigma$, respectively. Choose a [[partition of unity]] on $\Sigma$ consisting of two elements $\chi^\pm \in C^\infty(\Sigma)$ with [[support]] bounded by these Cauchy surfaces: $supp(\chi_\pm) \subset I^\pm(\Sigma^{\mp})$.

Then define

$$
  \label{SplittingOfGreenExactSequenceType}
  P_\chi
    \;\colon\;
  \Gamma_{\Sigma,scp}(E)
    \longrightarrow
  \Gamma_{\Sigma,cp}(E^\ast)
$$

by

$$
  \label{SplittingOfGreenExactSequence}
  \begin{aligned}
    P_\chi(\Phi)
      & \coloneqq
    \phantom{-} P(\chi_+ \Phi)
    \\
    & =
    -
    P(\chi_- \Phi)
    \,.
  \end{aligned}
$$

Notice that the [[support]] of the partitioned field history is in the compactly sourced future/past cone

$$
  \label{ChipmPhiIsSupportedInPastFuture}
  \chi_\pm  \Phi
  \;\in\;
  \Gamma_{\Sigma,\pm cp}(E)
$$

since $\Phi$ is supported in the compactly sourced causal cone, but that
$P(\chi_\pm \Phi)$ indeed has [[compact support]] as required by (eq:SplittingOfGreenExactSequenceType): Since $P(\Phi) = 0$, by assumption, the support is the intersection of that of $\Phi$ with that of $d \chi_\pm$, and the first is spacelike compact by assumption, while the latter is timelike compact, by definition of partition of unity.

Similarly, the equality in (eq:SplittingOfGreenExactSequence) holds because by [[partition of unity]] $P(\chi_+ \Phi) + P(\chi_-\Phi) = P((\chi_+ + \chi_-)\Phi ) = P(\Phi) = 0$.

It follows that

$$
  \label{PchiIsRightInverseToGP}
  \begin{aligned}
    \mathrm{G}_P \circ P_\chi (\Phi)
    & =
    \left(
      \mathrm{G}_{P,+} - \mathrm{G}_{P,-}
    \right) P_\chi (\Phi)
    \\
    & =
    \underset{ = \chi_+ \Phi}{\underbrace{\mathrm{G}_{P,+} P(\chi_+ \Phi)}}
    +
    \underset{ = \chi_- \Phi }{\underbrace{\mathrm{G}_{P,-} P(\chi_- \Phi)}}
    \\
    & =
    (\chi_+ + \chi_-)\Phi
    \\
    & =
    \Phi
    \,,
  \end{aligned}
$$

where in the second line we chose from the two equivalent expressions (eq:SplittingOfGreenExactSequence) such that via (eq:ChipmPhiIsSupportedInPastFuture) the defining property of the [[advanced and retarded Green functions|advanced or retarded Green function]], respectively, may be applied, as shown under the braces.

([Khavkine 14, lemma 2.1](Green+hyperbolic+differential+equation#Khavkine14))

Now we apply this to the computation of $\omega_{\Sigma_p}(\mathrm{G}_P(-),-)$:

$$
  \begin{aligned}
    \omega_{\Sigma_P}(\mathrm{G}_P(\alpha^\ast),\vec \Phi)
    & =
    \underset{\Sigma_P}{\int}  K(\mathrm{G}_P(\alpha^\ast), \vec \Phi)
    \\
    & =
    \underset{\Sigma_P}{\int}  K(\mathrm{G}_P(\alpha^\ast), \chi_+\vec \Phi)
     +
    \underset{\Sigma_P}{\int}  K(\mathrm{G}_P(\alpha^\ast), \chi_-\vec \Phi)
    \\
    & =
    \underset{I^-(\Sigma_P)}{\int}  d K(\mathrm{G}_P(\alpha^\ast), \chi_+\vec \Phi)
     -
    \underset{I^+(\Sigma_P)}{\int}  d K(\mathrm{G}_P(\alpha^\ast), \chi_-\vec \Phi)
    \\
    & =
    \underset{I^-(\Sigma_P)}{\int}
    \left(
       \underset{= 0}{
       \underbrace{
       P(\mathrm{G}_P(\alpha^\ast))}} \cdot \chi_+\vec \Phi
       \mp
       \mathrm{G}_P(\alpha^\ast) \cdot P(\chi_+ \vec \Phi)
    \right)
    dvol_\Sigma
    -
    \underset{I^+(\Sigma_P)}{\int}
    \left(
       \underset{= 0}{
       \underbrace{
       P(\mathrm{G}_P(\alpha^\ast))}} \cdot \chi_-\vec \Phi
       \mp
       \mathrm{G}_P(\alpha^\ast) \cdot P(\chi_- \vec \Phi)
    \right)
    dvol_\Sigma
    \\
    & =
    \mp
    \left(
    \underset{I^-(\Sigma_P)}{\int}
       \mathrm{G}_P(\alpha^\ast) \cdot P(\chi_+ \vec \Phi)
    dvol_\Sigma
    +
    \underset{I^+(\Sigma_P)}{\int}
       \mathrm{G}_P(\alpha^\ast) \cdot P(\chi_+ \vec \Phi)
     dvol_\Sigma
    \right)
    \\
    & =
    \underset{\Sigma}{\int} \mathrm{G}_P(\alpha^\ast) \cdot P(\chi_+ \vec \Phi) dvol_\Sigma
    \\
    & =
    \underset{\Sigma}{\int} \alpha^\ast \cdot \mathrm{G}_{P} (P (\chi_+ \vec \Phi))
    \\
    & =
    \underset{\Sigma}{\int} \alpha^\ast \cdot \vec \Phi
   \end{aligned}
$$

Here we computed as follows:

1. applied the assumption that $\omega_{\Sigma_p}(-,-) = \underset{\Sigma_p}{\int} K(-,-)$;

1. applied the above partition of unity;

1. used the [[Stokes theorem]] (prop. \ref{StokesTheorem}) for the past and the future of $\Sigma_p$, respectively;

1. applied the definition of $d K$ as the witness  of the formal (anti-) self-adjointness of $P$ (def. \ref{FormallyAdjointDifferentialOperators});

1. used $P\circ \mathrm{G}_p = 0$ on $\Gamma_{\Sigma,cp}(E^\ast)$ (def. \ref{AdvancedAndRetardedGreenFunctions}) and used (eq:SplittingOfGreenExactSequence);

1. unified the two integration domains, now that the integrands are the same;

1. used the formally (anti-)self adjointness of the Green functions (example \ref{CausalGreenFunctionOfFormallyAdjointDifferentialOperatorAreFormallyAdjoint});


1. used (eq:PchiIsRightInverseToGP).


=--

+-- {: .num_example #PeierlsBracketEistsForScalarFieldAndDiracField}
###### Example
**([[scalar field]] and [[Dirac field]] have [[covariant phase space|covariant]] [[Peierls-Poisson bracket]])**

Examples of [[free field theory|free]] [[Lagrangian field theories]] for which the assumptions of theorem
\ref{PPeierlsBracket} are satisfied,  so that the covariant [[Poisson bracket]] exists in the form
of the [[Peierls bracket]] include

* the [[free field theory|free]] [[real scalar field]] (example \ref{LagrangianForFreeScalarFieldOnMinkowskiSpacetime});

* the [[free field theory|free]] [[Dirac field]] (example \ref{LagrangianDensityForDiracField}).

For the [[free field theory|free]] [[scalar field]] this is the statement of example \ref{GreenHyperbolicKleinGordonEquation}
with example \ref{PresymplecticFormForFreeRealScalarField}, while for the [[Dirac field]] this is the
statement of example \ref{GreenHyperbolicDiracOperator} with example \ref{PresymplecticFormForFreeDiracField}.

=--

For the [[free field theory|free]] [[electromagnetic field]] (example \ref{ElectromagnetismLagrangianDensity})
the assumptions of theorem \ref{PPeierlsBracket} are violated, the [[covariant phase space]] does not exist.
But in the discuss of _[Gauge fixing](#GaugeFixing)_, below,
we will find that for an equivalent re-incarnation of the electromagnetic field, they are met after all.



$\,$

**BV-resolution of the covariant phase space**
 {#BVResolutionOfTheCovariantPhaseSpace}

So far we have discussed the [[covariant phase space]] (prop. \ref{CovariantPhaseSpace}) in terms of
explicit restriction to the [[shell]].  We now turn to the more flexible perspective where
a [[homological resolution]] of the [[shell]] in terms of  "[[antifields]]" is used (def. \ref{BVComplexOfOrdinaryLagrangianDensity}).

+-- {: .num_example #BVPresymplecticCurrent}
###### Example
**(BV-presymplectic current)**

Let $(E,\mathbf{L})$ be a [[Lagrangian field theory]] (def. \ref{LocalLagrangianDensityOnSecondOrderJetBundleOfTrivialVectorBundleOverMinkowskiSpacetime})
whose [[field bundle]] $E$ is a [[trivial vector bundle]] (example \ref{TrivialVectorBundleAsAFieldBundle}) and whose [[Lagrangian density]] $\mathbf{L}$ is spacetime-independent (example \ref{ShellForSpacetimeIndependentLagrangians}).
Let $\Sigma \times \{\varphi\} \hookrightarrow \mathcal{E}$ be a constant section of the shell (eq:ConstantSectionOfTrivialShellBundle).

Then in the BV-variational bicomplex (eq:ComparisonMorphismFromOrdinaryBVComplexToLocalObservables)
there exists the _BV-presymplectic potential_

$$
  \label{BVPresymplecticPotential}
  \Theta_{BV}
    \;\coloneqq\;
  \overline{\phi}_a \delta \phi^a \, dvol_\Sigma
  \;\in\;
  \Omega^{p,1}_\Sigma(E,\varphi)\vert_{\mathcal{E}_{BV}}
$$

and the corresponding _BV-presymplectic current_

$$
  \Omega_{BV}
  ;\in\;
  \Omega^{p,2}_\Sigma(E,\varphi)\vert_{\mathcal{E}_{BV}}
$$

defined by

$$
  \begin{aligned}
    \Omega_{BV}
      & \coloneqq
    \delta \Theta_{BV}
     \\
     & =
     \delta \overline{\phi}_a \wedge \delta \phi^a \wedge dvol_{\Sigma}
  \end{aligned}
  \,,
$$

where $(\phi^a)$ are the given [[field (physics)|field]]
[[coordinates]], $\overline{\phi}_a$ the corresponding [[antifield]] coordinates (eq:AntifieldCoordinates)
and $\frac{\delta_{EL} \mathbf{L}}{\delta \phi^a}$ the corresponding components of the [[Euler-Lagrange form]]
(prop. \ref{EulerLagrangeOperatorForTivialVectorBundleOverMinkowskiSpacetime}).

=--



+-- {: .num_prop #ResolutionOfCovariantPhaseSpaceCorrespondence}
###### Proposition
**(local BV-BFV relation)**

Let $(E,\mathbf{L})$ be a [[Lagrangian field theory]] (def. \ref{LocalLagrangianDensityOnSecondOrderJetBundleOfTrivialVectorBundleOverMinkowskiSpacetime})
whose [[field bundle]] $E$ is a [[trivial vector bundle]] (example \ref{TrivialVectorBundleAsAFieldBundle}) and whose [[Lagrangian density]] $\mathbf{L}$ is spacetime-independent (example \ref{ShellForSpacetimeIndependentLagrangians}).
Let $\Sigma \times \{\varphi\} \hookrightarrow \mathcal{E}$ be a constant section of the shell (eq:ConstantSectionOfTrivialShellBundle).

Then the BV-presymplectic current $\Omega_{BV}$ (def. \ref{BVPresymplecticCurrent})
witnesses the [[on-shell]] vanishing (prop. \ref{HorizontalDerivativeOfPresymplecticCurrentVanishesOnShell}) of the [[total derivative|total spacetime derivative]] of the genuine [[presymplectic current]] $\Omega_{BFV}$ (prop. \ref{EulerLagrangeOperatorForTivialVectorBundleOverMinkowskiSpacetime}) in that the [[total derivative|total spacetime derivative]]
of $\Omega_{BFV}$ equals the BV-differential $s_{BV}$  of $\Omega_{BV}$:

$$
  d \Omega_{BFV} = s \Omega_{BV}
  \,.
$$

Hence if $\Sigma_{tra} \hookrightarrow \Sigma$ is a [[submanifold]] of [[spacetime]] of full dimension $p+1$
[[manifold with boundary|with boundary]] $\partial \Sigma_{tra} = \Sigma_{in} \sqcup \Sigma_{out}$

$$
  \array{
    && \Sigma_{tra}
    \\
    & {}^{\mathllap{in}}\nearrow && \nwarrow^{\mathrm{out}}
    \\
    \Sigma_{in}
    && &&
    \Sigma_{out}
  }
$$

then the [[pullback of differential forms|pullback]] of the
two [[presymplectic forms]] (eq:TransgressionOfPresymplecticCurrentToCauchySurface)
on the incoming and outgoing [[spaces of field histories]], respectively, differ by the
BV-differential of the transgression of the BV-presymplectic current:

$$
  \left( (-)\vert_{in}\right)^\ast\left( \omega_{in}\right)
  \;-\;
  \left( (-)\vert_{out} \right)^\ast \left( \omega_{out} \right)
  =
  \tau_{\mathbb{D} \times \Sigma_{tra}} ( s \Omega_{BV} )
  \phantom{AAAA}
  \in
  \Omega^2
  \left(
    \Gamma_{\Sigma_{tra}}(E)_{\delta_{EL} \mathbf{L} = 0}
  \right)
  \,.
$$

This [[homological resolution]] of the [[Lagrangian correspondence]] that exhibits the "covariance" of the
[[covariant phase space]] (prop. \ref{CovariantPhaseSpace}) is known as the _BV-BFV relation_
([Cattaneo-Mnev-Reshetikhin 12 (9)](BV-BRST+formalism#CattaneoMnevReshetikhin12)).

=--


+-- {: .proof}
###### Proof

For the first statement we compute as follows:

$$
  \begin{aligned}
   s \Omega_{BV}
    & =
  - \delta (s \overline{\phi}_a) \delta \phi^a \wedge dvol_{\Sigma}
  \\
    & =
  - \delta \frac{\delta_{EL}L }{\delta \phi^a}  \delta \phi^a dvol_{\Sigma}
  \\
  & =
  - \delta \delta_{EL}\mathbf{L}
  \\
  & =
  d \Omega_{BFV}
  \,,
  \end{aligned}
$$

where the first steps simply unwind the definitions, and where the last step is prop. \ref{HorizontalDerivativeOfPresymplecticCurrentVanishesOnShell}.

With this the second statement follows by immediate generalization of
the proof of prop. \ref{CovariantPhaseSpace}.

=--




=--

+-- {: .num_example #DerivedPresymplecticCurrentOfRealScalarField}
###### Example
**(derived [[presymplectic current]] of [[real scalar field]])**

Consider a [[Lagrangian field theory]] (def. \ref{LocalLagrangianDensityOnSecondOrderJetBundleOfTrivialVectorBundleOverMinkowskiSpacetime})
without any non-trivial implicit [[infinitesimal gauge transformations]] (def. \ref{ImplicitInfinitesimalGaugeSymmetry});
for instance the [[real scalar field]] from example \ref{LagrangianForFreeScalarFieldOnMinkowskiSpacetime}.

Inside its [[local BV-complex]] (def. \ref{BVComplexOfOrdinaryLagrangianDensity}) we may form the linear combination of

1. the [[presymplectic current]] $\Omega_{BFV}$ (example \ref{FreeScalarFieldEOM})

1. the BF-presymplectic current $\Omega_{BV}$ (example \ref{BVPresymplecticCurrent}).

This yields a vertical 2-form

$$
  \Omega \;\coloneqq\; \Omega_{BV} + \Omega_{BFV} \;\; \in \Omega^{p,2}_\Sigma(E)\vert_{\mathcal{E}_{BV}}
$$

which might be called the _derived presymplectic current_.

Similarly we may form the linear combination of
1. the presymplectic potential current $\Theta_{BFV}$ (eq:dLDecomposition)

1. the BF-presymplectic potential current $\Theta_{BV}$ (eq:BVPresymplecticPotential)

1. the [[Lagrangian density]] $\mathbf{L}$ (def. \ref{LocalLagrangianDensityOnSecondOrderJetBundleOfTrivialVectorBundleOverMinkowskiSpacetime})

hence

$$
  \Theta \;\coloneqq\; \Theta_{BV} + \underset{Lepage}{\underbrace{ \Theta_{BFV} + \mathbf{L} }}
$$

(where the sum of the two terms on the right is the [[Lepage form]] (eq:TheLepage)).
This might be called the _derived presymplectic potental current_.

We then have that

$$
  (\delta + (d-s))\Omega \;=\; 0
$$

and in fact

$$
  (\delta + (d-s))\Theta \;=\; \Omega
  \,.
$$


=--


+-- {: .proof}
###### Proof

Of course the first statement follows from the second, but in fact the two contributions of the first statement
even vanish separately:

$$
  \delta \Omega = 0
  \,,
  \phantom{AAAA}
  (d-s)\Omega = 0
  \,.
$$

The statement on the left is immediate from the definitions, since $\Omega = \delta \Theta$.
For the statement on the right we compute

$$
  \begin{aligned}
    (d - s) (\Omega_{BV} + \Omega_{BFV})
    & =
    \underset{= 0}{\underbrace{d \Omega_{BFV}
      -
    \underset{ = 0 }{\underbrace{ s \Omega_{BV}}}  }}
     +
    \underset{ = 0}{\underbrace{ d \Omega_{BV} - s \Omega_{BFV} }}
    \\
    & = 0
  \end{aligned}
$$

Here the first term vanishes via the local BV-BFV relation (prop. \ref{ResolutionOfCovariantPhaseSpaceCorrespondence})
while the other two terms vanish simply by degree reasons.

Similarly for the second statement we compute as follows:

$$
  \begin{aligned}
    (\delta + (d - s) ) \Theta
    & =
    \underset{ = \Omega_{BV}  + \Omega_{BFV}}{\underbrace{ \delta (\Theta_{BV} + \Theta_{BFV}) }}
    +
    \underset{ = \delta \mathbf{L}}{\underbrace{\mathbf{d} \mathbf{L}}}
    +
    \underset{ = 0 }{\underbrace{  (d-s) \mathbf{L}  }}
    +
    (d-s)(\Theta_{BV} + \Theta_{BFV})
    \\
    & =
    \Omega_{BV} +  \Omega_{BFV}
    +
    \delta \mathbf{L}
    +
    \underset{ = 0}{\underbrace{d \Theta_{BV}}}
    -
    \underset{ = \delta_{EL} \mathbf{L} }{\underbrace{ s \Theta_{BV}}}
    +
    \underset{ = \delta_{EL}\mathbf{L} - \delta \mathbf{L} }{\underbrace{ d \Theta_{BFV} } }
    -
    \underset{ = 0 }{\underbrace{ s \Theta_{BFV} }}
    \\
    & =
    \Omega_{BV} + \Omega_{BFV}
  \end{aligned}
  \,.
$$

Here the direct vanishing of various terms is again by simple degree reasons, and
otherwise we used the definition of $\Omega$ and, crucially, the variational identity
$\delta \mathbf{L} = \delta_{EL}\mathbf{L} - d \Theta_{BFV}$ (eq:dLDecomposition).

=--



$\,$

**Hamiltonian local observables**
 {#HamiltonianLocalObservablesOnACauchySurface}

We have defined the _[[local observables]]_ (def. \ref{LocalObservables}) as
the [[transgression of variational differential forms|transgressions]] of horizontal $p+1$-forms
(with compact spacetime support) to the [[on-shell]] [[space of field histories]] $\Gamma_{\Sigma}(E)_{\delta_{EL}\mathbf{L} = 0}$ over
all of [[spacetime]] $\Sigma$. More
explicitly, these could be called the _spacetime local observables_.

But with every choice of [[Cauchy surface]] $\Sigma_p \hookrightarrow \Sigma$ (def. \ref{CauchySurface}) comes another notion
of local observables: those that are [[transgression of variational differential forms|transgressions]]
of horizontal $p$-forms (instead of $p+1$-forms) to the [[on-shell]]
[[space of field histories]] restricted to the [[infinitesimal neighbourhood]] of that Cauchy surface (def. \ref{FieldHistoriesOnInfinitesimalNeighbourhoodOfSubmanifoldOfSpacetime}): $\Gamma_{\Sigma_p}(E)_{\delta_{EL} \mathbf{L} = 0}$.
These are _spatially local observables_, with respect to the given choice of [[Cauchy surface]].

Among these spatially local observables are the _Hamiltonian local observables_ (def. \ref{HamiltonianLocalObservables} below)
which are [[transgression of variational differential forms|transgressions]] specifically of the
[[Hamiltonian differential forms|Hamiltonian forms]] (def. \ref{HamiltonianForms}).
These inherit a transgression of the [[Poisson bracket Lie n-algebra|local Poisson bracket]] (prop. \ref{LocalPoissonBracket})
to a [[Poisson bracket]] on Hamiltonian local observables (def. \ref{PoissonBracketOnHamiltonianLocalObservables} below).
This is known as the _[[Peierls bracket]]_ (example \ref{PoissonBracketForRealScalarField} below).




+-- {: .num_defn #HamiltonianLocalObservables}
###### Definition
**(Hamiltonian local observables)**

Let $(E, \mathbf{L})$ be a [[Lagrangian field theory]]  (def. \ref{LocalLagrangianDensityOnSecondOrderJetBundleOfTrivialVectorBundleOverMinkowskiSpacetime}).

Consider a [[local observable]] (def. \ref{LocalObservables})

$$
  \tau_\Sigma(A)
    \;\colon\;
  \Gamma_\Sigma(E)_{\delta_{EL}\mathbf{L} = 0}
    \longrightarrow
  \mathbb{C}
  \,,
$$

hence the [[transgression of variational differential forms|transgression]] of a variational horizontal
$p+1$-form $A \in \Omega^{p+1,0}_{\Sigma,cp}(E)$ of compact spacetime support.

Given a [[Cauchy surface]] $\Sigma_p \hookrightarrow \Sigma$ (def. \ref{CauchySurface})
we say that $\tau_\Sigma (A)$ is _[[Hamiltonian]]_ if it is also the transgression of a
[[Hamiltonian differential form]] (def. \ref{HamiltonianForms}), hence if there exists

$$
  (H,v) \in \Omega^{p,0}_{\Sigma, Ham}(E)
$$

whose transgression over the Cauchy surface $\Sigma_p$ equals the transgression of $A$ over all of
spacetime $\Sigma$, under the isomorphism (eq:CauchySurfaceIsomorphismOnHistorySpace)

$$
  \array{
    \Gamma_\Sigma(E)_{\delta_{EL} \mathbf{L} = 0 }
      && \underoverset{\simeq}{(-)\vert_{N_\Sigma \Sigma_p}}{\longrightarrow} &&
    \Gamma_{\Sigma_p}(E)_{\delta_{EL}\mathbf{L} = 0}
    \\
    & {}_{\mathllap{\tau_\Sigma}(A)}\searrow && \swarrow_{\mathrlap{ \tau_{\Sigma_p}(H) }}
    \\
    && \mathbf{\Omega}^2
  }
$$

=--

Beware that the [[local observable]] $\tau_{\Sigma_p}(H)$ defined by a [[Hamiltonian differential form]]
$H \in \Omega^{p,0}_{\Sigma,Ham}(E)$ as in def. \ref{HamiltonianLocalObservables}  does in general depend
not just on the choice of $H$, but also on the choice $\Sigma_p$ of the Cauchy surface.
The exception are those Hamiltonian forms which are _[[conserved currents]]_:


+-- {: .num_prop #ConservedCharge}
###### Proposition
**([[conserved charges]] -- [[transgression of variational differential forms|transgression]] of [[conserved currents]])**

Let $(E,\mathbf{L})$ be a [[Lagrangian field theory]] (def. \ref{LocalLagrangianDensityOnSecondOrderJetBundleOfTrivialVectorBundleOverMinkowskiSpacetime}).

If a [[Hamiltonian differential form]] $J \in \Omega^{p,0}_{\Sigma,Ham}(E)$ (def. \ref{HamiltonianForms}) happens to be a
[[conserved current]] (def. \ref{SymmetriesAndConservedCurrents}) in that its [[total derivative|total spacetime derivative]]
vanishes [[on-shell]]

$$
  d J \vert_{\mathcal{E}} \;= \; 0
$$

then the induced Hamiltonian [[local observable]] $\tau_{\Sigma_p}(J)$ (def. \ref{HamiltonianLocalObservables})
is independent of the choice of [[Cauchy surface]] $\Sigma_p$ (def \ref{CauchySurface})
in that for $\Sigma_p, \Sigma'_p \hookrightarrow \Sigma$ any two Cauchy surfaces which are [[cobordism|cobordant]],
then

$$
  \tau_{\Sigma_p}(J) = \tau_{\Sigma'_p}(J)
  \,.
$$

The resulting [[constant function|constant]] is called the
_[[conserved charge]]_ of the conserved current, traditionally denoted

$$
  Q \;\coloneqq\; \tau_{\Sigma_p}(J)
  \,.
$$

=--

+-- {: .proof}
###### Proof

By definition the [[transgression of variational differential forms|transgression]] of $d J$
vanishes on the [[on-shell]] [[space of field histories]]. Therefore the result
is given by [[Stokes' theorem]] (prop. \ref{StokesTheorem}).

=--


+-- {: .num_defn #PoissonBracketOnHamiltonianLocalObservables}
###### Definition
**([[Poisson bracket]] of [[Hamiltonian differential form|Hamiltonian]] [[local observables]] on  [[covariant phase space]])**

Let $(E, \mathbf{L})$ be a [[Lagrangian field theory]] (def. \ref{LocalLagrangianDensityOnSecondOrderJetBundleOfTrivialVectorBundleOverMinkowskiSpacetime}) where the [[field bundle]] $E \overset{fb}{\to} \Sigma$ is a [[trivial vector bundle]] over [[Minkowski spacetime]] (example \ref{TrivialVectorBundleAsAFieldBundle}).

We say that the _[[Poisson bracket]]_ on Hamiltonian local observables (def. \ref{HamiltonianLocalObservables})
is the [[transgression of variational differential forms|transgression]] (def. \ref{TransgressionOfVariationalDifferentialFormsToConfigrationSpaces})
of the [[Poisson bracket Lie n-algebra|local Poisson bracket]] (def. \ref{LocalPoissonBracket})
of the corresponding [[Hamiltonian differential forms]] (def. \ref{LocalPoissonBracket})
to the [[covariant phase space]] (def. \ref{CovariantPhaseSpace}).

Explicitly: for $\Sigma_p \hookrightarrow \Sigma$ a choice of [[Cauchy surface]] (def. \ref{CauchySurface})
then the Poisson bracket between two local Hamiltonian observables
$\tau_{\Sigma_p}((H_i, v_i))$ is

$$
  \label{PoissonBracketTransgressedToCauchySurface}
  \left\{
    \tau_{\Sigma_p}((H_1, v_1))
    \,,\,
    \tau_{\Sigma_p}( (H_2, v_2) )
  \right\}
  \;\coloneqq\;
  \tau_{\Sigma_p}( \, \{ (H_1, v_1), (H_2, v_2) \} \, )
  \,,
$$

where on the right we have the transgression of the [[Poisson bracket Lie n-algebra|local Poisson bracket]]
$\{(H_1, v_1), (H_2, v_2)\}$ of [[Hamiltonian differential forms]] on the [[jet bundle]] from prop. \ref{LocalPoissonBracket}.

=--


+-- {: .proof}
###### Proof

We need to see that equation (eq:PoissonBracketTransgressedToCauchySurface) is well defined,
in that it does not depend on the choice of Hamiltonian form $(H_i, v_i)$
representing the local Hamiltonian observable $\tau_{\Sigma_p}(H_i)$.

It is clear that all the transgressions involved depend only on the restriction
of the Hamiltonian forms to the pullback of the jet bundle to
the [[infinitesimal neighbourhood]] $N_\Sigma \Sigma_p$.
Moreover, the Poisson bracket on the jet bundle (eq:LocalPoissonLieBracket)
clearly respects this restriction.

If a Hamiltonian differential form $H$ is in the [[kernel]] of the transgression map
relative to $\Sigma_p$, in that for every smooth collection $\Phi_{(-)} \colon U \to \Gamma_{\Sigma_p}(E)_{\delta_{EL}\mathbf{L} = 0}$ of field histories (according to def. \ref{DifferentialFormsOnDiffeologicalSpaces}) we have (by def. \ref{TransgressionOfVariationalDifferentialFormsToConfigrationSpaces})

$$
  \int_{\Sigma_p} j^\infty_\Sigma(\Phi_{(-)})^\ast H  \;= \;0
  \;\;\;
  \in \Omega^p(U)
$$

then the fact that the _[[kernel of integration is the exact differential forms]]_ says that
$j^\infty_\Sigma(\Phi_{(-)})^\ast H \in \Omega^p(U \times \Sigma)$ is $d_\Sigma$-[[exact differential form|exact]] and hence in particular
$d_\Sigma$-[[closed differential form|closed]] for all $\Phi_{(-)}$:

$$
  d_\Sigma j^\infty(\Phi_{(-)})^\ast H \;=\; 0
  \,.
$$

By prop. \ref{PullbackAlongJetProlongationIntertwinesHorizontalDerivative} this means that

$$
  j^\infty(\Phi_{(-)})^\ast ( d H ) \;= \; 0
$$

for all $\Phi_{(-)}$. Since $H \in \Omega^{p,0}_\Sigma(E)$ is horizontal, the same
proposition (see also example \ref{BasicFactsAboutVarationalCalculusOnJetBundleOfTrivialVectorBundle}) implies that
in fact $H$ is horizontally closed:

$$
  d H \;=\; 0
  \,.
$$

Now since the field bundle $E \overset{fb}{\to} \Sigma$ is [[trivial bundle|trivial]] by assumption, prop. \ref{HorizontalVariationalComplexOfTrivialFieldBundleIsExact}
applies and says that this horizontally closed form on the jet bundle is in fact horizontally exact.

In conclusion this shows that the [[kernel]] of the [[transgression of variational differential forms|transgression]]
map $\tau_{\Sigma_p} \;\colon\; \Omega^{p,0}_\Sigma(E) \to C^\infty\left( \Gamma_{\Sigma_p}(E)\right)$
is precisely the space of horizontally exact horizontal $p$-forms.

Therefore the claim
now follows with the statement that horizontally exact [[Hamiltonian differential forms]] constitute a
[[Lie ideal]] for the local Poisson bracket on the jet bundle; this is lemma \ref{HorizontallyExactFormsDropOutOfLocalLieBracket}.

=--




+-- {: .num_example #PoissonBracketForRealScalarField}
###### Example
**([[Poisson bracket]] of the  [[real scalar field]])**

Consider the [[Lagrangian field theory]] of the [[free field|free]] [[scalar field]]
(example \ref{LagrangianForFreeScalarFieldOnMinkowskiSpacetime}),
and consider the [[Cauchy surface]] defined by $x^0 = 0$.

By example \ref{LocalPoissonBracketForRealScalarField} the [[Poisson bracket Lie n-algebra|local Poisson bracket]]
of the [[Hamiltonian forms]]

$$
  Q \coloneqq \phi \iota_{\partial_0} dvol_\Sigma \in \Omega^{p,0}(E)
$$

and

$$
  P \coloneqq \eta^{\mu \nu} \phi_{,\mu} \iota_{\partial_\nu} dvol_{\Sigma} \in \Omega^{p,0}(E)
  \,.
$$

is

$$
  \{Q,P\} = \iota_{v_Q} \iota_{v_P} \omega = \iota_{\partial_0} dvol_\Sigma
  \,.
$$


Upon [[transgression of variational differential forms|transgression]] according to def. \ref{PoissonBracketOnHamiltonianLocalObservables}
this yields the following [[Poisson bracket]]

$$
  \left\{
    \int_{\Sigma_p} b_1(\vec x) \phi(t,\vec x) \iota_{\partial_0} dvol_\Sigma(x)
    d^p \vec x
    \;,\;
    \int_{\Sigma_p} b_2(\vec x) \partial_0 \phi(t,\vec x) \iota_{\partial_0} dvol_\Sigma(\vec x)
  \right\}
  \;=\;
  \int_{\Sigma_p} b_1(\vec x) b_2(\vec x) \iota_{\partial_0} dvol_\Sigma(\vec x)
  d^p \vec x
  \,,
$$

where

$$
  \mathbf{\Phi}(x), \partial_0 \mathbf{\Phi}(x)
    \;:\;
  PhaseSpace(\Sigma_p^t) \to \mathbb{R}
$$

denote the point-evaluation observables (example \ref{PointEvaluationObservables}), which act on a field history $\Phi \in \Gamma_\Sigma(E) = C^\infty(\Sigma)$ as

$$
 \mathbf{\Phi}(x) \;\colon\; \Phi \mapsto \Phi(x)
 \phantom{AAAAAAAA}
 \partial_0 \mathbf{\Phi}(x) \;\colon\; \Phi \mapsto \partial_0 \Phi(x)
 \,.
$$

Notice that these point-evaluation functions themselves do not arise
as the transgression of elements in $\Omega^{p,0}(E)$; only their smearings such as $\int_{\Sigma_p} b_1 \phi dvol_{\Sigma_p}$ do.
Nevertheless we may express the above Poisson bracket conveniently via the [[integral kernel]]

$$
  \label{PoissonBracketOfScalarFieldPointEvaluationOnMinkowskiSpacetime}
  \left\{
    \mathbf{\Phi}(t,\vec x), \partial_0\mathbf{\Phi}(t,\vec y)
  \right\}
  \;=\;
  \delta(\vec x - \vec y)
  \,.
$$

=---




+-- {: .num_prop #PoissonBracketForDiracField}
###### Proposition
**([[super Lie algebra|super]]-[[Poisson bracket]] of the [[Dirac field]])**

Consider the [[Lagrangian field theory]] of the [[free field theory|free]] [[Dirac field]] on [[Minkowski spacetime]] (example \ref{LagrangianDensityForDiracField}) with [[field bundle]] the odd-shifted [[spinor bundle]] $E = \Sigma \times S_{odd}$ (example \ref{DiracFieldBundle}) and with

$$
  \theta \Psi_\alpha(x)
  \;\colon\;
  \mathbb{R}^{0\vert 1}
     \longrightarrow
  \left[
    \Gamma_\Sigma(\Sigma \times S_{odd})_{\delta_{EL}\mathbf{L} = 0},
    \mathbb{C}
  \right]
$$

the corresponding odd-graded point-evaluation observable (example \ref{PointEvaluationObservables}).

Then consider the [[Cauchy surfaces]] in [[Minkowski spacetime]] (def. \ref{MinkowskiSpacetime}) given by $x^0 = t$ for $t \in \mathbb{R}$. Under [[transgression of variational differential forms|transgression]] to this Cauchy surface via def. \ref{PoissonBracketOnHamiltonianLocalObservables},
the [[Poisson bracket Lie n-algebra|local Poisson bracket]], which by example \ref{LocalPoissonBracketForDiracField} is given by the [[super Lie algebra|super Lie bracket]]

$$
  \left\{
     \left( \gamma^\mu \psi  \right)_\alpha \, \iota_{\partial_\mu} dvol_\Sigma
     \,,\,
     \left(\overline{\psi}\gamma^\mu\right)^\beta\, \iota_{\partial_\mu} dvol_\Sigma
  \right\}
  \;=\;
  \left(\gamma^\mu\right)_\alpha{}^{\beta} \, \iota_{\partial_\mu} dvol_\Sigma
  \,,
$$

has [[integral kernel]]

$$
  \left\{
    \psi_\alpha(t,\vec x)
    ,
    \overline{\psi}^\beta(t,\vec y)
  \right\}
  \;=\;
  (\gamma^0)_{\alpha}{}^\beta \delta(\vec y - \vec x)
  \,.
$$


=--



$\,$

This concludes our discussion of the [[phase space]] and the [[Poisson-Peierls bracket]] for well behaved [[Lagrangian field theories]].
In the [next chapter](#Propagators) we discuss in detail the [[integral kernels]] corresponding to the [[Poisson-Peierls bracket]]
for key classes of examples. These are the _[[propagators]]_ of the theory.


$\,$

## Propagators
 {#Propagators}

In the [previous chapter](#PhaseSpace) we have seen the [[covariant phase space]] (prop. \ref{CovariantPhaseSpace}) of sufficiently nice [[Lagrangian field theories]],
which is the [[on-shell]] [[space of field histories]] equipped with the [[presymplectic form]] [[transgression of variational differential forms|transgressed]] from the [[presymplectic current]]
of the theory; and we have seen that in good cases this induces a bilinear pairing on sufficiently well-behaved [[observables]],
called the _[[Poisson bracket]]_ (def. \ref{PoissonBracketOnHamiltonianLocalObservables}), which reflects the [[infinitesimal symmetries]] of the [[presymplectic current]]. This [[Poisson bracket]] is of central importance for passing to actual [[quantum field theory]],
since, as we will discuss in _[Quantization](#Quantization)_ below, it is the [[infinitesimal]] approximation to the [[quantization]] of a [[Lagrangian field theory]].

We have moreover seen that the [[Poisson bracket]] on the [[covariant phase space]] of a
[[free field theory]] with [[Green hyperbolic differential equation|Green hyperbolic]] [[equations of motion]]
-- the [[Peierls-Poisson bracket]] --
is determined by the [[integral kernel]] of the _[[causal Green function]]_ (prop. \ref{PPeierlsBracket}).
Under the identification of linear of-shell observables with off-shell observables
that are [[generalized solution of a PDE|generalized solutions]] to the [[equations of motion]] (theorem \ref{LinearObservablesForGreeFreeFieldTheoryAreDistributionalSolutionsToTheEquationsOfMotion}) the convolution with this [[integral kernel]]
may be understood as _propagating_ the values of an off-shell observable through [[spacetime]],
such as to then compare it with any other observable at any spacetime point (prop. \ref{PPeierlsBracket}).
Therefore the [[integral kernel]] of the [[causal Green function]] is also called the _[[causal propagator]]_.

This means that for [[Green hyperbolic differential equation|Green hyperbolic]] [[free field theory|free]] [[Lagrangian field theory]]
the [[Poisson bracket]], and hence the infinitesimal [[quantization]] of the theory, is all encoded in the
[[causal propagator]]. Therefore here we analyze the [[causal propagator]], as well as its variant [[propagators]], in detail.

The main tool for these computations is _[[Fourier analysis]]_ (reviewed [below](#FourierAnalysis)) by which [[field histories]], [[observables]] and [[propagators]] on [[Minkowski spacetime]] are decomposed as [[superpositions]] of [[plane waves]] of various [[frequencies]], [[wave lengths]] and [[wave vector]]-[[direction of a vector|direction]]. Using this, all [[propagators]] are exhibited as those [[superpositions]]
of [[plane waves]] which satisfy the [[dispersion relation]] of the given [[equation of motion]], relating [[plane wave]] [[frequency]]
to [[wave length]].

This way the [[causal propagator]] is naturally decomposed into its contribution from [[positive real number|positive]]
and from [[negative real number|negative]] [[frequencies]]. The positive frequency part of the [[causal propagator]] is called the _[[Hadamard propagator]]_ (def. \ref{StandardHadamardDistributionOnMinkowskiSpacetime} below). It turns out (prop. \ref{SkewSymmetricPartOfHadmrdPropagatorIsCausalPropagatorForKleinGordonEquationOnMinkowskiSpacetime} below) that this is equivalently the [[sum]] of the [[causal propagator]], which itself is skew-symmetric (cor. \ref{CausalPropagatorIsSkewSymmetric} below), with a symmetric component, or equivalently that the [[causal propagator]] is the skew-symmetrization of the [[Hadamard propagator]].
After [[quantization]] of [[free field theory]] discussed [further below](#FreeQuantumFields), we will see that the
Hadamard propagator is equivalently the [[2-point function|correlation function]] between two point-evaluation field observables (example \ref{PointEvaluationObservables}) in a _[[vacuum state]]_ of the field theory (a [[state]] in the sense of def. \ref{States}).

Moreover, by def. \ref{AdvancedAndRetardedGreenFunctions} the [[causal propagator]] also decomposes into its
contributions with [[future]] and [[past]] [[support of a distribution|support]], given by the _difference_ between
the [[advanced and retarded propagators]]. These we analyze first, starting with prop. \ref{AdvancedRetardedPropagatorsForKleinGordonOnMinkowskiSpacetime} below.

Combining these two decompositions of the [[causal propagator]] (positive/negative frequency as well as positive/negative time) yields one more
propagator, the _[[Feynman propagator]]_ (def. \ref{FeynmanPropagatorForKleinGordonEquationOnMinkowskiSpacetime} below).

We will see [below](#Quantization) that the [[quantization]] of a [[free field theory]] is given by a
"[[star product]]" (on [[observables]]) which is given by "[[exponential|exponentiating]]" these [[propagators]].
For that to make sense, certain pointwise products of these [[propagators]], regarded as [[generalized functions]] (prop. \ref{DistributionsAreGeneralizedFunctions}) need to exist. But since the [[propagators]] are [[distributions]] with
[[singularities]], the existence of these products requires that certain potential "[[UV divergences]]" in their [[Fourier transform of distributions|Fourier transforms]] are absent ("[[Hörmander's criterion]]", prop. \ref{HoermanderCriterionForProductOfDistributions} below). These [[UV divergences]] are captured by what what is called the _[[wave front set]]_ (def. \ref{WaveFrontSet} below).

The study of [[UV divergences]] of [[distributions]] via their [[wave front sets]] is called _[[microlocal analysis]]_
and provides powerful tools for the understanding of [[quantum field theory]]. In particular the _[[propagation of singularities theorem]]_ (prop. \ref{PropagationOfSingularitiesTheorem}) shows that for [[distributional solutions to a PDE|distributional solutions]] (def. \ref{DistributionalDerivatives}) of [[Euler-Lagrange equation|Euler-Lagrange]] [[equations of motion]], such as the [[propagators]],
their [[singular support]] propagates itself through [[spacetime]] along the [[wave front set]].

Using this theorem we work out the [[wave front sets]] of the [[propagators]] (prop. \ref{WaveFronSetsForKGPropagatorsOnMinkowski} below).
Via [[Hörmander's criterion]] (prop. \ref{HoermanderCriterionForProductOfDistributions}) this computation will serve to show
why upon [[quantization]] the [[Hadamard propagator]] replaces the [[causal propagator]] in the construction of the [[Wick algebra]]
of [[quantum observables]] of the [[free field theory]] (discussed below in _[Free quantum fields](#FreeQuantumFields)_) and the the [[Feynman propagator]] similarly controls the [[quantum observables]] of the [[interaction|interacting]] [[quantum field theory]]
(below in _[Feynman diagrams](#FeynmanDiagrams)_).


$\,$

The following table summarizes the structure of the system of propagators.
(The column "as vacuum expectation value of field operators" will be discussed further below in _[Free quantum fields](#FreeQuantumFields)_).

$\,$

[[!include propagators - table]]

$\,$




We now discuss these topics:

* _Background_

  * _[Fourier analysis and Plane wave modes](#FourierAnalysis)_

  * _[Microlocal analysis and UV-Divergences](#MicrolocalAnalysisAndUltravioletDivergence)_

  * _[Cauchy principal values](#CauchyPrincipalValues)_
  

* _Propagators for the free scalar field on Minkowski spacetime_

  * _[advanced and regarded propagators](#AdvancedAndRetardedPropagatorsForKleinGordonEquationOnMinkowskiSpacetime)_

  * _[causal propagator](#CausalPropagatorForKleinGordonEquationOnMinkowskiSpacetime)_

  * _[Hadamard propagator](#HadamardPropagatorForKleinGordonOnMinkowskiSpacetime)_

  * _[Feynman propagator](#FeynmanPropagator)_

  * _[singular support and wave front sets](#WaveFrontSetsOfPropagatorsForKleinGordonOperatorOnMinkowskiSpacetime)_

* _[Propagators for the Dirac field on Minkowski spacetime](#DiracEquationOnMinkowskiSpacetimePropagators)_

$\,$

**[[Fourier analysis]] and [[plane wave]] modes**
 {#FourierAnalysis}


By definition, the [[equations of motion]] of [[free field theories]] (def. \ref{FreeFieldTheory}) are [[linear partial differential equations]]
and hence lend themselves to _[[harmonic analysis]]_, where all [[field histories]] are decomposed into
[[superpositions]] of [[plane waves]] via _[[Fourier transform]]_. Here we briefly survey the relevant definitions
and facts of [[Fourier analysis]].

In [[formal duality]] to the [[harmonic analysis]] of the [[field histories]] themselves,
also the linear [[observables]] (def. \ref{LinearObservables}) on the [[space of field histories]], hence
the _[[distribution|distributional]] [[generalized functions]]_ (prop. \ref{LinearObservablesAreTheCompactlySupportedDistributions})
are subject to _[[Fourier transform of distributions]]_ (def. \ref{FourierTransformOnTemperedDistributions} below).

Throughout, let $n \in \mathbb{N}$ and consider the [[Cartesian space]] $\mathbb{R}^n$ of [[dimension]] $n$ (def. \ref{CartesianSpacesAndSmoothFunctionsBetweenThem}). In the application to [[field theory]], $n = p + 1$ is the
[[dimension]] of [[spacetime]] and $\mathbb{R}^n$ is either [[Minkowski spacetime]] $\mathbb{R}^{p,1}$ (def. \ref{MinkowskiSpacetime})
or its [[dual vector space]], thought of as the space of _[[wave vectors]]_ (def. \ref{PlaneWaves} below). For
$x = (x^\mu) \in \mathbb{R}^{p,1}$ and $k = (k_\mu) \in (\mathbb{R}^(p,1))^\ast$ we write

$$
  x \cdot k \;=\; x^\mu k_\mu
$$

for the canonical pairing.


+-- {: .num_defn #PlaneWaves}
###### Definition
**([[plane wave]])**

A _[[plane wave]]_ on [[Minkowski spacetime]] $\mathbb{R}^{p,1}$ (def. \ref{MinkowskiSpacetime}) is a
[[smooth function]] with values in the [[complex numbers]] given by

$$
  \array{
    \mathbb{R}^{p,1} &\longrightarrow& \mathbb{C}
    \\
    (x^\mu) &\mapsto& e^{i k_\mu x^\mu}
  }
$$

for $k = (k_\mu) \in (\mathbb{R}^{p,1})^\ast$ a [[covector]], called the _[[wave vector]]_ of the [[plane wave]].

We use the following terminology:

[[!include plane waves -- table]]

=--




+-- {: .num_defn #SchwartzSpace}
###### Definition
**([[Schwartz space]] of [[functions with rapidly decreasing partial derivatives]])**

A [[complex number|complex]]-valued [[smooth function]] $f \in C^\infty(\mathbb{R}^n)$ is said to have _[[rapidly decreasing function|rapidly decreasing]] [[partial derivatives]]_ if for all $\alpha,\beta \in \mathbb{N}^{n}$ we have

$$
  \underset{x \in \mathbb{R}^n}{sup} {\vert  x^\beta \partial^\alpha f(x) \vert}
  \;\lt\; \infty
  \,.
$$

Write

$$
  \mathcal{S}(\mathbb{R}^n) \hookrightarrow C^\infty(\mathbb{R}^n)
$$

for the sub-[[vector space]] on the functions with rapidly decreasing partial derivatives regarded as a [[topological vector space]] for the [[Fréchet space]] [[structure]] induced by the [[seminorms]]

$$
  p_{\alpha, \beta}(f) \coloneqq \underset{x \in \mathbb{R}^n}{sup} {\vert  x^\beta \partial^\alpha f(x) \vert}
  \,.
$$

This is also called the _[[Schwartz space]]_.

=--

(e.g. [Hörmander 90, def. 7.1.2](Fourier+transform#Hoermander90))

+-- {: .num_example #CompactlySupportedSmoothFunctionsAreFunctionsWithRapidlyDecreasingDerivatives}
###### Example
**([[compactly supported function|compactly supported]] [[smooth function]] are [[functions with rapidly decreasing partial derivatives]])**

Every [[compactly supported function|compactly supported]] [[smooth function]] ([[bump function]]) $b \in C^\infty_{cp}(\mathbb{R}^n)$ has rapidly decreasing partial derivatives (def. \ref{SchwartzSpace}):

$$
  C^\infty(\mathbb{R}^n)
   \hookrightarrow
  \mathcal{S}(\mathbb{R}^n)
  \,.
$$

=--



+-- {: .num_prop #ConvolutionProductOnSchwartzSpace}
###### Proposition
**(pointwise product and [[convolution product]] on [[Schwartz space]])**

The [[Schwartz space]] $\mathcal{S}(\mathbb{R}^n)$ (def. \ref{SchwartzSpace}) is closed under the following operatios on smooth functions $f,g \in \mathcal{S}(\mathbb{R}^n) \hookrightarrow C^\infty(\mathbb{R}^n)$

1. pointwise product:

   $$
     (f \cdot g)(x) \coloneqq f(x) \cdot g(x)
   $$

1. [[convolution product]]:

   $$
     (f \star g)(x) \coloneqq \underset{y \in \mathbb{R}^n}{\int} f(y)\cdot g(x-y) \, dvol(y)
     \,.
   $$

=--


+-- {: .proof}
###### Proof

By the [[product law]] of [[differentiation]].

=--

+-- {: .num_prop #RapidlyDecreasingFunctionsAreIntegrable}
###### Proposition
**([[rapidly decreasing functions]] are [[integrable functions|integrable]])**

Every [[rapidly decreasing function]] $f \colon \mathbb{R}^n \to \mathbb{R}$ (def. \ref{SchwartzSpace}) is an [[integrable function]] in that its [[integral]] exists:

$$
  \underset{x \in \mathbb{R}^n}{\int} f(x) \, d^n x
  \;\lt\;
  \infty
$$

In fact for each $\alpha \in \mathbb{N}^n$ the product of $f$ with the $\alpha$-power of the [[coordinate functions]] exists:

$$
  \underset{x \in \mathbb{R}^n}{\int}
    x^\alpha f(x)\, d^n x
  \;\lt\;
   \infty
  \,.
$$

=--

+-- {: .num_defn #FourierTransformSmoothFunctionsWithRapidlyDecayingDerivativesOnCartesianSpace}
###### Definition
**([[Fourier transform]] of [[functions with rapidly decreasing partial derivatives]])**

The _[[Fourier transform]]_ is the [[continuous linear functional]]

$$
  \widehat{(-)}
    \;\colon\;
  \mathcal{S}(\mathbb{R}^n)
    \longrightarrow
  \mathcal{S}(\mathbb{R}^n)
$$

on the [[Schwartz space]] of [[functions with rapidly decreasing partial derivatives]] (def. \ref{SchwartzSpace}), which is given by [[integration]] against [[plane wave]] functions (def. \ref{PlaneWaves})

$$
  x \mapsto e^{- i k \cdot x}
$$

times the standard [[volume form]] $d^n x$:

$$
  \label{IntegralExpressionForFourierTransform}
  \hat f(k)
    \;\colon\;
  \int_{x \in \mathbb{R}^n}
    e^{- i \, k \cdot x} f(x) \, d^n x
  \,.
$$

Here the argument $k \in \mathbb{R}^n$ of the Fourier transform is also called the _[[wave vector]]_.

=--

(e.g. [Hörmander, lemma 7.1.3](Fourier+transform#Hoermander90))


+-- {: .num_defn #FourierInversion}
###### Proposition
**([[Fourier inversion theorem]])**

The [[Fourier transform]] $\widehat{(-)}$ (def. \ref{FourierTransformSmoothFunctionsWithRapidlyDecayingDerivativesOnCartesianSpace}) on the [[Schwartz space]] $\mathcal{S}(\mathbb{R}^n)$ (def. \ref{SchwartzSpace}) is an [[isomorphism]], with [[inverse function]] the _[[inverse Fourier transform]]_

$$
  \widecheck {(-)}
     \;\colon\;
  \mathcal{S}(\mathbb{R}^n) \longrightarrow \mathcal{S}(\mathcal{R}^n)
$$

given by

$$
  \widecheck g (x)
    \;\coloneqq\;
   \underset{k \in \mathbb{R}^n}{\int}
      g(k) e^{i k \cdot x}
   \, \frac{d^n k}{(2\pi)^n}
   \,.
$$

Hence in the language of [[harmonic analysis]] the function $\widecheck g \colon \mathbb{R}^n \to \mathbb{C}$ is the [[superposition]] of [[plane waves]] (def. \ref{PlaneWaves}) in which the plane wave with [[wave vector]] $k\in \mathbb{R}^n$ appears with [[amplitude]] $g(k)$.

=--

(e.g. [Hörmander, theorem 7.1.5](Fourier+transform#Hoermander90))


+-- {: .num_prop #BasicPropertiesOfFourierTransformOverCartesianSpaces}
###### Proposition
**(basic properties of the [[Fourier transform]])**

The [[Fourier transform]] $\widehat{(-)}$ (def. \ref{FourierTransformSmoothFunctionsWithRapidlyDecayingDerivativesOnCartesianSpace}) on the [[Schwartz space]] $\mathcal{S}(\mathbb{R}^n)$ (def. \ref{SchwartzSpace}) satisfies the following properties, for all $f,g \in \mathcal{S}(\mathbb{R}^n)$:

1. (interchanging [[coordinate]] [[multiplication]] with [[partial derivatives]])

   $$
     \label{FourierTransformInterchangesCoordinateProductWithDerivative}
     \widehat{ x^a f } =  + i \partial_a \widehat f
     \phantom{AAAAA}
     \widehat{ - i\partial_a f} = k_a \widehat f
   $$

1. (interchanging pointwise multiplication with [[convolution product]], remark \ref{ConvolutionProductOnSchwartzSpace}):

   $$
     \label{FourierTransformInterchangesPointwiseProductWithConvolution}
     \widehat {(f \star g)} = \widehat{f} \cdot \widehat{g}
      \phantom{AAAA}
      \widehat{ f \cdot g } = (2\pi)^{-n} \widehat{f} \star \widehat{g}
   $$

1. ([[unitary operator|unitarity]], [[Parseval's theorem]])

   $$
     \underset{x \in \mathbb{R}^n}{\int} f(x) g^\ast(x)\, d^n x
     \;=\;
     \underset{k \in \mathbb{R}^n}{\int} \widehat{f}(k) \widehat{g}^\ast(k) \, d^n k
   $$

1. $$
     \label{FourierTransformInIntegralOfProductMayBeShiftedToOtherFactor}
     \underset{k \in \mathbb{R}^n}{\int} \widehat{f}(k) \cdot g(k) \, d^n k
     \;=\;
     \underset{x \in \mathbb{R}^n}{\int} f(x) \cdot \widehat{g}(x) \, d^n x
   $$

=--

(e.g [Hörmander 90, lemma 7.1.3, theorem 7.1.6](Fourier+transform#Hoermander90))


The [[Schwartz space]] of [[functions with rapidly decreasing partial derivatives]] (def. \ref{SchwartzSpace})
serves the purpose to support the [[Fourier transform]] (def. \ref{FourierTransformSmoothFunctionsWithRapidlyDecayingDerivativesOnCartesianSpace})
together with its inverse (prop. \ref{FourierInversion}), but for many applications
one needs to apply the Fourier transform to more general functions, and in fact to _[[generalized functions]]_
in the sense of [[distributions]] (via [this prop.](non-singular+distribution#NonSingularDistributionsAreDenseInAllDistributions)).
But with the [[Schwartz space]] in hand, this generalization is readily obtained by [[formal duality]]:


+-- {: .num_defn #TemperedDistribution}
###### Definition
**([[tempered distribution]])**

A _[[tempered distribution]]_ is a [[continuous linear functional]]

$$
  u \;\colon\; \mathcal{S}(\mathbb{R}^n) \longrightarrow \mathbb{C}
$$

on the [[Schwartz space]] (def. \ref{SchwartzSpace}) of [[functions with rapidly decaying partial derivatives]]. The [[vector space]] of all tempered distributions is canonically a [[topological vector space]] as the [[dual space]] to the [[Schwartz space]], denoted

$$
  \mathcal{S}'(\mathbb{R}^n)
    \;\coloneqq\;
  \left(
     \mathcal{S}(\mathbb{R}^n)
  \right)^\ast
  \,.
$$

=--

e.g. ([Hörmander 90, def. 7.1.7](Fourier+transform#Hoermander90))


+-- {: .num_example #SomeNonSingularTemperedDistributions}
###### Example
**(some [[non-singular distribution|non-singular]] [[tempered distributions]])**

Every [[function with rapidly decreasing partial derivatives]] $f \in \mathcal{S}(\mathbb{R}^n)$ (def. \ref{SchwartzSpace}) induces a [[tempered distribution]] $u_f \in \mathcal{S}'(\mathbb{R}^n)$ (def. \ref{TemperedDistribution}) by [[integration|integrating]] against it:

$$
  u_f \;\colon\; g \mapsto \underset{x \in \mathbb{R}^n}{\int} g(x) f(x)\, d^n x
  \,.
$$

This construction is a linear inclusion

$$
  \mathcal{S}(\mathbb{R}^n) \overset{\text{dense}}{\hookrightarrow} \mathcal{S}'(\mathbb{R}^n)
$$

of the [[Schwartz space]] into its [[dual space]] of [[tempered distributions]]. This is a [[dense subspace]] inclusion.

In fact already the restriction of this inclusion to the [[compactly supported function|compactly supported]] [[smooth functions]] (example \ref{CompactlySupportedSmoothFunctionsAreFunctionsWithRapidlyDecreasingDerivatives}) is a [[dense subspace]] inclusion:

$$
  C^\infty_{cp}(\mathbb{R}^n)
    \overset{dense}{\hookrightarrow}
  \mathcal{S}'(\mathbb{R}^n)
  \,.
$$

This means that every [[tempered distribution]] is a [[limit of a sequence|limit]] of a [[sequence]]
of ordinary [[functions with rapidly decreasing partial derivatives]], and in fact even the [[limit of a sequence|limit]]
of a [[sequence]] of [[compactly supported function|compactly supported]] [[smooth functions]] ([[bump functions]]).

It is in this sense that [[tempered distributions]] are "generalized functions".

=--

(e.g. [Hörmander 90, lemma 7.1.8](Fourier+transform#Hoermander90))

+-- {: .num_example #CompactlySupportedDistibutionsAreTemperedDistributions}
###### Example
**([[compactly supported distributions]] are [[tempered distributions]])**

Every [[compactly supported distribution]] is a [[tempered distribution]] (def. \ref{TemperedDistribution}),
hence there is a [[linear map|linear]] [[injection|inclusion]]

$$
  \mathcal{E}'(\mathbb{R}^n)
    \hookrightarrow
  \mathcal{S}'(\mathbb{R}^n)
  \,.
$$

=--




+-- {: .num_example #DiracDeltaDistribution}
###### Example
**([[delta distribution]])**

Write

$$
 \delta_0(-) \;\in\; \mathcal{E}'(\mathbb{R}^n)
$$

for the [[distribution]] given by point evaluation of functions at the origin of $\mathbb{R}^n$:

$$
  \delta_0(-) \;\colon\; f \mapsto f(0)
  \,.
$$

This is clearly a [[compactly supported distribution]]; hence a [[tempered distribution]] by example \ref{CompactlySupportedDistibutionsAreTemperedDistributions}.

We write just "$\delta(-)$" (without the subscript) for the corresponding [[generalized function]] (example \ref{SomeNonSingularTemperedDistributions}),  so that

$$
  \underset{x \in \mathbb{R}^n}{\int} \delta(x) f(x) \, d^n x
  \;\coloneqq\;
  f(0)
  \,.
$$

=--



+-- {: .num_example #SquareIntegrableFunctionsInduceTemperedDistributions}
###### Example
**([[square integrable functions]] induce [[tempered distributions]])**

Let $f \in L^p(\mathbb{R}^n)$ be a function in the $p$th [[Lebesgue space]], e.g. for $p = 2$ this means that $f$ is a [[square integrable function]]. Then the operation of [[integration]] against the [[measure]] $f dvol$

$$
  g \mapsto \underset{x \in \mathbb{R}^n}{\int} g(x) f(x) \, d^n x
$$

is a [[tempered distribution]] (def. \ref{TemperedDistribution}).

=--

(e.g. [Hörmander 90, below lemma 7.1.8](Fourier+transform#Hoermander90))

Property (eq:FourierTransformInIntegralOfProductMayBeShiftedToOtherFactor) of the ordinary [[Fourier transform]] on [[functions with rapidly decreasing partial derivatives]] motivates and justifies the fullowing generalization:


+-- {: .num_defn #FourierTransformOnTemperedDistributions}
###### Definition
**([[Fourier transform of distributions]] on [[tempered distributions]])**

The _[[Fourier transform of distributions]]_ of a [[tempered distribution]] $u \in \mathcal{S}'(\mathbb{R}^n)$ (def. \ref{TemperedDistribution}) is the [[tempered distribution]] $\widehat u$ defined on a smooth function $f \in \mathcal{S}(\mathbb{R}^n)$ in the [[Schwartz space]] (def. \ref{SchwartzSpace}) by

$$
  \widehat{u}(f) \;\coloneqq\; u\left( \widehat f\right)
  \,,
$$

where on the right $\widehat f \in \mathcal{S}(\mathbb{R}^n)$ is the [[Fourier transform]] of functions from def. \ref{FourierTransformSmoothFunctionsWithRapidlyDecayingDerivativesOnCartesianSpace}.
=--

(e.g. [Hörmander 90, def. 1.7.9](Fourier+transform#Hoermander90))



+-- {: .num_example #FourierTransformOfDistributionsIndeedGeneralizedOrdinaryFourierTransform}
###### Example
**([[Fourier transform of distributions]] indeed generalizes [[Fourier transform]] of [[functions with rapidly decreasing partial derivatives]])**

Let $u_f \in \mathcal{S}'(\mathbb{R}^n)$ be a [[non-singular distribution|non-singular]] [[tempered distribution]] induced, via example \ref{SomeNonSingularTemperedDistributions}, from a [[function with rapidly decreasing partial derivatives]] $f \in \mathcal{S}(\mathbb{R}^n)$.

Then its [[Fourier transform of distributions]] (def. \ref{FourierTransformOnTemperedDistributions}) is the [[non-singular distribution]] induced from the [[Fourier transform]] of $f$:

$$
  \widehat{u_f} \;=\; u_{\hat f}
  \,.
$$

=--


+-- {: .proof}
###### Proof

Let $g \in \mathcal{S}(\mathbb{R}^n)$. Then

$$
  \begin{aligned}
    \widehat{u_f}(g)
    & \coloneqq
    u_f\left( \widehat{g}\right)
    \\
    & =
    \underset{x \in \mathbb{R}^n}{\int} f(x) \hat g(x)\, d^n x
    \\
    & =
    \underset{x \in \mathbb{R}^n}{\int} \hat f(x) g(x) \, d^n x
    \\
    & =
    u_{\hat f}(g)
  \end{aligned}
$$

Here all equalities hold by definition, except for the third: this is property (eq:FourierTransformInIntegralOfProductMayBeShiftedToOtherFactor) from prop. \ref{BasicPropertiesOfFourierTransformOverCartesianSpaces}.

=--


+-- {: .num_example #FourierTransformOfKleinGordonEquation}
###### Example
**([[Fourier transform of distributions|Fourier transform]] of [[Klein-Gordon equation]] [[derivative of distributions|of]] [[distributions]])**

Let $\Delta \in \mathcal{S}'(\mathbb{R}^{p,1})$ be any [[tempered distribution]] (def. \ref{TemperedDistribution}) on [[Minkowski spacetime]] (def. \ref{MinkowskiSpacetime}) and let
$P \coloneqq \eta^{\mu \nu} \frac{\partial}{\partial x^\mu}\frac{\partial}{\partial x^\nu} - \left( \tfrac{m c}{\hbar} \right)^2$
be the [[Klein-Gordon operator]] (eq:KleinGordonOperator). Then the [[Fourier transform of distributions|Fourier transform]] (def. \ref{FourierTransformOnTemperedDistributions}) of $P \Delta$ is, in [[generalized function]]-notation (remark \ref{LinearObservablesAsGeneralizedFunctions})given by

$$
  \widehat {P \Delta}(k)
  \;=\;
  \left(
    - \eta^{\mu \nu}k_\mu k_\nu
    - \left( \tfrac{m c}{\hbar}\right)^2
  \right)
  \widehat(k)
  \,.
$$

=--

+-- {: .proof}
###### Proof

Let $r \in \mathcal{S}(\mathbb{R}^n)$ be any [[function with rapidly decreasing partial derivatives]] (def. \ref{SchwartzSpace}).
Then

$$
  \begin{aligned}
    \widehat {P \Delta}(r)
    & =
    P \Delta(\widehat r)
    \\
    & =
    \Delta(P^\ast \widehat r)
    \\
    & =
    \Delta(P \widehat r)
    \\
    & =
    \Delta\left( \left(-\eta^{\mu \nu}k_\mu k_\nu - \left( \tfrac{m c}{\hbar}\right)^2\right) \widehat{r}  \right)
  \end{aligned}
$$

Here the first step is def. \ref{FourierTransformOnTemperedDistributions}, the second is def. \ref{DistributionalDerivatives},
the third is example \ref{FormallySelfAdjointKleinGordonOperator}, while the last step is prop. \ref{BasicPropertiesOfFourierTransformOverCartesianSpaces}.

=--


+-- {: .num_example #CompactlySupportedDistributionFourierTransform}
###### Example
**([[Fourier transform of distributions|Fourier transform]] of [[compactly supported distributions]])**

Under the identification of [[smooth functions]] of bounded growth with [[non-singular distributions|non-singular]] [[tempered distributions]] (example \ref{SomeNonSingularTemperedDistributions}), the [[Fourier transform of distributions]] (def. \ref{FourierTransformOnTemperedDistributions}) of a [[tempered distribution]] that happens to be [[compactly supported distribution|compactly supported]] (example \ref{CompactlySupportedDistibutionsAreTemperedDistributions})

$$
  u \in \mathcal{E}'(\mathbb{R}^n) \hookrightarrow \mathcal{S}'(\mathbb{R}^n)
$$

is simply

$$
  \widehat{u}(k) = u\left( e^{-  i k \cdot (-)}\right)
  \,.
$$

=--

([Hörmander 90, theorem 7.1.14](Fourier+transform#Hoermander90))




+-- {: .num_defn #FourierTransformOfDeltaDistribution}
###### Example
**([[Fourier transform of distributions|Fourier transform]] of the [[delta-distribution]])**

The [[Fourier transform of distributions|Fourier transform]] (def. \ref{FourierTransformOnTemperedDistributions}) of the [[delta distribution]] (def. \ref{DiracDeltaDistribution}), via example \ref{CompactlySupportedDistributionFourierTransform}, is the [[constant function]] on 1:

$$
  \begin{aligned}
    \widehat {\delta}(k)
    & =
    \underset{x \in \mathbb{R}^n}{\int} \delta(x) e^{- i k x} \, d x
    \\
    & =
    1
  \end{aligned}
$$

This implies by the [[Fourier inversion theorem]] (prop. \ref{FourierInversionTheoremForDistributions}) that the [[delta distribution]] itself has equivalently the following expression as a [[generalized function]]

$$
  \begin{aligned}
    \delta(x)
    & =
    \widecheck{\widehat {\delta_0}}(x)
    \\
    & =
    \underset{k \in \mathbb{R}^n}{\int} e^{i k \cdot x} \, \frac{d^n k}{ (2\pi)^n }
  \end{aligned}
$$

in the sense that for every [[function with rapidly decreasing partial derivatives]] $f \in \mathcal{S}(\mathbb{R}^n)$ (def. \ref{SchwartzSpace}) we have

$$
  \begin{aligned}
    f(x)
    & =
    \underset{y \in \mathbb{R}^n}{\int}
    f(y) \delta(y-x)  \, d^n y
    \\
    & =
    \underset{y \in \mathbb{R}^n}{\int}
    \underset{k \in \mathbb{R}^n}{\int}
    f(y) e^{i k \cdot (y-x)}
    \, \frac{d^n k}{(2\pi)^n} \, d^n y
    \\
    & =
    \underset{k \in \mathbb{R}^n}{\int}
    e^{- i k \cdot x}
    \underset{= \widehat{f}(-k) }{
    \underbrace{
      \underset{y \in \mathbb{R}^n}{\int}
      f(y) e^{i k \cdot y}
      \, d^n y
    }
    }
    \,\, \frac{d^n k}{(2\pi)^n}
    \\
    & =
    +
    \underset{k \in \mathbb{R}^n}{\int}
    e^{i k \cdot x}
    \underset{= \widehat{f}(k) }{
    \underbrace{
      \underset{y \in \mathbb{R}^n}{\int}
      f(y) e^{- i k \cdot y}
      \, d^n y
    }
    }
    \,\, \frac{d^n k}{(2\pi)^n}
    \\
    & =
    \widecheck{\widehat{f}}(x)
  \end{aligned}
$$

which is the statement of the [[Fourier inversion theorem]] for smooth functions (prop. \ref{FourierInversion}).

(Here in the last step we used [[change of integration variables]] $k \mapsto -k$ which introduces one sign $(-1)^{n}$ for the new volume form,
but another sign $(-1)^n$ from the re-[[orientation]] of the integration domain. )

Equivalently, the above computation shows that the [[delta distribution]] is the [[neutral element]] for the
[[convolution product of distributions]].

=--


+-- {: .num_prop #PaleyWienerSchwartzTheorem}
###### Proposition
**([[Paley-Wiener-Schwartz theorem]])**

Let $u \in \mathcal{E}'(\mathbb{R}^n) \hookrightarrow \mathcal{S}'(\mathbb{R}^n)$ be a [[compactly supported distribution]] regarded as a [[tempered distribution]] by example \ref{CompactlySupportedDistibutionsAreTemperedDistributions}. Then its [[Fourier transform of distributions]] (def. \ref{FourierTransformOnTemperedDistributions}) is a [[non-singular distribution]] induced from a [[smooth function]] that grows at most exponentially.

=--

+-- {: .num_prop #FourierInversionTheoremForDistributions}
###### Proposition
**([[Fourier inversion theorem]] for [[Fourier transform of distributions]])**

The operation of forming the [[Fourier transform of distributions]] $\widehat{u}$ (def. \ref{FourierTransformOnTemperedDistributions}) [[tempered distributions]] $u \in \mathcal{S}'(\mathbb{R}^n)$ (def. \ref{TemperedDistribution}) is an [[isomorphism]],
with [[inverse]] given by

$$
  \widecheck{ u } \;\colon\; g \mapsto u\left( \widecheck{g}\right)
  \,,
$$

where on the right $\widecheck{g}$ is the ordinary [[inverse Fourier transform]] of $g$ according to prop. \ref{FourierInversion}.

=--

+-- {: .proof}
###### Proof

By def. \ref{FourierTransformOnTemperedDistributions}
this follows immediately from the [[Fourier inversion theorem]] for smooth functions (prop. \ref{FourierInversion}).

=--

We have the following distributional generalization of the basic property (eq:FourierTransformInterchangesPointwiseProductWithConvolution) from prop. \ref{BasicPropertiesOfFourierTransformOverCartesianSpaces}:

+-- {: .num_prop #FourierTransformOfDistributionsInterchangesConvolutionOfDistributionsWithPointwiseProduct}
###### Proposition
**([[Fourier transform of distributions]] interchanges [[convolution of distributions]] with pointwise product)**

Let

$$
  u_1 \in \mathcal{S}'(\mathbb{R}^n)
$$

be a [[tempered distribution]] (def. \ref{TemperedDistribution}) and

$$
  u_2 \in \mathcal{E}'(\mathbb{R}^n) \hookrightarrow \mathcal{S}'(\mathbb{R}^n)
$$

be a [[compactly supported distribution]], regarded as a [[tempered distribution]] via example \ref{CompactlySupportedDistibutionsAreTemperedDistributions}.

Observe here that the [[Paley-Wiener-Schwartz theorem]] (prop. \ref{PaleyWienerSchwartzTheorem}) implies that the [[Fourier transform of distributions]] of $u_1$ is a [[non-singular distribution]]
$\widehat{u_1} \in C^\infty(\mathbb{R}^n)$ so that the product $\widehat{u_1} \cdot \widehat{u_2}$ is always defined.

Then the [[Fourier transform of distributions]] of the [[convolution product of distributions]] is the product of the [[Fourier transform of distributions]]:

$$
  \widehat{u_1 \star u_2}
  \;=\;
  \widehat{u_1} \cdot \widehat{u_2}
  \,.
$$


=--

(e.g. [Hörmander 90, theorem 7.1.15](Fourier+transform#Hoermander90))


+-- {: .num_remark #ProductOfDistributionsViaFourierTransformOfConvolution}
###### Remark
**([[product of distributions]] via [[Fourier transform of distributions]])**

Prop. \ref{FourierTransformOfDistributionsInterchangesConvolutionOfDistributionsWithPointwiseProduct} together with the [[Fourier inversion theorem]] (prop. \ref{FourierInversionTheoremForDistributions}) suggests to _define_ the [[product of distributions]] $u_1 \cdot u_2$ for [[compactly supported distributions]] $u_1, u_2 \in \mathcal{E}'(\mathbb{R}^n) \hookrightarrow \mathcal{S}'(\mathbb{R}^n)$ by the formula

$$
  \widehat{ u_1 \cdot u_2 }
  \;\coloneqq\;
  (2\pi)^n \widehat{u_1} \star \widehat{u_2}
$$

which would complete the generalization of of property (eq:FourierTransformInterchangesPointwiseProductWithConvolution) from prop. \ref{BasicPropertiesOfFourierTransformOverCartesianSpaces}.

For this to make sense, the [[convolution product]] of the [[smooth functions]] on the right needs to exist, which is not guaranteed (prop. \ref{ConvolutionProductOnSchwartzSpace} does not apply here!). The condition that this exists is the [[Hörmander criterion]] on the _[[wave front set]]_ of $u_1$ and $u_2$. This we further discuss in _[Microlocal analysis and UV-Divergences](#MicrolocalAnalysisAndUltravioletDivergence)_ below.


=--





$\,$

**[[microlocal analysis]] and [[ultraviolet divergences]]**
 {#MicrolocalAnalysisAndUltravioletDivergence}


A _[[distribution]]_ (def. \ref{LinearObservablesAreTheCompactlySupportedDistributions}) or _[[generalized function]]_ (prop. \ref{DistributionsAreGeneralizedFunctions}) is like a [[smooth function]] which may have "[[singularities]]", namely points at which it values or that of its [[derivative of a distribution|derivatives]] "become infinite". Conversely, [[smooth functions]] are the [[non-singular distributions]] (prop. \ref{DistributionsAreGeneralizedFunctions}). The collection of points around which a distribution is singular (i.e. not [[non-singular distribution|non-singular]]) is called its _[[singular support]]_ (def. \ref{SingularSupportOfADistribution} below).

The [[Fourier transform of distributions]] (def. \ref{FourierTransformOnTemperedDistributions}) decomposes a [[generalized function]] into the [[plane wave]] modes that it is made of (def. \ref{PlaneWaves}). The [[Paley-Wiener-Schwartz theorem]] (prop. \ref{DecayPropertyOfFourierTransformOfCompactlySupportedFunctions} below) says that the singular nature of a [[compactly supported distribution]] may be read off from this [[Fourier mode]] decomposition:  Singularities correspond to large contributions by Fourier modes of high [[frequency]] and small [[wavelength]], hence to large "[[ultraviolet divergence|ultraviolet]]" (UV) contributions. Therefore the [[singular support]] of a distribution is the set of points around which the Fourier transform does not sufficiently decay "in the UV".

But since the [[Fourier transform]] is a function of the full [[wave vector]] of the [[plane wave]] modes (def. \ref{PlaneWaves}),  not just of the [[frequency]]/[[wavelength]], but also of the [[direction of a vector|direction]] of the wave vector, this means that it contains _[[direction of a vector|directional]] information_ about the singularities: A distribution may have UV-singularities at some point and in some [[wave vector]] [[direction of a vector|direction]], but maybe not in other [[direction of a vector|directions]].

In particular, if the distribution in question is a [[distributional solution to a partial differential equation]] (def. \ref{DistributionalDerivatives}) on [[spacetime]] then the _[[propagation of singularities theorem]]_ (prop. \ref{PropagationOfSingularitiesTheorem} below) says that the [[singular support]] of the solution evolves in spacetime along the direction of those [[wave vectors]] in which the Fourier transform exhibits high UV constributions. This means that these directions are the "wave front" of the distributional solution. Accordingly, the [[singular support]] of a distribution together with, over each of its points, the [[direction of a vector|directions]] of [[wave vectors]] in which the Fourier transform around that point has large UV constributions is called the _[[wave front set]]_ of the distribution (def. \ref{WaveFrontSet} below).

What is called _[[microlocal analysis]]_ is essentially the analysis of [[distributions]] with attention to their [[wave front set]], hence to the [[wave vector]]-[[direction of a vector|directions]] of [[UV divergences]].

In particular the [[product of distributions]] is well defined (only) if the [[wave front sets]] of the distributions to not "collide". And this in fact motivates the definition of the wave front set:

To see this, let $u,v \in  \mathcal{D}'(\mathbb{R}^1)$ be two [[distributions]], for simplicity of exposition taken on the [[real line]].

Since the product $u \cdot v$, is, if it exists, supposed to generalize the _pointwise_ product of smooth functions, it must be fixed locally: for every point $x \in \mathbb{R}$ there ought to be a [[compactly supported function|compactly supported]] [[smooth function]] ([[bump function]]) $b \in C^\infty_{cp}(\mathbb{R})$ with $f(x) = 1$ such that

$$
  b^2 u \cdot v = (b u) \cdot (b v)
  \,.
$$

But now $b v$ and $b u$ are both [[compactly supported distributions]] (def. \ref{PropductOfDistributionWithASmoothFunction} below), and these have the special property that their [[Fourier transform of distributions|Fourier transforms]] $\widehat{b v}$ and $\widehat{b u}$ are, in particular, [[smooth functions]] (by the [[Paley-Wiener-Schwartz theorem]], prop \ref{PaleyWienerSchwartzTheorem}).

Moreover, the operation of [[Fourier transform]] interchanges pointwise products with [[convolution products]] (prop. \ref{BasicPropertiesOfFourierTransformOverCartesianSpaces}). This means that if the [[product of distributions]] $u \cdot v$ exists, it must locally be given by the [[inverse Fourier transform]] of the [[convolution product]] of the Fourier transforms $\widehat {b u}$ and $\widehat b v$:

$$
  \widehat{ b^2 u \cdot v }(x)
  \;=\;
  \underset{\underset{k_{max} \to \infty}{\longrightarrow}}{\lim}
  \,
  \int_{- k_{max}}^{k_{max}} \widehat{(b u)}(k) \widehat{(b v)}(x - k) d k
  \,.
$$

(Notice that the converse of this formula holds as a fact by prop. \ref{FourierTransformOfDistributionsInterchangesConvolutionOfDistributionsWithPointwiseProduct})

This shows that the [[product of distributions]] exists once there is a [[bump function]] $b$ such that the [[integral]] on the right converges as $k_{max} \to \infty$.

Now the [[Paley-Wiener-Schwartz theorem]] says more, it says that the Fourier transforms $\widehat {b u}$ and $\widehat {b u}$ are polynomially bounded. On the other hand, the [[integral]] above is well defined if the [[integrand]] decreases at least quadratically with $k \to \infty$.
This means that for the convolution product to be well defined, either $\widehat {b u}$ has to polynomially decrease faster with $k \to \pm \infty$ than $\widehat {b v}$ grows in the _other_ direction, $k \to \mp \infty$ (due to the minus sign in the argument of the second factor in the [[convolution product]]), or the other way around.

Moreover, the degree of polynomial growth of the [[Fourier transform of distributions|Fourier transform]] increases by one with each [[derivative of distributions|derivative]]. Therefore if the [[product law]] for [[derivatives of distributions]] is to hold generally, we need that either $\widehat{b u}$ or $\widehat{b v}$ decays faster than _any_ polynomial in the opposite of the directions in which the respective other factor does not decay.

Here the set of directions of wave vectors in which the Fourier transform of a distribution localized around any point does not decay exponentially is the _[[wave front set]]_ of a distribution (def. \ref{WaveFrontSet} below). Hence the condition that the product of two distributions is well defined is that for each wave vector direction in the wave front set of one of the two distributions, the opposite direction must not be an element of the wave front set of the other distribution. This is called _[[Hörmander's criterion]]_ (prop. \ref{HoermanderCriterionForProductOfDistributions} below).

We now say this in detail:


+-- {: .num_defn #RestrictionOfDistributions}
###### Definition
**([[restriction of distributions]])**

For  $U \subset \mathbb{R}^n$ a [[subset]], and $u \in \mathcal{D}'(\mathbb{R}^n)$ a [[distribution]], then the _[[restriction of distributions|restriction]]_ of $u$ to $U$ is the distribution

$$
  u\vert_U \in \mathcal{D}'(U)
$$

give by restricting $u$ to test functions whose [[support]] is in $U$.

=--


+-- {: .num_defn #SingularSupportOfADistribution}
###### Definition
**([[singular support of a distribution]])**

Given a [[distribution]] $u \in \mathcal{D}'(\mathbb{R}^n)$, a point $x \in \mathbb{R}^n$ is a _singular point_ if there is no [[neighbourhood]] $U \subset \mathbb{R}^n$ of $x$ such that the [[restriction of distributions|restriction]] $u\vert_U$ (def. \ref{RestrictionOfDistributions}) is a [[non-singular distribution]] (given by a [[smooth function]]).

The set of all singular points is the _[[singular support]]_ $supp_{sing}(u) \subset \mathbb{R}^n$ of $u$.

=--

+-- {: .num_defn #PropductOfDistributionWithASmoothFunction}
###### Definition
**([[product of distributions|product of a distribution]] with a [[smooth function]])**


Let $u \in \mathcal{D}'(\mathbb{R}^n)$ be a [[distribution]], and $f \in C^\infty(\mathbb{R}^n)$ a smooth function. Then the _product_ $f u \in \mathcal{D}'(\mathbb{R}^n)$ is the evident [[distribution]] given on a test function $b \in C^\infty_{cp}(\mathbb{R}^n)$ by

$$
  f u
  \;\colon\;
  u
  \mapsto
  u(f \cdot b)
  \,
$$

=--

+-- {: .num_prop #DecayPropertyOfFourierTransformOfCompactlySupportedFunctions}
###### Proposition
**([[Paley-Wiener-Schwartz theorem]] -- decay of [[Fourier transform of distributions|Fourier transform]] of [[compactly supported functions]])**

A [[compactly supported distribution]] $u \in \mathcal{E}'(\mathbb{R}^n)$ is non-[[singular support of a distribution|singular]], hence given by a [[compactly supported function]] $b \in C^\infty_{cp}(\mathbb{R}^n)$ via $u(f) = \int b(x) f(x) dvol(x)$, precisely if its [[Fourier transform of a distribution|Fourier transform]] $\hat u$ ([this def.](compactly+supported+distribution#FourierTransformOfCompactlySupportedDistribution)) satisfies the following decay property:

For all $N \in \mathbb{N}$ there exists $C_N \in \mathbb{R}_+$ such that for all $k \in \mathbb{R}^n$ we have that the [[absolute value]] ${\vert \hat v(k)\vert}$ of the Fourier transform at that point is bounded by

$$
  \label{DecayEstimateForFourierTransformOfNonSingularDistribution}
  {\vert \hat v(k)\vert}
  \;\leq\;
  C_N \left( 1 + {\vert k\vert} \right)^{-N}
  \,.
$$

=--

([Hörmander 90, around (8.1.1)](Paley-Wiener-Schwartz+theorem#Hoermander90))


+-- {: .num_defn #WaveFrontSet}
###### Definition
**([[wavefront set]])**

Let $u \in \mathcal{D}'(\mathbb{R}^n)$ be a [[distribution]].

For $b \in C^\infty_{cp}(\mathbb{R}^n)$ a [[compactly supported function|compactly supported]] [[smooth function]], write $b u \in \mathcal{E}'(\mathbb{R}^n)$ for the corresponding product (def. \ref{PropductOfDistributionWithASmoothFunction}), which is now a [[compactly supported distribution]].

For $x\in supp(b) \subset \mathbb{R}^n$, we say that a unit [[covector]] $k \in S((\mathbb{R}^n)^\ast)$ is _regular_ if there exists a [[neighbourhood]] $U \subset S((\mathbb{R}^n)^\ast)$ of $k$ in the [[unit sphere]] such that for all $c k' \in (\mathbb{R}^n)^\ast$ with $c \in \mathbb{R}_+$ and  $k' \in U \subset S((\mathbb{R}^n)^\ast)$ the decay estimate (eq:DecayEstimateForFourierTransformOfNonSingularDistribution) is valid for the [[Fourier transform of distributions|Fourier transform]] $\widehat{b u}$ of $b u$; at $c k'$. Otherwise $k$ is _non-regular_. Write

$$
  \Sigma(b u)
    \;\coloneqq\;
  \left\{
    k \in S((\mathbb{R}^n)^\ast)
    \;\vert\;
    k \, \text{non-regular}
  \right\}
$$

for the set of non-regular covectors of $b u$.

The _wave front set at $x$_ is the [[intersection]] of these sets as $b$ ranges over [[bump functions]] whose [[support]] includes $x$:

$$
  \Sigma_x(u)
  \;\coloneqq\;
  \underset{
    { b \in C^\infty_{cp}(\mathbb{R}^n) }
      \atop
    { x \in supp(b) }
  }{\cap}
  \Sigma(b u)
  \,.
$$

Finally the _[[wave front set]]_ of $u$ is the subset of the [[sphere bundle]] $S(T^\ast \mathbb{R}^n)$ which over $x \in \mathbb{R}^n$ consists of $\Sigma_x(U) \subset T^\ast_x \mathbb{R}^n$:

$$
  WF(u)
    \;\coloneqq\;
  \underset{x \in \mathbb{R}^n}{\cup}
  \Sigma_x(u)
  \;\subset\;
  S(T^\ast \mathbb{R}^n)
$$

Often this is equivalently considered as the full [[conical set]] inside the [[cotangent bundle]] generated by the unit covectors under multiplication with [[positive number|positive]] [[real numbers]].

=--

([Hörmander 90, def. 8.1.2](wavefron+set#Hoermander90))



+-- {: .num_remark #WaveFrontSetIsBundleOverSingularSupport}
###### Remark
**([[wave front set]] is the [[UV divergence]]-[[direction of a vector|direction]]-[[bundle]] over the [[singular support]])**

For $u \in \mathcal{D}'(\mathbb{R}^n)$
The [[Paley-Wiener-Schwartz theorem]] (prop. \ref{DecayPropertyOfFourierTransformOfCompactlySupportedFunctions}) implies that

1. Forgetting the [[direction of a vector|direction]] [[covectors]] in the [[wave front set]] $WF(u)$ (def. \ref{WaveFrontSet}) and remembering only the points where they are based yields the set of singlar points of $u$, hence the [[singular support]] (def. \ref{SingularSupportOfADistribution})

   $$
     \array{
       WF(u)
       \\
       \downarrow
       \\
       supp_{sing}(u) &\hookrightarrow& \mathbb{R}^n
     }
   $$

1. the [[wave front set]] is [[empty set|empty]], precisely if the [[singular support]] is [[empty set|empty]], which is the case precisely if $u$ is a [[non-singular distribution]].

=--



+-- {: .num_example #WaveFrontOfDeltaDistribution}
###### Example
**([[wave front set]] of [[delta distribution]])**

Consider the [[delta distribution]]

$$
  \delta_0 \in \mathcal{D}'(\mathbb{R}^n)
$$

given by [[evaluation]] at the origin. Its [[wave front set]] (def. \ref{WaveFrontSet}) consists of all the [[direction of a vector|directions]] at the origin:

$$
  WF(\delta_0)
  \;=\;
  \left\{
    (0,k)
    \;\vert\;
    k \in \mathbb{R}^n \setminus \{0\}
  \right\}
  \subset
  \mathbb{R}^n \times \mathbb{R}^n
  \simeq
  T^\ast \mathbb{R}^n
  \,.
$$

=--

+-- {: .proof}
###### Proof

First of all the [[singular support of a distribution|singular support]] (def. \ref{SingularSupportOfADistribution}) of $\delta_$ is clearly $supp_{sing}(\delta(0)) = \{0\}$, hence by remark \ref{WaveFrontSetIsBundleOverSingularSupport} the wave front set vanishes over $\mathbb{R}^n \setminus \{0\}$.

At the origin, any bump function $b$ supported around the origin with $b(0) = 1$ satisfies $b \cdot \delta(0) = \delta(0)$ and hence the wave front set over the origin is the set of covectors along which the [[Fourier transform of distributions|Fourier transform]] $\hat \delta(0)$ does not suitably decay. But this Fourier transform is in fact a [[constant function]] (example \ref{FourierTransformOfDeltaDistribution}) and hence does not decay in any direction.

=--

+-- {: .num_example #WaveFrontSetOfHeavisideDistribution}
###### Example
**(wave front set of [[step function]])**

Let $\Theta \in \mathcal{D}'(\mathbb{R}^1)$ be the [[Heaviside step function]] given by

$$
  \Theta(b) \coloneqq \int_0^\infty b(x)\, d x
  \,.
$$

Its [[wave front set]] (def. \ref{WaveFrontSet}) is

$$
  WF(H) = \{(0,k) \vert k \neq 0\}
  \,.
$$

=--



+-- {: .num_prop #HoermanderCriterionForProductOfDistributions}
###### Proposition
**([[Hörmander's criterion]] for [[product of distributions]])**


Let $u, v \in \mathcal{D}'(\mathbb{R}^n)$ be two [[distributions]]. If their
[[wave front sets]] (def \ref{WaveFrontSet}) do not collide, in that
for $v \in T^\ast_x X$ a [[covector]] contained in one of the two wave front sets then the covector $-v \in T^\ast_x X$ with the opposite [[direction of a vector|direction]] in _not_ contained in the other wave front set, i.e. the [[intersection]] [[fiber product]]
inside the [[cotangent bundle]] $T^\ast X$ of the pointwise [[sum]] of wave fronts with the [[zero section]] is [[empty set|empty]]:

$$
  \left( WF(u_1) + WF(u_2) \right) \underset{T^\ast X}{\times} X
  \;=\;
  \emptyset
$$

i.e.

$$
  \array{
     && \emptyset
     \\
     & \swarrow && \searrow
     \\
     WF(u_1) + WF(u_2) && (pb) && X
     \\
     & \searrow && \swarrow_{\mathrlap{0}}
     \\
     && T^\ast X
  }
$$

then the [[product of distributions]] $u \cdot v$ exists, given, locally, by the [[Fourier inversion theorem|Fourier inversion]] of the [[convolution product]] of their [[Fourier transform of distributions]].


=--


+-- {: .num_defn #SymbolOfADifferentialOperator}
###### Definition
**([[symbol of a differential operator]])**

Let

$$
  D
  \;=\;
  \underset{n \leq N}{\sum}
  D^{\mu_1 \cdots \mu_n}
  \frac{\partial}{\partial x^{\mu^1}}
  \cdots
  \frac{\partial}{\partial x^{\mu^n}}
  +
  D^0
$$

be a [[differential operator]] on $\mathbb{R}^n$ (def. \ref{DifferentialOperator}). Then its _[[symbol of a differential operator]]_ is the [[smooth function]] on the [[cotangent bundle]] $T^\ast \mathbb{R}^n \simeq \mathbb{R}^n \times \mathbb{R}^n$ (def. \ref{TangentVectorFields}) given by

$$
  \array{
    T^\ast \mathbb{R}^n
      &\overset{q}{\longrightarrow}&
    \mathbb{C}
    \\
    k &\mapsto&
  \underset{n \leq N}{\sum}
  D^{\mu_1 \cdots \mu_k} k_{\mu_1} \cdots k_{\mu_n}
   }
  \,.
$$

The _[[principal symbol]]_ is the top degree [[homogeneous function|homogeneous]] part
$D^{\mu_1 \cdots \mu_k} k_{\mu_1} \cdots k_{\mu_N}$.

=--

+-- {: .num_defn #SymbolOrder}
###### Definition
**([[symbol order]])**

A [[smooth function]] $q$ on the [[cotangent bundle]] $T^\ast \mathbb{R}^n$ (e.g. the [[symbol of a differential operator]], def. \ref{SymbolOfADifferentialOperator} ) is of _order $m$_ (and type $1,0$, denoted $q \in S^m = S^m_{1,0}$), for $m \in \mathbb{N}$, if on each [[coordinate chart]] $((x^i), (k_i))$ we have that for every [[compact subset]] $K$ of the base space and all multi-indices $\alpha$ and $\beta$, there is a  [[real number]] $C_{\alpha, \beta,K } \in \mathbb{R}$ such that the [[absolute value]] of the [[partial derivatives]] of $q$ is bounded by


$$
  \left\vert
    \frac{\partial^\alpha}{\partial k_\alpha}
    \frac{\partial^\beta}{\partial x^\beta}
    q(x,k)
  \right\vert
  \;\leq\;
  C_{\alpha,\beta,K}\left( 1+ {\vert k\vert}\right)^{m - {\vert \alpha\vert}}
$$

for all $x \in K$ and all cotangent vectors $k$ to $x$.

A [[Fourier integral]] operator $Q$ is of _[[symbol class]]_ $L^m = L^m_{1,0}$ if it is of the form

   $$
     Q f (x)
     \;=\;
     \int \int e^{i k \cdot (x - y)} q(x,y,k) f(y) \, d y \, d k
   $$

with symbol $q$ of order $m$, in the above sense.

=--

([Hörmander 71, def. 1.1.1 and first sentence of section 2.1 with (1.4.1)](symbol+order#Hoermander71))

+-- {: .num_prop #PropagationOfSingularitiesTheorem}
###### Proposition
**([[propagation of singularities theorem]])**

Let $Q$ be a [[pseudo-differential operator]] on some [[smooth manifold]] $X$ which is [[properly supported pseudo-differential operator|properly supported]] (def. \ref{ProperlySupportedPseudoDifferentialOperator}) and of [[symbol class]] $L^m$ (def. \ref{SymbolOrder}) with real [[principal symbol]] $q$ that is [[homogeneous function|homogeneous]] of degree $m$.

For $u \in \mathcal{D}'(X)$ a [[distribution]] with $Q u = f$, then the [[complement]] of the [[wave front set]] of $u$ by that of $f$ is contained in the set of covectors on which the [[principal symbol]] $q$ vanishes:

$$
  WF(u) \setminus WF(f) \;\subset\; q^{-1}(0)
  \,.
$$

Moreover, $WF(u)$ is invariant under the [[bicharacteristic flow]] induced by the [[Hamiltonian vector field]] of $q$ with respect to the canonical [[symplectic manifold]] structure on the [[cotangent bundle]] ([here](cotangent+bundle#SymplecticStructure)).

=--

([Duistermaat-Hörmander 72, theorem 6.1.1](propagation+of+singularities+theorem#DuistermaatHoermander72), recalled for instance as [Radzikowski 96, theorem 4.6](propagation+of+singularities+theorem#Radzikowski96))





$\,$

**[[Cauchy principal value]]**
 {#CauchyPrincipalValues}

An important application of the [[Fourier analysis]] of [[distributions]] is the class of distributions known
broadly as _[[Cauchy principal values]]_. Below we will find that these control the detailed nature of the 
various [[propagators]] of [[free field theories]], notably the [[Feynman propagator]] is manifestly a [[Cauchy principal value]] (prop. \ref{FeynmanPropagatorAsACauchyPrincipalvalue} and def. \ref{FeynmanPropagatorForDiracOperatorOnMinkowskiSpacetime} below),
but also the [[singular support]] properties of the [[causal propagator]] and the [[Hadamard propagator]] are governed by 
Cauchy principal values (prop. \ref{SingularSupportOfCausalPropagatorForKleinGordonEquationOnMinkowskiSpacetimeIsTheLightCone} and prop. \ref{SingularSupportOfHadamardPropagatorForKleinGordonEquationOnMinkowskiSpacetimeIsTheLightCone} below). This way the understanding of 
Cauchy principal values eventually allows us to determine the [[wave front set]] of all the propagators (prop. \ref{WaveFronSetsForKGPropagatorsOnMinkowski}) below.

Therefore we now collect some basic definitions and facts on [[Cauchy principal values]].

The _Cauchy principal value_ of a [[function]] which is [[integrable function|integrable]] on the [[complement]] of one point is, if it exists, the [[limit of a sequence|limit]] of the [[integrals]] of the function over subsets in the [[complement]] of this point as these integration [[domains]] tend to that point _symmetrically_ from all sides.

One also subsumes the case that the "point" is "at infinity", hence that the function is [[integrable function|integrable]] over every [[bounded subsets|bounded]] [[domain]]. In this case the Cauchy principal value is the [[limit of a sequence|limit]], if it exists, of the [[integrals]] of the function over bounded domains, as their bounds tend _symmetrically_ to infinity.

The operation of sending a [[compactly supported function|compactly supported]] [[smooth function]] ([[bump function]]) to Cauchy principal value of its pointwise product with a function $f$ that may be singular at the origin defines a [[distribution]], usually denoted $PV(f)$.

+-- {: .num_defn #CauchyIntegralValueOfIntegralOverRealline}
###### Definition
**([[Cauchy principal value]] of an [[integral]] over the [[real line]])**

Let $f \colon \mathbb{R} \to \mathbb{R}$ be a [[function]] on the [[real line]] such that for every [[positive real number]] $\epsilon$ its [[restriction]] to $\mathbb{R}\setminus (-\epsilon, \epsilon)$ is [[integrable function|integrable]]. Then the _[[Cauchy principal value]]_ of $f$ is, if it exists, the [[limit of a sequence|limit]]

$$
  PV(f) \coloneqq \underset{\epsilon \to 0}{\lim}
  \underset{\mathbb{R} \setminus (-\epsilon, \epsilon)}{\int} f(x) \, d x
  \,.
$$

=--

+-- {: .num_defn #CauchyPrincipalValueAsDistributionOnRealLine}
###### Definition
**([[Cauchy principal value]] as [[distribution]] on the [[real line]])**

Let $f \colon \mathbb{R} \to \mathbb{R}$ be a [[function]] on the [[real line]] such that for all [[bump functions]] $b \in C^\infty_{cp}(\mathbb{R})$ the Cauchy principal value of the pointwise product function $f b$ exists, in the sense of def. \ref{CauchyIntegralValueOfIntegralOverRealline}. Then this assignment

$$
  PV(f)
  \;\colon\;
  b \mapsto PV(f b)
$$

defines a [[distribution]] $PV(f) \in \mathcal{D}'(\mathbb{R})$.

=--

+-- {: .num_example }
###### Example

Let $f \colon \mathbb{R} \to \mathbb{R}$ be an [[integrable function]] which is symmetric, in that $f(-x) = f(x)$ for all $x \in \mathbb{R}$. Then the principal value integral (def. \ref{CauchyIntegralValueOfIntegralOverRealline}) of $x \mapsto \frac{f(x)}{x}$ exists and is zero:

$$
  \underset{\epsilon \to 0}{\lim}
  \underset{\mathbb{R}\setminus (-\epsilon, \epsilon)}{\int}
  \frac{f(x)}{x} d x
  \; = \; 0
$$


This is because, by the symmetry of $f$ and the skew-symmetry of $x \mapsto 1/x$, the the two contributions to the integral are equal up to a sign:

$$
  \int_{-\infty}^{-\epsilon} \frac{f(x)}{x} d x
  \;=\;
  -
  \int_{\epsilon}^\infty \frac{f(x)}{x} d x
  \,.
$$

=--



+-- {: .num_example #PrincipalValueOfInverseFunctionCharacteristicEquation}
###### Example

The [[Cauchy principal value]] [[distribution]] $PV\left( \frac{1}{x}\right)$ (def. \ref{CauchyPrincipalValueAsDistributionOnRealLine}) solves the distributional [[equation]]

$$
  \label{DistributionalEquationxfOfxEqualsOne}
  x PV\left(\frac{1}{x}\right) = 1
  \phantom{AAA}
  \in \mathcal{D}'(\mathbb{R}^1)
  \,.
$$

Since the [[delta distribution]] $\delta \in \mathcal{D}'(\mathbb{R}^1)$ solves the equation

$$
  x \delta(x) = 0
  \phantom{AAA}
  \in \mathcal{D}'(\mathbb{r}^1)
$$

we have that more generally every [[linear combination]] of the form

$$
  \label{GeneralDistributionalSolutionToxfEqualsOne}
  F(x)
  \coloneqq
  PV(1/x) + c \delta(x)
  \phantom{AAA}
  \in \mathcal{D}'(\mathbb{R}^1)
$$

for $c \in \mathbb{C}$, is a distributional solution to $x F(x) =  1$.

=--


+-- {: .proof}
###### Proof

This is immediate from the definition: For $b \in C^\infty_c(\mathbb{R}^1)$ any [[bump function]] we have that

$$
  \begin{aligned}
    \left\langle x PV\left(\frac{1}{x}\right), b \right\rangle
    & \coloneqq
    \underset{\epsilon \to 0}{\lim}
    \underset{\mathbb{R}^1 \setminus (-\epsilon, \epsilon)}{\int}
    \frac{x}{x}b(x) \, d x
    \\
    & =
    \int b(x)  d x
    \\
    & =
    \langle 1,b\rangle
  \end{aligned}
$$


=--

+-- {: .num_prop}
###### Proposition

In fact (eq:GeneralDistributionalSolutionToxfEqualsOne) is the most general distributional solution to (eq:DistributionalEquationxfOfxEqualsOne).

=--

This follows by the characterization of [[extension of distributions]] to a point, see there at [this prop.](extension+of+distributions#SpaceOfPointExtensions) ([Hörmander 90, thm. 3.2.4](Cauchy+principa+value#HoermanderLPDO1))

+-- {: .num_defn #IntegrationAgainstInverseOfxWithImaginaryOffset}
###### Definition
**(integration against inverse variable with imaginary offset)**

Write

$$
  \tfrac{1}{x + i0^\pm}
  \;\in\;
  \mathcal{D}'(\mathbb{R})
$$

for the [[distribution]] which is the [[limit]] in $\mathcal{D}'(\mathbb{R})$ of the [[non-singular distributions]] which are given by the [[smooth functions]] $x \mapsto \tfrac{1}{x \pm i \epsilon}$ as the [[positive real number]] $\epsilon$ tends to zero:

$$
  \frac{1}{
     x + i 0^\pm
  }
  \;\coloneqq\;
  \underset{ { \epsilon \in (0,\infty) } \atop { \epsilon \to 0 }  }{\lim}
  \tfrac{1}{x \pm i \epsilon}
$$

hence the distribution which sends $b \in C^\infty(\mathbb{R}^1)$ to

$$
  b \mapsto
  \underset{\mathbb{R}}{\int}
    \frac{b(x)}{x \pm i \epsilon} \, d x
  \,.
$$

=--


+-- {: .num_prop #CauchyPrincipalValueEqualsIntegrationWithImaginaryOffsetPlusDelta}
###### Proposition
**([[Cauchy principal value]] equals integration with [[imaginary number|imaginary]] offset plus [[delta distribution]])**

The [[Cauchy principal value]] [[distribution]] $PV\left( \tfrac{1}{x}\right) \in \mathcal{D}'(\mathbb{R})$ (def. \ref{CauchyPrincipalValueAsDistributionOnRealLine}) is equal to the sum of the integration over $1/x$ with imaginary offset (def. \ref{IntegrationAgainstInverseOfxWithImaginaryOffset}) and a [[delta distribution]].

$$
 PV\left(\frac{1}{x}\right)
  \;=\;
 \frac{1}{x + i 0^\pm}
  \pm i \pi \delta
  \,.
$$

In particular, by prop. \ref{PrincipalValueOfInverseFunctionCharacteristicEquation} this means that $\tfrac{1}{x + i 0^\pm}$ solves the distributional equation

$$
  x \frac{1}{x + i 0^\pm}
  \;=\;
  1
  \phantom{AA}
  \in \mathcal{D}'(\mathbb{R}^1)
  \,.
$$

=--


+-- {: .proof}
###### Proof


Using that

$$
  \begin{aligned}
    \frac{1}{x \pm i \epsilon}
    & =
    \frac{
       x \mp i \epsilon
    }{
      (x + i \epsilon)(x - i \epsilon)
    }
    \\
    & =
    \frac{ x \mp i \epsilon }{(x^2 + \epsilon^2)}
  \end{aligned}
$$

we have for every [[bump function]] $b \in C^\infty_{cp}(\mathbb{R}^1)$

$$
  \begin{aligned}
    \underset{\epsilon \to 0}{\lim}
    \underset{\mathbb{R}^1}{\int}
    \frac{b(x)}{x \pm i \epsilon}
    d x
    & \;=\;
    \underset{
      (A)
    }{
    \underbrace{
    \underset{\epsilon \to 0}{\lim}
    \underset{\mathbb{R}^1}{\int}
    \frac{x^2}{x^2 + \epsilon^2} \frac{b(x)}{x}
    d x
    }
    }
    \mp i \pi
    \underset{(B)}{
    \underbrace{
    \underset{\epsilon \to 0}{\lim}
    \underset{\mathbb{R}^1}{\int}
    \frac{1}{\pi}
    \frac{\epsilon}{x^2 + \epsilon^2} b(x)
    \,
    d x
    }}
  \end{aligned}
$$

Since

$$
  \array{
     && \frac{x^2}{x^2 + \epsilon^2}
     \\
     & {}^{\mathllap{ { {\vert x \vert} \lt \epsilon } \atop { \epsilon \to 0 }  }}\swarrow
     &&
     \searrow^{\mathrlap{ {{\vert x\vert} \gt \epsilon} \atop { \epsilon \to 0 }  }}
     \\
     0 && && 1
  }
$$

it is plausible that $(A) = PV\left( \frac{b(x)}{x} \right)$, and similarly that $(B) = b(0)$. In detail:

$$
  \begin{aligned}
    (A)
    & =
    \underset{\epsilon \to 0}{\lim}
    \underset{\mathbb{R}^1}{\int}
    \frac{x}{x^2 + \epsilon^2} b(x)
    d x
    \\
    & =
    \underset{\epsilon \to 0}{\lim}
    \underset{\mathbb{R}^1}{\int}
     \frac{d}{d x}
     \left(
        \tfrac{1}{2}
        \ln(x^2 + \epsilon^2)
     \right)
      b(x)
    d x
    \\
    & =
    -\tfrac{1}{2}
    \underset{\epsilon \to 0}{\lim}
    \underset{\mathbb{R}^1}{\int}
     \ln(x^2 + \epsilon^2)
     \frac{d b}{d x}(x)
    d x
    \\
    & =
    -\tfrac{1}{2}
    \underset{\mathbb{R}^1}{\int}
     \ln(x^2)
     \frac{d b}{d x}(x)
    d x
    \\
    & =
    -
    \underset{\mathbb{R}^1}{\int}
     \ln({\vert x \vert})
     \frac{d b}{d x}(x)
    d x
    \\
    & =
    -
    \underset{\epsilon \to 0}{\lim}
    \underset{\mathbb{R}^1\setminus (-\epsilon, \epsilon)}{\int}
     \ln( {\vert x \vert} )
     \frac{d b}{d x}(x)
    d x
    \\
    & =
    \underset{\epsilon \to 0}{\lim}
    \underset{\mathbb{R}^1\setminus (-\epsilon, \epsilon)}{\int}
     \frac{1}{x}
     b(x)
    d x
    \\
    & =
    PV\left( \frac{b(x)}{x} \right)
  \end{aligned}
$$

and

$$
  \begin{aligned}
    (B)
    & =
    \tfrac{1}{\pi}
    \underset{\epsilon \to 0}{\lim}
    \underset{\mathbb{R}^1}{\int}
    \frac{\epsilon}{x^2 + \epsilon^2}
    b(x)
    \,
    d x
    \\
    & =
    \tfrac{1}{\pi}
    \underset{\epsilon \to 0}{\lim}
    \underset{\mathbb{R}^1}{\int}
    \left(
      \frac{d}{d x}
      \arctan\left( \frac{x}{\epsilon} \right)
    \right)
    b(x)
    \,
    d x
    \\
    & =
    -
    \tfrac{1}{\pi}
    \underset{\epsilon \to 0}{\lim}
    \underset{\mathbb{R}^1}{\int}
      \arctan\left( \frac{x}{\epsilon} \right)
    \frac{d b}{d x}(x)
    \,
    d x
    \\
    & =
    -
    \frac{1}{2}
    \underset{\mathbb{R}^1}{\int}
      sgn(x)
    \frac{d b}{d x}(x)
    \,
    d x
    \\
    & =
    b(0)
  \end{aligned}
$$

where we used that the [[derivative]] of the [[arctan]] function is $\frac{d}{ d x} \arctan(x) = 1/(1 + x^2)$ and that $\underset{\epsilon \to + \infty}{\lim} \arctan(x/\epsilon) = \tfrac{\pi}{2}sgn(x)$ is proportional to the [[sign function]].

=--


+-- {: .num_exmaple #FourierIntegralFormulaForStepFunction}
###### Example
**([[Fourier integral]] formula for [[step function]])**


The [[Heaviside distribution]] $\Theta \in \mathcal{D}'(\mathbb{R})$ is equivalently the following [[Cauchy principal value]] (def. \ref{CauchyPrincipalValueAsDistributionOnRealLine}):

$$
  \begin{aligned}
    \Theta(x)
    & =
    \frac{1}{2\pi i} \int_{-\infty}^\infty \frac{e^{i \omega x}}{\omega - i 0^+}
    \\
    & \coloneqq
    \underset{ \epsilon \to 0^+}{\lim}
    \frac{1}{2 \pi i}
    \int_{-\infty}^\infty \frac{e^{i \omega x}}{\omega - i \epsilon} d\omega
    \,,
  \end{aligned}
$$

where the limit is taken over [[sequences]] of [[positive numbers|positive]] [[real numbers]] $\epsilon \in (-\infty,0)$ tending to zero.

=--


+-- {: .proof}
###### Proof

We may think of the [[integrand]] $\frac{e^{i \omega x}}{\omega - i \epsilon}$ uniquely extended to a [[holomorphic function]] on the [[complex plane]] and consider computing the given real [[line integral]] for fixed $\epsilon$ as a [[contour integral]] in the [[complex plane]].

If $x \in (0,\infty)$ is [[positive number|positive]], then the exponent

$$
  i \omega x = - Im(\omega) x + i Re(\omega) x
$$

<div style="float:right;margin:0 10px 10px 0;"><img src="https://ncatlab.org/nlab/files/ContoursForHeavisideFourierTransform.png" width="300">
</div>


has negative [[real part]] for _positive_ [[imaginary part]] of $\omega$. This means that the [[line integral]] equals the complex [[contour integral]] over a contour $C_+ \subset \mathbb{C}$ closing in the [[upper half plane]]. Since $i \epsilon$ has positive [[imaginary part]] by construction, this contour does encircle the [[pole]] of the [[integrand]] $\frac{e^{i \omega x}}{\omega - i \epsilon}$ at $\omega = i \epsilon$. Hence by the [[Cauchy integral formula]] in the case $x \gt 0$ one gets


$$
  \begin{aligned}
    \underset{\epsilon \to 0^+}{\lim}
    \frac{1}{2 \pi i}
    \int_{-\infty}^\infty \frac{e^{i \omega x}}{\omega - i \epsilon} d\omega
    & =
    \underset{\epsilon \to 0^+}{\lim}
    \frac{1}{2 \pi i}
    \oint_{C_+} \frac{e^{i \omega x}}{\omega - i \epsilon} d \omega
    \\
    &
    =
    \underset{\epsilon \to 0^+}{\lim}
    \left(e^{i \omega x}\vert_{\omega = i \epsilon}\right)
    \\
    & =
    \underset{\epsilon \to 0^+}{\lim}
    e^{- \epsilon x}
    \\
    & =
    e^0 = 1
  \end{aligned}
  \,.
$$

Conversely, for $x \lt 0$ the real part of the integrand decays as the _[[negative number|negative]]_ imaginary part increases, and hence in this case the given line integral equals the contour integral for a contour $C_- \subset \mathbb{C}$ closing in the lower half plane. Since the integrand has no pole in the lower half plane, in this case the [[Cauchy integral formula]] says that this integral is zero.

=--

Conversely, by the [[Fourier inversion theorem]], the [[Fourier transform]] of the [[Heaviside distribution]] is the Cauchy principal value as in prop. \ref{CauchyPrincipalValueEqualsIntegrationWithImaginaryOffsetPlusDelta}:


+-- {: .num_example #RelationToFourierTransformOfHeavisideDistribution}
###### Example
**(relation to [[Fourier transform]] of [[Heaviside distribution]] / [[Schwinger parameter|Schwinger parameterization]])**

The [[Fourier transform of distributions]] (def. \ref{FourierTransformOnTemperedDistributions}) of the [[Heaviside distribution]] is
the following [[Cauchy principal value]]:

$$
  \begin{aligned}
    \widehat \Theta(x)
    & =
    \int_0^\infty e^{i k x} \,  dk
    \\
    & =
    i \frac{1}{x + i 0^+}
  \end{aligned}
$$

Here the second equality is also known as _complex [[Schwinger parameter|Schwinger parameterization]]_.

=--

+-- {: .proof}
###### Proof

As [[generalized functions]] consider the [[limit of a sequence|limit]] with a decaying component:

$$
  \begin{aligned}
    \int_0^\infty e^{i k x} \,  dk
    & =
    \underset{\epsilon \to 0^+}{\lim}
    \int_0^\infty e^{i k x - \epsilon k} \,  dk
    \\
    & =
    -
    \underset{\epsilon \to 0^+}{\lim}
    \frac{1}{ i x - \epsilon}
    \\
    & =
    i \frac{1}{x + i 0^+}
  \end{aligned}
$$


=--

Let now $q \colon \mathbb{R}^{n} \to \mathbb{R}$ be a non-degenerate real [[quadratic form]]
[[analytic continuation|analytically continued]] to a real quadratic form

$$
  q \;\colon\; \mathbb{C}^n \longrightarrow \mathbb{C}
  \,.
$$

Write $\Delta$ for the [[determinant]] of $q$

Write $q^\ast$ for the induced quadratic form on [[dual vector space]]. Notice that $q$ (and hence $a^\ast$) are assumed non-degenerate but need not necessarily be positive or negative definite.

+-- {: .num_prop #FourierTransformOfPrincipalValueOfPowerOfQuadraticForm}
###### Proposition
**([[Fourier transform of distributions|Fourier transform]] of principal value of power of [[quadratic form]])**

Let $m \in \mathbb{R}$ be any [[real number]], and $\kappa \in \mathbb{C}$ any [[complex]] number. Then the [[Fourier transform of distributions]] of $1/(q + m^2 + i 0^+)^\kappa$ is

$$
  \widehat
  {
    \left(
      \frac{1}{q + m^2 + i0^+}
    \right)
  }
  \;=\;
  \frac{
    2^{1- \kappa} (\sqrt{2\pi})^{n} m^{n/2-\kappa}
  }
  {
    \Gamma(\kappa) \sqrt{\Delta}
  }
  \frac{
    K_{n/2 - \kappa}\left( m \sqrt{q^\ast - i 0^+} \right)
  }
  {
    \left(\sqrt{q^\ast - i0^+ }\right)^{n/2 - \kappa}
  }
  \,,
$$

where

1. $\Gamma$ deotes the [[Gamma function]]

1. $K_{\nu}$ denotes the [[modified Bessel function]].

Notice that $K_\nu(a)$ diverges for $a \to 0$ as $a^{-\nu}$ ([DLMF 10.30.2](http://dlmf.nist.gov/10.30#E2)).

=--

([Gel'fand-Shilov 66, III 2.8 (8) and (9), p 289](Cauchy+principal+value#GelfandShilov66))


+-- {: .num_prop #FourierTransformOfDeltaDistributionappliedToMassShell}
###### Proposition
**([[Fourier transform]] of [[delta distribution]] applied to [[mass shell]])**

Let $m \in \mathbb{R}$, then the [[Fourier transform of distributions]] of the [[delta distribution]] $\delta$ applied to the "mass shell" $q + m^2$ is

$$
  \widehat{
    \delta(q + m^2)
  }
  \;=\;
  - \frac{i}{\sqrt{{\vert\Delta\vert}}}
  \left(
    e^{i \pi t /2 }
    \frac{
      K_{n/2-1}
      \left(
        m \sqrt{ q^\ast + i0^+ }
      \right)
    }{
      \left(\sqrt{q^\ast + i0^+}\right)^{n/2 - 1}
    }
    \;-\;
    e^{-i \pi t /2 }
    \frac{
      K_{n/2-1}
      \left(
        m \sqrt{ q^\ast - i0^+ }
      \right)
    }{
      \left(\sqrt{q^\ast - i0^+}\right)^{n/2 - 1}
    }
  \right)
  \,,
$$

where $K_\nu$ denotes the [[modified Bessel function]] of order $\nu$.

Notice that $K_\nu(a)$ diverges for $a \to 0$ as $a^{-\nu}$ ([DLMF 10.30.2](http://dlmf.nist.gov/10.30#E2)).


=--

([Gel'fand-Shilov 66, III 2.11 (7), p 294](Cauchy+principal+value#GelfandShilov66))




$\,$


**[[propagators]] for the [[free field theory|free]] [[scalar field]] on [[Minkowski spacetime]]**

1. _[Advanced and regarded propagators](#AdvancedAndRetardedPropagatorsForKleinGordonEquationOnMinkowskiSpacetime)_

1. _[Causal propagator](#CausalPropagatorForKleinGordonEquationOnMinkowskiSpacetime)_

1. _[Hadamard propagator](#HadamardPropagatorForKleinGordonOnMinkowskiSpacetime)_

1. _[Feynman propagator](#FeynmanPropagator)_

1. _[Singular support and Wave front sets](#WaveFrontSetsOfPropagatorsForKleinGordonOperatorOnMinkowskiSpacetime)_

$\,$


On [[Minkowski spacetime]] $\mathbb{R}^{p,1}$ consider the [[Klein-Gordon operator]] (example \ref{EquationOfMotionOfFreeRealScalarField})

$$
  \eta^{\mu \nu} \frac{\partial}{\partial x^\mu} \frac{\partial}{\partial x^\nu} \Phi -  \left( \tfrac{m c}{\hbar} \right)^2 \Phi \;=\; 0 \,.
$$

By example \ref{FourierTransformOfKleinGordonEquation} its [[Fourier transform]] is

$$
  - k_\mu k^\mu - \left( \tfrac{m c}{\hbar} \right)^2
  \;=\;
  (k_0)^2 - {\vert \vec k\vert}^2 - \left( \tfrac{m c}{\hbar} \right)^2
  \,.
$$

The [[dispersion relation]] of this equation we write (see def. \ref{PlaneWaves})

$$
  \label{DispersionRelationForKleinGordonooeratorObMinkowskiSpacetime}
  \omega(\vec k)
  \;\coloneqq\;
  + c \sqrt{ {\vert \vec k \vert}^2 + \left( \tfrac{m c}{\hbar}\right)^2 }
  \,,
$$

where on the right we choose the [[non-negative real number|non-negative]] [[square root]].


$\,$

**[[advanced and retarded propagators]] for [[Klein-Gordon equation]] on [[Minkowski spacetime]]**
{#AdvancedAndRetardedPropagatorsForKleinGordonEquationOnMinkowskiSpacetime}

+-- {: .num_prop #AdvancedRetardedPropagatorsForKleinGordonOnMinkowskiSpacetime}
###### Proposition
**(mode expansion of [[advanced and retarded propagators]] for [[Klein-Gordon operator]] on [[Minkowski spacetime]])**

The [[advanced and retarded Green functions]] $G_\pm$ (def. \ref{AdvancedAndRetardedGreenFunctions}) of the [[Klein-Gordon operator]] on [[Minkowski spacetime]] (example \ref{EquationOfMotionOfFreeRealScalarField}) are induced from [[integral kernels]] ("[[propagators]]"), hence [[distributions in two variables]]

$$
  \Delta_\pm \in \mathcal{D}'(\mathbb{R}^{p,1}\times \mathbb{R}^{p,1})
$$

by (in [[generalized function]]-notation, prop. \ref{DistributionsAreGeneralizedFunctions})

$$
G_\pm(\Phi)
\;=\;
\underset{\mathbb{R}^{p,1}}{\int}
\Delta_{\pm}(x,y) \Phi(y) \, dvol(y)
$$

where the [[advanced and retarded propagators]] $\Delta_{\pm}(x,y)$ have the following equivalent expressions:

$$
\label{ModeExpansionForMinkowskiAdvancedRetardedPropagator}
\begin{aligned}
\Delta_\pm(x-y)
& =
\frac{1}{(2\pi)^{p+1}}
\underset{ {\epsilon \in (0,\infty)} \atop {\epsilon \to 0} }{\lim}
\int \int
\frac{
e^{i k_0 (x^0 - y^0)} e^{i \vec k \cdot (\vec x - \vec y)}
}{
(k_0 \mp i\epsilon)^2 - {\vert \vec k\vert}^2  -\left( \tfrac{m c}{\hbar}\right)^2
}
\, d k_0 \, d^p \vec k
\\
& =
\left\{
\array{
\frac{\pm i}{(2\pi)^{p}}
\int
\frac{1}{2\omega(\vec k)/c}
\left(
e^{+i \omega(\vec k)(x^0 - y^0)/c +  i \vec k \cdot (\vec x -\vec y)}
-
e^{-i \omega(\vec k)(x^0 - y^0)/c  + i \vec k \cdot (\vec x - \vec  y) }
\right)
d^p \vec k
& \vert & \text{if} \,  \pm (x^0 - y^0) \gt 0
\\
0 & \vert & \text{otherwise}
}
\right.
\\
& =
\left\{
\array{
\frac{\mp 1}{(2\pi)^{p}}
\int
\frac{1}{\omega(\vec k)/c}
\sin\left( \omega(\vec k)(x^0 - y^0)/c \right)
e^{i \vec k \cdot (\vec x - \vec  y) }
d^p \vec k
& \vert & \text{if} \,  \pm (x^0 - y^0) \gt 0
\\
0 & \vert & \text{otherwise}
}
\right.
\end{aligned}
$$

Here $\omega(\vec k)$ denotes the [[dispersion relation]] (eq:DispersionRelationForKleinGordonooeratorObMinkowskiSpacetime) of the [[Klein-Gordon equation]].

=--

+-- {: .proof}
###### Proof

The [[Klein-Gordon operator]] is a [[Green hyperbolic differential operator]] (example \ref{GreenHyperbolicKleinGordonEquation}) therefore its advanced and retarded Green functions exist uniquely (prop. \ref{AdvancedAndRetardedGreenFunctionsForGreenHyperbolicOperatorAreUnique}).
Moreover,  prop. \ref{GreenFunctionsAreContinuous} says that they are [[continuous linear functionals]] with respect to the [[topological vector space]] [[structures]] on [[spaces of smooth sections]] (def. \ref{TVSStructureOnSpacesOfSmoothSections}). In the case of the [[Klein-Gordon operator]] this just means that

$$
G_{\pm}
\;\colon\;
C^\infty_{cp}(\mathbb{R}^{p,1})
\longrightarrow
C^\infty_{\pm cp}(\mathbb{R}^{p,1})
$$

are [[continuous linear functionals]] in the standard sense of [[distributions]]. Therefore the
[[Schwartz kernel theorem]] implies the existence of [[integral kernels]] being [[distributions in two variables]]

$$
\Delta_{\pm} \in \mathcal{D}(\mathbb{R}^{p,1} \times \mathbb{R}^{p,1})
$$

such that, in the notation of [[generalized functions]],

$$
(G_\pm \alpha)(x)
\;=\;
\underset{\mathbb{R}^{p,1}}{\int} \Delta_{\pm}(x,y) \alpha(y) \, dvol(y)
\,.
$$

These integral kernels are the advanced/retarded "[[propagators]]". We now compute
these [[integral kernels]] by making an Ansatz and showing that it has the defining properties,
which identifies them by the uniqueness statement of prop. \ref{AdvancedAndRetardedGreenFunctionsForGreenHyperbolicOperatorAreUnique}.

We make use of the fact that the [[Klein-Gordon equation]] is [[invariant]] under the defnining [[action]]
of the [[Poincaré group]] on [[Minkowski spacetime]], which is a [[semidirect product group]] of the [[translation group]]
and the [[Lorentz group]].

Since the [[Klein-Gordon operator]] is invariant, in particular, under [[translations]] in $\mathbb{R}^{p,1}$ it is clear that the propagators, as a [[distribution in two variables]], depend only on the difference of its two arguments

$$
  \label{TranslationInvariantKleinGordonPropagatorsOnMinkowskiSpacetime}
  \Delta_{\pm}(x,y) = \Delta_{\pm}(x-y)
\,.
$$

Since moreover the [[Klein-Gordon operator]] is [[formally adjoint differential operator|formally self-adjoint]] ([this prop.](Klein-Gordon+equation#FormallySelfAdjointKleinGordonOperator)) this implies that for $P$ the Klein the equation (eq:AdvancedRetardedGreenFunctionIsRightInverseToDiffOperator)

$$
P \circ G_\pm  = id
$$

is equivalent to the equation (eq:AdvancedRetardedGreenFunctionIsLeftInverseToDiffOperator)

$$
G_\pm \circ P = id
\,.
$$

Therefore it is sufficient to solve for the first of these two equation, subject to
the defining support conditions. In terms of the [[propagator]] [[integral kernels]] this means that we have to solve the [[distribution|distributional]] equation

$$
\label{KleinGordonEquationOnAdvacedRetardedPropagator}
\left(
\eta^{\mu \nu}
\frac{\partial}{\partial x^\mu}
\frac{\partial}{\partial x^\nu}
-
\left( \tfrac{m c}{\hbar} \right)^2
\right)
\Delta_\pm(x-y)
\;=\;
\delta(x-y)
$$

subject to the condition that the [[support of a distribution|distributional support]] (def. \ref{DistributionalSections}) is

$$
supp\left( \Delta_{\pm}(x-y) \right)
\subset
\left\{
{\vert x-y\vert^2_\eta}\lt 0
\;\,,\;
\pm(x^0 - y^ 0) \gt 0
\right\}
\,.
$$


We make the _Ansatz_ that we assume that $\Delta_{\pm}$, as a distribution in a single variable $x-y$, is a [[tempered distribution]]

$$
\Delta_\pm \in \mathcal{S}'(\mathbb{R}^{p,1})
\,,
$$

hence amenable to [[Fourier transform of distributions]] (def. \ref{FourierTransformOnTemperedDistributions}). If we do find a [[solution]] this way, it is guaranteed to be the unique solution by prop. \ref{AdvancedAndRetardedGreenFunctionsForGreenHyperbolicOperatorAreUnique}.

By example \ref{FourierTransformOfDistributionsIndeedGeneralizedOrdinaryFourierTransform}
the [[Fourier transform of distributions|distributional Fourier transform]] of equation (eq:KleinGordonEquationOnAdvacedRetardedPropagator) is

$$
\begin{aligned}
\label{FourierVersionOfPDEForKleinGordonAdvancedRetardedPropagator}
\left(
- \eta^{\mu \nu} k_\mu k_\nu - \left( \tfrac{m c}{\hbar} \right)^2
\right)
\widehat{\Delta_{\pm}}(k)
& =
\widehat{\delta}(k)
\\
& =
1
\end{aligned}
\,,
$$

where in the second line we used the [[Fourier transform of distributions|Fourier transform]] of the [[delta distribution]]
from example \ref{FourierTransformOfDeltaDistribution}.

Notice that this implies that the [[Fourier transform]] of the [[causal propagator]]

$$
  \Delta_S \coloneqq \Delta_+ - \Delta_-
$$

satisfies the homogeneous equation:

$$
\label{FourierVersionOfPDEForKleinGordonCausalPropagator}
\left(
- \eta^{\mu \nu} k_\mu k_\nu - \left( \tfrac{m c}{\hbar} \right)^2
\right)
\widehat{\Delta_S}(k)
\;=\;
0
\,,
$$


Hence we are now reduced to finding solutions $\widehat{\Delta_\pm} \in \mathcal{S}'(\mathbb{R}^{p,1})$ to (eq:FourierVersionOfPDEForKleinGordonAdvancedRetardedPropagator) such that their [[Fourier inversion theorem|Fourier inverse]] $\Delta_\pm$ has the required [[support of a distribution|support]] properties.

We discuss this by a variant of the [[Cauchy principal value]]:

Suppose the following [[limit of a sequence|limit]] of [[non-singular distributions]] in the [[variable]] $k \in \mathbb{R}^{p,1}$
exists in the space of [[distributions]]

$$
\label{LimitOverImaginaryOffsetForFourierTransformedAdvancedRetardedPropagator}
\underset{ {\epsilon \in (0,\infty)} \atop { \epsilon \to 0 } }{\lim}
\frac{1}{ (k_0 \mp i \epsilon)^2  - {\vert \vec k\vert^2} - \left( \tfrac{m c}{\hbar} \right)^2 }
\;\in\;
\mathcal{D}'(\mathbb{R}^{p,1})
$$

meaning that for each [[bump function]] $b \in C^\infty_{cp}(\mathbb{R}^{p,1})$ the [[limit of a sequence|limit]] in $\mathbb{C}$

$$
\underset{ {\epsilon \in (0,\infty)} \atop { \epsilon \to 0 }   }{\lim}
\underset{\mathbb{R}^{p,1}}{\int} \frac{b(k)}{ (k_0\mp i \epsilon)^2 - {\vert \vec k\vert}^2 - \left( \tfrac{m c}{\hbar} \right)^2  }
d^{p+1}k
\;\in\;
\mathbb{C}
$$

exists. Then this limit is clearly a solution to the distributional equation (eq:FourierVersionOfPDEForKleinGordonAdvancedRetardedPropagator)
because on those bump functions $b(k)$ which happen to be products with $\left(-\eta^{\mu \nu}k_\mu k-\nu - \left( \tfrac{m c}{\hbar}\right)^2\right)$
we clearly have

$$
\begin{aligned}
\underset{ {\epsilon \in (0,\infty)} \atop { \epsilon \to 0 }   }{\lim}
\underset{\mathbb{R}^{p,1}}{\int}
\frac{
\left( -\eta^{\mu \nu} k_\mu k_\nu - \left( \tfrac{m c}{\hbar} \right)^2 \right) b(k)
}{
(k_0\mp i \epsilon)^2 - {\vert \vec k\vert}^2 - \left( \tfrac{m c}{\hbar} \right)^2
}
d^{p+1}k
& =
\underset{\mathbb{R}^{p,1}}{\int}
\underset{= 1}{
\underbrace{
\underset{ {\epsilon \in (0,\infty)} \atop { \epsilon \to 0 }   }{\lim}
\frac{
\left( -\eta^{\mu \nu} k_\mu k_\nu - \left( \tfrac{m c}{\hbar} \right)^2 \right) }{
(k_0\mp i \epsilon)^2 - {\vert \vec k\vert}^2 - \left( \tfrac{m c}{\hbar} \right)^2  }
}
}
b(k)\, d^{p+1}k
\\
& =
\langle 1, b\rangle
\,.
\end{aligned}
$$

Moreover, if the limiting distribution (eq:LimitOverImaginaryOffsetForFourierTransformedAdvancedRetardedPropagator)
exists, then it is clearly a [[tempered distribution]], hence we may apply [[Fourier inversion theorem|Fourier inversion]]
to  obtain [[Green functions]]

$$
\label{AdvancedRetardedPropagatorViaFourierTransformOfLLimitOverImaginaryOffsets}
\Delta_{\pm}(x,y)
\;\coloneqq\;
\underset{ {\epsilon \in (0,\infty)} \atop {\epsilon \to 0} }{\lim}
\frac{1}{(2\pi)^{p+1}}
\underset{\mathbb{R}^{p,1}}{\int}
\frac{e^{i k_\mu (x-y)^\mu}}{
(k_0 \mp i \epsilon  )^2 - {\vert \vec k\vert}^2  - \left(\tfrac{m c}{\hbar}\right)^2
}
d k_0 d^p \vec k
\,.
$$

To see that this is the correct answer, we need to check the defining support property.

Finally, by the [[Fourier inversion theorem]], to show that the [[limit of a sequence|limit]] (eq:LimitOverImaginaryOffsetForFourierTransformedAdvancedRetardedPropagator) indeed exists it is sufficient to show that the
limit in (eq:AdvancedRetardedPropagatorViaFourierTransformOfLLimitOverImaginaryOffsets) exists.

We compute as follows

$$
\label{TheSupportOfTheCandidateAdvancedRetardedPropagatorIsinTheFutureOrPastRespectively}
\begin{aligned}
\Delta_\pm(x-y)
& =
\frac{1}{(2\pi)^{p+1}}
\underset{ {\epsilon \in (0,\infty)} \atop {\epsilon \to 0} }{\lim}
\int \int
\frac{
e^{i k_0 (x^0 - y^0)} e^{i \vec k \cdot (\vec x - \vec y)}
}{
(k_0 \mp i\epsilon)^2 - {\vert \vec k\vert}^2  -\left( \tfrac{m c}{\hbar}\right)^2
}
\, d k_0 \, d^p \vec k
\\
& =
\frac{1}{(2\pi)^{p+1}}
\underset{ {\epsilon \in (0,\infty)} \atop {\epsilon \to 0} }{\lim}
\int \int
\frac{
e^{i k_0 (x^0 - y^0)} e^{i \vec k \cdot (\vec x - \vec y)}
}{
(k_0 \mp i \epsilon)^2 - \left(\omega(\vec k)/c\right)^2
}
\, d k_0 \, d^p \vec k
\\
&=
\frac{1}{(2\pi)^{p+1}}
\underset{ {\epsilon \in (0,\infty)} \atop {\epsilon \to 0} }{\lim}
\int \int
\frac{
e^{i k_0 (x^0 - y^0)} e^{i \vec k \cdot (\vec x - \vec y)}
}{
\left(
(k_0 \mp i\epsilon) - \omega(\vec  k)/c
\right)
\left(
(k_0 \mp i \epsilon) + \omega(\vec k)/c
\right)
}
\, d k_0 \, d^p \vec k
\\
& =
\left\{
\array{
\frac{\pm i}{(2\pi)^{p}}
\int
\frac{1}{2\omega(\vec k)/c}
\left(
e^{i \omega(\vec k)(x^0 - y^0)/c +  i \vec k \cdot (\vec x -\vec y)}
-
e^{-i \omega(\vec k)(x^0 - y^0)/c + i \vec k \cdot (\vec x - \vec  y)}
\right)
d^p \vec k
& \vert & \text{if} \,  \pm (x^0 - y^0) \gt 0
\\
0 & \vert & \text{otherwise}
}
\right.
\\
& =
\left\{
\array{
\frac{\mp 1}{(2\pi)^{p}}
\int
\frac{1}{\omega(\vec k)/c}
\sin\left( \omega(\vec k)(x^0 - y^0)/c \right)
e^{i \vec k \cdot (\vec x - \vec  y) }
d^p \vec k
& \vert & \text{if} \,  \pm (x^0 - y^0) \gt 0
\\
0 & \vert & \text{otherwise}
}
\right.
\end{aligned}
$$

where $\omega(\vec k)$ denotes the [[dispersion relation]] (eq:DispersionRelationForKleinGordonooeratorObMinkowskiSpacetime) of the [[Klein-Gordon equation]]. The last step is simply the application of [[Euler's formula]] $\sin(\alpha) = \tfrac{1}{2 i }\left( e^{i \alpha} - e^{- i \alpha}\right)$.

Here the key step is the application of [[Cauchy's integral formula]] in the fourth step. We spell this out now for $\Delta_+$, the discussion for $\Delta_-$ is the same, just with the appropriate signs reversed.

1. If  $(x^0 - y^0) \gt 0$ thn the expression $e^{ik_0 (x^0 - y^0)}$ decays with _[[positive number|positive]] [[imaginary part]]_ of $k_0$, so that we may expand the [[integration]] [[domain]] into the [[upper half plane]] as

$$
\begin{aligned}
\int_{-\infty}^\infty d k_0
& = \phantom{+}
\int_{-\infty}^0 d k_0 + \int_{0}^{+ i \infty} d k_0
\\
& = + \int_{+i \infty}^0 d k_0  + \int_0^\infty d k_0
\,;
\end{aligned}
$$

Conversely, if $(x^0 - y^0) \lt 0$ then we may analogously expand into the [[lower half plane]].

1. This integration domain may then further be completed to two [[contour integrations]]. For the expansion into the [[upper half plane]] these encircle counter-clockwise the [[poles]] at $\pm \omega(\vec k)+ i\epsilon \in \mathbb{C}$, while for expansion into the [[lower half plane]] no poles are being encircled.

<img src="https://ncatlab.org/nlab/files/ContourForAdvancedPropagator.png" height="280">


1. Apply [[Cauchy's integral formula]] to find in the case $(x^0 - y^0)\gt 0$ the sum of the [[residues]] at these two [[poles]] times $2\pi i$, zero in the other case. (For the retarded propagator we get $- 2 \pi i$ times the residues, because now the contours encircling non-trivial poles go clockwise).

1. The result is now non-singular at $\epsilon = 0$ and therefore the [[limit of a sequence|limit]] $\epsilon \to 0$ is now computed by evaluating at $\epsilon = 0$.

This computation shows a) that the limiting distribution indeed exists, and b) that the [[support of a distribution|support]]
of $\Delta_+$ is in the future, and that of $\Delta_-$ is in the past.

Hence it only remains to see now that the support of $\Delta_\pm$ is inside the [[causal cone]].
But this follows from the previous argument, by using that the [[Klein-Gordon equation]] is invariant under
[[Lorentz transformations]]: This implies that the support is in fact in the [[future]] of _every_ spacelike
slice through the origin in $\mathbb{R}^{p,1}$, hence in the [[closed future cone]] of the origin.


=--


+-- {: .num_cor #CausalPropagatorIsSkewSymmetric}
###### Corollary
**([[causal propagator]] is skew-symmetric)**

Under reversal of arguments the [[advanced and retarded causal propagators]] from prop. \ref{AdvancedRetardedPropagatorsForKleinGordonOnMinkowskiSpacetime} are related by

$$
\Delta_{\pm}(y-x) = \Delta_\mp(x-y)
\,.
$$

It follows that the [[causal propagator]] $\Delta \coloneqq \Delta_+ - \Delta_-$ is skew-symmetric in its arguments:

$$
\Delta_S(x-y) = - \Delta_S(y-x)
\,.
$$

=--

+-- {: .proof}
###### Proof

By prop. \ref{AdvancedRetardedPropagatorsForKleinGordonOnMinkowskiSpacetime} we have with (eq:ModeExpansionForMinkowskiAdvancedRetardedPropagator)


$$
\begin{aligned}
\Delta_\pm(y-x)
& =
\left\{
\array{
\frac{\pm i}{(2\pi)^{p}}
\int
\frac{1}{2\omega(\vec k)/c}
\left(
e^{-i \omega(\vec k)(x^0 - y^0)/c -  i \vec k \cdot (\vec x -\vec y)}
-
e^{+i \omega(\vec k)(x^0 - y^0)/c  - i \vec k \cdot (\vec x - \vec  y) }
\right)
d^p \vec k
& \vert & \text{if} \,  \mp (x^0 - y^0) \gt 0
\\
0 & \vert & \text{otherwise}
}
\right.
\\
& =
\left\{
\array{
\frac{\pm i}{(2\pi)^{p}}
\int
\frac{1}{2\omega(\vec k)/c}
\left(
e^{-i \omega(\vec k)(x^0 - y^0)/c +  i \vec k \cdot (\vec x -\vec y)}
-
e^{+i \omega(\vec k)(x^0 - y^0)/c  - i \vec k \cdot (\vec x - \vec  y) }
\right)
d^p \vec k
& \vert & \text{if} \,  \mp (x^0 - y^0) \gt 0
\\
0 & \vert & \text{otherwise}
}
\right.
\\
& =
\left\{
\array{
\frac{\mp i}{(2\pi)^{p}}
\int
\frac{1}{2\omega(\vec k)/c}
\left(
e^{+i \omega(\vec k)(x^0 - y^0)/c +  i \vec k \cdot (\vec x -\vec y)}
-
e^{-i \omega(\vec k)(x^0 - y^0)/c  - i \vec k \cdot (\vec x - \vec  y) }
\right)
d^p \vec k
& \vert & \text{if} \,  \mp (x^0 - y^0) \gt 0
\\
0 & \vert & \text{otherwise}
}
\right.
\\
& =
\Delta_\mp(x-y)
\end{aligned}
$$

Here in the second step we applied [[change of integration variables]] $\vec k \mapsto - \vec k$ (which introduces _no_ sign because in addition to $d \vec k \mapsto - d \vec k$ the integration domain reverses [[orientation]]).

=--

$\,$

**[[causal propagator]]**
{#CausalPropagatorForKleinGordonEquationOnMinkowskiSpacetime}

+-- {: .num_prop #ModeExpansionOfCausalPropagatorForKleinGordonOnMinkowski}
###### Proposition
**(mode expansion of [[causal propagator]] for [[Klein-Gordon equation]] on [[Minkowski spacetime]])**

The [[causal propagator]] (eq:CausalPropagator) for the [[Klein-Gordon equation]] for [[mass]] $m$ on [[Minkowski spacetime]] $\mathbb{R}^{p,1}$ (example \ref{EquationOfMotionOfFreeRealScalarField}) is given, in [[generalized function]] notation, by


$$
\label{CausalPropagatorModeExpansionForKleinGordonOnMinkowskiSpacetime}
\begin{aligned}
\Delta_S(x,y)
& =
\frac{+ i}{(2\pi)^{p}}
\int
\frac{1}{2\omega(\vec k)/c}
\left(
e^{i \omega(\vec k)(x^0 - y^0)/c +  i \vec k \cdot (\vec x -\vec y)}
-
e^{-i \omega(\vec k)(x^0 - y^0)/c + i \vec k \cdot (\vec x - \vec  y)}
\right)
d^p \vec k
\\
& =
\frac{-1}{(2\pi)^p}
\int
\frac{1}{\omega(\vec k)/c}
\sin\left( \omega(\vec k)(x^0 - y^0)/c \right)
e^{i \vec k \cdot (\vec x -\vec y)}
d^p \vec k
\,,
\end{aligned}
$$

where in the second line we used [[Euler's formula]] $sin(\alpha)= \tfrac{1}{2i}\left( e^{i \alpha} - e^{-i \alpha} \right)$.

In particular this shows that the [[causal propagator]] is [[real part|real]], in that it is equal to its [[complex conjugation|complex conjugate]]

$$
  \label{CausalPropagatorForKleinGordonEquationOnMinkowskiSpacetimeIsReal}
  \left(\Delta_S(x,y)\right)^\ast = \Delta_S(x,y)
  \,.
$$

=--


+-- {: .proof}
###### Proof

By definition and using the expression from prop. \ref{AdvancedRetardedPropagatorsForKleinGordonOnMinkowskiSpacetime} for the [[advanced and retarded causal propagators]] we have

$$
\begin{aligned}
\Delta_S(x,y)
& \coloneqq
\Delta_+(x,y) - \Delta_-(x,y)
\\
& =
\left\{
\array{
\frac{+ i}{(2\pi)^{p}}
\int
\frac{1}{2\omega(\vec k)/c}
\left(
e^{i \omega(\vec k)(x^0 - y^0)/c +  i \vec k \cdot (\vec x -\vec y)}
-
e^{-i \omega(\vec k)(x^0 - y^0)/c + i \vec k \cdot (\vec x - \vec  y)}
\right)
d^p \vec k
& \vert & \text{if} \,  + (x^0 - y^0) \gt 0
\\
\frac{(-1) (-1) i}{(2\pi)^{p}}
\int
\frac{1}{2\omega(\vec k)/c}
\left(
e^{i \omega(\vec k)(x^0 - y^0)/c +  i \vec k \cdot (\vec x -\vec y)}
-
e^{-i \omega(\vec k)(x^0 - y^0)/c + i \vec k \cdot (\vec x - \vec  y)}
\right)
d^p \vec k
& \vert & \text{if} \,  - (x^0 - y^0) \gt 0
}
\right.
\\
& =
\frac{+ i}{(2\pi)^{p}}
\int
\frac{1}{2\omega(\vec k)/c}
\left(
e^{i \omega(\vec k)(x^0 - y^0)/c +  i \vec k \cdot (\vec x -\vec y)}
-
e^{-i \omega(\vec k)(x^0 - y^0)/c + i \vec k \cdot (\vec x - \vec  y)}
\right)
d^p \vec k
\\
& =
\frac{-1}{(2\pi)^p}
\int
\frac{1}{\omega(\vec k)/c}
\sin\left( \omega(\vec k)(x^0 - y^0)/c \right)
e^{i \vec k \cdot (\vec x -\vec y)}
d^p \vec k
\end{aligned}
$$

For the reality, notice from the last line that

$$
  \begin{aligned}
    \left(\Delta_S(x,y)\right)^\ast
    & =
    \frac{-1}{(2\pi)^p}
    \int
    \frac{1}{\omega(\vec k)/c}
    \sin\left( \omega(\vec k)(x^0 - y^0)/c \right)
     e^{-i \vec k \cdot (\vec x -\vec y)}
    d^p \vec k
    \\
    & =
    \frac{-1}{(2\pi)^p}
    \int
    \frac{1}{\omega(\vec k)/c}
    \sin\left( \omega(\vec k)(x^0 - y^0)/c \right)
     e^{+i \vec k \cdot (\vec x -\vec y)}
    d^p \vec k
    \\
    & =
    \Delta_S(x,y)
    \,,
   \end{aligned}
$$

where in the last step we used the [[change of integration variables]] $\vec k \mapsto - \vec k$
(whih introduces no sign, since on top of $d \vec k \mapsto - d \vec k$ the [[orientation]] of the integration [[domain]] changes).

=--

We consider a couple of equivalent expressions for the causal propagator which are useful for computations:

+-- {: .num_prop #CausalPropagatorForKleinGordonOnMinkowskiAsContourIntegral}
###### Proposition
**([[causal propagator]] for [[Klein-Gordon operator]] on [[Minkowski spacetime]] as a [[contour integral]])**

The [[causal propagator]] (prop. \ref{GreenFunctionsAreContinuous}) for the [[Klein-Gordon equation]] at [[mass]] $m$ on [[Minkowski spacetime]] (example \ref{EquationOfMotionOfFreeRealScalarField}) has the following equivalent expression, as a [[generalized function]], given as a [[contour integral]] along a [[Jordan curve]] $C(\vec k)$ going counter-clockwise around the two [[poles]] at $k_0 = \pm \omega(\vec k)/c$:


$$
\Delta_S(x,y)
\;=\;
(2\pi)^{-(p+1)}
\int
\underset{C(\vec k)}{\oint}
\frac{e^{i k_\mu (x-y)^\mu}}{ -k_\mu k^\mu - \left( \tfrac{m c}{\hbar} \right)^2g  }
\,d k_0
\,d^{p} k
\,.
$$

=--


<img src="https://ncatlab.org/nlab/files/ContourForCausalPropagator.png" height="160">

> graphics grabbed from [Kocic 16](#Kocic16)


+-- {: .proof}
###### Proof


By [[Cauchy's integral formula]] we compute as follows:

$$
\begin{aligned}
(2\pi)^{-(p+1)}
\int
\underset{C(\vec k)}{\oint}
\frac{e^{i k_\mu (x^\mu - y^\mu)}}{ -k_\mu k^\mu - \left( \tfrac{m c}{\hbar} \right)^2 }
\,d k_0
\,d^{p} k
& =
(2\pi)^{-(p+1)}
\int
\underset{C(\vec k)}{\oint}
\frac{
e^{i k_0 x^0} e^{ i \vec k \cdot (\vec x - \vec y)}
}{
k_0^2 - \omega(\vec k)^2/c^2
}
\,d k_0
\,d^p \vec k
\\
& =
(2\pi)^{-(p+1)}
\int
\underset{C(\vec k)}{\oint}
\frac{
e^{i k_0 (x^0 - y^0)} e^{i \vec k \cdot (\vec x - \vec y)}
}{
( k_0 + \omega(\vec k)/c )
( k_0 - \omega(\vec k)/c )
}
\,d k_0
\,d^p \vec k
\\
& =
(2\pi)^{-(p+1)}
2\pi i
\int
\left(
\frac{
e^{i \omega(\vec k) (x^0 - y^0)/c} e^{i \vec k \cdot (\vec x - \vec y)}
}
{
2 \omega(\vec k)/c
}
-
\frac{
e^{ - i \omega(\vec k) (x^0 - y^0)/c} e^{i \vec k \cdot (\vec x - \vec y)}
}{
2 \omega(\vec k)/c
}
\right)
\,d^p \vec k
\\
& =
i
(2\pi)^{-p}
\int
\frac{1}{\omega(\vec k)/c}
sin\left( \omega(\vec k)(x^0 - y^0)/c \right)
e^{i \vec k \cdot (\vec x - \vec y)}
\,d^p \vec k
\,.
\end{aligned}
$$

The last line is the expression for the causal propagator from prop. \ref{ModeExpansionOfCausalPropagatorForKleinGordonOnMinkowski}

=--



+-- {: .num_prop #CausalPropagatorAsFourierTransformOfDeltaDistributionOnTransformedKGOperator}
###### Proposition
**([[causal propagator]] as [[Fourier transform]] of [[delta distribution]]  on the [[Fourier transform|Fourier transformed]] [[Klein-Gordon operator]])**


The [[causal propagator]] for the [[Klein-Gordon equation]] at [[mass]] $m$ on [[Minkowski spacetime]] has the following equivalent expression, as a [[generalized function]]:


$$
\Delta_S(x,y)
\;=\;
i (2\pi)^{-p} \int \delta\left( k_\mu k^\mu + \left( \tfrac{m c}{\hbar}\right)^2 \right) sgn( k_0 ) e^{ i k_\mu (x-y)^\mu } d^{p+1} k
\,,
$$

where the [[integrand]] is the product of the [[sign function]] of $k_0$ with the [[delta distribution]] of the [[Fourier transform]] of the [[Klein-Gordon operator]] and a [[plane wave]] factor.

=--

+-- {: .proof}
###### Proof

By decomposing the integral over $k_0$ into its negative and its positive half, and applying the [[change of integration variables]] $k_0 = \pm\sqrt{h}$ we get

$$
\begin{aligned}
i (2\pi)^{-p} \int \delta\left( k_\mu k^\mu + \left( \tfrac{m c}{\hbar}\right)^2 \right) sgn( k_0 ) e^{ i k_\mu (x-y)^\mu } d^{p+1} k
& =
+ i (2\pi)^{-p} \int \int_0^\infty \delta\left( -k_0^2 + \vec k^2 + \left( \tfrac{m c}{\hbar}\right)^2 \right) e^{ i k_0 (x^0 - y^0) + i \vec k \cdot (\vec x - \vec y)}  d k_0 \, d^p \vec k
\\
& \phantom{=}
- i (2\pi)^{-p} \int \int_{-\infty}^0 \delta\left( -k_0^2 + \vec k^2 + \left(\tfrac{m c}{\hbar}\right)^2 \right)  e^{ i k_0 (x^0 - y^0)+ i \vec k \cdot (\vec x - \vec y) } d k_0 \, d^{p} \vec k
\\
& =
+i (2\pi)^{-p} \int \int_0^\infty \frac{1}{2 \sqrt{h}} \delta\left( -h + \omega(\vec k)^2/c^2  \right) e^{ + i \sqrt{h} (x^0 - y^0) + i \vec k \cdot \vec x } d h \, d^{p} \vec k
\\
& \phantom{=}
- i (2\pi)^{-p} \int \int_0^\infty  \frac{1}{2 \sqrt{h}} \delta\left( - h + \omega(\vec k)^2/c^2 \right) e^{ - i \sqrt{h} (x^0 - y^0) + i \vec k \cdot \vec x }  d h \, d^{p} \vec k
\\
& =
+i (2\pi)^{-p} \int \frac{1}{2 \omega(\vec k)/c} e^{ i \omega(\vec k) (x-y)^0/c + i \vec k \cdot \vec x}  d^{p} \vec k
\\
& \phantom{=}
- i (2\pi)^{-p} \int \frac{1}{2 \omega(\vec k)/c} e^{ - i \omega(\vec k) (x-y)^0/c + i \vec k \cdot \vec x }  d^{p} \vec k
\\
& = -(2 \pi)^{-p} \int \frac{1}{\omega(\vec k)/c}
sin\left( \omega(\vec k)(x-y)^0/c \right)
e^{i \vec k \cdot (\vec x - \vec y)}
\end{aligned}
$$

The last line is the expression for the causal propagator from prop. \ref{ModeExpansionOfCausalPropagatorForKleinGordonOnMinkowski}.


=--


$\,$

**[[Hadamard propagator]]**
{#HadamardPropagatorForKleinGordonOnMinkowskiSpacetime}

Prop. \ref{CausalPropagatorAsFourierTransformOfDeltaDistributionOnTransformedKGOperator} exhibits the [[causal propagator]] of the [[Klein-Gordon operator]] on [[Minkowski spacetime]] as the difference of a contribution for [[positive real number|positive]] temporal [[angular frequency]] $k_0 \propto \omega(\vec k)$ (hence positive [[energy]] $\hbar \omega(\vec k)$ and a contribution of negative temporal [[angular frequency]].

The [[positive real number|positive]] [[frequency]] contribution to the [[causal propagator]] is called the _[[Hadamard propagator]]_ (def. \ref{StandardHadamardDistributionOnMinkowskiSpacetime} below), also known as the the _[[vacuum state]] [[2-point function]] of the [[free field|free]] [[real scalar field]] on [[Minkowski spacetime]]_. Notice that the temporal component
of the [[wave vector]] is proportional to the _negative_ [[angular frequency]]

$$
k_0 = -\omega/c
$$

(see at _[[plane wave]]_), therefore the appearance of the [[step function]] $\Theta(-k_0)$ in (eq:HadamardPropagatorForKleinGordonOperatorOnMinkowskiSpacetime) below:

+-- {: .num_defn #StandardHadamardDistributionOnMinkowskiSpacetime}
###### Definition
**([[Hadamard propagator]] or [[vacuum state]] [[2-point function]] for [[Klein-Gordon operator]] on [[Minkowski spacetime]])**

The _[[Hadamard propagator]]_ for the [[Klein-Gordon operator]] at [[mass]] $m$ on [[Minkowski spacetime]] (example \ref{EquationOfMotionOfFreeRealScalarField}) is the [[tempered distribution|tempered]] [[distribution in two variables]] $\Delta_H \in \mathcal{S}'(\mathbb{R}^{p,1})$ which as a [[generalized function]] is given by the expression

$$
\label{HadamardPropagatorForKleinGordonOperatorOnMinkowskiSpacetime}
\begin{aligned}
\Delta_H(x,y)
& \coloneqq
\frac{1}{(2\pi)^p} \int \delta\left( k_\mu k^\mu + m^2 \right) \Theta( -k_0 ) e^{i k_\mu (x^\mu-y^\mu) } \, d^{p+1} k
\\
& =
\frac{1}{(2\pi)^p}
\int \frac{1}{2 \omega(\vec k)/c}
e^{-i \omega(\vec k)(x^0 - y^0)/c + i \vec k \cdot (\vec x - \vec y) }
\, d^p \vec k
\,,
\end{aligned}
$$

Here in the first line we have in the [[integrand]] the [[delta distribution]] of the [[Fourier transform]] of the [[Klein-Gordon operator]]  times a [[plane wave]] and times the [[step function]] $\Theta$ of the temporal component of the [[wave vector]]. In the second line we used the [[change of integration variables]] $k_0 = \sqrt{h}$, then the definition of the [[delta distribution]] and the fact that $\omega(\vec k)$ is by definition the [[non-negative real number|non-negative]] solution to the Klein-Gordon [[dispersion relation]].

=--

(e.g. [Khavkine-Moretti 14, equation (38) and section 3.4](Hadamard+distribution#KhavineMoretti14))

+-- {: .num_prop #ContourIntegralForStandardHadamardPropagatorOnMinkowskiSpacetime}
###### Proposition
**([[contour integral]] representation of the [[Hadamard propagator]] for the [[Klein-Gordon operator]] on [[Minkowski spacetime]])

The [[Hadamard propagator]] from def. \ref{StandardHadamardDistributionOnMinkowskiSpacetime} is
equivalently given by the [[contour integral]]

$$
\label{StandardHadamardPropagatorOnMinkowskiSpacetimeInTermsOfContourIntegral}
\Delta_H(x,y)
\;=\;
-i(2\pi)^{-(p+1)}
\int
\underset{C_+(\vec k)}{\oint}
\frac{e^{-i k_\mu (x-y)^\mu}}{ -k_\mu k^\mu - \left( \tfrac{m c}{\hbar} \right)^2 }
d k_0
d^{p} k
\,,
$$

where the [[Jordan curve]] $C_+(\vec k) \subset \mathbb{C}$ runs counter-clockwise, enclosing the point $+ \omega(\vec k)/c \in \mathbb{R} \subset \mathbb{C}$, but not enclosing the point $- \omega(\vec k)/c \in \mathbb{R} \subset \mathbb{C}$.


<img src="https://ncatlab.org/nlab/files/ContourForHadamardPropagator.png" height="200">

> graphics grabbed from [Kocic 16](#Kocic16)

=--

+-- {: .proof}
###### Proof

We compute as follows:

$$
\begin{aligned}
-i(2\pi)^{-(p+1)}
\int
\underset{C_+(\vec k)}{\oint}
\frac{e^{ - i k_\mu (x-y)^\mu}}{ -k_\mu k^\mu - \left( \tfrac{m c}{\hbar} \right)^2 }
d k_0
d^{p} k
& =
-i(2\pi)^{-(p+1)}
\int
\oint_{C_+(\vec k)}
\frac{
e^{ -i k_0 x^0} e^{i \vec k \cdot (\vec x - \vec y)}
}{
k_0^2 - \omega(\vec k)^2/c^2
}
d k_0
d^p \vec k
\\
& =
-i(2\pi)^{-(p+1)}
\int
\underset{C_+(\vec k)}{\oint}
\frac{
e^{ - i k_0 (x^0-y^0)} e^{i \vec k \cdot (\vec x - \vec y)}
}{
( k_0 - \omega_\epsilon(\vec k)  )
( k_0 + \omega_\epsilon(\vec k) )
}
d k_0
d^p \vec k
\\
& =
(2\pi)^{-p}
\int
\frac{1}{2 \omega(\vec k)}
e^{-i \omega(\vec k) (x^0-y^0)/c} e^{i \vec k \cdot (\vec x - \vec y)}
d^p \vec k
\,.
\end{aligned}
$$

The last step is application of [[Cauchy's integral formula]], which says that the [[contour integral]] picks up the [[residue]] of the [[pole]] of the [[integrand]] at $+ \omega(\vec k)/c \in \mathbb{R} \subset \mathbb{C}$. The last line is $\Delta_H(x,y)$, by definition \ref{StandardHadamardDistributionOnMinkowskiSpacetime}.



=--



+-- {: .num_prop #SkewSymmetricPartOfHadmrdPropagatorIsCausalPropagatorForKleinGordonEquationOnMinkowskiSpacetime}
###### Proposition
**(skew-symmetric part of [[Hadamard propagator]] is the [[causal propagator]])**

The [[Hadamard propagator]] for the [[Klein-Gordon equation]] on [[Minkowski spacetime]] (def. \ref{StandardHadamardDistributionOnMinkowskiSpacetime}) is of the form

$$
  \label{DeompositionOfHadamardPropagatorOnMinkowkski}
  \begin{aligned}
    \Delta_H
    & =
    \tfrac{i}{2} \Delta_S
    +
    H
    \\
    & =
    \tfrac{i}{2}
    \left(
      \Delta_+ - \Delta_-
    \right)
    +
    H
  \end{aligned}
  \,,
$$

where

1. $\Delta_S$ is the [[causal propagator]] (prop. \ref{AdvancedRetardedPropagatorsForKleinGordonOnMinkowskiSpacetime}),
   which is real (eq:CausalPropagatorForKleinGordonEquationOnMinkowskiSpacetimeIsReal) and skew-symmetric (prop. \ref{CausalPropagatorIsSkewSymmetric})

   $$
     (\Delta_S(x,y))^\ast = \Delta_S(x,y)
     \phantom{AA}
     \,,
     \phantom{AA}
     \Delta_S(y,x) = - \Delta_S(x,y)
   $$

1. $H$ is real and symmetric

   $$
     (H(x,y))^\ast = H(x,y)
     \phantom{AA}
     \,,
     \phantom{AA}
     H(y,x) = H(x,y)
   $$

=--


+-- {: .proof}
###### Proof


By applying [[Euler's formula]] to (eq:HadamardPropagatorForKleinGordonOperatorOnMinkowskiSpacetime) we obtain

$$
  \label{SymmetricPartOfHadamardPropagatorForKleinGordonOnMinkowskiSpacetime}
  \begin{aligned}
  \Delta_H(x,y)
  & =
  \frac{1}{(2\pi)^p}
   \int \frac{1}{2 \omega(\vec k)/c}
   e^{-i \omega(\vec k)(x^0 - y^0)/c + i \vec k \cdot (\vec x - \vec y) }
   \, d^p \vec k
  \\
  & =
   \tfrac{i}{2}
   \underset{= \Delta_S(x,y)}{
   \underbrace{
     \frac{-1}{(2\pi)^p}
     \int
     \frac{1}{\omega(\vec k)/c}
     \sin\left( \omega(\vec k)(x^0 - y^0)/c \right)
     e^{i \vec k \cdot (\vec x - \vec y) }
     \, d^p \vec k
   }}
   \;+\;
   \underset{
     \coloneqq H(x,y)
   }{
   \underbrace{
    \frac{1}{(2\pi)^p}
     \int \frac{1}{2 \omega(\vec k)/c}
     \cos\left( \omega(\vec k)(x^0 - y^0)/c  \right)
     e^{i \vec k \cdot (\vec x - \vec y) }
     \, d^p \vec k
   }}
  \end{aligned}
$$

On the left this identifies the [[causal propagator]] by (eq:CausalPropagatorModeExpansionForKleinGordonOnMinkowskiSpacetime), prop. \ref{ModeExpansionOfCausalPropagatorForKleinGordonOnMinkowski}.

The second summand changes, both under complex conjugation as well as under $(x-y) \mapsto (y-x)$,
via [[change of integration variables]] $\vec k \mapsto - \vec k$ (because the [[cosine]] is an even function).
This does not change the integral, and hence $H$ is symmetric.

=--




$\,$

**[[Feynman propagator]]**
 {#FeynmanPropagator}

We have seen that the [[positive real number|positive]] [[frequency]] component of the [[causal propagator]] $\Delta_S$ for the [[Klein-Gordon equation]] on [[Minkowski spacetime]] (prop. \ref{AdvancedRetardedPropagatorsForKleinGordonOnMinkowskiSpacetime}) is the [[Hadamard propagator]] $\Delta_H$ (def. \ref{StandardHadamardDistributionOnMinkowskiSpacetime}) given, according to prop. \ref{SkewSymmetricPartOfHadmrdPropagatorIsCausalPropagatorForKleinGordonEquationOnMinkowskiSpacetime}, by (eq:DeompositionOfHadamardPropagatorOnMinkowkski)

$$
  \begin{aligned}
    \Delta_H
    & =
    \tfrac{i}{2} \Delta_S
    +
    H
    \\
    & =
    \tfrac{i}{2}
    \left(
      \Delta_+ - \Delta_-
    \right)
    +
    H
  \end{aligned}
  \,,
$$


There is an evident variant of this combination, which will be of interest:

+-- {: .num_defn #FeynmanPropagatorForKleinGordonEquationOnMinkowskiSpacetime}
###### Definition
**([[Feynman propagator]] for [[Klein-Gordon equation]] on [[Minkowski spacetime]])**

The _[[Feynman propagator]]_ for the [[Klein-Gordon equation]] on [[Minkowski spacetime]] (example \ref{EquationOfMotionOfFreeRealScalarField}) is the [[linear combination]]

$$
  \Delta_F
  \coloneqq
    \tfrac{i}{2}
    \left(
      \Delta_+ + \Delta_-
    \right)
    +
    H
$$

where the first term is proportional to the sum of the [[advanced and retarded propagators]] (prop. \ref{AdvancedRetardedPropagatorsForKleinGordonOnMinkowskiSpacetime}) and the second is the symmetric part of the [[Hadamard propagator]] according to prop. \ref{SkewSymmetricPartOfHadmrdPropagatorIsCausalPropagatorForKleinGordonEquationOnMinkowskiSpacetime}.

Similarly the _[[anti-Feynman propagator]]_ is

$$
  \Delta_{\overline{F}}
  \coloneqq
    \tfrac{i}{2}
    \left(
      \Delta_+ + \Delta_-
    \right)
    -
    H
  \,.
$$


=--


+-- {: .num_prop #ModeExpansionForFeynmanPropagatorOfKleinGordonEquationOnMinkowskiSpacetime}
###### Proposition
**(mode expansion for [[Feynman propagator]] of [[Klein-Gordon equation]] on [[Minkowski spacetime]])**

The [[Feynman propagator]] (def. \ref{FeynmanPropagatorForKleinGordonEquationOnMinkowskiSpacetime}) for the [[Klein-Gordon equation]] on [[Minkowski spacetime]] is given by the following equivalent expressions

$$
  \begin{aligned}
  \Delta_F(x,y)
  & =
  \left\{
    \array{
    \frac{1}{(2\pi)^p}
    \int
    \frac{1}{\omega(\vec k)c}
    e^{-i\omega(\vec k)(x^0 - y^0)/c} e^{i \vec k \cdot (\vec x - \vec y)}
    \, d^p \vec k
    &\vert&
    (x^0 - y^0) \gt 0
    \\
    \frac{1}{(2\pi)^p}
    \int
    \frac{1}{2\omega(\vec k)c}
    e^{+i\omega(\vec k)(x^0 - y^0)/c} e^{i \vec k \cdot (\vec x - \vec y)}
    \, d^p \vec k
    &\vert&
    (x^0 - y^0) \lt 0
    }
  \right.
  \\
  & =
  \left\{
    \array{
      \Delta_H(x,y) &\vert& (x^0 - y^0) \gt 0
      \\
      \Delta_H(y,x) &\vert& (x^0 - y^0) \lt 0
    }
  \right.
  \end{aligned}
$$

Similarly the [[anti-Feynman propagator]] is equivalently given by

$$
  \begin{aligned}
  \Delta_{\overline{F}}(x,y)
  & =
  \left\{
    \array{
    \frac{-}{(2\pi)^p}
    \int
    \frac{1}{\omega(\vec k)c}
    e^{+i\omega(\vec k)(x^0 - y^0)/c} e^{i \vec k \cdot (\vec x - \vec y)}
    \, d^p \vec k
    &\vert&
    (x^0 - y^0) \gt 0
    \\
    \frac{-}{(2\pi)^p}
    \int
    \frac{1}{2\omega(\vec k)c}
    e^{-i\omega(\vec k)(x^0 - y^0)/c} e^{i \vec k \cdot (\vec x - \vec y)}
    \, d^p \vec k
    &\vert&
    (x^0 - y^0) \lt 0
    }
  \right.
  \\
  & =
  \left\{
    \array{
      -\Delta_H(y,x) &\vert& (x^0 - y^0) \gt 0
      \\
      -\Delta_H(x,y) &\vert& (x^0 - y^0) \lt 0
    }
  \right.
  \end{aligned}
$$


=--

+-- {: .proof}
###### Proof


By the mode expansion of $\Delta_{\pm}$ from (eq:ModeExpansionForMinkowskiAdvancedRetardedPropagator) and the mode expansion of $H$ from (eq:SymmetricPartOfHadamardPropagatorForKleinGordonOnMinkowskiSpacetime) we have

$$
  \begin{aligned}
   \Delta_F(x,y)
   & =
  \left\{
    \array{
      \underset{
        = \tfrac{i}{2} \Delta_+(x,y) + 0 \;\text{for}\; (x^0 - y^0) \gt 0
      }{
      \underbrace{
      \frac{- i}{(2\pi)^{p}}
      \int
      \frac{1}{2 \omega(\vec k)/c}
      \sin\left( \omega(\vec k)(x^0 - y^0)/c \right)
      e^{i \vec k \cdot (\vec x - \vec  y) }
      \, d^p \vec k
      }
      }
      +
      \underset{
        = H(x,y)
      }{
      \underbrace{
      \frac{1}{(2\pi)^p}
      \int \frac{1}{2 \omega(\vec k)/c}
      \cos\left( \omega(\vec k)(x^0 - y^0)/c  \right)
      e^{i \vec k \cdot (\vec x - \vec y) }
      \, d^p \vec k
      }
      }
      &\vert&
      (x^0 - y^0) \gt 0
      \\
      \underset{
         = 0 + \tfrac{i}{2}\Delta_-(x,y) \;\text{for}\; (x^0 - y^0) \lt 0
      }{
      \underbrace{
      \frac{+ i}{(2\pi)^{p}}
      \int
      \frac{1}{2 \omega(\vec k)/c}
      \sin\left( \omega(\vec k)(x^0 - y^0)/c \right)
      e^{i \vec k \cdot (\vec x - \vec  y) }
      \, d^p \vec k
      }
      }
      +
      \underset{ = H(x,y) }{
      \underbrace{
      \frac{1}{(2\pi)^p}
      \int \frac{1}{2 \omega(\vec k)/c}
      \cos\left( \omega(\vec k)(x^0 - y^0)/c  \right)
      e^{i \vec k \cdot (\vec x - \vec y) }
      \, d^p \vec k
      }
      }
      &\vert&
      (x^0 - y^0) \lt 0
    }
  \right.
  \\
  & =
  \left\{
    \array{
    \frac{1}{(2\pi)^p}
    \int
    \frac{1}{2\omega(\vec k)c}
    e^{-i\omega(\vec k)(x^0 - y^0)/c} e^{i \vec k \cdot (\vec x - \vec y)}
    \, d^p \vec k
    &\vert&
    (x^0 - y^0) \gt 0
    \\
    \frac{1}{(2\pi)^p}
    \int
    \frac{1}{2\omega(\vec k)c}
    e^{+i\omega(\vec k)(x^0 - y^0)/c} e^{i \vec k \cdot (\vec x - \vec y)}
    \, d^p \vec k
    &\vert&
    (x^0 - y^0) \lt 0
    }
  \right.
  \\
  & =
  \left\{
    \array{
      \Delta_H(x,y) &\vert& (x^0 - y^0) \gt 0
      \\
      \Delta_H(y,x) &\vert& (x^0 - y^0) \lt 0
    }
  \right.
  \end{aligned}
$$

where in the second line we used [[Euler's formula]]. The last line follows by comparison with (eq:HadamardPropagatorForKleinGordonOperatorOnMinkowskiSpacetime) and using that the integral over $\vec k$
is invariant under $\vec k \mapsto - \vec k$.

The computation for $\Delta_{\overline{F}}$ is the same, only now with a minus sign in front of the [[cosine]]:

$$
  \begin{aligned}
   \Delta_{\overline{F}}(x,y)
   & =
  \left\{
    \array{
      \underset{
        = \tfrac{i}{2} \Delta_+(x,y) + 0 \;\text{for}\; (x^0 - y^0) \gt 0
      }{
      \underbrace{
      \frac{- i}{(2\pi)^{p}}
      \int
      \frac{1}{2 \omega(\vec k)/c}
      \sin\left( \omega(\vec k)(x^0 - y^0)/c \right)
      e^{i \vec k \cdot (\vec x - \vec  y) }
      \, d^p \vec k
      }
      }
      -
      \underset{
        = H(x,y)
      }{
      \underbrace{
      \frac{1}{(2\pi)^p}
      \int \frac{1}{2 \omega(\vec k)/c}
      \cos\left( \omega(\vec k)(x^0 - y^0)/c  \right)
      e^{i \vec k \cdot (\vec x - \vec y) }
      \, d^p \vec k
      }
      }
      &\vert&
      (x^0 - y^0) \gt 0
      \\
      \underset{
         = 0 + \tfrac{i}{2}\Delta_-(x,y) \;\text{for}\; (x^0 - y^0) \lt 0
      }{
      \underbrace{
      \frac{+ i}{(2\pi)^{p}}
      \int
      \frac{1}{2 \omega(\vec k)/c}
      \sin\left( \omega(\vec k)(x^0 - y^0)/c \right)
      e^{i \vec k \cdot (\vec x - \vec  y) }
      \, d^p \vec k
      }
      }
      -
      \underset{ = H(x,y) }{
      \underbrace{
      \frac{1}{(2\pi)^p}
      \int \frac{1}{2 \omega(\vec k)/c}
      \cos\left( \omega(\vec k)(x^0 - y^0)/c  \right)
      e^{i \vec k \cdot (\vec x - \vec y) }
      \, d^p \vec k
      }
      }
      &\vert&
      (x^0 - y^0) \lt 0
    }
  \right.
  \\
  & =
  \left\{
    \array{
    \frac{-1}{(2\pi)^p}
    \int
    \frac{1}{2\omega(\vec k)c}
    e^{+i\omega(\vec k)(x^0 - y^0)/c} e^{i \vec k \cdot (\vec x - \vec y)}
    \, d^p \vec k
    &\vert&
    (x^0 - y^0) \gt 0
    \\
    \frac{-1}{(2\pi)^p}
    \int
    \frac{1}{2\omega(\vec k)c}
    e^{-1i\omega(\vec k)(x^0 - y^0)/c} e^{i \vec k \cdot (\vec x - \vec y)}
    \, d^p \vec k
    &\vert&
    (x^0 - y^0) \lt 0
    }
  \right.
  \\
  & =
  \left\{
    \array{
      - \Delta_H(y,x) &\vert& (x^0 - y^0) \gt 0
      \\
      - \Delta_H(x,y) &\vert& (x^0 - y^0) \lt 0
    }
  \right.
  \end{aligned}
$$


=--

As before for the [[causal propagator]], there are equivalent reformulations of the [[Feynman propagator]] which are useful for computations:

+-- {: .num_prop #FeynmanPropagatorAsACauchyPrincipalvalue}
###### Proposition
**([[Feynman propagator]] as a [[Cauchy principal value]])**

The [[Feynman propagator]] and [[anti-Feynman propagator]] (def. \ref{FeynmanPropagatorForKleinGordonEquationOnMinkowskiSpacetime}) for the [[Klein-Gordon equation]] on [[Minkowski spacetime]] is equivalently given by the following expressions, respectively:

$$
  \begin{aligned}
  \left.
  \array{
    \Delta_F(x,y)
    \\
    \Delta_{\overline{F}}(x,y)
  }
  \right\}
  & =
  \underset{ {\epsilon \in (0,\infty)} \atop {\epsilon \to 0} }{\lim}
  \frac{-i}{(2\pi)^{p+1}}
  \int
  \int_{-\infty}^\infty
  \frac{
     e^{i k_\mu (x^\mu - y^\mu)}
  }{
    - k_\mu k^\mu - \left( \tfrac{m c}{\hbar} \right)^2 \pm i \epsilon
  }
  \, d k_0 \, d^p \vec k
  \end{aligned}
$$

where we have a [[limit of a sequence|limit]] of [[distributions]] as for the [[Cauchy principal value]] ([this prop](Cauchy+principal+vlue#CauchyPrincipalValueEqualsIntegrationWithImaginaryOffsetPlusDelta)).

=--

+-- {: .proof}
###### Proof

We compute as follows:

$$
  \begin{aligned}
  \underset{ {\epsilon \in (0,\infty)} \atop {\epsilon \to 0} }{\lim}
  \frac{-i}{(2\pi)^{p+1}}
  \int
  \int_{-\infty}^\infty
  \frac{
     e^{i k_\mu (x^\mu - y^\mu)}
  }{
    - k_\mu k^\mu - \left( \tfrac{m c}{\hbar} \right)^2 \pm i \epsilon
  }
  \, d k_0 \, d^p \vec k
  & =
  \underset{ {\epsilon \in (0,\infty)} \atop {\epsilon \to 0} }{\lim}
  \frac{-i}{(2\pi)^{p+1}}
  \int
  \int_{-\infty}^\infty
  \frac{
     e^{i k_\mu (x^\mu - y^\mu)}
  }{
    (k_0)^2
      -
    \underset{
      \coloneqq \omega_{\pm\epsilon}(\vec k)^2/c^2
    }{\underbrace{ \left( \omega(\vec k)^2/c^2 \mp i \epsilon \right) }}
  }
  \, d k_0 \, d^p \vec k
  \\
  & =
  \underset{ {\epsilon \in (0,\infty)} \atop {\epsilon \to 0} }{\lim}
  \frac{-i}{(2\pi)^{p+1}}
  \int
  \int_{-\infty}^\infty
  \frac{
     e^{i k_\mu (x^\mu - y^\mu)}
  }{
     \left(
       k_0 - \omega_{\pm \epsilon}(\vec k)/c
     \right)
     \left(
       k_0 + \omega_{\pm \epsilon}(\vec k)/c
     \right)
  }
  \, d k_0 \, d^p \vec k
  \\
  & =
  \left\{
    \array{
    \frac{\pm 1}{(2\pi)^p}
    \int
    \frac{1}{2\omega(\vec k)c}
    e^{\mp i\omega(\vec k)(x^0 - y^0)/c} e^{i \vec k \cdot (\vec x - \vec y)}
    \, d^p \vec k
    &\vert&
    (x^0 - y^0) \gt 0
    \\
    \frac{\pm 1}{(2\pi)^p}
    \int
    \frac{1}{2\omega(\vec k)c}
    e^{\pm i\omega(\vec k)(x^0 - y^0)/c} e^{i \vec k \cdot (\vec x - \vec y)}
    \, d^p \vec k
    &\vert&
    (x^0 - y^0) \lt 0
    }
  \right.
  \\
  & =
  \left\{
    \array{
      \Delta_F(x,y)
      \\
      \Delta_{\overline{F}}(x,y)
    }
  \right.
  \end{aligned}
$$

Here

1. In the first step we introduced the [[complex number|complex]] [[square root]] $\omega_{\pm \epsilon}(\vec k)$. For this to be compatible with the choice of _non-negative_ square root for $\epsilon = 0$ in (eq:DispersionRelationForKleinGordonooeratorObMinkowskiSpacetime) we need to choose that complex square root whose [[complex phase]] is one half that of $\omega(\vec k)^2 - i \epsilon$ (instead of that plus [[π]]). This means that $\omega_{+ \epsilon}(\vec k)$ is in the _[[lower half plane]]_ and $\omega_-(\vec k)$ is in the [[upper half plane]].

1. In the third step we observe that

   1. for $(x^0 - y^0) \gt 0$ the [[integrand]] decays for [[positive real number|positive]] [[imaginary part]] and hence the integration over $k_0$ may be deformed to a [[Jordan curve|contour]] which encircles the [[pole]] in the [[upper half plane]];


   1. for $(x^0 - y^0) \lt 0$ the integrand decays for [[negative real number|negative]] [[imaginary part]]  and hence the integration over $k_0$ may be deformed to a [[Jordan curve|contour]] which encircles the [[pole]] in the [[lower half plane]]

   and then apply [[Cauchy's integral formula]] which picks out $2\pi i$ times the [[residue]] a these poles.

   <img src="https://ncatlab.org/nlab/files/ContourForFeynmanPropagator.png" height="300">

   Notice that when completing to a contour in the [[lower half plane]] we pick up a minus signs from the fact that now the contour runs clockwise.

1. In the fourth step we used prop. \ref{ModeExpansionForFeynmanPropagatorOfKleinGordonEquationOnMinkowskiSpacetime}.

=--

$\,$

**[[singular support]] and [[wave front sets]]**
{#WaveFrontSetsOfPropagatorsForKleinGordonOperatorOnMinkowskiSpacetime}

We now discuss the [[singular support]] (def. \ref{SingularSupportOfADistribution}) and the [[wave front sets]] (def. \ref{WaveFrontSet}) of the various [[propagators]] for the [[Klein-Gordon equation]] on [[Minkowski spacetime]].



+-- {: .num_prop #SingularSupportOfCausalPropagatorForKleinGordonEquationOnMinkowskiSpacetimeIsTheLightCone}
###### Proposition
**([[singular support]] of the [[causal propagator]] of the [[Klein-Gordon equation]] on [[Minkowski spacetime]] is the [[light cone]])**

The [[singular support]] of the [[causal propagator]] $\Delta_S$ for the [[Klein-Gordon equation]] on [[Minkowski spacetime]],
regarded via [[translation]] [[invariant|invariance]] as a [[generalized function]] in a single variable (eq:TranslationInvariantKleinGordonPropagatorsOnMinkowskiSpacetime)
is the [[light cone]] of the origin:

$$
  supp_{sing}(\Delta_S)
  \;=\;
  \left\{
    x \in \mathbb{R}^{p,1}
    \,\vert\,
    {\vert x\vert}^2_\eta = 0
  \right\}
  \,.
$$

=--


+-- {: .proof}
###### Proof

The statement follows immediately from prop. \ref{FourierTransformOfDeltaDistributionappliedToMassShell}.
We make this fully explicit now in the special case of [[spacetime]] [[dimension]]

$$
  p + 1 = 3 + 1
$$

by computing an explicit form for the [[causal propagator]] in terms of the [[delta distribution]],
the [[Heaviside distribution]] and [[smooth function|smooth]] [[Bessel functions]].

We follow ([Scharf 95 (2.3.18)](causal+perturbation+theory#Scharf95)).


Consider the formula for the [[causal propagator]] in terms of the mode expansion (eq:CausalPropagatorModeExpansionForKleinGordonOnMinkowskiSpacetime). Since the [[integrand]] here depends on the [[wave vector]] $\vec k$ only via its [[norm]] ${\vert \vec k\vert}$ and the [[angle]] $\theta$ it makes with the given [[spacetime]] [[vector]] via

$$
\vec k \cdot (\vec x - \vec y)
\;=\;
{\vert \vec k\vert} \, {\vert \vec x\vert} \, \cos(\theta)
$$


we may express the [[integration]] in terms of [[polar coordinates]] as follws:


$$
\begin{aligned}
\Delta_S(x - y)
& =
\frac{-1}{(2\pi)^p}
\int \frac{1}{2 \omega(\vec k)/c}
\sin\left( \omega(\vec k)(x^0 - y^0)/c \right)
e^{i \vec k \cdot (\vec x - \vec y)}
\, d^p \vec k
\\
& =
\frac{- vol_{S^{p-2}}}{(2\pi)^p}
\underset{{\vert \vec k\vert} \in \mathbb{R}_{\geq 0}}{\int}
\underset{ \theta \in [0,\pi] }{\int}
\frac{ 1 }{ \omega(\vec k)/c }
\sin\left( \omega(\vec k) (x^0 - y^0) /c \right)
e^{ i {\vert \vec k\vert} {\vert \vec x - \vec y\vert} \cos(\theta) }
{\vert \vec k\vert} ({\vert \vec k\vert} \sin(\theta))^{p-2}
\,
d \theta
\wedge
d {\vert \vec k\vert}
\end{aligned}
$$


In the special case of [[spacetime]] [[dimension]] $p + 1 = 3 + 1$ this becomes

$$
\label{StepsInComputingCausalPropagatorIn3plus1Dimension}
\begin{aligned}
\Delta_S(x - y)
& =
\frac{- 2\pi}{(2\pi)^{3}}
\underset{{\vert \vec k\vert} \in \mathbb{R}_{\geq 0}}{\int}
\frac{ {\vert \vec k \vert}^2 }{ \omega(\vec k)/c }
\sin\left( \omega(\vec k) (x^0 - y^0) /c \right)
\underset{
=
\tfrac{1}{i {\vert \vec k\vert}\, {\vert \vec x - \vec y\vert} }
\left(
e^{i {\vert \vec k\vert}\, {\vert \vec x - \vec y\vert}}
-
e^{-i {\vert \vec k\vert}\, {\vert \vec x - \vec y\vert}}
\right)
}{
\underbrace{
\underset{ \cos(\theta) \in [-1,1] }{\int}
e^{ i {\vert \vec k\vert} {\vert \vec x - \vec y\vert} \cos(\theta) }
d \cos(\theta)
}
}
\wedge
d {\vert \vec k \vert}
\\
& =
\frac{- 2}{(2\pi)^{2} {\vert \vec x - \vec y\vert}}
\underset{{\vert \vec k\vert} \in \mathbb{R}_{\geq 0}}{\int}
\frac{ {\vert \vec k \vert} }{ \omega(\vec k)/c }
\sin\left( \omega(\vec k) (x^0 - y^0) /c \right)
\sin\left( {\vert \vec k\vert}\, {\vert \vec x - \vec y\vert} \right)
\, d {\vert \vec k\vert}
\\
& =
\frac{- 2}{(2\pi)^{2} {\vert \vec x - \vec y\vert}}
\frac{d}{d {\vert \vec x - \vec y \vert } }
\underset{{\vert \vec k\vert} \in \mathbb{R}_{\geq 0}}{\int}
\frac{ 1 }{ \omega(\vec k)/c }
\sin\left( \omega(\vec k) (x^0 - y^0) /c \right)
\cos\left( {\vert \vec k\vert}\, {\vert \vec x - \vec y\vert} \right)
\, d {\vert \vec k\vert}
\\
& =
\frac{- 1}{(2\pi)^{2} {\vert \vec x - \vec y\vert}}
\frac{d}{d {\vert \vec x - \vec y \vert } }
\underset{  \kappa \in \mathbb{R}  }{\int}
\frac{ 1 }{ \omega(\kappa)/c }
\sin\left( \omega(\kappa) (x^0 - y^0) /c \right)
\cos\left( \kappa\, {\vert \vec x - \vec y\vert} \right)
\, d \kappa
\\
& =
\frac{- 1}{2(2\pi)^{2} {\vert \vec x - \vec y\vert}}
\frac{d}{d {\vert \vec x - \vec y} \vert }
\left(
\underset{\coloneqq I_+}{
\underbrace{
\underset{ \kappa \in \mathbb{R}  }{\int}
\frac{ 1 }{ \omega(\kappa)/c }
\sin\left(
\omega(\kappa) (x^0 - y^0) /c
+
\kappa\, {\vert \vec x - \vec y\vert}
\right)
d\kappa
}
}
+
\underset{ \coloneqq I_- }{
\underbrace{
\underset{ \kappa \in \mathbb{R}  }{\int}
\frac{ 1 }{ \omega(\kappa)/c }
\sin\left(
\omega(\kappa) (x^0 - y^0) /c
-
\kappa\, {\vert \vec x - \vec y\vert}
\right)
\,
d \kappa
}
}
\right)
\,.
\end{aligned}
$$

Here in the second but last step we renamed $\kappa \coloneqq {\vert \vec k\vert}$ and
doubled the integration domain for  convenience,
and in the last step we used the [[trigonometric identity]] $\sin(\alpha) \cos(\beta)\;=\; \tfrac{1}{2} \left( \sin(\alpha + \beta) + \sin(\alpha - \beta) \right)$.


In order to further evaluate this, we parameterize the remaining components $(\omega/c, \kappa)$ of the [[wave vector]]
by the dual [[rapidity]] $z$, via

$$
  \left(\cosh(z)\right)^2 - \left( \sinh(z)\right)^2 = 1
$$

as

$$
  \omega(\kappa)/c
  \;=\;
  \left(
    \tfrac{m c}{\hbar}
  \right)
  \cosh(z)
  \phantom{AA}
  \,,
  \phantom{AA}
  \kappa
  \;=\;
  \left(
    \tfrac{m c}{\hbar}
  \right)
  \sinh(z)
  \,,
$$

which makes use of the fact that $\omega(\kappa)$ is non-negative, by construction.
This [[change of integration variables]] makes the integrals under the braces above become

$$
  \label{TheTwoSpecialFunctionIntegralsInTheComputationOfTheCausalPropagatorIn3Plus1DOnMinkowski}
  I_\pm
  \;=\;
  \int_{-\infty}^\infty
   \sin\left(
     \tfrac{m c}{\hbar}
     \left(
       (x^0 - y^0) \cosh(z)
       \pm
       {\vert \vec x - \vec y\vert}
       \sinh(z)
     \right)
   \right)
   \, d z
   \,.
$$

Next we similarly parameterize the vector $x-y$ by its [[rapidity]] $\tau$. That parameterization depends on whether
$x-y$ is spacelike or not, and if not, whether it is future or past directed.

First, if $x-y$ is [[spacelike]] in that ${\vert x-y\vert}^2_\eta \gt 0$
then we may parameterize as

$$
  (x^0 - y^0)
  =
  \sqrt{{\vert x-y\vert}^2_\eta} \sinh(\tau)
  \phantom{AA}
  \,,
  \phantom{AA}
  {\vert \vec x - \vec y\vert}
  =
  \sqrt{ {\vert x-y\vert}^2_\eta} \cosh(\tau)
$$

which yields

$$
  \begin{aligned}
    I_{\pm}
    & =
    \int_{-\infty}^\infty
     \sin\left(
       \tfrac{m c}{\hbar}
       \sqrt{ {\vert x-y\vert}^2_\eta }
       \left(
         \sinh(\tau) \cosh(z)
         \pm
         \cosh(\tau)
         \sinh(z)
       \right)
     \right)
     \, d z
     \\
     & =
    \int_{-\infty}^\infty
     \sin\left(
       \tfrac{m c}{\hbar}
       \sqrt{ {\vert x-y\vert}^2_\eta}
       \left(
          \sinh\left( \tau \pm z\right)
       \right)
     \right)
     \, d z
     \\
     & =
    \int_{-\infty}^\infty
     \sin\left(
       \tfrac{m c}{\hbar}
       \sqrt{ {\vert x-y\vert}^2_\eta }
       \left(
          \sinh\left( z \right)
       \right)
     \right)
     \, d z
     \\
     & = 0
     \,,
  \end{aligned}
$$

where in the last line we observe that the integrand is a skew-symmetric function of $z$.

Second, if $x-y$ is [[timelike]] with $(x^0 - y^0) \gt 0$ then we may parameterize as

$$
  (x^0 - y^0)
  =
  \sqrt{ -{\vert x-y\vert}^2_\eta} \cosh(\tau)
  \phantom{AA}
  \,,
  \phantom{AA}
  {\vert \vec x - \vec y\vert}
  =
  \sqrt{ -{\vert x - y\vert}^2_\eta }
  \sinh(\tau)
$$

which yields

$$
  \label{IdentifyingTheBesselFunctionInComputationOfCausalPropagatorIn3Plus1DOnMinkowski}
  \begin{aligned}
    I_\pm
    & =
    \int_{-\infty}^\infty
     \sin\left(
       \tfrac{m c}{\hbar}
       \left(
         (x^0 - y^0) \cosh(z)
         \pm
         {\vert \vec x - \vec y\vert}
         \sinh(z)
       \right)
     \right)
     \, d z
     \\
     & =
    \int_{-\infty}^\infty
     \sin\left(
       \sqrt{ - {\vert x-y\vert}^2_\eta }
       \tfrac{m c}{\hbar}
       \left(
         \cosh(\tau)\cosh(z)
         \pm
         \cosh(\tau)
         \sinh(z)
       \right)
     \right)
     \, d z
     \\
     & =
    \int_{-\infty}^\infty
     \sin\left(
       \sqrt{ - {\vert x-y\vert}^2_\eta }
       \tfrac{m c}{\hbar}
       \left(
         \cosh(z \pm \tau)
       \right)
     \right)
     \, d z
     \\
     & =
     \pi J_0\left( \sqrt{ - {\vert x-y\vert}^2_\eta} \tfrac{m c}{\hbar} \right)
   \end{aligned}
   \,.
$$

Here in the last line we identified the integral representation of the [[Bessel function]] $J_0$ of order 0 (see [here](Bessel+function#eq:J0AsIntSinOfxCoshtdt)). The important point here is that this is a smooth function.

Similarly, if $x-y$ is [[timelike]] with $(x^0 - y^0) \lt 0$ then the same argument yields

$$
  I_\pm = -  \pi J_0\left( \sqrt{ - {\vert x-y\vert}^2_\eta} \tfrac{m c}{\hbar} \right)
$$

In conclusion, the general form of $I_\pm$ is

$$
  I_\pm
  =
  \pi
  sgn(x^0 - y^0)
  \Theta\left( -{\vert x-y\vert}^2_\eta \right)
  J_0\left( \sqrt{ - {\vert x-y\vert}^2_\eta } \tfrac{m c}{\hbar} \right)
  \,.
$$

Therefore we end up with

$$
\label{FinalResultOfComputationOf3Plus1dCausalPropagator}
\begin{aligned}
\Delta_S(x,y)
& =
\frac{1}{4 \pi {\vert \vec x - \vec y\vert}}
\frac{d}{d {\vert \vec x - \vec y\vert}}
sgn(x^0) \Theta\left( -{\vert x-y\vert}^2_\eta \right)
J_0\left(
  \sqrt{ -{\vert x-y\vert}^2_\eta }
  \tfrac{m c}{\hbar}
\right)
\\
& =
\frac{-1}{2 \pi }
\frac{d}{d (-{\vert x-y\vert}^2_\eta)}
sgn(x^0) \Theta\left( -{\vert x-y\vert}^2_\eta \right)
J_0\left(
  \sqrt{-{\vert x-y \vert}^2_\eta} \tfrac{m c}{\hbar}
\right)
\\
& =
-\frac{1}{2 \pi }
\frac{d}{d (- \vert x-y\vert^2_{\eta})}
sgn(x^0) \Theta\left( - {\vert x - y\vert}^2_\eta \right)
J_0\left(
\tfrac{m c}{\hbar}  \sqrt{ -{\vert x-y\vert}^2_\eta }
\right)
\\
& =
\frac{-1}{2\pi}
sgn(x^0)
\left(
\delta\left(
-{\vert x-y\vert}^2_\eta
\right)
\;-\;
\Theta\left( -{\vert x-y\vert}^2_\eta  \right)
\frac{d}{d \left({-\vert x-y\vert}^2_\eta\right) }
J_0\left(
\tfrac{m c}{\hbar}  \sqrt{ -{\vert x-y\vert}^2_\eta }
\right)
\right)
\end{aligned}
$$

=--


+-- {: .num_prop #SingularSupportOfHadamardPropagatorForKleinGordonEquationOnMinkowskiSpacetimeIsTheLightCone}
###### Proposition
**([[singular support]] of the [[Hadamard propagator]] of the [[Klein-Gordon equation]] on [[Minkowski spacetime]] is the [[light cone]])**

The [[singular support]] of the [[Hadamard propagator]] $\Delta_H$ (def. \ref{StandardHadamardDistributionOnMinkowskiSpacetime}) for the [[Klein-Gordon equation]] on [[Minkowski spacetime]], regarded via [[translation]] [[invariant|invariance]] as a [[distribution]]
in a single variable, is the [[light cone]] of the origin:

$$
  supp_{sing}(\Delta_H)
  =
  \left\{
    x \in \mathbb{R}^{p,1}
    \;\vert\;
    {\vert x\vert}^2_\eta = 0
  \right\}
  \,.
$$

=--

+-- {: .proof}
###### Proof

The statement follows immediately from prop. \ref{FourierTransformOfDeltaDistributionappliedToMassShell}.
We make this fully explicit now in the special case of [[spacetime]] [[dimension]]

$$
  p + 1 = 3 + 1
$$

by computing an explicit form for the [[causal propagator]] in terms of the [[delta distribution]],
the [[Heaviside distribution]] and [[smooth function|smooth]] [[Bessel functions]].

We follow ([Scharf 95 (2.3.36)](causal+perturbation+theory#Scharf95)).


By (eq:SymmetricPartOfHadamardPropagatorForKleinGordonOnMinkowskiSpacetime) we have

$$
  \begin{aligned}
  \Delta_H(x,y)
   & =
   \tfrac{i}{2}
   \underset{= \Delta_S(x,y)}{
   \underbrace{
     \frac{-1}{(2\pi)^p}
     \int
     \frac{1}{\omega(\vec k)/c}
     \sin\left( \omega(\vec k)(x^0 - y^0)/c \right)
     e^{i \vec k \cdot (\vec x - \vec y) }
     \, d^p \vec k
   }}
   \;+\;
   \underset{
     \coloneqq H(x,y)
   }{
   \underbrace{
    \frac{1}{(2\pi)^p}
     \int \frac{1}{2 \omega(\vec k)/c}
     \cos\left( \omega(\vec k)(x^0 - y^0)/c  \right)
     e^{i \vec k \cdot (\vec x - \vec y) }
     \, d^p \vec k
   }}
  \end{aligned}
$$

The first summand, proportional to the [[causal propagator]], which we computed as (eq:FinalResultOfComputationOf3Plus1dCausalPropagator)
in prop. \ref{SingularSupportOfCausalPropagatorForKleinGordonEquationOnMinkowskiSpacetimeIsTheLightCone} to be

$$
  \tfrac{i}{2}\Delta_S(x,y)
  \;=\;
  \frac{-i}{4\pi}
  sgn(x^0)
  \left(
  \delta\left(
  -{\vert x-y\vert}^2_\eta
  \right)
  \;-\;
  \Theta\left( -{\vert x-y\vert}^2_\eta  \right)
  \frac{d}{d \left({-\vert x-y\vert}^2_\eta\right) }
  J_0\left(
  \tfrac{m c}{\hbar}  \sqrt{ -{\vert x-y\vert}^2_\eta }
  \right)
  \right)
  \,.
$$

The second term is computed in a directly analogous fashion: The integrals $I_\pm$ from
(eq:TheTwoSpecialFunctionIntegralsInTheComputationOfTheCausalPropagatorIn3Plus1DOnMinkowski) are now

$$
  I_\pm
  \coloneqq
  \int_{-\infty}^\infty
   \cos\left(
     \tfrac{m c}{\hbar}
     \left(
       (x^0 - y^0) \cosh(z)
       \pm
       {\vert \vec x - \vec y\vert}
       \sinh(z)
     \right)
   \right)
   \, d z
$$

Parameterizing by [[rapidity]], as in the proof of prop. \ref{SingularSupportOfCausalPropagatorForKleinGordonEquationOnMinkowskiSpacetimeIsTheLightCone}, one finds that for [[timelike]] $x-y$ this is

$$
  \begin{aligned}
  I_\pm
  & =
    \int_{-\infty}^\infty
     \cos\left(
       \tfrac{m c}{\hbar}
       \sqrt{ {\vert x-y\vert}^2_\eta }
       \left(
          \cosh\left( z \right)
       \right)
     \right)
     \, d z
  \\
  & =
  - \pi N_0
  \left(
    \tfrac{m c}{\hbar}
    \sqrt{ {\vert x-y\vert}^2_\eta }
  \right)
  \end{aligned}
$$

while for [[spacelike]] $x-y$ it is

$$
  \begin{aligned}
    I_\pm
    & =
    \int_{-\infty}^\infty
     \cos\left(
       \tfrac{m c}{\hbar}
       \sqrt{ {\vert x-y\vert}^2_\eta }
       \left(
          \sinh\left( z \right)
       \right)
     \right)
     \, d z
     \\
    & =
    2 K_0
   \left(
     \tfrac{m c}{\hbar}
     \sqrt{ {\vert x-y\vert}^2_\eta }
   \right)
   \,,
  \end{aligned}
$$

where we identified the integral representations of the [[Neumann function]] $N_0$ (see [here](Bessel+function#N0AsIntSinOfxCoshtdt))
and of the [[modified Bessel function]] $K_0$ (see [here](Bessel+function#eq:K0AsIntSinOfxCoshtdt)).

As for the [[Bessel function]] $J_0$ in (eq:IdentifyingTheBesselFunctionInComputationOfCausalPropagatorIn3Plus1DOnMinkowski) the key point is that these are [[smooth functions]]. Hence we conclude that

$$
  H(x,y)
  \;\propto\;
  \frac{d}{d \left( {\vert x-y\vert}^2_\eta \right)}
  \left(
    -\Theta\left( -{\vert x-y\vert}^2_\eta \right)
    N_0
    \left(
      \tfrac{m c}{\hbar}
      \sqrt{ {\vert x-y\vert}^2_\eta }
    \right)
    +
    \Theta\left( {\vert x-y\vert}^2_\eta  \right)
    \tfrac{2}{\pi}
    K_0
   \left(
     \tfrac{m c}{\hbar}
     \sqrt{ {\vert x-y\vert}^2_\eta }
   \right)
  \right)
  \,.
$$

This expression has singularities on the [[light cone]] due to the [[step functions]].
In fact the expression being differentiated is continuous at the light cone
([Scharf 95 (2.3.34)](#Scharf95)), so that the singularity on the light cone is not a [[delta distribution]]
singularity from the derivative of the step functions. Accordingly it does not cancel the singularity
of $\tfrac{i}{2}\Delta_S(x,y)$ as above, and hence the singular support of $\Delta_H$ is still the whole
light cone.

=--


+-- {: .num_prop #SingularSupportOfFeynmanPropagatorForKleinGordonEquationOnMinkowskiSpacetime}
###### Proposition
**([[singular support]] of [[Feynman propagator]] for [[Klein-Gordon equation]] on [[Minkowski spacetime]])**

The [[singular support]] of the [[Feynman propagator]] $\Delta_H$ and of the [[anti-Feynman propagator]] $\Delta_{\overline{F}}$ (def. \ref{StandardHadamardDistributionOnMinkowskiSpacetime}) for the [[Klein-Gordon equation]] on [[Minkowski spacetime]], regarded via [[translation]] [[invariant|invariance]] as a [[distribution]]
in a single variable, is the [[light cone]] of the origin:

$$
  \left.
  \array{
    supp_{sing}(\Delta_F)
    \\
    supp_{sing}(\Delta_{\overline{F}})
  }
  \right\}
  =
  \left\{
    x \in \mathbb{R}^{p,1}
    \;\vert\;
    {\vert x\vert}^2_\eta = 0
  \right\}
  \,.
$$

=--


+-- {: .proof}
###### Proof

The statement follows immediately from prop. \ref{FourierTransformOfPrincipalValueOfPowerOfQuadraticForm}.

=--

+-- {: .num_prop #WaveFronSetsForKGPropagatorsOnMinkowski}
###### Proposition
**([[wave front sets]] of [[propagators]] of [[Klein-Gordon equation]] on [[Minkowski spacetime]])**

The [[wave front set]] of the various [[propagators]] for the [[Klein-Gordon equation]] on [[Minkowski spacetime]], regarded, via [[translation]] [[invariant|invariance]], as [[distributions]] in a single variable, are as follows:

* the [[causal propagator]] $\Delta_S$ (prop. \ref{ModeExpansionOfCausalPropagatorForKleinGordonOnMinkowski}) has wave front set all pairs $(x,k)$ with $x$ and $k$ both on the lightcone:

$$
WF(\Delta_S) = \left\{ (x,k) \,\vert\, {\vert x\vert}^2_\eta = 0 \;\text{and} \; {\vert k\vert}^2_\eta = 0 \; \text{and} \, k \neq 0  \right\}
$$

<center>
<img src="https://ncatlab.org/nlab/files/RetGreenFunction.png" width="60"> <br/> - <br/> <img src="https://ncatlab.org/nlab/files/AdvancedGreenFunction.png" width="60">
</center>

* the [[Hadamard propagator]] $\Delta_H$ (def. \ref{StandardHadamardDistributionOnMinkowskiSpacetime}) has wave front set all pairs $(x,k)$ with $x$ and $k$ both on the light cone and $k^0 \gt 0$:

$$
WF(\Delta_H) = \left\{ (x,k) \,\vert\, {\vert x\vert}^2_\eta = 0 \;\text{and} \; {\vert k\vert}^2_\eta = 0 \; \text{and} \; k^0 \gt 0   \right\}
$$

<center>
<img src="https://ncatlab.org/nlab/files/HadamardPropagator.png" width="60">
</center>


* the [[Feynman propagator]] $\Delta_S$ (def. \ref{FeynmanPropagatorForKleinGordonEquationOnMinkowskiSpacetime}) has wave front set all pairs $(x,k)$ with $x$ and $k$ both on the light cone and $\pm k_0 \gt 0 \;\Leftrightarrow\; \pm x^0 \gt 0$

$$
  WF(\Delta_H) = \left\{ (x,k) \,\vert\, {\vert x\vert}^2_\eta = 0 \;\text{and} \; {\vert k\vert}^2_\eta = 0 \; \text{and} \;
    \left(
       \pm k_0 \gt 0 \;\Leftrightarrow\; \pm x^0 \gt 0
    \right)
  \right\}
$$

<center>
<img src="https://ncatlab.org/nlab/files/FeynmanPropagator.png" width="60">
</center>

=--

([Radzikowski 96, (16)](Hadamard+distribution#Radzikowski96))

+-- {: .proof}
###### Proof

First regarding the causal propagator:

By prop. \ref{SingularSupportOfCausalPropagatorForKleinGordonEquationOnMinkowskiSpacetimeIsTheLightCone} the [[singular support]] of $\Delta_S$ is the [[light cone]].

Since the causal propagator is a solution to the homogeneous Klein-Gordon equation, the
[[propagation of singularities theorem]] (prop. \ref{PropagationOfSingularitiesTheorem}) says that also all [[wave vectors]] in the wave front set are [[lightlike]].
Hence it just remains to show that all non-vanishing lightlike wave vectors based on the lightcone in spacetime
indeed do appear in the wave front set.

To that end, let $b \in C^\infty_{cp}(\mathbb{R}^{p,1})$ be a [[bump function]] whose [[compact support]] includes the origin.

For $a \in \mathbb{R}^{p,1}$ a point on the light cone, we need to determine the decay property of the Fourier transform of $x \mapsto b(x-a)\Delta_S(x)$. This is the [[convolution of distributions]] of $\hat b(k)e^{i k_\mu a^\mu}$ with $\widehat \Delta_S(k)$. By prop. \ref{CausalPropagatorAsFourierTransformOfDeltaDistributionOnTransformedKGOperator} we have

$$
\widehat \Delta_{S}(k)
\;\propto\;
\delta\left( -k_\mu k^\mu - \left( \tfrac{m c}{\hbar} \right)^2 \right)
sgn(k_0)
\,.
$$

This means that the convolution product is the smearing of the mass shell by $\widehat b(k)e^{i k_\u a^\mu}$.

Since the mass shell asymptotes to the light cone, and since $e^{i k_\mu a^\mu} = 1$ for $k$ on the light cone (given that $a$ is on the light cone), this implies the claim.


Now for the [[Hadamard propagator]]:

By def. \ref{StandardHadamardDistributionOnMinkowskiSpacetime} its Fourier transform is of the form

$$
\widehat \Delta_H(k)
\;\propto\;
\delta\left( k_\mu k^\mu + m^2 \right) \Theta( -k_0 )
$$

Moreover, its [[singular support]] is also the light cone (prop. \ref{SingularSupportOfHadamardPropagatorForKleinGordonEquationOnMinkowskiSpacetimeIsTheLightCone}).

Therefore now same argument as before says that the wave front set consists of wave vectors $k$ on the light cone, but now due to the [[step function]] factor $\Theta(-k_0)$ it must satisfy $0 \leq - k_0 = k^0$.

Finally regarding the [[Feynman propagator]]:

by prop. \ref{ModeExpansionForFeynmanPropagatorOfKleinGordonEquationOnMinkowskiSpacetime} the Feynman propagator
coincides with the positive frequency Hadamard propagator for $x^0 \gt 0$ and with the "negative frequency Hadamard operator"
for $x^0 \lt 0$. Therefore the form of $WF(\Delta_F)$ now follows directly with that of $WF(\Delta_H)$ above.

=--





$\,$

**[[propagators]] for the [[Dirac equation]] on [[Minkowski spacetime]]**
 {#DiracEquationOnMinkowskiSpacetimePropagators}

We now discuss how the [[propagators]] for the [[free field theory|free]] [[Dirac field]] on [[Minkowski spacetime]] (example \ref{GreenHyperbolicDiracOperator}) follow directly from those for the [[scalar field]] discussed above.

+-- {: .num_prop #DiracEquationOnMinkowskiSpacetimeAdvancedAndRetardedPropagators}
###### Proposition
**([[advanced and retarded propagator]] for [[Dirac equation]] on [[Minkowski spacetime]])**

Consider the [[Dirac operator]] on [[Minkowski spacetime]], which in [[Feynman slash notation]] reads

$$
  \begin{aligned}
    D
      & \coloneqq
    -i {\partial\!\!\!/\,}
     + \tfrac{m c}{\hbar}
    \\
    & =
    -i \gamma^\mu \frac{\partial}{\partial x^\mu} + \tfrac{m c}{\hbar}
  \end{aligned}
  \,.
$$

Its [[advanced and retarded propagators]] (def. \ref{AdvancedAndRetardedGreenFunctions})
are the [[derivatives of distributions]] of the advanced and retarded propagators $\Delta_\pm$ for the [[Klein-Gordon equation]] (prop. \ref{AdvancedRetardedPropagatorsForKleinGordonOnMinkowskiSpacetime}) by ${\partial\!\!\!/\,} + m$:

$$
  \Delta_{D, \pm}
  \;=\;
  \left(
    -i{\partial\!\!\!/\,} - \tfrac{m c}{\hbar}
  \right)
  \Delta_{\pm}
  \,.
$$

Hence the same is true for the [[causal propagator]]:

$$
  \Delta_{D, S}
  \;=\;
  \left(
    -i{\partial\!\!\!/\,} - \tfrac{m c}{\hbar}
  \right)
  \Delta_{S}
  \,.
$$


=--

+-- {: .proof}
###### Proof

Applying a [[differential operator]] does not change the [[support]] of a [[smooth function]], hence also not the [[support of a distribution]]. Therefore the uniqueness of the advanced and retarded propagators (prop. \ref{AdvancedAndRetardedGreenFunctionsForGreenHyperbolicOperatorAreUnique})
together with the translation-invariance and the anti-[[formally self-adjoint differential operator|formally self-adjointness]] of the [[Dirac operator]] (as for the [[Klein-Gordon operator]] (eq:TranslationInvariantKleinGordonPropagatorsOnMinkowskiSpacetime)
implies that it is sufficent to check that applying the [[Dirac operator]] to the $\Delta_{D, \pm}$
yields the [[delta distribution]]. This follows since the Dirac operator squares to the Klein-Gordon operator:


$$
  \begin{aligned}
    \left(
      -i{\partial\!\!\!/\,} + \tfrac{m c}{\hbar}
    \right)
    \Delta_{D, \pm}
    & =
    \underset{ = \Box - \left(\tfrac{m c}{\hbar}\right)^2}{
    \underbrace{
    \left(
      -i{\partial\!\!\!/\,} + \tfrac{m c}{\hbar}
    \right)
    \left(
      -i{\partial\!\!\!/\,} - \tfrac{m c}{\hbar}
    \right)
    }
    }
    \Delta_{\pm}
    \\
    & =
    \delta
  \end{aligned}
  \,.
$$

=--

Similarly we obtain the other [[propagators]] for the [[Dirac field]] from those of the [[real scalar field]]:

+-- {: .num_defn #HadamardPropagatorForDiracOperatorOnMinkowskiSpacetime}
###### Definition
**([[Hadamard propagator]] for [[Dirac operator]] on [[Minkowski spacetime]])**

The _[[Hadamard propagator]]_ for the [[Dirac operator]] on [[Minkowski spacetime]] is the [[positive real number|positive]] [[frequency]] part of the [[causal propagator]] (prop. \ref{DiracEquationOnMinkowskiSpacetimeAdvancedAndRetardedPropagators}),
hence the [[derivative of distributions]] of the Hadamard propagator for the Klein-Gordon field (def. \ref{StandardHadamardDistributionOnMinkowskiSpacetime}) by the [[Dirac operator]]:

$$
  \begin{aligned}
  \left(
     -i{\partial\!\!\!/\,} + \tfrac{m c}{\hbar}
  \right)\Delta_{H}(x,y)
  & =
  \frac{1}{(2\pi)^p} \int \delta\left( k_\mu k^\mu + m^2 \right) \Theta( -k_0 ) ( {k\!\!\!/\,} + \tfrac{m c}{\hbar}) e^{i k_\mu (x^\mu-y^\mu) } \, d^{p+1} k
  \\
  & =
  \frac{1}{(2\pi)^p}
  \int \frac{ \gamma^0 \omega(\vec k)/c + \vec \gamma \cdot \vec k + \tfrac{m c}{\hbar}   }{2 \omega(\vec k)/c}
  e^{-i \omega(\vec k)(x^0 - y^0)/c + i \vec k \cdot (\vec x - \vec y) }
  \, d^p \vec k
  \,.
  \end{aligned}
$$

Here we used the expression (eq:StandardHadamardDistributionOnMinkowskiSpacetime) for the Hadamard propagator of the Klein-Gordon equation.

=--

+-- {: .num_defn #FeynmanPropagatorForDiracOperatorOnMinkowskiSpacetime}
###### Definition
**([[Feynman propagator]] for [[Dirac operator]] on [[Minkowski spacetime]])**

The _[[Feynman propagator]]_ for the [[Dirac operator]] on [[Minkowski spacetime]] is the linear combination

$$
  \Delta_{D, F}
  \;\coloneqq\;
  \Delta_{D,H}
  +
  i \Delta_{D, -}
$$

of the [[Hadamard propagator]] (def. \ref{HadamardPropagatorForDiracOperatorOnMinkowskiSpacetime}) and the retarded propagator (prop. \ref{DiracEquationOnMinkowskiSpacetimeAdvancedAndRetardedPropagators}). By prop. \ref{FeynmanPropagatorAsACauchyPrincipalvalue}
this means that it is the
[[derivative of distributions]] of the [[Feynman propagator]] of the [[Klein-Gordon equation]] (def. \ref{FeynmanPropagatorForKleinGordonEquationOnMinkowskiSpacetime}) by the [[Dirac operator]]

$$
  \begin{aligned}
  \Delta_{D, F}
   & =
  \left(
     -i{\partial\!\!\!/\,} + \tfrac{m c}{\hbar}
  \right)\Delta_{F}(x,y)
  & =
  \underset{ {\epsilon \in (0,\infty)} \atop {\epsilon \to 0} }{\lim}
  \frac{-i}{(2\pi)^{p+1}}
  \int
  \int_{-\infty}^\infty
  \frac{
     \left( {k\!\!\!/\,} + \tfrac{m c}{\hbar} \right) e^{i k_\mu (x^\mu - y^\mu)}
  }{
    - k_\mu k^\mu - \left( \tfrac{m c}{\hbar} \right)^2 + i \epsilon
  }
  \, d k_0 \, d^p \vec k
  \,.
  \end{aligned}
$$


=--


$\,$

$\,$

This concludes our discussion of [[propagators]] induced from the [[covariant phase space]] of [[Green hyperbolic differential equation|Green hyperbolic]] [[free field theory|free]] [[Lagrangian field theory]]. These propagators will be the key in for [[quantization]] via [[causal perturbation theory]]. But not all [[free field theories]] have a [[covariant phase space]] of [[Green hyperbolic differential equation|Green hyperbolic]] [[equations of motion]], for instance the [[electromagnetic field]], a priori, does not. Therefore before turning to [[quantization]] in the [next chapter](#GaugeSymmetries) we first discuss how _[[gauge symmetries]]_  [[obstruction|obstruct]] the existence of  [[Green hyperbolic differential equation|Green hyperbolic]] [[equations of motion]].

$\,$


## Gauge symmetries
 {#GaugeSymmetries}

The existence of the [[covariant phase space]] (prop. \ref{CovariantPhaseSpace}) of a [[Lagrangian field theory]]
requires the existence of [[Cauchy surfaces]] (def. \ref{CauchySurface}) for its [[Euler-Lagrange equation|Euler-Lagrange]] [[equations of motion]], hence requires that the [[equations of motion]] are [[Green hyperbolic differential equation|Green hyperbolic]] (def. \ref{GreenHyperbolicDifferentialOperator}).

We have seen that this is the case for instance for the [[scalar field]] (example \ref{GreenHyperbolicKleinGordonEquation})
and the [[Dirac field]] (example \ref{GreenHyperbolicDiracOperator}), but it is not the case generally,
for instance it fails for the [[electromagnetic field]] (example \ref{ElectromagnetismEl}).
An [[obstruction]] to the existence of the [[covariant phase space]] turns out to be (prop. \ref{NonTrivialImplicitInfinitesimalGaugeSymmetriesPbstructExistenceOfCauchySurfaces} below)
the presence of [[infinitesimal symmetries of the Lagrangian]] (def. \ref{SymmetriesAndConservedCurrents})
that have compact spacetime support (def. \ref{SpacetimeSupport}).


An obvious candidate example of such are
[[infinitesimal symmetries of the Lagrangian]] which occur
linearly _parameterized_  by arbitrary [[sections]] (and their [[derivatives]]) of some [[vector bundle]] on [[spacetime]]:
Because then for every choice of section of [[compact support]] the corresponding symmetry will have
compact spacetime support.
Typically all compactly supported [[infinitesimal symmetries of the Lagrangian]]
arise from parameterized symmetries this way; this is notably the case for the [[Lagrangian density]] of the [[electromagnetic field]] (example \ref{InfinitesimalGaugeSymmetryElectromagnetism}) and more generally of the [[Yang-Mills field]].
These parameterized [[infinitesimal symmetries of the Lagrangian]] we call _implicit [[infinitesimal gauge symmetries]]_,
and their parameters we call the _[[gauge parameters]]_ (def. \ref{GaugeParametrizedInfinitesimalGaugeTransformation} below).

Therefore the presence of [[infinitesimal symmetries of the Lagrangian]] with compact spacetime support is a defect of the theory
which however implies its own solution, by indicating which [[relations]] ought to be promoted
to "[[gauge equivalences|gauge]]" [[equivalences]]. Therefore we call these the _implicit [[infinitesimal gauge symmetries]]_
(remark \ref{ImplicitGaugeTransformationTerminology} below).


This obstruction is neatly
captured by the [[cochain cohomology]] of the _local [[BV-complex]]_ (def. \ref{BVComplexOfOrdinaryLagrangianDensity}) of the Lagrangian field theory (prop. \ref{BVComplexIsHomologicalResolutionPreciselyIfNoNonTrivialImplicitGaugeSymmetres} below).
This may be understood as the [[algebra of functions]] on an extension of the [[jet bundle]] from a
(locally pro-finite dimensional, prop. \ref{InfinitesimalActionByLieAlgebra}) [[smooth manifold]] to
a [[differential graded manifold]].
This appearance of [[homotopy theory]] in the guise of [[homological algebra]] in Lagrangian field theory
paves the way to understanding the cause of the obstruction: It disappears when the
[[field bundle]] (or more generally its [[jet bundle]]) is promoted to its _infinitesimal [[homotopy quotient]]_
by the [[action]] of these compactly supported symmetries (the "[[action Lie algebroid]]", def. \ref{ActionLieAlgebroid} below).

Passing to this [[homotopy quotient]]
means to hard-wire into the geometry of the  types of [[field (physics)|field]] their _[[equivalence]]_ under these symmetries: in physics this is called _[[gauge equivalence]]_.  The result is called the "[[reduced phase space]]", which we turn to further [below](#ReducedPhaseSpace).




$\,$


+-- {: .num_defn #ImplicitInfinitesimalGaugeSymmetry}
###### Definition
**(implicit [[infinitesimal gauge symmetry]])**

Given a [[Lagrangian field theory]] $(E, \mathbf{L})$ (def. \ref{LocalLagrangianDensityOnSecondOrderJetBundleOfTrivialVectorBundleOverMinkowskiSpacetime}),
then an _implicit [[infinitesimal gauge symmetry]]_ is an [[infinitesimal symmetry of the Lagrangian]]
(def. \ref{SymmetriesAndConservedCurrents}) with compact spacetime support  (def. \ref{SpacetimeSupport}).

=--


There always exist "trivial" implicit infinitesimal gauge transformations:

+-- {: .num_example #TrivialImplicialInfinitesimalGaugeTransformations}
###### Example
**(trivial implicit [[infinitesimal gauge symmetries]])**

Let $(E,\mathbf{L})$ be a [[Lagrangian field theory]] (def. \ref{LocalLagrangianDensityOnSecondOrderJetBundleOfTrivialVectorBundleOverMinkowskiSpacetime}).

Then every [[evolutionary vector field]] (def. \ref{EvolutionaryVectorField}) of the special form

$$
  \epsilon
    \coloneqq
  \frac{\delta L }{\delta \phi^a} \kappa^{[a b]} \partial_{\phi^a}
  \;\in\;
  \Gamma_E^{ev}( T_\Sigma E )
$$

for a collection of smooth functions with compact spacetimes support

$$
  (\kappa^{[a b]} \in \Omega^{0,0}_\Sigma(E))
  \;\;\;\;
  \in \Omega^{0,0}_{\Sigma,cp}(E)
$$

which is skew-symmetric in its indices ($\kappa^{[a b]} = - \kappa^{[b a]}$) is an
implicit infinitesimal gauge symmetry (def. \ref{ImplicitInfinitesimalGaugeSymmetry}).

This is so for a "trivial reason" namely just that skew symmetry:

$$
  \iota_\epsilon \delta_{EL} \mathbf{L}
  =
  \underset{= 0}{
  \underbrace{
   \left( \frac{\delta L }{\delta \phi^a} \right)
   \left( \frac{\delta L }{\delta \phi^b} \right)
   \kappa^{[a b]}
  }
  }
  \,
  dvol_\Sigma
$$

These are called the _trivial infinitesimal gauge transformation_.

Moreover, by prop. \ref{EulerLagrangeOperatorForTivialVectorBundleOverMinkowskiSpacetime} the [[action]] of
these implicit infinitesimal gauge symmetries  $\epsilon$ vanishes [[on-shell]] (def. \ref{EulerLagrangeOperatorForTivialVectorBundleOverMinkowskiSpacetime})
up to a [[total derivative|total horizontal derivative]] and hence indeed
act trivially on on-shell local observables.


=--



+-- {: .num_remark #ImplicitGaugeTransformationTerminology}
###### Remark
**(terminology)**

The literature on the [[variational bicomplex]] knows a more refined concept
of infinitesimal gauge transformations than the "implicit" infinitesimal gauge transformations of
def. \ref{ImplicitInfinitesimalGaugeSymmetry}, namely in terms of [[differential operators]]
taking values in infinitesimal symmetries of the Lagrangian.
But for the purpose of constructing the [[covariant phase space]] of a [[gauge theory]],
def. \ref{ImplicitInfinitesimalGaugeSymmetry} is what needs to be considered (prop. \ref{NonTrivialImplicitInfinitesimalGaugeSymmetriesPbstructExistenceOfCauchySurfaces} below).

We do say "implicit" here to distinguish from their "explicit" incarnations
[[action Lie algebroid|acting]] on [[field (physics)|fields]]:
the morphisms in the [[action Lie algebroid]] whose [[Chevalley-Eilenberg algebra]]
is the _[[BRST complex]]_ (example \ref{LocalOffShellBRSTComplex} below).

Since the point of quantization of [[gauge field theory]] via [[causal perturbation theory]]
is that it does _not apply_ as long as there are non-trivial implicit infinitesimal gauge symmetries
present (prop. \ref{NonTrivialImplicitInfinitesimalGaugeSymmetriesPbstructExistenceOfCauchySurfaces} below),
but only applies once all implicit infinitesimal
gauge symmetries have been made explicit (by the [[BV-BRST complex]]) the distinction is important.

=--



+-- {: .num_prop #NonTrivialImplicitInfinitesimalGaugeSymmetriesPbstructExistenceOfCauchySurfaces}
###### Proposition
**(non-trivial implicit [[infinitesimal gauge symmetries]] [[obstruction|obstruct]] existence of [[Cauchy surfaces]])**

Let $(E,\mathbf{L})$ be a [[Lagrangian field theory]].

If there exists a single implicit infinitesimal gauge transformation $\epsilon$ (def. \ref{ImplicitInfinitesimalGaugeSymmetry})
that does not vanish [[on-shell]] (not a trivial one, example \ref{TrivialImplicialInfinitesimalGaugeTransformations})
then there does not exist any [[Cauchy surface]] (def. \ref{CauchySurface}) for the [[Euler-Lagrange equations|Euler-Lagrange]] [[equations of motion]] (def. \ref{EulerLagrangeEquationsOnTrivialVectorFieldBundleOverMinkowskiSpacetime}) outside of $supp_\Sigma(v)$.

=--

+-- {: .proof}
###### Proof


By prop. \ref{FlowAlongImplicitInfinitesimalGaugeSymmetryPreservesOnShellSpaceofFieldHistories}
the flow along $\hat \epsilon$ preserves the on-shell space of field histories.

But if $\hat \epsilon$ is non-trivial, in that it does not vanish on-shell,
then the flow along $\epsilon$ continuously changes solutions away from the would-be Cauchy surface.
This means that there are infinitely many solutions to the equations of motion that restrict to the
same solution on the would-be Cauchy surface, which contradicts the defining property of an
actual Cauchy surface.

=--


After these generalities on implicit [[infinitesimal gauge symmetries]] we turn attention to a more
structured special class of them. To that end, recall that an [[evolutionary vector field]] (def. \ref{EvolutionaryVectorField})
is a bundle homomorphism of the form

$$
  \array{
    J^\infty_\Sigma(E)
    && \overset{v}{\longrightarrow} &&
    T_\Sigma E
    \\
    & {}_{\mathllap{jb_{\infty,0}}}\searrow && \swarrow_{\mathllap{}}
    \\
    && E
  }
$$

and that this is an [[infinitesimal symmetry of the Lagrangian]] (def. \ref{SymmetriesAndConservedCurrents}) if $\iota_v \delta_{EL}\mathbf{L}$ is horizontally exact.

We now parameterize such morphisms by another bundle:

+-- {: .num_defn #GaugeParametrizedInfinitesimalGaugeTransformation}
###### Definition
**(irreducible closed [[gauge parameters]])**

Let $(E,\mathbf{L})$ be a [[Lagrangian field theory]] (def. \ref{LocalLagrangianDensityOnSecondOrderJetBundleOfTrivialVectorBundleOverMinkowskiSpacetime}).

Then a collection of _irreducible closed [[gauge parameters]]_ for $(E,\mathbf{L})$ is

1. a [[vector bundle]] $\mathcal{G} \overset{gb}{\longrightarrow} \Sigma$ over [[spacetime]] $\Sigma$;
   the [[sections]] $\epsilon$ of which are to be called the _[[gauge parameters]]_;

1. a [[bundle morphism]] $R$ from the
   [[jet bundle]] of the  [[fiber product]] $\mathcal{G} \times_\Sigma E$ with the [[field bundle]] (def. \ref{JetBundleOfTrivialVectorBundleOverMinkowskiSpacetime}) to the [[vertical tangent bundle]] of $E$ (def. \ref{VerticalTangentBundle}):

   $$
     \array{
       J^\infty_\Sigma( \mathcal{G} \times_\Sigma E )
         && \overset{R}{\longrightarrow} &&
       T_\Sigma E
         & \overset{i}{\hookrightarrow} &
       T_\Sigma (\mathcal{G} \times_\Sigma E)
       \\
       & \searrow && \swarrow
       \\
       && E
     }
   $$

such that

1. $R$ is [[linear map|linear]] in the first argument;

1. $i \circ R$ is an [[evolutionary vector field]] on $\mathcal{G} \times_\Sigma E$ (def. \ref{EvolutionaryVectorField});

1. $R(e,-)$ is an [[infinitesimal symmetry of the Lagrangian]] (def. \ref{SymmetriesAndConservedCurrents})
   for every point in $e \in J^\infty_\Sigma(\mathcal{G})$ (i.e. for every jet of a gauge parameter);

1. $\mathcal{G}$ is closed under the [[Lie bracket]] of [[evolutionary vector fields]] (prop. \ref{EvolutionaryVectorFieldLieAlgebra})
   in that for $e_1, e_2$ two points in the same fiber of $J^\infty_\Sigma(E)$ then there
   exists a unique $[e_1,e_2] \in J^\infty_\Sigma(E)$ in that fiber such that

   $$
     \left[\widehat R(e_1,-), \widehat R(e_1,-)\right] = \widehat R([e_1, e_2],-)
     \,.
   $$

   We call this the corresponding  _irreducible closed gauge Lie algebra_ of the Lagrangian theory (if it exists).


In components this means that, if the [[field bundle]] $E$ is a [[trivial vector bundle]] with [[field (physics)|field]] [[fiber]] coordinates
$(\phi^a)$ (example \ref{TrivialVectorBundleAsAFieldBundle})
and also $\mathcal{G}$ happens to be a [[trivial vector bundle]]

$$
  \mathcal{G} = \Sigma \times \mathfrak{g}
$$

so that $R$ is a bundle morphism of the form

$$
  R \;\colon\; J^\infty_\Sigma(\mathfrak{g} \times E ) \longrightarrow T_\Sigma E
$$

then for $\epsilon \in \Gamma_{\Sigma}(\mathcal{G}) = C^\infty(\Sigma,\mathcal{g})$ a [[gauge parameter]], $v_\epsilon$ is of the form

$$
  \label{CoordinateExpressionForGaugeParameterized}
  v_\epsilon
    \;=\;
  \left(
    \epsilon^\alpha R^a_\alpha
    +
    \frac{d \epsilon^\alpha}{d x^\mu} R^{a \mu}_\alpha
    +
    \frac{d^2 \epsilon^\alpha}{d x^{\mu_1} d x^{\mu_2}} R^{a \mu_1 \mu_2}_\alpha
    +
    \cdots
  \right)
  \partial_{\phi^a}
  \,,
$$

where the $R^{a \mu_1 \cdots \mu_k}_\alpha$ are smooth functions on the jet bundle of $E$,
locally of finite order (prop. \ref{JetBundleIsLocallyProManifold}).

=--



+-- {: .num_prop #NoetherIdentities}
###### Proposition
**([[Noether identities]])**

Let $(E,\mathbf{L})$ be a [[Lagrangian field theory]] (def. \ref{LocalLagrangianDensityOnSecondOrderJetBundleOfTrivialVectorBundleOverMinkowskiSpacetime}).

A [[gauge parameter|gauge parameterized]] [[evolutionary vector field]] (eq:CoordinateExpressionForGaugeParameterized)

$$
  v_\epsilon
  \;=\;
  \left(
    \epsilon^\alpha R^a_\alpha
    +
    \frac{d \epsilon^\alpha}{d x^\mu} R^{a \mu}_\alpha
    +
    \frac{d^2 \epsilon^\alpha}{d x^{\mu_1} d x^{\mu_2}} R^{a \mu_1 \mu_2}_\alpha
    +
    \cdots
  \right)
  \partial_{\phi^a}
$$

is a [[gauge parameter|gauge parameterized]] implicit [[infinitesimal gauge transformation]]
(def. \ref{GaugeParametrizedInfinitesimalGaugeTransformation}) precisely if the [[Euler-Lagrange form]] $\delta_{EL}\mathbf{L}$ (prop. \ref{EulerLagrangeOperatorForTivialVectorBundleOverMinkowskiSpacetime})
satisfies the following relation:

$$
  \left(
    R^{a}_\alpha \frac{\delta_{EL}\mathbf{L}}{\delta \phi^a}
    -
    R^{a \mu}_\alpha \frac{d}{d x^\mu} \frac{\delta_{EL}\mathbf{L}}{\delta \phi^a}
    +
    R^{a \mu_1 \mu_2}_\alpha \frac{d^2}{d x^{\mu_1} d x^{\mu_2}} \frac{\delta_{EL}\mathbf{L}}{\delta \phi^a}
    -
    \cdots
  \right)
  \;=\;
  0
  \,.
$$

These are called _[[Noether identities]]_ of the [[Euler-Lagrange equations|Euler-Lagrange]] [[equations of motion]] (def \ref{EulerLagrangeEquationsOnTrivialVectorFieldBundleOverMinkowskiSpacetime}).

=--

+-- {: .proof}
###### Proof

We need to show that $v_\epsilon$ is a gauge symmetry as claimed precisely if

$$
  \iota_{v_\epsilon} \delta_{EL}\mathbf{L} = d(\cdots)
$$

vanishes for all choices of $\epsilon$ up to a horizontally exact term. From (eq:CoordinateExpressionForGaugeParameterized) this
means that

$$
  \begin{aligned}
    \iota_{v_\epsilon} \delta_{EL} \mathbf{L}
    & =
    \underset{k \in \mathbb{N}}{\sum}
      \frac{d^k \epsilon^\alpha}{d x^{\mu_1} \cdot d x^{\mu_k}} R^{a \mu_1 \cdots \mu_k}_\alpha
      \frac{\delta_{EL} \mathbf{L}}{\delta \phi^a}
    \\
    & =
    \epsilon^\alpha
    \underset{k \in \mathbb{N}}{\sum}
      (-1)^k  R^{a \mu_1 \cdots \mu_k}_\alpha
      \frac{d^k}{d x^{\mu_1} \cdots d x^{\mu_k}}
      \frac{\delta_{EL} \mathbf{L}}{\delta \phi^a}
    +
    d J_{v_\epsilon}
  \end{aligned}
$$


=--


+-- {: .num_example #InfinitesimalGaugeSymmetryElectromagnetism}
###### Example
**(implicit [[infinitesimal gauge symmetry]] of [[electromagnetism]])**

Consider the [[Lagrangian field theory]] of [[free field|free]] [[electromagnetism]]
on [[Minkowski spacetime]] $\Sigma$ from example \ref{ElectromagnetismLagrangianDensity}.

Let $\mathcal{G} \coloneqq \Sigma \times \mathbb{R}$ be the [[trivial line bundle]], regarded as a
[[gauge parameter]] bundle (def. \ref{GaugeParametrizedInfinitesimalGaugeTransformation}).
Then the [[gauge parameter|gauge parametrized]] [[evolutionary vector field]] (eq:CoordinateExpressionForGaugeParameterized) given on a gauge parameter

$$
  \epsilon \in \Gamma_\Sigma(\mathcal{G}) = C^\infty(\Sigma)
$$

by

$$
  \label{EMImplicitGaugeSymmetry}
  v_\epsilon \coloneqq \frac{d \epsilon}{d x^\mu} \partial_{a_\mu}
$$

is a gauge paramterized implicit [[infinitesimal gauge transformation]] according to
def. \ref{GaugeParametrizedInfinitesimalGaugeTransformation}.

This is because the [[Euler-Lagrange form]]

$$
  \delta_{EL}\mathbf{L}
  \;=\;
  \frac{d}{d x^\mu }f^{\mu \nu} \delta_{a_\nu} dvol_\Sigma
$$

of the theory (example \ref{ElectromagnetismEl}),
corresponding to the [[vacuum]] [[Maxwell equations]] (example \ref{MaxwellVacuumEquation}),
satisfies the following evident [[Noether identity]] (prop. \ref{NoetherIdentities}):

$$
  \frac{d}{d x^\mu} \frac{d}{d x^\nu} f^{\mu \nu} = 0
  \,.
$$

This is simply because $f^{\mu \nu} = -f^{\nu \mu}$ is skew-symmetric by definition (eq:FaradayTensorJet),
while [[partial derivatives]] commute with each other.

This is the archetypical _[[infinitesimal gauge symmetry]]_ that gives [[gauge theory]] its name.

The prolongation (prop. \ref{EvolutionaryVectorFieldProlongation}) of the vector field $v_\epsilon$ (eq:EMImplicitGaugeSymmetry)
is

$$
  \label{EMProlongedSymmetryVectorField}
  \hat v_\epsilon
    \;=\;
  \frac{d \epsilon}{d x^\mu} \partial_{a_\mu}
  +
  \frac{d^2 \epsilon}{d x^\mu d x^\nu} \partial_{a_{\mu,\nu}}
  +
  \frac{d^3 \epsilon}{d x^\mu d x^{\nu_1} d x^{\nu_2}} \partial_{a_{\mu, \nu_1 \nu_2}}
  +
  \cdots
$$

This shows that the [[Lagrangian density]] of free electromagnetism is in fact strictly
gauge invariant (not just up to a horizontally exact piece)

$$
  \mathcal{L}_{\hat v_\epsilon} \mathbf{L}_{EM} = 0
$$

as is its [[Euler-Lagrange form]]

$$
  \mathcal{L}_{\hat v_{\epsilon}} \delta_{EL}\mathbf{L} = 0
  \,.
$$


=--









Making the _implicit_ [[infinitesimal gauge symmetries]] _explicit_ means
to make explicit how they _[[action|act]]_ on the fields. To this end consider
the general concept of an [[action]] of a [[Lie algebra]] by [[infinitesimal]] [[diffeomorphisms]]:


+-- {: .num_defn #InfinitesimalActionByLieAlgebra}
###### Definition
**([[action]] of [[Lie algebra]] by [[infinitesimal]] [[diffeomorphism]])**

Let $X$ be a [[smooth manifold]] or more generally a [[locally pro-manifold]] (prop. \ref{JetBundleIsLocallyProManifold}), and let $\mathfrak{g}$ be a [[Lie algebra]].

An _[[action]]_ of $\mathfrak{g}$ on $X$ by
[[infinitesimal]] [[diffeomorphisms]], is a [[homomorphism]]
of Lie algebras

$$
  \rho \;\colon \mathfrak{g} \longrightarrow ( Vect(X), [-,-] )
$$

to the smooth [[vector fields]] on $X$.

Equivalently -- to bring out the relation to
the [[gauge parameter|gauge parameterized]] implicit [[infinitesimal gauge transformations]] in def. \ref{GaugeParametrizedInfinitesimalGaugeTransformation} -- this is a $\mathfrak{g}$-parameterized [[section]]

$$
  \array{
     \mathfrak{g} \times X && \overset{\rho}{\longrightarrow} && T X
     \\
     & {\mathllap{pr_2}}\searrow && \swarrow_{\mathrlap{p}}
     \\
     && X
  }
$$

of the [[tangent bundle]], such that for all pairs of points $e_1, e_2$ in $\mathfrak{g}$
we have

$$
  \left[\rho(e_1,-), \rho(e_2,-)\right] = \rho([e_1,e_2],-)
$$

(with the [[Lie bracket]] of [[vector fields]] on the left).

=--

+-- {: .num_example #ActionOfGaugeParameterizedInfinitesimalGaugeSymmetriesOnJetBundle}
###### Example
**([[action]] of irreducible closed [[gauge parameter|gauge parameterized]] implicit [[infinitesimal gauge symmetries]] on [[field (physics)|fields]])**

Let $(E,\mathbf{L})$ be a [[Lagrangian field theory]] (def. \ref{LocalLagrangianDensityOnSecondOrderJetBundleOfTrivialVectorBundleOverMinkowskiSpacetime}), and let
$\mathcal{G} =  \overset{gb}{\to} \Sigma$ be a bundle of irreducible closed [[gauge parameters]]
for the theory (def. \ref{GaugeParametrizedInfinitesimalGaugeTransformation}) with
bundle morphism

$$
  \array{
    J^\infty_\Sigma( \mathcal{G} \times_\Sigma E )
    && \overset{R}{\longrightarrow} &&
    T_\Sigma E
    \\
    & \searrow && \swarrow
    \\
    && E
  }
$$

exhibiting the corresponding parameterized implicit [[infinitesimal gauge symmetries]].

By passing from these [[evolutionary vector fields]] $R(e)$ (def. \ref{EvolutionaryVectorField})
to their prolongations $\widehat{R(e)}$ to actual vector fields on the jet bundle (prop. \ref{EvolutionaryVectorFieldProlongation})
we obtain a bundle morphism of the form

$$
  \array{
    J^\infty_\Sigma(\mathcal{G}) \times_\Sigma J^\infty_\Sigma E
     && \overset{\widehat{R(e)}}{\longrightarrow} &&
    T_\Sigma J^\infty_\Sigma(E)
    \\
    & \searrow && \swarrow
    \\
    && J^\infty_\Sigma(E)
  }
  \,.
$$

In the case that $\mathcal{G} = \mathfrak{g} \times \Sigma$ is a [[trivial vector bundle]], with [[fiber]] $\mathfrak{g}$, then so is its [[jet bundle]] $J^\infty_\Sigma(\mathfrak{g} \times \Sigma) = \mathfrak{g}^\infty \times \Sigma$, and so in this case the above becomes of the form

$$
  \array{
    \mathfrak{g}^\infty \times J^\infty_\Sigma E
     && \overset{\widehat{R(e)}}{\longrightarrow} &&
    T_\Sigma J^\infty_\Sigma(E)
    \\
    & \searrow && \swarrow
    \\
    && J^\infty_\Sigma(E)
  }
  \,.
$$

By def. \ref{GaugeParametrizedInfinitesimalGaugeTransformation} and def. \ref{InfinitesimalActionByLieAlgebra}
this now exhibits an [[action]]

$$
  \widehat{\rho}
  \;\colon\;
  \mathfrak{g}^\infty \longrightarrow \Gamma_{J^\infty_\Sigma(E)}\left( T(J^\infty_\Sigma(E)) \right)
$$

of a [[Lie algebra]] $\mathfrak{g}^\infty$ on the [[jet bundle]]
of the [[field bundle]] by [[infinitesimal]] [[diffeomorphisms]].

=--

We have seen that the presence of non-trivial _implicit_ [[infinitesimal gauge transformations]]
(def. \ref{ImplicitInfinitesimalGaugeSymmetry}) in a [[Lagrangian field theory]] [[obstruction|obstructs]] the existence of the [[covariant phase space]] of the theory (prop. \ref{NonTrivialImplicitInfinitesimalGaugeSymmetriesPbstructExistenceOfCauchySurfaces}). But these
implicit infinitesimal gauge symmetries become _explicit_ by hard-wiring into the very [[geometry]] of the types of [[field (physics)|fields]] their _[[equivalence]]_ under these symmetries: In physics this is called _[[gauge equivalence]]_.

Mathematically this means to pass to the infinitesimal [[homotopy quotient]] of the [[action]] of the gauge symmetries on the [[shell]],
represented by the [[action Lie algebroid]] (def. \ref{ActionLieAlgebroid} below).
This is called the _local [[reduced phase space]]_ of the theory.
Such "[[schreiber:Higher Structures|higher structures]]" exist in the
unification of [[differential geometry]] with [[homotopy theory]] called _[[higher differential geometry]]_.
The ("[[Chevalley-Eilenberg algebra|Chevalley-Eilenberg]]"-)[[algebra of functions]] on this "field bundle with infinitesimal gauge symmetries made explicit" is called the _[[BRST complex]]_.
In this [[cochain complex]] the formerly _implicit_ [[infinitesimal gauge symmetries]] appear _explicitly_ in the guise of [[field (physics)|field]] variables of positive (i.e. "higher") degree in a [[differential graded-commutative algebra]]. These are called _[[ghost fields]]_.


$\,$


+-- {: .num_defn #LInfinityAlgebroid}
###### Definition
**([[Lie ∞-algebroid]])**

Let $X$ be an [[infinitesimally thickened point]] and write $C^\infty(X)$ for its [[algebra of functions]].
Then  a _connected [[Lie ∞-algebroid]]_ $\mathfrak{a}$ over $X$ of [[finite type]] is a

1. a sequence $(\mathfrak{a}_k)_{ k = 1 }^\infty$ of [[free modules]] of [[finite number|finite]] [[rank]] over $C^\infty(X)$, hence a
   [[graded module]] $\mathfrak{a}_\bullet$ in degrees $k \in \mathbb{N}$; $k \geq 1$

1. a [[differential]] $d_{CE}$ that makes the [[graded-commutative algebra]] $Sym_{C^\infty(X)}(\mathfrak{a}^\ast_\bullet)$
   into a cochain [[differential graded-commutative algebra]] (hence with $d_{CE}$ of degree +1) over $\mathbb{R}$
   (not necessarily over $C^\infty(X)$), to be called the _[[Chevalley-Eilenberg algebra]]_ of $\mathfrak{a}$:

   $$
     \label{CEAlgebra}
     CE(\mathfrak{a})
      \;\coloneqq\;
     \left(
       Sym_{C^\infty(X)}(\mathfrak{a}^\ast_\bullet)
       \,,\,
       d_{CE}
     \right)
     \,.
   $$

If we allow $\mathfrak{a}_\bullet$ to also have terms in non-positive degree, then we speak of a _[[derived Lie algebroid]]_.
If $\mathfrak{a}_\bullet$ is _only_ concentrated in negative degrees, we also speak of a _[[derived manifold]]_.

With $C^\infty(X)$ canonically itself regarded as a [[dgc-algebra]], there is a canonical
dg-algebra homomorphism

$$
  CE(\mathfrak{a}) \longrightarrow C^\infty(X)
$$

which is the identity on $C^\infty(X)$ and zero on $\mathfrak{a}^\ast_{\neq 0}$.

=--


+-- {: .num_remark #dgManifolds}
###### Remark
**([[Lie algebroids]] as [[differential graded manifolds]])**

Definition \ref{LInfinityAlgebroid} of _[[derived Lie algebroids]]_ is an encoding in [[higher algebra]]
([[homological algebra]], in this case) of a situation that is usefully thought of in terms of
[[higher differential geometry]].

To see this, recall the magic algebraic properties of ordinary [[differential geometry]] (prop. \ref{AlgebraicFactsOfDifferentialGeometry})

1. [[embedding of smooth manifolds into formal duals of R-algebras]];

1. [[smooth Serre-Swan theorem|embedding of smooth vector bundles into formal duals of modules]]

Together these imply that we may think of the [[graded algebra]] underlying a [[Chevalley-Eilenberg algebra]]
as being the [[algebra of functions]] on a [[graded manifold]]

$$
  \cdots \times \mathfrak{a}_2 \times \mathfrak{a}_1 \times X \times \mathfrak{a}_{-1} \times \cdots
$$

which is [[infinitesimal]] in non-vanishing degree.

The "higher" in [[higher differential geometry]] refers to the degrees higher than zero. See at
_[[schreiber:Higher Structures]]_ for exposition.
Specifically if $\mathfrak{a}_\bullet$ has components in negative degrees,
these are also called _[[derived manifolds]]_.

=--

+-- {: .num_example #BasicExamplesOfLieAlgebroids}
###### Example
**(basic examples of [[Lie algebroids]])**

Two basic examples of [[Lie algebroids]] are:

1. For $X$ any [[smooth manifold]], then setting $\mathfrak{a}_{\neq 0 } \coloneqq 0$ and $d_{CE} \coloneqq 0$
   makes it a Lie algebroid. We will just still just write $X$ for the manifold trivially regarded
   as a Lie alebroid this way.

1. For $\mathfrak{g}$ a [[finite number|finite]] [[dimension|dimensional]] [[Lie algebra]]
   we obtain a Lie algebroid denoted $\ast/\mathfrak{g}$ or $B \mathfrak{g}$ by taking the base manifold
   to be the point, taking $\mathfrak{a}$ to be concentrated in degree 1 on $\mathfrak{g}$, and
   taking the differential to be given by the linear dual of the [[Lie bracket]]

   $$
     d_{CE} \;\colon\; \mathfrak{g}^\ast \overset{[-,-]^\ast}{\longrightarrow} \mathfrak{g}^\ast \wedge \mathfrak{g}^\ast
     \,.
   $$

   If $(t_\alpha)$ is a [[linear basis]] for $\mathfrak{g}$ and $(t^\alpha)$ a corresponding dual basis for $\mathfrak{g}^\ast$,
   then this is given by

   $$
     d_{CE} t^\alpha -\tfrac{1}{2} C^\alpha_{\beta \gamma} t^\beta \wedge t^\gamma
     \,,
   $$

   where on the right we have the structure constants of the [[Lie bracket]] in this basis:

   $$
     [t^\beta, t^\gamma] = t_\alpha C^\alpha{}_{\beta \gamma}
     \,.
   $$

   The resulting [[dgc-algebra]]

   $$
     \left(
       \wedge^\bullet \mathfrak{g}^\ast, d_{CE} = [-,-]^\ast
     \right)
   $$

   is the standard [[Chevalley-Eilenberg algebra]] from basic [[Lie theory]], whence the name of the general concept.


=--

The two basic examples \ref{BasicExamplesOfLieAlgebroids} are unified by the concept of _[[action Lie algebroid]]_
(def. \ref{ActionLieAlgebroid} below),
which is the one of central relevance for the discussion of [[gauge theory]]: the local [[BRST complex]] (def. \ref{LocalOffShellBRSTComplex} below).





+-- {: .num_defn #ActionLieAlgebroid}
###### Definition
**([[action Lie algebroid]])**

Given an [[infinitesimal]] [[action]] of a [[Lie algebra]] $\mathfrak{g}$
on a manifold $X$ (def. \ref{InfinitesimalActionByLieAlgebra}) the _[[action Lie algebroid]]_ $X/\mathfrak{g}$
is the [[Lie algebroid]] (def. \ref{LInfinityAlgebroid}) whose underlying space is $X$;
whose $C^\infty(X)$-module is concentrated in degree 1 on the [[free module]] $C^\infty(X) \otimes_{\mathbb{R}} \mathfrak{g}$
and whose [[Chevalley-Eilenberg algebra|CE-differential]] is given

* on functions $f \in C^\infty(X)$ by the Lie algebra action

  $$
    d_{CE} f \coloneqq \rho(-)(f) \in C^\infty(X) \otimes \mathfrak{g}^\ast
  $$

* on dual Lie algebra elements $\omega \in \mathfrak{g}^\ast$ by the [[linear dual]] of the [[Lie bracket]]

  $$
    d_{CE} \omega \coloneqq \omega([-,-]) \;\in \; \mathfrak{g}^\ast \wedge \mathfrak{g}^\ast
    \,.
  $$

In terms of [[coordinates]] this means the following. Assume that $X = \mathbb{R}^n$ is a [[Cartesian space]]
with coordinates $(\phi^a)$ and let $\{t_\alpha\}$ be a [[linear basis]] for $\mathfrak{g}$
with dual basis $(c^\alpha)$ for $\mathfrak{g}^\ast$. Then the
Lie action has components

$$
  d_{CE} \phi^a = \rho^{a}_{\alpha} c^\alpha
$$

$$
  d_{CE} c^\alpha = -\tfrac{1}{2} \gamma^\alpha{}_{\beta \gamma} c^\beta \wedge c^\gamma
$$

where on the right we have the structure constants of the Lie algebra in this basis:

$$
  [t_\beta, t_\gamma] = \gamma^\alpha{}_{\beta \gamma} t_\alpha
  \,.
$$

That the differential $d_{CE}$ thus defined indeed squares to 0 is

* in degree 0 the action property: $\rho([t, t']) = [\rho(t), \rho(t')]$

* in degree 1 the [[Jacobi identity]].

=--


+-- {: .num_example #HorizontalTangentLieAlgebroid}
###### Example
**(horizontal [[tangent Lie algebroid]])**

Let $\Sigma$ be a [[smooth manifold]] or more generally a [[locally pro-manifold]] (prop. \ref{JetBundleIsLocallyProManifold}).
Then we write $\Sigma/T\Sigma$ for the [[Lie algebroid]] over $X$ and whose [[Chevalley-Eilenberg algebra]] is generated
over $C^\infty(X)$ in degree 1
from the [[module]]

$$
  \mathfrak{a}_1^\ast \coloneqq (\Gamma(T \Sigma))^\ast \simeq\Gamma(T^\ast \Sigma) = \Omega^1(\Sigma)
$$

of [[differential 1-forms]] and whose [[Chevalley-Eilenberg differential]] is the [[de Rham differential]],
so that the [[Chevalley-Eilenberg algebra]] is the [[de Rham dg-algebra]]

$$
  CE( \Sigma/T\Sigma ) \coloneqq (\Omega^\bullet(\Sigma), d_{dR})
  \,.
$$

This is called the _[[tangent Lie algebroid]]_ of $\Sigma$.
As a [[graded manifold]] (via remark \ref{dgManifolds}) this is called the "[[shifted tangent bundle]]" $T[1] \Sigma$ of $X$.

More generally, let $E \overset{fb}{\to} \Sigma$ be a [[fiber bundle]] over $\Sigma$. Then there is a [[Lie algebroid]]
$J^\infty_\Sigma(E)/T\Sigma$ over the [[jet bundle]] of $E$ (def. \ref{JetBundleOfTrivialVectorBundleOverMinkowskiSpacetime})
defined by its [[Chevalley-Eilenberg algebra]] being the [[horizontal derivative|horizontal]] part of the
[[variational bicomplex]] (def. \ref{VariationalBicomplexOnSecondOrderJetBundleOverTrivialVectorBundleOverMinkowskiSpacetime}):

$$
  CE\left(
    J^\infty_\Sigma(E)/T\Sigma
  \right)
  \;\coloneqq\;
  \left(\Omega^{\bullet,0}_\Sigma(E), d\right)
  \,.
$$

The underlying [[graded manifold]] of $J^\infty_\Sigma(E)/T\Sigma$ is the [[fiber product]]
$J^\infty_\Sigma(E)\times_\Sigma T[1]\Sigma$ of the [[jet bundle]] of $E$ with the [[shifted tangent bundle]]
of $\Sigma$.

There is then a canonical homomorphism of Lie algebroids (def. \ref{HomomorphismBetweenLieAlgebroids})

$$
  \array{
    J^\infty_\Sigma(E)/T\Sigma
    \\
    \downarrow
    \\
    \Sigma/T\Sigma
  }
$$

=--


+-- {: .num_example #LocalOffShellBRSTComplex}
###### Example
**(local [[BRST complex]] and [[ghost fields]] for irreducible closed [[gauge parameters]])**

Let $(E,\mathbf{L})$ be a [[Lagrangian field theory]] (def. \ref{LocalLagrangianDensityOnSecondOrderJetBundleOfTrivialVectorBundleOverMinkowskiSpacetime}), and let
$\mathcal{G} =  \overset{gb}{\to} \Sigma$ be a bundle of irreducible closed  [[gauge parameters]]
for the theory (def. \ref{GaugeParametrizedInfinitesimalGaugeTransformation}) with
bundle morphism

$$
  \array{
    J^\infty_\Sigma( \mathcal{G} \times_\Sigma E )
    && \overset{R}{\longrightarrow} &&
    T_\Sigma E
    \\
    & \searrow && \swarrow
    \\
    && E
  }
  \,.
$$

Assuming that the gauge parameter bundle is [[trivial vector bundle|trivial]], $\mathcal{G} = \mathfrak{g} \times \Sigma$,
then by example \ref{ActionOfGaugeParameterizedInfinitesimalGaugeSymmetriesOnJetBundle} this
induces an [[action]] $\hat R$
of a Lie algebra $\mathfrak{g}^\infty$ on $J^\infty_\Sigma E$ by [[infinitesimal]] [[diffeomorphisms]].

The corresponding [[action Lie algebroid]] $J^\infty_\Sigma(E)/\mathfrak{g}^\infty$
(def. \ref{ActionLieAlgebroid}) has as underlying [[graded manifold]] (remark \ref{dgManifolds})

$$
  \mathfrak{g}^\infty[1] \times J^\infty_\Sigma(E)
  \;\simeq\;
  J^\infty_\Sigma( \mathcal{G}[1] \times_\Sigma E  )
$$

the [[jet bundle]] of the _[[graded manifold|graded]] [[field bundle]]_

$$
  E_{BRST} \coloneqq \mathcal{G}[1]  \times E
$$

which regards the [[gauge parameters]] as [[field (physics)|fields]] in degree 1.
As such these are called _[[ghost fields]]_:

$$
  \left\{
    \text{ghost field histories}
  \right\}
   \;\coloneqq\;
  \Gamma_\Sigma( \mathcal{G}[1] )
  \,.
$$

Therefore we write suggestively

$$
  E/\mathcal{G}
  \;\coloneqq\;
  J^\infty_\Sigma(E)/\mathfrak{g}^\infty
$$

for the [[action Lie algebroid]] of the [[gauge parameter|gauge parameterized]] implicit [[infinitesimal gauge symmetries]]
on the [[jet bundle]] of the [[field bundle]].

The Chevalley-Eilenberg [[differential]] of the [[BRST complex]] is traditionally denoted

$$
  s_{BRST} \coloneqq d_{CE}
  \,.
$$

To express this in [[coordinates]], assume that the [[field bundle]] $E$ as well as the [[gauge parameter]]
bundle are [[trivial vector bundles]] (example \ref{TrivialVectorBundleAsAFieldBundle})
with $(\phi^a)$ the [[field (physics)|field]] coordinates on the [[fiber]] of $E$
with induced jet coordinates $((x^\mu), (\phi^a), (\phi^a_{\mu}), \cdots)$ and
$(c^\alpha)$ are [[ghost field]] coordinates on the fiber of $\mathcal{G}[1]$ with induced
jet coordinates $((x^\mu), (c^\alpha), (c^\alpha_\mu), \cdots)$.

Then in terms of the
corresponding coordinate expression for the gauge symmetries $R$ (eq:CoordinateExpressionForGaugeParameterized)
the [[BRST differential]] is given on the [[field (physics)|fields]] by

$$
  s_{BRST} \, \phi^a
  \;=\;
  \underset{k \in \mathbb{N}}{\sum}
    R^{a \mu_1 \cdots \mu_k}_{\alpha} c^\alpha_{\mu_1 \cdots \mu_k}
$$

and on the [[ghost fields]] by

$$
  s_{BRST} \, c^\alpha = \tfrac{1}{2}\gamma^\alpha{}_{\beta \gamma} c^\beta c^\gamma
  \,,
$$

and it extends from there, via prop. \ref{EvolutionaryVectorFieldProlongation},
to jets of fields and ghost fields by (anti-)commutativity with the [[total derivative|total spacetime derivative]].

Moreover, since the action of the [[infinitesimal gauge symmetries]] is by definition via
prolongations (prop. \ref{EvolutionaryVectorFieldProlongation}) of [[evolutionary vector fields]] (def. \ref{EvolutionaryVectorField}) and hence compatible with the [[total derivative|total spacetime derivative]] (eq:ProlongedEvolutionaryVectorFieldContractionAnticommutedWithHorizontalDerivative) this construction
descends to the horizontal tangent Lie algebroid $J^\infty_\Sigma(E)/T\Sigma$ (example \ref{HorizontalTangentLieAlgebroid})
to yield

$$
  E/(\mathcal{G}\times_\Sigma T \Sigma)
  \;\coloneqq\;
  \left(J^\infty_\Sigma(E)/T\Sigma\right)/\mathfrak{g}^\infty
$$

The [[Chevalley-Eilenberg differential]] on $E/(\mathcal{G}\times_\Sigma T \Sigma)$ is

$$
  d - s_{BRST}
$$

The [[Chevalley-Eilenberg algebra]] of functions on this [[differential graded manifold]] (eq:CEAlgebra)
is called the off-shell _[[local BRST complex]]_ ([Barnich-Brandt-Henneaux 94](local+BRST+cohomology#BarnichBrandtHenneaux94)).

We may pass from the [[local BRST complex]] on the [[jet bundle]] to the "global" BRST
complex by [[transgression of variational differential forms]] (def. \ref{TransgressionOfVariationalDifferentialFormsToConfigrationSpaces}):

Write $Obs_\Sigma(E \times\Sigma \mathcal{G}[1])$ for the induced graded [[algebra of observables]] (def. \ref{LocalObservables}).
For $A \in \Omega^{p+1,\bullet}_\Sigma(E \times_\Sigma \mathcal{G}[1])$ with corresponding [[local observable]]
$\tau_\Sigma(A) \in LocObs_\Sigma(E \times_\Sigma \mathcal{G}[1])$ its BRST differential is defined by

$$
  s_{BRST} \tau_{\Sigma}(A) \;\coloneqq\; \tau_{\Sigma}(s_{BRST} A)
$$

and extended from there to $Obs_\Sigma(E \times_\Sigma \mathcal{G}[1])$ as a graded derivation.

=--

+-- {: .num_prop #}
###### Example
**([[local BRST complex]] for [[free field|free]] [[electromagnetism]] on [[Minkowski spacetime]])**

Consider the [[Lagrangian field theory]] of [[free field|free]] [[electromagnetism]] on [[Minkowski spacetime]] (example \ref{ElectromagnetismLagrangianDensity}) with its [[gauge parameter]] bundle as in
example \ref{InfinitesimalGaugeSymmetryElectromagnetism}.

By (eq:EMProlongedSymmetryVectorField) the action of the [[BRST differential]] is the derivation

$$
  s_{BRST}
   \;=\;
  c_{,\mu} \frac{\partial}{\partial a_\mu}
  +
  c_{, \mu \nu} \frac{\partial}{\partial a_{\mu, \nu}}
  +
  \cdots
  \,.
$$

In particular the [[Lagrangian density]] is BRST-closed

$$
  \begin{aligned}
    s_{BRST} \mathbf{L}
    & =
    s_{BRST} f_{\mu \nu} f^{\mu \nu} dvol_\Sigma
    \\
    & =
    c_{,\mu \nu} f^{\mu \nu} dvol_\Sigma
    \\
    & =
    0
  \end{aligned}
$$

as is the [[Euler-Lagrange form]] (due to the symmetry $c_{,\mu \nu} = c_{,\nu \mu}$ and in contrast to the
skew-symmetry $f_{\mu \nu} = - f_{\nu \mu}$).


=--



$\,$

This concludes our discussion of [[gauge symmetries]] as such. In the [next chapter](#ReducedPhaseSpace) we discuss
the [[homotopy quotient]] of the [[covariant phase space]] by the [[gauge symmetries]], called the _[[reduced phase space]]_.



$\,$

## Reduced phase space
 {#ReducedPhaseSpace}

We have seen [above](#PhaseSpace) that the [[covariant phase space]] of a [[Lagrangian field theory]] is,
if it exists, the "covariant [[transgression of variational differential forms|transgression]]" of the [[shell]] (prop. \ref{EulerLagrangeOperatorForTivialVectorBundleOverMinkowskiSpacetime}) equipped
with the [[Poisson bracket Lie n-algebra|local Poisson bracket]] (example \ref{LocalPoissonBracket}).
The [[local observables]] (def. \ref{LocalObservables}) which operationally define the [[classical field theory]] (or rather [[prequantum field theory]]) are functions on the [[covariant phase space]], and the [[Poisson bracket Lie n-algebra|local Poisson bracket]]
on them operationally defines the corresponding [[quantum field theory]] ([below](#Quantization)). Therefore
the existence of the [[covariant phase space]] is crucial for the construction of the [[field theory]].

However, we have then seen in prop. \ref{NonTrivialImplicitInfinitesimalGaugeSymmetriesPbstructExistenceOfCauchySurfaces} that
there may be an [[obstruction]] to the existence of the [[covariant phase space]], namely the presence of
[[infinitesimal gauge symmetries]] [[infinitesimal symmetry of the Lagrangian|of the Lagrangian]] which have been "left implicit".
We have then discussed how to make these [[infinitesimal gauge symmetries]] "explicit" by hard-wiring their [[action]] into the geometry of the [[field (physics)|fields]] by passing to the corresponding infinitesimal [[homotopy quotient]] (def. \ref{LInfinityAlgebroid}) of (the [[jet bundle]] of) the [[field bundle]], given by the corresponding [[action Lie algebroid]] (def. \ref{ActionLieAlgebroid}). Its [[Chevalley-Eilenberg algebra|Chevalley-Eilenberg]] [[algebra of functions]] is called the _[[local BRST complex]]_ of the theory (example \ref{LocalOffShellBRSTComplex}).

The corresponding [[covariant phase space]] with [[infinitesimal gauge symmetries]] made explicit is now correspondingly given by the
[[shell]] (eq:ShellInJetBundle) not inside the plain space of fields, but inside this [[homotopy quotient]] by the
[[infinitesimal gauge symmetries]]. This [[homotopy quotient]] of the naive phase space by the [[infinitesimal gauge symmetries]]
is called the _[[reduced phase space]]_. Refined to its local incarnation in the [[jet bundle]]
we may call this the "derived reduced prolonged [[shell]]"
(def. \ref{DerivedProlongedShell} below). Its [[algebra of functions]] is called the _[[local BV-BRST complex]]_ of the theory.

In the next section [below](#GaugeFixing) we find that, at least in good situations, if all non-trivial implicit
[[infinitesimal gauge symmetries]] have been made explicit this way by hard-wiring their action into the geometry of the [[reduced phase space]], then
the [[obstruction]] to the existence of the [[covariant phase space]] vanishes.  Hence in this case then the ([[perturbative quantum field theory|perturbative]]) [[quantum field theory]] can exist (discussed [further below](#Quantization)). This is
why we do need to pass to the [[reduced phase space]].


In order to exhibit the key structure of the [[reduced phase space]] without getting distracted
by the local [[jet bundle]] geometry, we first discuss now the simple form in
which it would appear after [[transgression of variational differential forms|transgression]] (def. \ref{TransgressionOfVariationalDifferentialFormsToConfigrationSpaces})
if [[spacetime]] were [[compact space|compact]], so that, by the [[principle of extremal action]] (prop. \ref{PrincipleOfExtremalAction}),
it would be the [[derived critical locus]] ($d S = 0$) of a globally defined [[action functional]] $S$.
This is example \ref{ArchetypeOfBVBRSTComplex} below.

This serves as a warmup to the true construction of the derived [[shell]] in the [[action Lie algebroid]] of the [[jet bundle]], where the
action functional is "de-transgressed" to the [[Lagrangian density]], which is invariant under gauge transformations
only up to horizontally exact terms. This culminates in example \ref{LocalBVBRSTComplexIsDerivedCriticalLocusOfEulerLagrangeForm} below.


$\,$

The key to understanding the "derived reduced prolonged shell", and hence the [[reduced phase space]],
as a [[derived critical locus]] is first to exhibit the [[Euler-Lagrange form|Euler-Lagrange variation]]
of the [[action functional]], or rather of the [[Lagrangian density]], as a [[section]] of the analog of
a [[cotangent bundle]], but now in the realm of [[Lie ∞-algebroids]] (prop. \ref{ExteriorDifferentialOfGaugeInvariantFunctionIsSectionOfInfinitesimalCotangentLieAlgebroid} and prop. \ref{EulerLagrangeFormIsSectionOfLocalCotangentBundleOfJetBundleGaugeActionLieAlgebroid} below).
To this end we need to first of all consider [[homomorphisms]] of [[Lie algebroids]]:



+-- {: .num_defn #HomomorphismBetweenLieAlgebroids}
###### Definition
**([[homomorphism]] between [[Lie algebroids]])**

Given two [[derived Lie algebroids]] $\mathfrak{a}$, $\mathfrak{a}'$ (def. \ref{LInfinityAlgebroid}), then a [[homomorphism]]
between them

$$
  f \;\colon\; \mathfrak{a} \longrightarrow \mathfrak{a}'
$$

is a [[dg-algebra]]-[[homomorphism]] between their [[Chevalley-Eilenberg algebras]] going the other way around

$$
  CE(\mathfrak{a}) \longleftarrow CE(\mathfrak{a}') \;\colon\; f^\ast
$$

such that this covers an algebra homomorphism on the function algebras (a "[[curved sh-map|non-curved sh-map]]")

$$
  \array{
    CE(\mathfrak{a}) &\overset{f^\ast}{\longleftarrow}& CE(\mathfrak{a}')
    \\
    \downarrow && \downarrow
    \\
    C^\infty(X) &\underset{(f\vert_X)^\ast}{\longleftarrow}& C^\infty(Y)
  }
  \,.
$$

=--


+-- {: .num_example #GaugeInvariantFunctionsIntermsOfLieAlgebroids}
###### Example
**([[gauge invariance|gauge invariant]] [[functions]] in terms of [[Lie algebroids]])**

Let $X/\mathfrak{g}$ be an [[action Lie algebroid]] (example \ref{ActionLieAlgebroid})
and regard the [[real line]] $\mathbb{R}^1$ as a Lie algebroid by example \ref{BasicExamplesOfLieAlgebroids}.
Then homomorphisms of Lie algebroids (def. \ref{HomomorphismBetweenLieAlgebroids}) of the form

$$
  f \;\colon\; X/\mathfrak{g} \longrightarrow \mathbb{R}^1
  \,,
$$

hence _smooth functions on the Lie algebroid_, are equivalently

* ordinary [[smooth functions]] $f \colon X \longrightarrow \mathbb{R}^1$ on the underlying [[smooth manifold]],

* which are [[invariant]] under the Lie action in that $\rho(-)(f) = 0$.

=--


+-- {: .proof}
###### Proof

An $\mathbb{R}$-algebra homomorphism

$$
  CE( X/\mathfrak{g} )
    \longleftarrow
  C^\infty(\mathbb{R}^1)
$$

is fixed by what it does to the canonical coordinate function on $\mathbb{R}^1$, which is taken by
$f^\ast$ to $f \in C^\infty(X) \hookrightarrow CE(X/\mathfrak{g})$. For this to be a dg-algebra
homomorphism it needs to respect the differentials on both sides. Since the differential
on right right is trivial, the condition is that $0 = d_{CE} f = \rho(-)(f)$.

=--


Given a gauge invariant function, hence a function $S \colon X/\mathfrak{g} \to \mathbb{R}$ on a Lie algebroid (example \ref{GaugeInvariantFunctionsIntermsOfLieAlgebroids}), its [[exterior derivative]] $d S$ should be a
[[section]] of the [[cotangent bundle]] of the Lie algebroid. Moreover, if all field variations are
infinitesimal (as in def. \ref{LocalObservablesOnInfinitesimalNeighbourhood}) then it should in fact be
a section of the [[infinitesimal neighbourhood]] (example \ref{InfinitesimalNeighbourhood}) of the [[zero section]] inside the [[cotangent bundle]], the _infinitesimal cotangent bundle_ $T^\ast(X/\mathfrak{g})$ of the Lie algebroid (def. \ref{LieAlgebroidInfinitesimalCotangentBundle} ebelow).

To motivate the definition \ref{LieAlgebroidInfinitesimalCotangentBundle} below of _infinitesimal cotangent bundle of a Lie algebroid_
recall from example \ref{InfinitesimalNeighbourhood} that the [[algebra of functions]]
on the infinitesimal cotangent bundle should be fiberwise the [[formal power series algebra]] in the [[linear functions]].
But a fiberwise linear function on a [[cotangent bundle]] is by definition a [[vector field]].
Finally observe that [[derivations of smooth functions are vector fields|vector fields are equivalently derivations of smooth functions]] (prop. \ref{AlgebraicFactsOfDifferentialGeometry}). This leads to the following definition:

+-- {: .num_defn #LieAlgebroidInfinitesimalCotangentBundle}
###### Definition
**([[automorphism ∞-Lie algebra|infinitesimal cotangent Lie algebroid]])**

Let $\mathfrak{a}$ be a [[Lie ∞-algebroid]] (def. \ref{LInfinityAlgebroid}) over some manifold $X$.
Then its _infinitesimal cotangent bundle_ $T^\ast \mathfrak{a}$ is the [[Lie ∞-algebroid]] over $X$
whose underlying [[graded module]] over $C^\infty(X)$ is the [[direct sum]] of the original module
with the [[derivations]] of the graded algebra underlying $CE(\mathfrak{a})$:

$$
 (T^\ast \mathfrak{a})^\ast_\bullet
 \;\coloneqq\;
 \mathfrak{a}^\ast_\bullet \oplus Der(CE(\mathfrak{a}))_\bullet
$$

with [[differential]] on the summand $\mathfrak{a}$ being the original differential and
on $Der(CE(\mathfrak{a}))$ being the [[commutator]] with the differential $d_{CE(\mathfrak{a})}$ on $CE(\mathfrak{a})$
(which is itself a graded derivation of degree +1):


$$
  d_{CE(T^\ast \mathfrak{a})}\vert_{\mathfrak{a}^\ast} \;\coloneqq\; d_{CE(\mathfrak{a})}
$$

$$
  d_{CE(T^\ast \mathfrak{a})}\vert_{Der(\mathfrak{a})} \;\coloneqq\; [d_{CE(\mathfrak{a})},-]
  \,.
$$

There is a canonical homomorphism of Lie algebroids (def. \ref{HomomorphismBetweenLieAlgebroids})

$$
  \label{CotangentLieAlgebrpoidProjection}
  T^\ast \mathfrak{a} \longrightarrow \mathfrak{a}
$$

given dually by the identity on the original generators.

=--


+-- {: .num_example #CotangentBundleOfActionLieAlgebroid}
###### Example
**([[automorphism ∞-Lie algebra|infinitesimal cotangent bundle]] of [[action Lie algebroid]])**

Let $X/\mathfrak{g}$ be an [[action Lie algebroid]] (def. \ref{ActionLieAlgebroid})
where

* $X = \mathbb{R}^n$ is a [[Cartesian space]] with [[coordinates]] $(\phi^a)$;

* $\mathfrak{g}$ is a [[Lie algebra]] with [[linear basis]] $(c_\alpha)$
  and corresponding structure constants $(\gamma^{\alpha}{}_{\beta \gamma})$;

* the infinitesimal [[action]] is given in components by

  $$
    d_{CE} \;\phi^a\; = R^a_\alpha c^\alpha
  $$

  for smooth functions $R^a_\alpha$ on $X$.

Then the infinitesimal cotangent Lie algebroid $T^\ast (X/\mathfrak{g})$ (def. \ref{LieAlgebroidInfinitesimalCotangentBundle})
has as underlying cochain complex has generators


$$
  \array{
    &
    \left(
      \frac{\partial}{\partial c^\alpha}
    \right)
    &
    \left(
      \phi^a
    \right)
    ,
    \left(
      \frac{\partial}{\partial \phi^a}
    \right)
    &
    \left(
      c^\alpha
    \right)
    \\
    deg =
    &
    -1
    &
    0
    &
    +1
  }
  \,.
$$

The CE-differential on the new derivation generators is given by

$$
  \label{CotangentLieAlgebroidDifferentialForActionLieAlgebroidOnGhostFieldCoordinates}
  \begin{aligned}
    d_{CE(T^\ast(X/\mathfrak{g}))}
    \left(
      \frac{\partial}{\partial c^\alpha}
    \right)
    & \coloneqq
    \left[d_{CE(X/\mathfrak{g})}, \frac{\partial}{\partial c^\alpha} \right]
    \\
     & =
     R_\alpha^a  \frac{\partial}{\partial \phi^a}
      +
     \gamma^\beta{}_{\alpha \gamma} c^\gamma \frac{\partial}{\partial c^\beta}
  \end{aligned}
$$

and

$$
  \label{CotangentLieAlgebroidDifferentialForActionLieAlgebroidOnFieldCoordinates}
  \begin{aligned}
    d_{CE(T^\ast(X/\mathfrak{g}))}
    \left(
      \frac{\partial}{\partial \phi^a}
    \right)
    & \coloneqq
    \left[
      d_{CE(X/\mathfrak{g})},
      \frac{\partial}{\partial \phi^a}
    \right]
    \\
    & =
    c^\alpha \frac{\partial R_\alpha^b}{\partial \phi^a} \frac{\partial}{\partial \phi^b}
  \end{aligned}
  \,.
$$

To ease the notation one abbreviates

$$
  \label{AntiNotationForDerivations}
  \overline{\phi}_a \;\coloneqq\; \frac{\partial}{\partial \phi^a}
  \phantom{AAAAA}
  \overline{c}_\alpha \;\coloneqq\; \frac{\partial}{\partial c^\alpha}
$$

so that the generator content then reads

$$
  \label{GeneratorsOfDerivedCriticalLocusInActionLieAlgebroid}
  \array{
    &
    \left(
      \overline{c}_\alpha
    \right)
    &
      \left(
        \phi^a
      \right)
      ,
      \left(
        \overline{\phi}_a
      \right)
    &
    \left(
      c^\alpha
    \right)
    \\
    deg =
    &
    -1
    &
    0
    &
    +1
  }
  \,.
$$

In this notation the full action of the CE-differential is therefore the following:

$$
  \label{CEDifferentialOnGeneratorsForInfinitesimalCotangentBundleOfActionLieAlgebroid}
  \array{
    & d_{CE(T^\ast(X/\mathfrak{g}))}
    \\
    \phi^a
      &\mapsto&
    c^\alpha R^a_\alpha
    \\
    c^\alpha
      & \mapsto&
    \tfrac{1}{2} \gamma^\alpha{}_{\beta \gamma} c^\beta c^\gamma
    \\
    \overline{\phi}_a
      &\mapsto&
    +
    c^\alpha \frac{\partial R_\alpha^b}{\partial \phi^a} \overline{\phi}_b
    \\
    \overline{c}_\alpha
      &\mapsto&
    R_\alpha^a  \overline{\phi}_a
      +
    \gamma^\beta{}_{\alpha \gamma} c^\gamma \overline{c}_\beta
  }
$$


=--


+-- {: .num_prop #ExteriorDifferentialOfGaugeInvariantFunctionIsSectionOfInfinitesimalCotangentLieAlgebroid}
###### Proposition
**([[exterior differential]] of [[gauge invariant]] function is [[section]] of [[automorphism ∞-Lie algebra|infinitesimal cotangent bundle]])**

For $\mathfrak{a}$ an [[Lie ∞-algebroid]] (def. \ref{LInfinityAlgebroid}) over some $X$;
and $S \;\colon\;\mathfrak{a} \longrightarrow \mathbb{R}$ a [[gauge invariant]] smooth function on it (example \ref{GaugeInvariantFunctionsIntermsOfLieAlgebroids});
there is an induced [[section]] $d S$ of the infinitesimal cotangent Lie algebroid (def. \ref{LieAlgebroidInfinitesimalCotangentBundle})
bundle projection (eq:CotangentLieAlgebrpoidProjection):

$$
  \array{
    && T^\ast \mathfrak{a}
    \\
    & {}^{\mathllap{d S}}\nearrow & \downarrow
    \\
    \mathfrak{a}
    &=&
    \mathfrak{a}
  }
  \,,
$$

given dually

$$
  (d S)^\ast \;\colon\; CE(T^\ast \mathfrak{a}) \longrightarrow CE(\mathfrak{a})
$$

by the map which sends

1. the generators in $\mathfrak{a}^\ast$ to themselves;

1. a [[vector field]] $v$ on $X$, regarded as a degree-0 [[derivation]] to
   $d S(v) = v(S) \in C^\infty(X)$;

1. all other derivations to zero.


=--

+-- {: .proof}
###### Proof

We discuss the proof in the special case of example \ref{CotangentBundleOfActionLieAlgebroid}.
The general case is directly analogous.

We need to check that $(d S)^\ast$ respects the CE-differentials.

On the original generators in
$\mathfrak{a}^\ast$ this is immediate, since on these the CE-differential on both sides
are by definition the same.

On the derivation $\frac{\partial}{ \partial \phi^a}$ we find from (eq:CotangentLieAlgebroidDifferentialForActionLieAlgebroidOnFieldCoordinates)

$$
  \array{
    \left\{
       \frac{\partial S}{\partial \phi^a}
    \right\}
      &\overset{(d S)^\ast}{\longleftarrow}&
    \left\{ \frac{\partial}{\partial \phi^a} \right\}
    \\
    {}^{\mathllap{d_{CE(\mathfrak{a})}}}\downarrow && \downarrow^{\mathrlap{d_{CE(T^\ast \mathfrak{a})}}}
    \\
    \left\{
       c^\alpha \frac{\partial R_\alpha^b}{\partial \phi^a} \frac{\partial S}{\partial \phi^b}
    \right\}
      &\underset{(d S)^\ast}{\longleftarrow}&
    \left\{
       c^\alpha \frac{\partial R_\alpha^b}{\partial \phi^a} \frac{\partial}{\partial \phi^b}
    \right\}
  }
$$

and on the derivation $\frac{\partial}{\partial c^\alpha}$ we find from (eq:CotangentLieAlgebroidDifferentialForActionLieAlgebroidOnGhostFieldCoordinates)
and using the gauge invariance of $S$

$$
  \array{
    \left\{
      0
    \right\}
      &\overset{(d S)^\ast}{\longleftarrow}&
    \left\{
      \frac{\partial}{\partial c^\alpha}
    \right\}
    \\
    \downarrow && \downarrow
    \\
    \left\{
      0 = R_\alpha^a \frac{\partial S}{\partial \phi^a}
    \right\}
      &\overset{(d S)^\ast}{\longleftarrow}&
    \left\{
      R_\alpha^a  \frac{\partial}{\partial \phi^a}
      +
      \gamma^\beta{}_{\alpha \gamma} c^\gamma \frac{\partial}{\partial c^\beta}
    \right\}
  }
  \,.
$$

=--


+-- {: .num_defn #DerivedCriticalLocusOfGaugeInvariantFunctionOnLieAlgebroid}
###### Definition
**([[derived critical locus]] of [[gauge invariant]] function on [[Lie ∞-algebroid]])**

Let $\mathfrak{a}$ be a [[Lie ∞-algebroid]] (def. \ref{LInfinityAlgebroid}) over some $X$, let

$$
  S \;\colon\; \mathfrak{a} \longrightarrow \mathbb{R}
$$

be a [[gauge invariant]] function (example \ref{GaugeInvariantFunctionsIntermsOfLieAlgebroids}) and consider
the section of its infinitesimal cotangent bundle $T^\ast \mathfrak{a}$ (def. \ref{CotangentBundleOfActionLieAlgebroid}) corresponding to its exterior derivative
via prop. \ref{ExteriorDifferentialOfGaugeInvariantFunctionIsSectionOfInfinitesimalCotangentLieAlgebroid}.

$$
  \array{
    \mathfrak{a} && \overset{d S}{\longrightarrow} && T^\ast \mathfrak{a}
    \\
    & \searrow && \swarrow
    \\
    && \mathfrak{a}
  }
$$

Then the _[[derived critical locus]]_ of $S$ is the [[derived Lie algebroid]] (def. \ref{LInfinityAlgebroid})
to be denoted $\mathfrak{a}_{d S \simeq 0}$ which is the [[homotopy pullback]] of the section $d S$ along the [[zero section]]:

$$
  \array{
    \mathfrak{a}_{d S \simeq 0}
      &\longrightarrow&
    \mathfrak{a}
    \\
    \downarrow &(pb)& \downarrow^{\mathrlap{0}}
    \\
    \mathfrak{a}
      &\underset{d S}{\longrightarrow}&
    T^\ast \mathfrak{a}
  }
  \,.
$$

This means equivalently (details are at _[[derived critical locus]]_) that the Chevalley-Eilenberg algebra of $\mathfrak{a}_{d S \simeq 0}$ is like that of the infinitesimal cotangent Lie algebroid $T^\ast \mathfrak{a}$ (def. \ref{LieAlgebroidInfinitesimalCotangentBundle}) except for two changes:

1. all [[derivations]] are shifted down in degree by one;

1. the CE-differential on the derivations coming from vector fields $v$ on $X$ is that of the infinitesimal
   cotangent Lie algebroid $T^\ast \mathfrak{a}$ plus $d S(v) = v(S)$.


=--

+-- {: .num_example #ArchetypeOfBVBRSTComplex}
###### Example
**(archetype of the [[BV-BRST complex]])**

Consider a gauge invariant function $S \colon X/\mathfrak{g} \to \mathbb{R}$ (def. \ref{GaugeInvariantFunctionsIntermsOfLieAlgebroids})
on an [[action Lie algebroid]] (def. \ref{ActionLieAlgebroid})
for the case that the underlying manifold is a [[Cartesian space]] with global [[coordinates]] as in example \ref{CotangentBundleOfActionLieAlgebroid}. Then the generators
of the [[derived critical locus]] $(X/\mathfrak{g})_{d S \simeq 0}$ (def. \ref{DerivedCriticalLocusOfGaugeInvariantFunctionOnLieAlgebroid})
are as in (eq:GeneratorsOfDerivedCriticalLocusInActionLieAlgebroid), except for the degree shift:

$$
  \array{
    &
    \left(
      \overline{c}^\alpha
    \right)
    &
    \left(
      \overline{\phi}^a
    \right)
    &
    \left(
      \phi^a
    \right)
    &
    \left(
      c^\alpha
    \right)
    \\
    deg = &
    -2
    &
    -1
    &
    0
    &
    +1
  }
$$

and the CE-differential is given by

$$
  \array{
    & d_{CE(\mathfrak{a}_{d S \simeq 0})}
    \\
    \phi^a
      &\mapsto&
    c^\alpha R^a_\alpha
    \\
    c^\alpha
      & \mapsto&
    \tfrac{1}{2} \gamma^\alpha{}_{\beta \gamma} c^\beta c^\gamma
    \\
    \overline{\phi}_a
      &\mapsto&
    \underset{
      new
    }{
    \underbrace{
      \frac{\partial S}{\partial \phi^a}
    }}
    +
    c^\alpha \frac{\partial R_\alpha^b}{\partial \phi^a} \overline{\phi}_b
    \\
    \overline{c}_\alpha
      &\mapsto&
    R_\alpha^a  \overline{\phi}_a
      +
    \gamma^\beta{}_{\alpha \gamma} c^\gamma \overline{c}_\beta
  }
$$

which is like the differential (eq:CEDifferentialOnGeneratorsForInfinitesimalCotangentBundleOfActionLieAlgebroid) of the cotangent Lie algebroid from example \ref{CotangentBundleOfActionLieAlgebroid}, except
for the degree-shift by -1 of the derivation generators and except for the crucial new term indicated by the underbrace.

If we think of the function $S$ as being the [[action functional]] (example \ref{ActionFunctional})
of a [[Lagrangian field theory]] $(E,\mathbf{L})$ (def. \ref{LocalLagrangianDensityOnSecondOrderJetBundleOfTrivialVectorBundleOverMinkowskiSpacetime}) over a [[compact space|compact]] [[spacetime]] $\Sigma$,
with $X$ the  [[space of field histories]] (or rather an [[infinitesimal neighbourhood]] therein),
hence with $\mathfrak{g}$ a Lie algebra of [[gauge symmetries]] acting on the field histories, then
the [[Chevalley-Eilenberg algebra]] $CE(X/\mathfrak{g}_{d S \simeq 0})$ of the [[derived critical locus]] of $S$ is called the
_[[BV-BRST complex]]_ of the theory.

=--

In applications of interest, the spacetime $\Sigma$ is _not_ [[compact space|compact]].
In that case one may still appeal to a construction on the [[space of field histories]]
as in example \ref{ArchetypeOfBVBRSTComplex} by considering the action functional for all
[[adiabatic switching|adiabatically switched]] $b \mathbf{L}$ Lagrangians, with $b \in C_{cp}^\infty(\Sigma)$.
This approach is taken in ([Fredenhagen-Rejzner 11a](BV-BRST+formalism#FredenhagenRejzner11a)).

Here we instead consider now the "local lift" or "de-transgression" of the above construction from the
[[space of field histories]] to the [[jet bundle]] of the field bundle of the theory, refining the
[[BV-BRST complex]] to the _[[local BV-BRST complex]]_, corresponding to the [[local BRST complex]]
from example \ref{LocalOffShellBRSTComplex}.

This requires a slight refinement of the construction that leads to example \ref{ArchetypeOfBVBRSTComplex}:
In contrast to the [[action functional]] $S = \tau_\Sigma(\mathbf{L})$,
the [[Lagrangian density]] $\mathbf{L}$ is not strictly _invariant_ under implicit [[infinitesimal gauge transformations]], in general,
rather it may change up to a horizontally exact term (by the very definition \ref{ImplicitInfinitesimalGaugeSymmetry}). The same is then true for its
[[Euler-Lagrange variational derivative]] $\delta_{EL} \mathbf{L}$. This means that $\delta_{EL} \mathbf{L}$
is not a section of the infinitesimal cotangent bundle (def. \ref{LieAlgebroidInfinitesimalCotangentBundle}) of the
gauge action Lie algebroid on the jet bundle, but by a local version of it, which is twisted by horizontally exact terms.

The following definition \ref{LocalInfinitesimalCotangentLieAlgebroid} is the local refinement of
def. \ref{LieAlgebroidInfinitesimalCotangentBundle}:

+-- {: .num_defn #LocalInfinitesimalCotangentLieAlgebroid}
###### Definition
**(local infinitesimal cotangent Lie algebroid)**

Let $(E,\mathbf{L})$ be a [[Lagrangian field theory]] (def. \ref{LocalLagrangianDensityOnSecondOrderJetBundleOfTrivialVectorBundleOverMinkowskiSpacetime})
over some [[spacetime]] $\Sigma$, and let $\mathcal{G} \overset{gb}{\to} \Sigma$ be
a bundle of closed irreducible [[gauge parameters]] (def. \ref{GaugeParametrizedInfinitesimalGaugeTransformation}),
inducing via example \ref{LocalOffShellBRSTComplex} the [[Lie algebroid]]

$$
  E / ( \mathcal{G} \times_\Sigma T \Sigma )
  \;=\;
  \left(
    J^\infty_\Sigma( E \times_\Sigma (\mathcal{G}[1]) )
    ,
    s_{BRST} )
  \right)
$$

whose [[Chevalley-Eilenberg algebra]] is the [[local BRST complex]] of the field theory.

Consider the case that both the [[field bundle]] $E \overset{fb}{\to} \Sigma$ (def. \ref{FieldsAndFieldBundles})
as well as the [[gauge parameter]] bundle $\mathcal{G} \overset{gb}{\to} \Sigma$ are [[trivial vector bundles]]
(example \ref{TrivialVectorBundleAsAFieldBundle}) over [[Minkowski spacetime]]
with [[field (physics)|field]] coordinates $(\phi^a)$ and [[gauge parameter]] coordinates $(\epsilon^\alpha)$.

Then the vertical infinitesimal cotangent Lie algebroid (def. \ref{LieAlgebroidInfinitesimalCotangentBundle}) has
coordinates as in (eq:GeneratorsOfDerivedCriticalLocusInActionLieAlgebroid) as well as all the corresponding jets
and including also the horizontal differentials:

$$
  \array{
    &
    \left(
      \overline{c}_{\alpha,\mu_1 \cdots \mu_k}
    \right)
    &
      \left(
        \phi^a_{,\mu_1 \cdots \mu_k}
      \right)
      ,
      \left(
        \overline{\phi}_{a,\mu_1 \cdots \mu_k}
      \right)
    &
    \left(
      c^\alpha_{,\mu_1 \cdots \mu_k}
    \right),
    \left(
      d x^\mu
    \right)
    \\
    deg =
    &
    -1
    &
    0
    &
    +1
  }
  \,.
$$

Observe that in terms of these coordinates the ordinary commutator of graded derivations
has the following succinct expression:

(...)

Now consider the modification of this formula to the formula

$$
  \label{LocalCommutatorOfDerivationsOnJetBundle}
  \begin{aligned}
    \left\{
      f dvol_\Sigma,
      g
    \right\}
    & \coloneqq
    \phantom{+ (-1)^{\vert f \vert + (p+1)}}
    \left(
      \frac{d^k}{d x^{\mu_1} \cdots d x^{\mu_k}}
      \left(
        \frac{\delta_{EL} f}{\delta \phi^a}
      \right)
    \right)
    \left(
      \frac{\partial g}{\partial \overline{\phi}_{a,\mu_1 \cdots \mu_k}}
    \right)
    -
    \left(
      \frac{d^k}{d x^{\mu_1} \cdots d x^{\mu_k}}
      \left(
        \frac{\delta_{EL} f}{\delta \overline{\phi}_a}
      \right)
    \right)
    \left(
      \frac{\partial g}{\partial \phi^a_{,\mu_1 \cdots \mu_k}}
    \right)
    \\
    &
    \phantom{=} + (-1)^{\vert f \vert + (p+1)}
    \left(
    \left(
      \frac{d^k}{d x^{\mu_1} \cdots d x^{\mu_k}}
      \left(
        \frac{\delta_{EL} f}{\delta c^\alpha}
      \right)
    \right)
    \left(
      \frac{\partial g}{\partial \overline{c}_{\alpha,\mu_1 \cdots \mu_k}}
    \right)
    -
    \left(
      \frac{d^k}{d x^{\mu_1} \cdots d x^{\mu_k}}
      \left(
        \frac{\delta_{EL} f}{\delta \overline{c}_\alpha}
      \right)
    \right)
    \left(
      \frac{\partial g}{\partial c^\alpha_{,\mu_1 \cdots \mu_k}}
    \right)
    \right)
  \end{aligned}
$$

where $\delta_{EL}$ denotes the [[Euler-Lagrange variational derivative]].

We define the CE-differential on functions on $T^\ast( E/(\mathcal{G} \times_\Sigma T \Sigma) )$ to be

$$
  d_{CE(T^\ast_\Sigma( E/(\mathcal{G} \times_\Sigma T \Sigma) ))}
  \;\coloneqq\;
  \left\{
    s_{BRST} dvol_\Sigma, -
  \right\}
$$

This defines an $L_\infty$-algebroid to be denoted

$$
  T^\ast_\Sigma( E/(\mathcal{G} \times_\Sigma T \Sigma) )
  \,.
$$

=--

The local refinement of prop. \ref{ExteriorDifferentialOfGaugeInvariantFunctionIsSectionOfInfinitesimalCotangentLieAlgebroid} is now this:

+-- {: .num_prop #EulerLagrangeFormIsSectionOfLocalCotangentBundleOfJetBundleGaugeActionLieAlgebroid}
###### Proposition
**([[Euler-Lagrange form]] is [[section]] of local cotangent bundle of [[jet bundle]] [[gauge symmetry|gauge]]-[[action Lie algebroid]])**

Let $(E,\mathbf{L})$ be a [[Lagrangian field theory]] (def. \ref{LocalLagrangianDensityOnSecondOrderJetBundleOfTrivialVectorBundleOverMinkowskiSpacetime})
over some [[spacetime]] $\Sigma$, and let $\mathcal{G} \overset{gb}{\to} \Sigma$ be
a bundle of closed irreducible [[gauge parameters]] (def. \ref{GaugeParametrizedInfinitesimalGaugeTransformation}),
inducing via example \ref{LocalOffShellBRSTComplex} the [[Lie algebroid]] $E / ( \mathcal{G} \times_\Sigma T \Sigma )$
and via def. \ref{LocalInfinitesimalCotangentLieAlgebroid} its local cotangent [[Lie ∞-algebroid]]
$T^\ast_\Sigma(E / ( \mathcal{G} \times_\Sigma T \Sigma ))$.

Then the [[Euler-Lagrange variational derivative]]
(prop. \ref{EulerLagrangeOperatorForTivialVectorBundleOverMinkowskiSpacetime}) constitutes
a [[section]] of the local cotangent Lie ∞-algebroid (def. \ref{LocalInfinitesimalCotangentLieAlgebroid})

$$
  \array{
    && T^\ast_\Sigma\left( E/(\mathcal{G} \times_\Sigma T \Sigma) \right)
    \\
    & {}^{\mathllap{ \delta_{EL} \mathbf{L} }}\nearrow & \downarrow
    \\
    E/(\mathcal{G} \times_\Sigma T \Sigma)
    &=&
    E/(\mathcal{G} \times_\Sigma T \Sigma)
  }
$$

given dually

$$
  CE(E/(\mathcal{G} \times_\Sigma T\Sigma))
    \overset{(\delta_{EL}\mathbf{L})^\ast}{\longleftarrow}
  CE(T^\ast(E/(\mathcal{G}\times_\Sigma T \Sigma)))
$$

by

$$
  \array{
    \left\{
      \phi^a_{,\mu_1 \cdots \mu_k}
    \right\}
      &\longleftarrow&
    \left\{
      \phi^a_{,\mu_1 \cdots \mu_k}
    \right\}
    \\
    \left\{
      c^\alpha_{,\mu_1 \cdots \mu_k}
    \right\}
      &\longleftarrow&
    \left\{
      c^\alpha_{,\mu_1 \cdots \mu_k}
    \right\}
    \\
    \left\{
       \frac{d^k}{ d x^{\mu_1} \cdots d x^{\mu_k}}
       \left(
         \frac{\delta_{EL} L}{\delta \phi^a}
       \right)
    \right\}
      &\longleftarrow&
    \left\{
      \overline{\phi}_{a,\mu_1 \cdots \mu_k}
    \right\}
    \\
    \left\{
      0
    \right\}
      &\longleftarrow&
    \left\{
      \overline{c}_{\alpha,\mu_1 \cdots \mu_k}
    \right\}
  }
$$

=--

+-- {: .proof}
###### Proof

The proof of this proposition is a special case of the
observation that the differentials involved are part of the local BV-BRST differential;
this will be a direct consequence of the proof of prop. \ref{LocalBVBRSTComplexIsDerivedCriticalLocusOfEulerLagrangeForm} below.

=--


The local analog of def. \ref{DerivedCriticalLocusOfGaugeInvariantFunctionOnLieAlgebroid} is now the following
definition \ref{DerivedProlongedShell} of the "derived prolonged shell" of the theory (recall the ordinary prolonged shell
$\mathcal{E}^\infty \hookrightarrow J^\infty_\Sigma(E)$ from (eq:ProlongedShellInJetBundle)):

+-- {: .num_defn #DerivedProlongedShell}
###### Definition
**(derived reduced prolonged [[shell]])**

Let $(E,\mathbf{L})$ be a [[Lagrangian field theory]] (def. \ref{LocalLagrangianDensityOnSecondOrderJetBundleOfTrivialVectorBundleOverMinkowskiSpacetime})
over some [[spacetime]] $\Sigma$, and let $\mathcal{G} \overset{gb}{\to} \Sigma$ be
a bundle of closed irreducible [[gauge parameters]] (def. \ref{GaugeParametrizedInfinitesimalGaugeTransformation}),
inducing via prop. \ref{EulerLagrangeFormIsSectionOfLocalCotangentBundleOfJetBundleGaugeActionLieAlgebroid}
a section $\delta_{EL} L$ of the local cotangent Lie algebroid of the jet bundle gauge-action Lie algebroid.

Then the _derived prolonged shell_ $\mathcal{E}^\infty_{BV}$ is the [[derived critical locus]]
of $\delta_{EL} L$, hence the [[homotopy pullback]] of $\delta_{EL} L$
along the zero section of the local cotangent Lie $\infty$-algebroid:

$$
  \array{
    \mathcal{E}^\infty_{BV}
      &\longrightarrow&
    E/( \mathcal{G} \times_\Sigma T \Sigma )
    \\
    \downarrow && \downarrow^{\mathrlap{0}}
    \\
    E/(\mathcal{G} \times_\Sigma T \Sigma)
     &\underset{\delta_{EL} L}{\longrightarrow}&
    T^\ast_\Sigma\left(
      E/( \mathcal{G} \times_\Sigma T \Sigma )
    \right)
  }
$$

=--



The local refinement of example \ref{ArchetypeOfBVBRSTComplex} is now the following:

+-- {: .num_prop #LocalBVBRSTComplexIsDerivedCriticalLocusOfEulerLagrangeForm}
###### Proposition
**([[local BV-BRST complex]])**

Let $(E,\mathbf{L})$ be a [[Lagrangian field theory]] with bundle of closed irreducible [[gauge parameters]]
$\mathcal{G}$...

.... the [[Chevalley-Eilenberg algebra]] of the derived prolonged shell $\mathcal{E}^\infty_{BV}$
(def. \ref{DerivedProlongedShell}) is the [[local BV-BRST complex]]...

=--

+-- {: .proof}
###### Proof

By unwinding the definitions analogous to the proof of example \ref{CotangentBundleOfActionLieAlgebroid},
the CE-differential is given by the modified bracket of derivations (eq:LocalCommutatorOfDerivationsOnJetBundle)
with the sum of the BRST-differential and the Lagrangian density:

$$
  d_{CE( T^\ast_\Sigma(E/(\mathcal{G} \times_\Sigma T\Sigma)) )}
  \;=\;
  \left\{
    \left(L + L_{BRST}\right) dvol_\Sigma
    \;,\;
    -
  \right\}
$$

only that in the homotopy fiber $\mathcal{E}^\infty_{BV}$ the derivations receive a degree-shift by -1 compared to
their degree in $T^\ast(E /( \mathcal{G} \times_\Sigma T \Sigma ))$.

This operation is the local BV-BRST differential by ([Barnich-Henneaux 96 (2.12)-(2.13)](local+BRST+cohomology#BarnichHenneaux96)).

=--



+-- {: .num_example #DerivedProlongedShellInAbsenceOfExplicitGaugeSymmetries}
###### Example
**(derived prolonged shell in the absence of explicit gauge symmetry -- the [[local BV-complex]])**

Let $(E,\mathbf{L})$ be a [[Lagrangian field theory]] (def. \ref{LocalLagrangianDensityOnSecondOrderJetBundleOfTrivialVectorBundleOverMinkowskiSpacetime})
with _no_ non-trivial [[infinitesimal gauge symmetries]] made explicit (possibly because there are none,
as for the [[scalar field]]), hence with no [[ghost fields]] introduced. Then the
local [[derived critical locus]] of its [[Lagrangian density]] (def. \ref{DerivedProlongedShell})
is the [[local BV-complex]] of def. \ref{BVComplexOfOrdinaryLagrangianDensity}.

=--


+-- {: .num_example #LocalBVComplexOfVacuumElectromagnetismOnMinkowskiSpacetime}
###### Example
**([[local BV-complex]] of [[vacuum]] [[electromagnetism]] on [[Minkowski spacetime]])**

Consider the [[Lagrangian field theory]] of [[free field theory|free]] [[electromagnetism]]
on [[Minkowski spacetime]] (example \ref{ElectromagnetismLagrangianDensity})
with [[gauge parameter]] as in example \ref{InfinitesimalGaugeSymmetryElectromagnetism}.
With the [[field (physics)|field]] and [[gauge parameter]] coordinates as chosen in these examples

$$
  \left(
    (a_\mu), c
  \right)
$$

then the [[local BV-BRST complex]] (prop. \ref{LocalBVBRSTComplexIsDerivedCriticalLocusOfEulerLagrangeForm})
has generators

$$
  \array{
    & \overline{c} & \overline{a}^\mu & a_\mu & c
    \\
    deg =
    &
    -2 & -1 & 0 & 1
  }
$$

together with their [[total spacetime derivatives]],
and the local BV-BRST differential $s$ acts on these generators as follows:

$$
  s
  \;\colon\;
  \left\{
  \array{
    \overline{a}^\mu &\mapsto&  f^{\nu \mu}_{,\nu}  & \text{(equations of Motion -- vacuum Maxwell equations)}
    \\
    \overline{c} &\mapsto& \overline{a}^\mu_{,\mu} & \text{(Noether identity)}
    \\
    a_\mu &\mapsto& c_{,\mu} & \text{(infinitesimal gauge transformation)}
  }
  \right.
$$


=--


$\,$

So far the discussion yields just the [[algebra of functions]] on the derived reduced prolonged shell.
We now discuss the derived analog of the full [[variational bicomplex]] (def. \ref{VariationalBicomplexOnSecondOrderJetBundleOverTrivialVectorBundleOverMinkowskiSpacetime})
to the derived reduced shell.

The analog of the [[de Rham complex]] of a [[derived Lie algebroid]] is called the _[[Weil algebra]]_:

+-- {: .num_defn #WeilAlgebra}
###### Definition
**([[Weil algebra]] of a [[Lie algebroid]])**

Given a [[derived Lie algebroid]] $\mathfrak{a}$ over some $X$ (def. \ref{LInfinityAlgebroid}), its [[Weil algebra]] is

$$
  W(\mathfrak{a})
    \;\coloneqq\;
  \left(
    Sym_{C^\infty(X)}( \Gamma(T^\ast X) \oplus \mathfrak{a}_\bullet \oplus \mathfrak{a}[1]_\bullet )
     \;,\;
    \mathbf{d}_W \coloneqq \mathbf{d} + d_{CE}
  \right)
  \,,
$$

where $\mathbf{d}$ acts as the de Rham differential $\mathbf{d} \colon C^\infty(X) \to \Gamma(T^\ast X)$
on functions, and as the degree shift operator $\mathbf{d} \colon \mathfrak{a}_\bullet \to \mathfrak{a}[1]_\bullet$
on the graded elements.

=--

| [[smooth manifolds]] | [[derived Lie algebroids]] |
|----------------------|----------------------------|
| [[algebra of functions]] | [[Chevalley-Eilenberg algebra]] |
| algebra of [[differential forms]] | [[Weil algebra]] |


+-- {: .num_example #ClassicalWeilAlgebra}
###### Example
**(classical [[Weil algebra]])**

Let $\mathfrak{g}$ be a [[Lie algebra]] with corresponding
[[Lie algebroid]] $B \mathfrak{g}$ (example \ref{BasicExamplesOfLieAlgebroids}).
Then the Weil algebra (def. \ref{WeilAlgebra}) of $B \mathfrak{g}$ is
the traditional Weil algebra of $\mathfrak{g}$ from classical [[Lie theory]].

=--

+-- {: .num_defn #BVVariationalBicomplex}
###### Definition
**([[variational BV-bicomplex]])**

Let $(E,\mathbf{L})$ be a [[Lagrangian field theory]] (def. \ref{LocalLagrangianDensityOnSecondOrderJetBundleOfTrivialVectorBundleOverMinkowskiSpacetime})
equipped with a closed irreducible [[gauge parameter]]  bundle $\mathcal{G}$ (def. \ref{GaugeParametrizedInfinitesimalGaugeTransformation}).
Consider the [[Lie algebroid]] $E/(\mathcal{G} \times_\Sigma T \Sigma)$ from example \ref{LocalOffShellBRSTComplex},
whose [[Chevalley-Eilenberg algebra]] is the [[local BRST complex]] of the theory.

Then its [[Weil algebra]] $W(E/(\mathcal{G} \times_\Sigma T \Sigma))$ (def. \ref{WeilAlgebra})
has as differential the [[variational derivative]] (def. \ref{VariationalBicomplexOnSecondOrderJetBundleOverTrivialVectorBundleOverMinkowskiSpacetime})
plus the [[BRST differential]]

$$
  \begin{aligned}
    d_{W}
    & = \mathbf{d} - (d - s_{BRST})
    \\
    & =
    \delta + s_{BRST}
  \end{aligned}
  \,.
$$

Therefore we speak of the _[[variational BRST-bicomplex]]_ and write

$$
  \Omega^\bullet_\Sigma( E/(\mathcal{G} \times_\Sigma T \Sigma) )
  \,.
$$

Similarly, the Weil algebra of the derived prolonged shell $\mathcal{E}^\infty_{BV}$ (def. \ref{DerivedProlongedShell})
has differential

$$
  \begin{aligned}
    d_W
      & =  \mathbf{d} - (d - s)
    \\
    & = \delta + s
  \end{aligned}
  \,.
$$

Since $s$ is the [[BV-BRST differential]] (prop. \ref{LocalBVBRSTComplexIsDerivedCriticalLocusOfEulerLagrangeForm})
this defines the "variational BV-BRST-bicomplex".

(...)

=--








$\,$


It turns out that the [[local BV-BRST cohomology]] (prop. \ref{LocalBVBRSTComplexIsDerivedCriticalLocusOfEulerLagrangeForm})
of the "derived reduced prolonged shell" very neatly captures all the aspects of [[Lagrangian field theory]]
that we have been discussing so far:


+-- {: .num_example #dWCohomology}
###### Example
**([[Noether's theorem|Noether theorem I]] in terms of [[local BRST cohomology]])**

The $d-s$-closed elements in degree $(p,0)$ are precisely pairs $(v,J_v)$
consisting of an implicit infinitesimal local gauge symmetry $v$ and a conserved current $J_v$ for it.

The $d_W$-exact elements in this degree are sums of

1. $d$-exact currents;

1. on-shell vanishing implicit gauge transformations;

1. on-shell vanishing currents with their horizontally exact gauge transformations

(...)


=--

+-- {: .proof}
###### Proof


The $d_W$-closed element are
the implicit infinitesimal gauge symmetries $v$ regarded as an [[antifield]] $v^a \overline{\phi}_a$
multiplied with the [[volume form]] $dvol_\Sigma$
together with their Noether current $J_v \in \Omega^{p,0}_\Sigma(E)$ (prop. \ref{NoethersFirstTheorem})


$$
  \array{
    \{J_v\} &\overset{d}{\longrightarrow}& \{ \overset{= 0}{\overbrace{ d J_v - \iota_v \delta_{EL}\mathbf{L} }} \}
    \\
    && \uparrow\mathrlap{s_{BV}}
    \\
    && \{ v^a \overline{\phi}_a dvol_\Sigma\}
  }
$$



Such a pair is exact if

$$
  \array{
    \{K\}
     &\overset{d}{\longrightarrow}&
    \{ d K + v^{a \mu} \frac{\delta_{EL}L}{\delta \phi^a} \iota_{\partial_\mu} dvol_\Sigma   \} &\overset{d}{\longrightarrow}& \{ \overset{= 0}{\overbrace{ d J_v - \iota_v \delta_{EL}\mathbf{L} }} \}
    \\
    && \mathllap{s_{BV}}\uparrow && \uparrow\mathrlap{s_{BV}}
    \\
    && v^{a \mu} \overline{\phi}_a \iota_{\partial_\mu} dvol_\Sigma
      &\underset{-d}{\longrightarrow}&
    \{ v^a \overline{\phi}_a dvol_\Sigma\}
    \\
    && && \uparrow\mathrlap{s_{BV}}
    \\
    &&
    && \kappa^{a b } \overline{\phi}_a \overline{\phi}_b dvol_\Sigma
  }
$$

(...)

=--





+-- {: .num_example }
###### Example
**([[infinitesimal gauge symmetry]] via [[local BRST cohomology]])**

An  [[infinitesimal gauge symmetry]] $v_\epsilon$  of [[gauge parameter]] $(\epsilon^\alpha)$ is a vector field on the jet bundle with components of the form

$$
  \mathcal{L}_{v_\epsilon} \phi^a
   \;\coloneqq\;
  R^a_\alpha \epsilon^\alpha
    +
  R^{a \mu}_\alpha \frac{d \epsilon^\alpha}{d x^\mu}
$$

such that this is an [[infinitesimal symmetry of the Lagrangian]] in that

$$
  \begin{aligned}
    \iota_{v_\epsilon} \delta_{EL} \mathbf{L}
    & =
    v^a \frac{\delta_{EL} L}{\delta \phi^a} dvol_\Sigma
    \\
    & =
    \epsilon^\alpha
    \left(
       R^a_\alpha \frac{\delta_{EL} L}{ \delta \phi^a}
       -
       \frac{d}{d x^\mu}
       \left(
          R^{a \mu}_\alpha \frac{\delta_{EL} L}{\delta \phi^a}
       \right)
    \right)
    dvol_\Sigma
    +
    d\left(
       \epsilon^\alpha R^{a \mu}_\alpha \frac{\delta_{EL} L}{\delta \phi^a}
    \right)
    \iota_{\partial_\mu} dvol_\Sigma
    \\
    & =
    0 + d(...)
  \end{aligned}
$$

for all $(\epsilon^\alpha)$.

The corresponding [[antifield|anti]] [[ghost field]] $\overline{c}_\alpha$ are taken by the BV-BRST differential to the antifield-preimage of the term on the left:

$$
  s\left(\overline{c}_\alpha\right)
  \;=\;
  R^a_\alpha \overline{\phi}_a
  -
  \frac{d}{d x^\mu}
  \left(
    R^{a \mu}_\alpha \overline{\phi}_a
  \right)
  \,.
$$

Moreover, an [[on-shell]] vanishing [[infinitesimal symmetry of the Lagrangian]] is a vector field with components of the form

$$
  \kappa^{a b} \frac{\delta_{EL} L}{\delta \phi^a}
$$

for $\kappa^{a b} = - \kappa^{b a}$ a skew-symmetric system of smooth functions on the jet bundle.

The linear combination of such an infinitesimal gauge symmetry and an on-shell vanishing infinitesimal symmetry is $(s+d)$-exact:


$$
  \begin{aligned}
    v^a dvol_\Sigma
    & =
    \left(
      R^a_\alpha \epsilon^\alpha
      +
      R^{a \mu}_\alpha \frac{d \epsilon^\alpha}{d x^\mu}
      +
      \kappa^{a b} \frac{\delta_{EL} L }{ \delta \phi^a }
    \right)
    dvol_\Sigma
    \\
    & =
    s
    \left(
      \epsilon^\alpha \overline{c}_\alpha
      -
      \tfrac{1}{2}\kappa^{a b} \overline{\phi}_a \overline{\phi}_b
    \right) dvol_\sigma
    +
    d\left(
      \epsilon^\alpha R^{a \mu}_\alpha
    \right)
    \iota_{\partial_\mu} dvol_\Sigma
  \end{aligned}
$$

([Barnich-Brandt-Henneaux 94, p. 20](local+BRST+cohomology#BarnichBrandtHenneaux94))


It may be useful to organize this expression into the $s+d$-[[bicomplex]] like so:

$$
  \array{
    \{K\}
     &\overset{d}{\longrightarrow}&
     \{ d K
       +
     \epsilon^\alpha R^{a \mu}_\alpha \frac{\delta_{EL}\mathbf{L}}{ \delta \phi^a}
     \}
     &\overset{d}{\longrightarrow}&
    \{ \overset{= 0}{\overbrace{ d J_v - \iota_v \delta_{EL}\mathbf{L} }} \}
    \\
    && \mathllap{s}\uparrow && \uparrow\mathrlap{-s}
    \\
    &&
    \epsilon^\alpha R^{a \mu}_\alpha \overline{\phi}_a
    \iota_{\partial_\mu} dvol_\Sigma
      &\underset{d}{\longrightarrow}&
    \left\{
      d\left(
        \epsilon^\alpha R^{a \mu}_\alpha \overline{\phi}_a
      \right)
      \iota_{\partial_\mu} dvol_\Sigma
      +
      \left(
        R^a_\alpha \epsilon^\alpha
        +
        R^{a \mu}_\alpha \frac{d \epsilon^\alpha}{d x^\mu}
        +
        \kappa^{a b} \frac{\delta_{EL} L }{ \delta \phi^a }
      \right)
      \overline{\phi}_a
      \,
      dvol_\Sigma
    \right\}
    \\
    && && \uparrow\mathrlap{-s}
    \\
    &&
    &&
    \left(
       - \epsilon^\alpha \overline{c}_\alpha
       +
      \tfrac{1}{2}\kappa^{a b } \overline{\phi}_a \overline{\phi}_b
    \right)
    dvol_\Sigma
  }
$$


=--

(...)


## Gauge fixing
 {#GaugeFixing}


We had seen [above](#PhaseSpace) that the key intermediate construction for obtaining the [[quantum field theory]]
induced from a [[Lagrangian density]] is its _[[covariant phase space]]_ (prop. \ref{CovariantPhaseSpace}).
But then we have seen that there are generically [[obstructions]] to the existence of the [[covariant phase space]], embodied by
[[infinitesimal gauge transformation]] that have been "left implicit" (prop. \ref{NonTrivialImplicitInfinitesimalGaugeSymmetriesPbstructExistenceOfCauchySurfaces}).
We have then discussed the [[reduced phase space]] [above](#ReducedPhaseSpace) which makes the
[[infinitesimal gauge symmetries]] "explicit" by forming their [[homotopy quotient]], whose
[[algebra of functions]], on the derived [[shell]], is the _[[BV-BRST complex]]_ of the theory.
It remains to show that this construction of the [[reduced phase space]] indeed serves to lift the
[[obstruction]] to the existence of the [[covariant phase space]]. This is the topic of _[[gauge fixing]]_ (def. ... below).

The point is that while the [[reduced phase space]] reflected by the [[BV-BRST complex]] may still not be
_manifestly_ covariant, its existence as an object in [[homotopy theory]], here specifically in [[homological algebra]],
means that it comes with a more flexible concept of "[[equality]]", namely _[[homotopy equivalence]]_, which here
specifically means _[[quasi-isomorphism]]_.

Broadly speaking, the [[gauge principle]] in [[physics]], says that no two things ([[field histories]], etc.)
are ever really [[equality|equal]], instead they may be connected by [[gauge transformations]], and the mathematical
reflection of that is the principle of [[homotopy theory]], where no two [[homotopy types]] are ever equal,
instead they may be connected by ([[weak homotopy equivalence|weak]]) [[homotopy equivalence]].
Hence picking a specific representative of a [[homotopy type]] means to _fix a gauge_.


Concretely, let $(E,\mathbf{L})$ be a [[Lagrangian field theory]] with closed irreducibe [[gauge parameter]] bundle
$\mathcal{G}$ and let $BV(s)$ be the corresponding [[BV-BRST complex]] (prop. \ref{LocalBVBRSTComplexIsDerivedCriticalLocusOfEulerLagrangeForm}).

We then ask for another field bundle $E^g$, possibly itself already a [[graded manifold]],
hence an object in [[higher differential geometry]],
and then we ask for a [[Lagrangian density]] $\mathbf{L}^g$ that
may also genuinely live in [[higher prequantum geometry]],
hence which is defined right away on the action Lie algebroid $E^g(\mathcal{G} \times_\Sigma T_\Sigma)$ (example \ref{LocalOffShellBRSTComplex})
not necessarily descending to there from $E^g$ itself.
We may still form the local [[derived critical locus]] of $\mathbf{L}^g$ in
$E^g(\mathcal{G} \times_\Sigma T \Sigma)$ and obtain a corresponding BV-BRST-like complex $BV(s^g)$.

We ask now that $BV(s^g)$ has particularly good properties:

1. We ask that the Koszul-Tate component $s^g_{BV}$ of $s^g$ has vanishing [[cochain cohomology]] in negative degree,
which means by prop. \ref{BVComplexIsHomologicalResolutionPreciselyIfNoNonTrivialImplicitGaugeSymmetres}
that the Lagrnagian $\mathbf{L}^g$ on the _graded_ field bundle $E^g$ is _degreewise_ free of the
[[obstruction]] to the existence of a covariant phase space.

1. We ask moreover that the remaining Chevalley-Eilenberg component $s^g_{BRST}$ of $s^g$ is compatible with the graded [[Poisson bracket]] of this graded [[covariant phase space]]

This means that the "dg-Lagrangian field theory "$(E^g, \mathbf{L}^g)$ induces a [[covariant phase space|covariant]] [[reduced phase space]]
"[[internalization|internal to]]" [[dg-manifolds]]; hence a "dg-covariant reduced phase space":
a [[graded object|graded]] covariant reduced phase space equipped with compatible differentials.

Such derived phase spaces $BV(s^g)$ are amenable to _degreewise_ [[quantization]] (discussed [below](#Quantization))
if only one can  keep the degreewise quantization compatible with the [[differential]].
This may be shown (below...) to be the case, and hence  performing the quantization degreewise and passing in the end to the [[cochain cohomology]] of the resulting BV-BRST complex of quantum observables yields the _[[gauge invariant]] [[local observables]]_
of the quantum field theory. This is called the "[[BV-BRST quantization]] of [[gauge theories]]".

In order to apply this to the [[Lagrangian field theory]] $(E,\mathbf{L})$ that we actually started out to
consider, we now only need to ensure that the "manifestly covariant" dg-Lagrangian field theory
$(E^g, \mathbf{L}^g)$ is  not necessarily [[equality|equal]] to $(E,\mathbf{L})$, but [[homotopy equivalent]] to it,
as an object in [[higher prequantum geometry]], hence that there is a [[quasi-isomorphism]] between the
corresponding [[BV-BRST complexes]]

$$
  BV(s^g) \overset{\simeq}{\longrightarrow} BV(s)
  \,.
$$

The choice of this [[quasi-isomorphism]] hence means a choice of particularly good (namely manifestly covariant)
_representative_ of the [[homotopy type]] of $BV(s)$, and hence this is called a _gauge fixing_ of $BV(s)$.


$\,$

$$
  \array{
     \underline{\mathbf{\text{pre-quantum geometry}}}
     &&
     \underline{\mathbf{\text{higher pre-quantum geometry}}}
     \\
     \,
     \\
     \left\{
        \array{
           \text{Lagrangian field theory with}
           \\
           \text{implicit infinitesimal gauge transformations}
        }
     \right\}
     &\overset{ \text{explicate} \atop \text{gauge transformations}  }{\longrightarrow}&
     \left\{
        \array{
           \text{dg-Lagrangian field theory with}
           \\
           \text{explicit infinitesimal gauge transformations}
           \\
           \text{ embodied by BRST complex }
        }
     \right\}
     \\
     && \Big\downarrow{}^{\mathrlap{ \text{pass to} \atop \text{derived critical locus} }}
     \\
     \Big\downarrow
     &&
     \left\{
        \array{
           \text{dg-reduced phase space}
           \\
           \text{ embodied by BV-BRST complex }
        }
     \right\}
     \\
     && {}^{\mathllap{\simeq}}\Big\downarrow{}^{\mathrlap{\text{fix gauge} }}
     \\
     \left\{
       \array{
         \text{ decategorified }
         \\
         \text{ covariant }
         \\
         \text{ reduced phase space }
       }
     \right\}
     &\underset{\text{pass to cohomology}}{\longleftarrow}&
     \left\{
        \array{
           \text{ dg-covariant}
           \\
           \text{reduced phase space  }
        }
     \right\}
     \\
     && \Big\downarrow{}^{\mathrlap{
       \array{
           \text{ quantize }
           \\
           \text{degreewise}
       }
     }}
     \\
     \left\{
       \array{
         \text{gauge invariant}
         \\
         \text{quantum observables}
       }
     \right\}
     &\underset{\text{pass to cohomology}}{\longleftarrow}&
     \left\{
       \array{
         \text{quantum}
         \\
        \text{BV-BRST complex}
       }
     \right\}
  }
$$


Here:

| term  |   meaning   |
|-------|-------------|
| "phase space" | [[derived critical locus]] of [[Lagrangian density|Lagrangian]] equipped with [[Poisson bracket]] |
| "reduced" | [[gauge transformations]] have been [[homotopy quotient|homotopy-quotiented]] out |
| "covariant" | [[Cauchy surfaces]] exist degreewise |

$\,$

In practice this choice of gauge fixing by choice of quasi-isomorphism to a "manifestly covariant" [[BV-BRST complex]]
is realized as the composite of two seperate quasi-isomorphisms:

1. an "anti-canonical transformation"

   $$
     e^{-\{\psi,-\}} \;\colon\; BV(s^g) \longrightarrow BV( \exp^{-\{\psi,-\}} s^g )
   $$

   (induced by a degree -1 element $\psi$ called, for better or worse, the "[[gauge fixing fermion]]")
  which is actually a genuine [[isomorphism]], not just a [[quasi-isomorphism]];

1. a genuine [[quasi-isomorphism]] which contracts away a [[contractible space|contractible]] [[direct sum|direct summand]]
   of [[auxiliary fields]]

   $$
     BV( e^{-\{\psi,-\}} s^g ) \overset{ \text{forget contractible complex} \atop \text{of auxiliary fields} }{\longrightarrow}  BV(s) .
   $$



(...)



+-- {: .num_example #NLGaugeFixingOfElectromagnetism}
###### Example
**([[Nakanishi-Lautrup field|Nakanishi-Lautrup]] [[gauge fixing]] of [[vacuum]] [[electromagnetism]])**

Consider the [[local BV-BRST complex]]

$$
  \left(
    E/(\mathcal{G} \times_\Sigma T \Sigma)
  \right)_{d L \simeq 0}
$$

for [[vacuum]] [[electromagnetism]] on [[Minkowski spacetime]] from example \ref{LocalBVComplexOfVacuumElectromagnetismOnMinkowskiSpacetime}:

The [[field bundle]] is $E \coloneqq T^\ast \Sigma$ and the [[gauge parameter]] bundle is $\mathcal{G} \coloneqq \Sigma \times \mathbb{R}$.
The 0-jet generators are

$$
  \array{
    & \overline{c} & \overline{a}^\mu & a_\mu & c
    \\
    deg =
    &
    -2 & -1 & 0 & 1
  }
$$

and the [[differential]] acts as

$$
  s
  \;\colon\;
  \left\{
  \array{
    \overline{a}^\mu &\mapsto&  f^{\nu \mu}_{,\nu}  & \text{(equations of Motion -- vacuum Maxwell equations)}
    \\
    \overline{c} &\mapsto& \overline{a}^\mu_{,\mu} & \text{(Noether identity)}
    \\
    a_\mu &\mapsto& c_{,\mu} & \text{(infinitesimal gauge transformation)}
  }
  \right.
$$

The [[Lagrangian density]] for [[vacuum]] [[electromagnetism]] is (eq:ElectromagnetismLagrangian)

$$
  \label{VacuumEMLagrangianDensityRecalledForNLFields}
  \mathbf{L}_{em} \coloneqq \tfrac{1}{2} f_{\mu \nu} f^{\mu \nu}
  \,.
$$

Consider the [[contractible chain complex]] of [[vector bundles]] over $\Sigma$

$$
  NL
  \;\coloneqq\;
  \left(
  \array{
    &
    \Sigma \times \langle \tilde c\rangle
      &\overset{\tilde c \mapsto b}{\longrightarrow}&
    \Sigma \times\langle b\rangle
    \\
    deg = & -1 && 0
  }
  \right)
  \,.
$$

In this context $\Sigma \times \langle b\rangle$ is called the [[field bundle]] for the _[[Nakanishi-Lautrup field]]_ and $\Sigma \times \langle \tilde c\rangle$ that for the _[[antighost field]]_.

The corresponding product [[BV-BRST complex]] [[quasi-isomorphism|quasi-isomorphic]] to the original one

$$
  \left(
    E/(\mathcal{G} \times_\Sigma T \Sigma)
  \right)_{d L \simeq 0} \times_\Sigma NL
$$

has coordinate generators

$$
  \array{
    & \overline{c} & \overline{a}^\mu & a_\mu & c
    \\
    & & \tilde c & b
    \\
    deg =
    &
    -2 & -1 & 0 & 1
  }
  \,.
$$

We say that the _Nakanishi-Lautrup [[gauge fixing fermion]] for Gaussian averaged [[Lorentz gauge]]_ is

$$
  \label{NLGaugeFixingFermion}
  \psi
     \coloneqq
  \tilde c( b + a^{\mu}_{,\mu} )
  \;\in\;
  CE\left(
    \left(
      E/(\mathcal{G} \times_\Sigma T \Sigma)
    \right)_{d L \simeq 0} \times_\Sigma NL
  \right)
  \,.
$$

With $L_{NL}$ denoting the anti-Hamiltonin for the differential $s_{NL}$ of the [[resolution|resolved]] [[local BV-BRST complex]] $  \left(E/(\mathcal{G} \times_\Sigma T \Sigma) \right)_{d L \simeq 0} \times_\Sigma NL$ we find from (eq:VacuumEMLagrangianDensityRecalledForNLFields) and (eq:NLGaugeFixingFermion) the [[antibracket]]

$$
  \{\psi,L_{NL}\} = b ( b + a^{\mu}_{,\mu} ) + \tilde c_{,\mu} c^{,\mu}
$$

and then

$$
  \{\psi, \{\psi, L_{NL}\}\} = 0
  \,.
$$

Therefore the corresponding [[gauge fixing|gauge fixed]] [[Lagrangian density]] is

$$
  \begin{aligned}
    \mathbf{L}^g
      & \coloneqq
    \e^{\{\psi,-\}}\mathbf{L}_{NL}
    \\
    & =
    \left(
      \tfrac{1}{2} f_{\mu \nu} f^{\mu \nu}
       +
       b ( b + a^{\mu}_{,\mu} ) + \tilde c_{,\mu} c^{,\mu}
    \right) dvol_\Sigma
  \end{aligned}
  \,.
$$

(see also [Henneaux 90, section 9.1](Nakanishi-Lautrup+field#Henneaux90))

The [[Euler-Lagrange equation|Euler-Lagrange]] [[equation of motion]] induced by this Lagrangian density $\mathbf{L}^g$ (def \ref{EulerLagrangeEquationsOnTrivialVectorFieldBundleOverMinkowskiSpacetime}) are


$$
  \label{LorenzGaugeFixedEOMForVacuumElectromagnetism}
  \left\{
  \begin{aligned}
    f^{\mu \nu}{}_{,\mu} & =  b^{,\nu}
    \\
    b & = -\tfrac{1}{2} a^\mu_{,\mu}
    \\
    c_{,\mu}{}^{,\mu} & = 0
    \\
    \tilde c_{,\mu}{}^{,\mu} & = 0
  \end{aligned}
  \right.
  \phantom{AAA}
  \Leftrightarrow
  \phantom{AAA}
  \left\{
  \begin{aligned}
    \Box a_\nu & = 0
    \\
    b & = - \tfrac{1}{2} div a
    \\
    \Box c & = 0
    \\
    \Box \tilde c & = 0
  \end{aligned}
  \right.
$$

Here on the left we show the equations as the appear directly from the [[Euler-Lagrange variational derivative]]
(prop. \ref{EulerLagrangeOperatorForTivialVectorBundleOverMinkowskiSpacetime}).
The operator $\Box$ on the right is the [[wave operator]] (example \ref{EquationOfMotionOfFreeRealScalarField})
and $div$ denotes the [[divergence]].
The equivalence to the equations on the right follows from using in the first first equation the derivative of the second equation
on the left, which is

$$
  b^{,\nu} = -\tfrac{1}{2} a^{\mu,\nu}{}_{,\mu}
  \,,
$$

and recalling the definition of the universal [[Faraday tensor]] (eq:FaradayTensorJet):

$$
  f^{\mu \nu}{}_{,\mu}
  =
  \tfrac{1}{2}
  \left(
    a^{\nu,\mu}{}_{,\mu}
    -
    a^{\mu,\nu}{}_{,\mu}
  \right)
  \,.
$$

The [[differential equations]] on the right are manifestly a system of [[normally hyperbolic differential operator|normally hyperbolic]] [[differential equations]], as opposed to the plain [[vacuum]] [[Maxwell equations]] on [[Minkowski spacetime]] $\frac{d}{d x^\mu} f^{\mu \nu} = 0$ (see also [Rejzner 16, section 7.2](Nakanishi-Lautrup+field#Rejzner16)).


=--

(...)


Proposition \ref{NonTrivialImplicitInfinitesimalGaugeSymmetriesPbstructExistenceOfCauchySurfaces} implies
that we need a good handle on determining whether the space of implicit
[[infinitesimal gauge symmetries]] modulo trivial ones is non-zero. This
[[obstruction]] turns out to be neatly captured by methods of [[homological algebra]]
applied to the [[local BV-complex]] (def. \ref{BVComplexOfOrdinaryLagrangianDensity}):

+-- {: .num_example #InterpretationCohomologyOfBVComplex}
###### Example
**([[cochain cohomology]] of local [[BV-complex]])**

Let $(E,\mathbf{L})$ be a [[Lagrangian field theory]] (def. \ref{LocalLagrangianDensityOnSecondOrderJetBundleOfTrivialVectorBundleOverMinkowskiSpacetime})
whose [[field bundle]] $E$ is a [[trivial vector bundle]] (example \ref{TrivialVectorBundleAsAFieldBundle}) and whose [[Lagrangian density]] $\mathbf{L}$ is spacetime-independent (example \ref{ShellForSpacetimeIndependentLagrangians}),
and let $\Sigma \times \{\varphi\} \hookrightarrow \mathcal{E}$ be a constant section of the shell (eq:ConstantSectionOfTrivialShellBundle).

By inspection we find that the [[cochain cohomology]] of the local [[BV-complex]]
$\Omega^{0,0}_{\Sigma,cp}(E,\varphi)\vert_{\mathcal{E}_{BV}}$ (def. \ref{BVComplexOfOrdinaryLagrangianDensity}) has the following interpretation:

In degree 0 the [[image]] of the [[BV-differential]] coming from degree -1 and modulo $d$-exact terms

$$
  im\left( \Gamma_{\Sigma,cp}(J^\infty_\Sigma T_\Sigma(E,\varphi)) \overset{s_{BV}}{\to} \Omega^{0,0}_\Sigma(E,\varphi)/im(d) \right)
$$

is the ideal of functions modulo $im(d)$ that vanish [[on-shell]]. Since the differential going _from_ degree 0 to degree 1 vanishes,
the [[cochain cohomology]] in this degree is the [[quotient ring]]

$$
  \begin{aligned}
    H^0\left(\Omega^{0,0}_{\Sigma,cp}(E,\varphi)\vert_{\mathcal{E}_{BV}}\vert d\right)
      & \simeq
    \Omega^{0,0}_{\Sigma,cp}(E,\varphi)\vert_{\mathcal{E}}/im(d)
  \end{aligned}
$$

of functions on the [[shell]] $\mathcal{E}$ (eq:ObservablesOnInfinitesimalNeighbourhoodOfZeroInShellInFieldFiber).

In degree -1 the [[kernel]] of the [[BV-differential]] going to degree 0

$$
  ker\left( \Gamma_{\Sigma,cp}(J^\infty_\Sigma T_\Sigma(E,\varphi)) \overset{s_{BV}}{\to} \Omega^{0,0}_\Sigma(E,\varphi)\right)
$$

is the space of implicit [[infinitesimal gauge symmetries]] (def. \ref{ImplicitInfinitesimalGaugeSymmetry})
and the [[image]] of the differential coming from degree -2

$$
  im\left(
    \Gamma_{\Sigma,cp}(J^\infty_\Sigma T_\Sigma E,\varphi)
       \wedge_{\Omega^{0,0}_{\Sigma,cp}(E,\varphi)}
    \Gamma_{\Sigma,cp}(J^\infty_\Sigma T_\Sigma E,\varphi)
      \overset{s_{BV}}{\longrightarrow}
    \Gamma_{\Sigma,cp}(J^\infty_\Sigma T_\Sigma E,\varphi)
  \right)
$$

is the trivial implicit infinitesimal gauge transformations (example \ref{TrivialImplicialInfinitesimalGaugeTransformations}).

Therefore the [[cochain cohomology]] in degree -1 is the [[quotient space]] of implicit infinitesimal gauge transformations
modulo the trivial ones:

$$
  \label{NegativeOneCohomologyBV}
  H^{-1}\left( \Omega^{0,0}_\Sigma(E,\varphi)\vert_{\mathcal{E}_{BV}} \right)
    \simeq
  \frac{
    \left\{
      \text{implicit infinitesimal gauge transformations}
    \right\}
  }
  {
    \left\{
      \text{ trivial implicit infinitesimal gauge transformations}
    \right\}
  }
$$

=--



+-- {: .num_prop #BVComplexIsHomologicalResolutionPreciselyIfNoNonTrivialImplicitGaugeSymmetres}
###### Proposition
**(local [[BV-complex]] is [[homological resolution]] of the [[shell]] precisely if there are no non-trivial implicit [[infinitesimal gauge symmetries]])**

Let $(E,\mathbf{L})$ be a [[Lagrangian field theory]] (def. \ref{LocalLagrangianDensityOnSecondOrderJetBundleOfTrivialVectorBundleOverMinkowskiSpacetime})
whose [[field bundle]] $E$ is a [[trivial vector bundle]] (example \ref{TrivialVectorBundleAsAFieldBundle}) and whose [[Lagrangian density]] $\mathbf{L}$ is spacetime-independent (example \ref{ShellForSpacetimeIndependentLagrangians})
and let $\Sigma \times \{\varphi\} \hookrightarrow \mathcal{E}$ be a constant section of the shell (eq:ConstantSectionOfTrivialShellBundle).
Furthermore assume that $\mathbf{L}$ is at least quadratic in the vertical coordinates around $\varphi$.

Then the local [[BV-complex]] $\Omega^{0,0}_\Sigma(E,\varphi)\vert_{\mathcal{E}_{BV}}$ of local observables (def. \ref{BVComplexOfOrdinaryLagrangianDensity}) is a [[homological resolution]] of the algebra of functions on the [[infinitesimal neighbourhood]] of $\varphi$ in the [[shell]] (example \ref{ShellForSpacetimeIndependentLagrangians}),
hence the canonical comparison morphisms (eq:ComparisonMorphismFromOrdinaryBVComplexToLocalObservables)
is a [[quasi-isomorphism]]
precisely if there is no non-trivial (example \ref{TrivialImplicialInfinitesimalGaugeTransformations}) implicit [[infinitesimal gauge symmetry]] (def. \ref{ImplicitInfinitesimalGaugeSymmetry}):

$$
  \left(
    \Omega^{0,0}_{\Sigma}(E,\varphi)\vert_{\mathcal{E}_{BV}}
      \overset{\simeq}{\longrightarrow}
    \Omega^{0,0}_{\Sigma}(E,\varphi)\vert_{\mathcal{E}}
  \right)
  \;\Leftrightarrow\;
  \left(
    \array{
      \text{there are no non-trivial}
      \\
      \text{implicit infinitesimal gauge transformations}
    }
  \right)
  \,.
$$


=--

+-- {: .proof}
###### Proof

By example \ref{InterpretationCohomologyOfBVComplex} the vanishing of non-trivial implicit infinitesimal
gauge symmetries is equivalent to the vanishing of the cochain cohomology of the local BV-complex in degree -1 (eq:NegativeOneCohomologyBV).

Therefore the statement to be proven is
equivalently that the [[Koszul complex]] of the sequence of elements

$$
  \left(
    \frac{\delta_{EL} L}{\delta \phi^a} \in \Omega^{0,0}_{\Sigma,\varphi}(E)
  \right)_{a = 1}^s
$$

is a [[homological resolution]] of $\Omega^{0,0}_\Sigma(E,\varphi)\vert_{\mathcal{E}}$, hence has vanishing cohomology in all negative degrees,
already if it has vanishing cohomology in degree -1.

By a standard fact about [[Koszul complexes]] ([this prop.](Koszul+complex#KoszulResolutionForNoetherianRngAndElementsInJacobson))
a sufficient condition for this to be the case is that

1. the ring $\Omega^{0,0}_{\Sigma}(E,\varphi)$ is the tensor product of $C^\infty(\Sigma)$ with a [[Noetherian ring]];

1. the elements $\frac{\delta_{EL} L }{\delta \phi^a}$ are contained in its [[Jacobson radical]].

The first condition is the case since $\Omega^{0,0}_{\Sigma}(E,\varphi)$ is by definition a [[formal power series ring]] over a [[field]]
tensored with $C^\infty(\Sigma)$
(by [this example](noetherian+ring#PolynomialAlgebraOverNoetherianRingIsNoetherian)).
Since the Jacobson radical of a power series algebra consists of those elements whose constant term
vanishes (see [this example](Koszul+complex#KoszulComplexForFormalPowerSeriesAlgebras)),
the assumption that $\mathbf{L}$ is at least quadratic, hence that $\delta_{EL}\mathbf{L}$
is at least linear in the fields, guarantees that all $\frac{\delta_{EL}L}{\delta \phi^a}$ are contained
in the Jacobson radical.

=--

Prop. \ref{BVComplexIsHomologicalResolutionPreciselyIfNoNonTrivialImplicitGaugeSymmetres}
says what [[gauge fixing]] has to accomplish: given a [[local BV-BRST complex]] we need
to find a [[quasi-isomorphism]] to another complex which is such that it comes from a
_graded_ Lagrangian density whose BV-cohomology vanishes in degree -1
and hence induces a graded covariant phase space, and such that
the remaining BRST differential respects the Poisson bracket on this graded covariant phase space.

(...)



$\,$

## Quantization
 {#Quantization}

Given any [[space]] with [[infinitesimal symmetries]] acting on it, there is the corresponding [[homotopy quotient]]
by these infinitesimal symmetries. For the [[covariant phase space]] of a [[Lagrangian field theory]], as [above](#PhaseSpace) with its [[Poisson Lie algebra]] of infinitesimal symmetries (def. \ref{PoissonBracketOnHamiltonianLocalObservables}),
this infinitesimal [[homotopy quotient]] is known as the _[[Poisson Lie algebroid]]_ and the corresponding genuine
[[homotopy quotient]] is known as the _[[symplectic groupoid]]_. As one passes from [[phase space]] to its [[symplectic groupoid]],
the [[algebra of functions]] on phase space -- hence the [[algebra of observables]] $Obs$ (def. \ref{LocalObservables}) -- which is always a [[commutative algebra]] _[[deformation quantization|deforms]]_ to the corresponding algebra of functions on a [[Lie groupoid]]
called the ([[polarization|polarized]]) [[convolution algebra of a Lie groupoid]]. This is now a [[non-commutative algebra]]
called the _[[algebra of quantum observables]]_ $Obs_{\hbar}$; and this passage from
[[phase space]] to its [[symplectic groupoid]] [[homotopy quotient]] by  Hamiltonian symmetries is called _[[quantization]]_
(specifically: "[[geometric quantization of symplectic groupoids]]").
Here the strength of the non-commutativity is measured by a [[deformation]] parameter called _[[Planck's constant]]_ $\hbar$.

Since the product in the [[algebra of quantum observables]] $Obs_\hbar$ differs from that in $Obs$, the
positivity condition $\langle A^\ast A\rangle \geq 0$ in the definition of  _[[states]]_ $\langle - \rangle$
of a field theory (def. \ref{States}) acquires a different meaning. The states after [[quantization]] are called
_[[quantum states]]_ and their difference witnesses that after [[quantization]] the [[Lagrangian field theory]] is of a different nature:
one says that it is no longer a _[[classical field theory]]_, but a _[[quantum field theory]]_
and that the objects whose states are expressed by these new [[quantum states]] are _[[quantum fields]]_.

Unfortunately, explicitly constructing the [[algebra of quantum observables]] of a [[Lagrangian field theory]] and hence "constructing the [[quantum field theory]]" turns out to be extremely hard, unless some simplifying assumptions are made.

One kind of simplification occurs when the  [[spacetime]] [[dimension]] is very low. For instance if the spacetime dimension is taken to be $p+1 = 1$ -- modelling the approximation where one completely ignores the variation of fields in space
and retains just their time evolution -- then one speaks of [[quantum mechanics]], which is well understood.
Another simplification occurs when the field theory is a _[[free field theory]]_, meaning that its [[equation of motion]]
is a [[normally hyperbolic differential operator|normally hyperbolic]] [[linear differential operator]].
In this case the [[quantum field theory]] is fully understood as long as the underlying [[spacetime]] is a
[[time orientation|time-orientable]] and [[globally hyperbolic spacetime|globally hyperbolic]]. But, as the
name indicates, this captures only the case where there is no [[interaction]] among the [[field (physics)|fields]].

Since the [[algebra of quantum observables]] $Obs_\hbar$ is a _[[deformation]]_ with strength $\hbar$ of the commutative algebra of classical
observables $Obs$ controlled by the [[Poisson Lie algebra]], another simplification occurs if one
gives up on the demand to understand the full deformation at finite value of [[Planck's constant]] $\hbar$
and considers just [[infinitesimal]] values of $\hbar$. Since this means that the resulting [[quantum observables]]
are no longer actual [[smooth functions]] of $\hbar$, but just _[[formal power series]]_, this is called
_[[formal deformation quantization]]_. The resulting "infinitesimally quantized" [[field theory]] is called
_[[perturbative quantum field theory]]_.

For [[interaction|interacting]] [[field theories]] in [[spacetime]] dimension $p+1 \geq 3+1$
their quantization has been constructed to date only in [[perturbation theory]] this way.
The construction of full [[non-perturbative quantum field theory]] (in dimension $\geq 3+1$ with
non-vanishing [[interaction]]) is, at the time of this writing, a wide open problem.

But [[perturbative quantum field theory]] is well understood. This we turn to next...


(...)

Let $V$ be a [[vector space]] of [[finite number|finite]] [[dimension]] and let $\omega \in V \otimes V$ be an element of the [[tensor product]] (not necessarily skew symmetric at the moment).

We may canonically regard $V$ as a [[smooth manifold]], in which case $\omega$ is canonically regarded as a constant rank-2 [[tensor]]. As such it has a canonical [[action]] by forming [[derivatives]] on the tensor product of the space of [[smooth functions]]:

$$
  \omega
  \;\colon\;
  C^\infty(V) \otimes C^\infty(V)
  \longrightarrow
  C^\infty(V) \otimes C^\infty(V)
  \,.
$$

If $\{\partial_i\}$ is a [[linear basis]] for $V$, identified, as before, with a basis for $\Gamma(T V)$, then in this basis this operation reads

$$
  \omega(f \otimes g)
  \;=\;
  \omega^{i j}
  (\partial_i f) \otimes (\partial_j g)
  \,,
$$

where $\partial_i f \coloneqq \frac{\partial f}{\partial x^i}$ denotes the [[partial derivative]] of the [[smooth function]] $f$ along the $i$th [[coordinate]], and where we use the [[Einstein summation convention]].

For emphasis we write

$$
  \array{
    C^\infty(V) \otimes C^\infty(V)
      &\overset{prod}{\longrightarrow}&
    C^\infty(V)
    \\
    f \otimes g &\mapsto& f \cdot g
  }
$$

for the pointwise product of smooth functions.


+-- {: .num_defn #StarPoduct}
###### Definition
**([[star product]] induced by constant rank-2 tensor)**

Given $(V,\omega)$ as above, then the _[[star product]]_ induced by $\omega$ on the [[formal power series algebra]] $C^\infty(V) [ [\hbar] ]$ in a formal variable $\hbar$ ("[[Planck's constant]]") with [[coefficients]] in the [[smooth functions]] on $V$ is the linear map

$$
  (-) \star_\omega (-)
  \;\colon\;
  C^\infty(V)[ [ \hbar ] ] \otimes C^\infty(V)[ [ \hbar ] ]
    \longrightarrow
  C^\infty(V)[ [\hbar] ]
$$

given by

$$
  (-) \star_\omega (-)
  \;\coloneqq\;
  prod
    \circ \exp\left(
       \hbar \omega^{i j} \partial_i \otimes \partial_j
  \right)
$$

Hence

$$
  f \star_\omega g
  \;\coloneqq\;
  1
  +
  \hbar \omega^{i j}
  \frac{\partial f}{\partial x^i} \cdot \frac{\partial g}{\partial x^j}
  +
  \hbar^2
  \tfrac{ 1 }{2}
  \omega^{i j}
  \omega^{k l}
  \frac{\partial^2 f}{\partial x^{i} \partial x^{k}}
    \cdot
  \frac{\partial^2 g}{\partial x^{j} \partial x^{l}}
  +
  \cdots
  \,.
$$


=--


+-- {: .num_prop #AssociativeAndUnitalStarProduct}
###### Proposition
**([[star product]] is [[associativity|associative]] and [[unitality|unital]])**

Given $(V,\omega)$ as above, then the star product
$(-) \star_\omega (-)$ from def. \ref{StarPoduct}
is [[associativity|associative]] and [[unitality|unital]]
with unit the [[constant function]] $1 \in C^\infty(V) \hookrightarrow C^\infty(V)[ [ \hbar ] ]$.

Hence the [[vector space]] $C^\infty(V)$ equipped with the star product $\omega$ is a [[unital algebra|unital]] [[associative algebra]].

=--


+-- {: .proof}
###### Proof

Observe that the [[product rule]] of [[differentiation]] says that

$$
  \partial_i \circ prod
    =
   prod \circ ( \partial_i \otimes id \;+\; id \otimes \partial_i  )
  \,.
$$

Using this we compute as follows:

$$
  \begin{aligned}
  (f \star_\omega  g) \star_\omega h
  & =
  prod \circ
  \exp( \omega^{i j} \partial_i \otimes \partial_j )  \circ
  \left(
    \left( prod \circ \exp( \omega^{k l} \partial_k \otimes \partial_l ) \right) \otimes id
  \right)
  (f \otimes g \otimes g)
  \\
  & =
  prod \circ
  \exp( \omega^{i j} \partial_i \otimes \partial_j ) \circ
  (prod \otimes id)
  \circ
  \left(
    \exp( \omega^{k l} \partial_k \otimes \partial_l )  \otimes id
  \right)
  (f \otimes g \otimes g)
  \\
  & =
  prod \circ
  (prod \otimes id) \circ
  \exp( \omega^{i j}  ( \partial_i \otimes id \otimes \partial_j +id \otimes \partial_i \otimes \partial_j   )
  \circ
  \exp( \omega^{k l} \partial_k \otimes \partial_l )  \otimes id
  (f \otimes g \otimes g)
  \\
  & =
  prod \circ
  (prod \otimes id) \circ
  \exp( \omega^{i j}   \partial_i \otimes id \otimes \partial_j   )
  \circ
  \exp( \omega^{i j}  id \otimes \partial_i \otimes \partial_j )
  \circ
  \exp( \omega^{k l} \partial_k \otimes \partial_l \otimes id )
  (f \otimes g \otimes g)
  \\
  & =
  prod_3
  \circ
  \exp( \omega^{i j} ( \partial_i \otimes \partial_j \otimes id  +  \partial_i \otimes id \otimes \partial_j + id \otimes \partial_i \otimes \partial_j)   )
  \end{aligned}
$$

In the last line we used that the ordinary pointwise product of functions is associative, and wrote $prod_3 \colon C^\infty(V) \otimes C^\infty(V) \otimes C^\infty(V) \to C^\infty(V)$ for the unique pointwise product of three functions.

The last expression above is manifestly independent of the choice of order of the arguments in the triple star product, and hence it is clear that an analogous computation yields

$$
  \cdots = f \star_\omega (g \star_\omega h)
  \,.
$$

=--



+-- {: .num_prop #SymmetricContribution}
###### Proposition
**(shift by symmetric contribution is [[isomorphism]] of [[star products]])**

Let $V$ be a vector space, $\omega \in V \otimes V$ a rank-2 [[tensor]] and $\alpha \in Sym(V \otimes V)$ a _symmetric_ rank-2 tensor.

Then the linear map

$$
  \array{
    C^\infty(V)
     &\overset{\exp\left(-\hbar\tfrac{1}{2}\alpha \right)}{\longrightarrow}&
    C^\infty(V)
    \\
    f &\mapsto& \exp\left( -\hbar\tfrac{1}{2}\alpha^{i j} \partial_i \partial_j \right) f
  }
$$

constitutes an [[isomorphism]] of star product algebras (prop. \ref{AssociativeAndUnitalStarProduct}) of the form

$$
  \exp\left(-\hbar\tfrac{1}{2}\alpha \right)
   \;\colon\;
  (C^\infty(V)[ [\hbar] ], \star_\omega)
    \overset{\simeq}{\longrightarrow}
  (C^\infty(V))[ [\hbar] ], \star_{\omega + \alpha})
  \,,
$$

hence identifying the star product induced from $\omega$ with that induced from $\omega + \alpha$.

In particular every star product algebra $(C^\infty(V)[ [\hbar] ],\star_\omega)$ is isomorphic to a Moyal star product algebra $\star_{\tfrac{1}{2}\pi}$ (example \ref{MoyalStarProduct}) with $\tfrac{1}{2}\pi^{i j} \tfrac{1}{2}(\omega^{i j} - \omega^{j i})$ the skew-symmetric part of $\omega$, this isomorphism being exhibited by $\alpha^{i j} = - \tfrac{1}{2}(\omega^{i j} + \omega^{j i})$ (minus) the symmetric part.

=--


+-- {: .proof}
###### Proof

We need to show that

$$
  prod \circ
  \exp( \omega )
  \circ
  \left(
    \exp\left( -\tfrac{1}{2}\alpha\right)
    \otimes
    \exp\left( -\tfrac{1}{2}\alpha \right)
  \right)
  \;=\;
  \exp\left( -\tfrac{1}{2}\alpha \right)
  \circ
   prod \circ \exp( \omega )
  \,.
$$


To this end, observe that the [[product rule]] of [[differentiation]] applied twice in a row implies that

$$
  \partial_i \partial_j \circ prod
  \;=\;
  prod \circ
  \left(
     (\partial_i \partial_j)  \otimes id
     +
     id \otimes (\partial_i \partial_j)
     +
     \partial_i \otimes \partial_j
     +
     \partial_j \otimes \partial_i
  \right)
  \,.
$$

Using this we compute

$$
  \begin{aligned}
    \exp\left( - \hbar\tfrac{1}{2}\alpha^{i j} \partial_i \partial_j \right)
    \circ
    prod
    \circ
    \exp( \hbar \omega^{i j} \partial_{k} \otimes \partial_l )
    & =
    prod
      \circ
      \exp\left( - \hbar \tfrac{1}{2}\alpha^{i j}
         (\partial_i \partial_j) \otimes id
         +
         id \otimes (\partial_i \partial_j)
         +
         \partial_i \otimes \partial_j
         +
         \partial_j \otimes \partial_i
      \right)
      \circ
    \exp( \hbar \omega^{i j} \partial_{k} \otimes \partial_l )
    \\
    &
    =
    prod
    \circ
    \exp\left(
       \hbar (\omega^{i j} + \alpha^{i j}) \partial_i \otimes \partial_j
    \right)
    \circ
    \exp\left(
      - \hbar \tfrac{1}{2} \alpha^{i j} (\partial_i \partial_j) \otimes id
      - \hbar \tfrac{1}{2} \alpha^{i j} id \otimes (\partial_i \partial_j)
    \right)
    \\
    & =
    prod
    \circ
    \exp\left(
       \hbar (\omega^{i j} + \alpha^{i j}) \partial_i \otimes \partial_j
    \right)
    \circ
    \left(
      \exp(-\hbar \tfrac{1}{2}\alpha)
        \otimes
      \exp(-\hbar \tfrac{1}{2}\alpha)
    \right)
  \end{aligned}
$$

=--



Some examples of star products as in def. \ref{StarPoduct}:

+-- {: .num_example}
###### Example

If $\omega = 0$ in def. \ref{StarPoduct}, then the star product $\star_0 = \cdot$ is the plain pointwise product.

=--


+-- {: .num_prop #MoyalStarProduct}
###### Example
**([[Moyal star product]])**

If $\omega = \tfrac{1}{2}\pi$ in def. \ref{StarPoduct} is skew-symmetric, it may be regarded as a constant [[Poisson tensor]] $\pi$ on the smooth manifold $V$. In this case $\star_{\tfrac{1}{2}\pi}$ is called a _[[Moyal star product]]_ and the star-product algebra $C^\infty(V)[ [\hbar] ], \star_\pi)$ is called the _[[Moyal deformation quantization]]_ of the [[Poisson manifold]] $(V,\pi)$.

=--

(...)




$\,$

## Free quantum fields
 {#FreeQuantumFields}

We discuss here the [[quantum observables]] for the special case of
[[free field theories]] (def. \ref{FreeFieldTheory}). In [[perturbative quantum field theory]] this is the
basis of the construction of all [[interaction|interacting]] theories in the [[infinitesimal neighbourhood]]
of the [[free field theories]].


* _[Wick algebra and normal ordered products](#WickAlgebraAndNormalOrderedProducts)_




$\,$



$\,$

**[[Wick algebra]] and [[normal ordered products]]**
 {#WickAlgebraAndNormalOrderedProducts}

* [[Wick algebra]] and [[normal-ordered product]]

  $\mathcal{F}_{loc} \overset{:-:}{\longrightarrow} \mathcal{F}_{mc}[ [ \hbar ] ]$


(...)


To warm up, we first discuss how the [[star product]] (def. \ref{StarPoduct})
of a [[finite dimensional vector space]] equipped with [[almost Kähler manifold|almost Kähler structure]]
may be interpreted as "[[normal-ordered product]] for a single mode":


+-- {: .num_defn #AlmostKaehlerVectorSpace}
###### Definition
**(almost Kähler vector space)**

An _almost Kähler vector space_ is a [[complex vector space]] $V$ equipped with two [[bilinear forms]] $\sigma, h \;\colon\; V \otimes_{\mathbb{R}} V \longrightarrow \mathbb{R}$ such that with $V$ regarded as a [[smooth manifold]] and with $\sigma, g$ regarded as constant [[tensors]], then $(V,\sigma,h)$ is an [[almost Kähler manifold]].

=--

+-- {: .num_example #StandardAlmostKaehlerVectorSpaces}
###### Example
**(standard almost Kähler vector spaces)**

Let $V \coloneqq \mathbb{R}^2$ equipped with the [[complex structure]] given by the canonical identification $\mathbb{R}^2 \simeq \mathbb{C}$, let $\sigma \coloneqq \left( \array{0 & -1 \\ 1 & 0} \right)$ and $h \coloneqq \left( \array{ 1 & 0 \\ 0 & 1}  \right)$. Then $(V,\sigma,g)$ is an almost Kähler vector space (def. \ref{AlmostKaehlerVectorSpace}).

=--


+-- {: .num_defn #WickAlgebraOfAlmostKaehlerVectorSpace}
###### Definition
**(Wick algebra of an almost Kähler vector space)**

Let $(\mathbb{R}^{2n},\sigma, g)$ be an almost Kähler vector space (def. \ref{AlmostKaehlerVectorSpace}). Then its _Wick algebra_ is the [[formal power series]] vector space $\mathbb{C}[ [ a_1, a^\ast_1, \cdots, a_n, a^\ast_n  ] ] [ [ \hbar ] ]$ equipped with the [[star product]]

$$
  \begin{aligned}
    P_1 \star_\omega P_2
    & \coloneqq
    prod \circ \exp \left( \hbar\underoverset{k_1, k_2 = 1}{2 n}{\sum}\omega^{a b} \partial_a \otimes  \partial_b \right)  (P_1 \otimes P_2)
    \\
    & =
    P_1 \cdot P_2 + \hbar \underoverset{k_1, k_2 = 1}{2n}{\sum}\omega^{k_1 k_2}(\partial_{k_1} P_1) \cdot (\partial_{k_2} P_2)
    + \cdots
  \end{aligned}
$$

given by the bilinear form

$$
  \omega \coloneqq \tfrac{i}{2} \sigma + \tfrac{1}{2} g
  \,.
$$

Here

$$
  prod \;\colon\; \mathbb{C}[ [ a_1, a^\ast_1, \cdots, a_n, a^\ast_n  ] ] [ [ \hbar ] ]
  \otimes_{\mathbb{R}}
  \mathbb{C}[ [ a_1, a^\ast_1, \cdots, a_n, a^\ast_n  ] ] [ [ \hbar ] ]
   \longrightarrow
   \mathbb{C}[ [ a_1, a^\ast_1, \cdots, a_n, a^\ast_n  ] ] [ [ \hbar ] ]
$$

is the ordinary (commutative) product in the [[formal power series algebra]].

To make contact with the traditional notation we decorate the elements $P$ in the formal power series algebra with colons and declare the notation

$$
  : P_1 : \, :P_2:
  \;\coloneqq\;
  : P_1 \star_\omega P_2 :
$$

=--

+-- {: .num_example #WickAlgebraOfASingleMode}
###### Example
**([[Wick algebra]] of a single mode)**

Let $V \coloneqq \mathbb{R}^2 \simeq Span(\{x,y\})$ be a standard almost Kähler vector space according to example \ref{StandardAlmostKaehlerVectorSpaces}, with canonical coordinates denoted $x$ and $y$. We discuss its Wick algebra according to def. \ref{WickAlgebraOfAlmostKaehlerVectorSpace} and show that this reproduces the traditional definition of products of "normal ordered" operators.

To that end, consider the complex linear combination of the coordinates to the canonical complex coordinates $z \coloneqq x + i y$ and $\overline{z} \coloneqq x - i y$, which we suggestively write instead as

$$
  a \coloneqq \tfrac{1}{\sqrt{2}}(x + i y)
  \phantom{AAAA}
  a^\ast \coloneqq \tfrac{1}{\sqrt{2}}(x - i y)
$$

(with "$a$" the traditional symbol for the _amplitude_ of a field mode).

We find the value of the almost-Kähler forms on these elements to be

$$
  \begin{aligned}
    \sigma(a,a^\ast)
    & =
    \tfrac{1}{2} \sigma( (x + i y), (x - i y) )
    \\
    & =
    \tfrac{-i}{2}( \sigma(x,y) - \sigma(y,x) )
    \\
    & =
    - i
  \end{aligned}
$$

$$
  \begin{aligned}
    h(a, a^\ast)
    & =
    \tfrac{1}{2} h( (x + i y), (x - i y) )
    \\
    & =
    \tfrac{1}{2}(h(x,x) + h(y,y))
    \\
    & =
    1
  \end{aligned}
$$

$$
  \begin{aligned}
    \sigma(a,a)
    & =
    \sigma(a^\ast, a^\ast)
    \\
    & =
    0
    \phantom{AAAAAA} \text{by anti-symmetry}
  \end{aligned}
$$

$$
  \begin{aligned}
    h(a,a)
    & =
    \tfrac{1}{2}( h( (x + i y), (x + i y) ) )
    \\
    & =
    \tfrac{1}{2}( h(x,x) - h(y,y))
    \\
    & =
    0
  \end{aligned}
$$

$$
  \begin{aligned}
    h(a^\ast, a^\ast)
    & =
    \tfrac{1}{2}( h(x,x) - h(y,y) )
    \\
    & = 0
  \end{aligned}
$$

Using this, we find the [[star product]] as follows (where we write $(-)\cdot (-)$ for the plain commutative product in the [[formal power series algebra]]):

$$
  \begin{aligned}
    a \star_\omega a^\ast
    & =
    a \cdot a^\ast
    +
    \tfrac{\hbar}{2}
    \left(
       \underset{= 1}{\underbrace{i \sigma( a, a^\ast )}}
       +
       \underset{= 1}{\underbrace{h(a, a^\ast)}}
    \right)
    \\
    & =
    a^\ast \cdot a + \hbar
    \\
    \\
    a^\ast \star_\omega a
    & =
    a^\ast \cdot a
    +
    \tfrac{\hbar}{2}
    \left(
      \underset{= -1}{\underbrace{i \sigma( a^\ast , a )}}
      +
      \underset{ = 1}{\underbrace{h( a^\ast, a )}}
    \right)
    \\
    & =
    a^\ast \cdot a
    \\
    \\
    a \star_\omega a
     & =
    a \cdot a
    \\
    \\
    a^\ast \star_\omega a^\ast
    & =
    a^\ast \cdot a^\ast
  \end{aligned}
$$

These four cases are sufficient to see that in the star-product $P_1 \star_\omega P_2$ of general elements, we obtain correction term $\hbar$ to the ordinary commutative product precisely for every pair consisting  of a factor of $a$ in $P_1$ and a factor $a^\ast$ in $P_2$. This is exactly the "normal ordering" prescription.

=--


$\,$


Now to generalize this to the infinite dimensional case of [[free field theory]]:



+-- {: .num_defn #MicrocausalFunctionals}
###### Definition
**([[microcausal functionals]])**

Let $(X,g)$ be a [[globally hyperbolic spacetime]].

Write $\mathcal{F}_{mc} \subset \mathcal{F}_{dist}$ for the subalgebra of smooth functionals

$$
  C^\infty(X) \longrightarrow \mathbb{R}
$$

on the [[smooth space]] of smooth functions on $X$ which is generated from those [[distributions]] on some Cartesian product $X^n$ whose [[wave front set]] excludes those covectors to a point in $X^n$ all whose components are in the [[future cone]] or all whose components are in the [[past cone]].

=--

(After [[deformation quantization]] below, the [[distributions]] appearing in def. \ref{MicrocausalFunctionals} are the origin of "[[operator-valued distributions]]" in [[perturbative quantum field theory]]).


+-- {: .num_example }
###### Example
**(regular functionals are microcausal)**

Every regular functional is a [[microcausal functional]] (def. \ref{MicrocausalFunctionals}), since the [[wave front set]] of a distribution that is given by an ordinary function is empty:

$$
  \mathcal{F}_{reg} \subset \mathcal{F}_{mc}
  \,.
$$

=--

+-- {: .num_example}
###### Example
**([[adiabatic switching|adiabtaically switched]] point interactions are microcausal)**

Let $g \in C^\infty_c(X)$ be a [[bump function]], then for $n \in \mathbb{N}$ the smooth functional

$$
  \array{
    C^\infty(X) &\overset{}{\longrightarrow}& \mathbb{R}
    \\
    \phi &\mapsto& \int_X g(x) (\phi(x))^n dvol(x)
  }
$$

is a [[microcausal functional]] (def. \ref{MicrocausalFunctionals}).

If here we think of $\phi(x)^n$ as a point-[[interaction]] term (as for instance in [[phi^4 theory]]) then $g$ is to be thought of as an "[[adiabatic switching|adiabatically switched]]" [[coupling constant]]. These are the relevant interaction terms to be quantized via [[causal perturbation theory]].

=--

+-- {: .proof}
###### Proof

For notational convenience, consider the case $n = 2$, the other cases are directly analogous. The distribution in question is the [[delta distribution]]

$$
  \int_X g(x) \phi(x)^2 dvol(x)
  \;=\;
  \int_{X \times X} g(x_1) \phi(x_1) \phi(x_2) dvol(x_1) dvol(x_2)
  =
  \langle g \cdot \delta(-,-) , (\phi \circ pr_1)\cdot (\phi \circ pr_2)  \rangle_g
  \,.
$$

Now for $(x_1, x_2) \in X \times X$ and $\mathbb{R}^{2n} \simeq U \subset X \times X$ a [[chart]] around this point,  the [[Fourier transform]] of $g \cdot \delta(-,-)$ restricted to this chart is proportional to the Fourier transform $\hat g$ of $g$ evaluated at the sum of the two covectors:

$$
  \begin{aligned}
    (k_1, k_2)
      & \mapsto
     \int_{\mathbb{R}^{2n}} g(x_1) \delta(x_1, x_2) \exp( k_1 \cdot x_1 + k_2 \cdot x_2 ) dvol(x_1) dvol(x_2)
    \\
    & \propto \hat g(k_1 + k_2)
   \end{aligned}
  \,.
$$


Since $g$ is a plain [[bump function]], its Fourier transform $\hat g$ is quickly decaying (in the sense of wave front sets)  with $k_1 + k_2$ ([this prop.](wavefront+set#EmptyWaveFronSetCorrespondsToOrdinaryFunction)). Thus only on the cone $k_1 + k_2 = 0$ that function is in fact constant and in particular not decaying.


<div style="float:right;margin:0 10px 10px 0;">
<img src="https://ncatlab.org/nlab/files/WaveFrontSetOfDeltaDistributionInTwoVariables.png" width="200"/>
</div>

{#WaveFrontOfdeltaxy} This means that the wave front set consists of the element of the form $(x, (k, -k))$ with $k \neq 0$. Since $k$ and $-k$ are both in the [[future cone]] or both in the past cone precisely if $k = 0$, this situation is excluded in the wave front set and hence the distribution $g \cdot \delta(-,-)$ is microcausal.

> (graphics grabbed from [Khavkine-Moretti 14, p. 45](quasi-free+quantum+state#KhavkineMoretti14))

=--

This shows that microcausality in this case is related to conservation of momentum in th point interaction.

More generally:




+-- {: .num_prop #MoyalStarProductOnMicrocausal}
###### Proposition
**(Hadamard-Moyal star product on microcausal functionals)**

Let $(X,g)$ be a [[globally hyperbolic spacetime]], and let $\omega \in \mathcal{D}'(X \times X)$ be a [[Hadamard distribution]] (def. \ref{HadamardDistribution}) which is guaranteed to exist by prop. \ref{ExistenceOfHadamardDistributions}.

Then the [[star product]]

$$
  P_1 \star_\omega P_2
  \;\coloneqq\;
  prod
   \circ
  \exp\left(
    \int_{X^2} \hbar \omega(x_1, x_2) \frac{\delta}{\delta \phi(x_1)}
    \otimes \frac{\delta}{\delta \phi(x_2)} dvol_g
  \right)
  (P_1 \otimes P_2)
$$

on microcausal functionals $P_1, P_2 \in \mathcal{F}_{mc}$ is well defined in that the [[products of distributions]] that appear in expanding out the [[exponential]] are such that the sum of the [[wave front sets]] of the factors does not intersect the zero section.

=--

+-- {: .proof}
###### Proof

By definition of [[Hadamard distribution]], the [[wave front set]] of powers of $\omega$ has all cotangents on the first variables future pointing, and all those on the second variables past pointing. The first variables are integrated against those of $P_1$ and the second against $P_2$. By definition of microcausal functionals, the wave front sets of $P_1$ and $P_2$ are disjoint from the subsets where all components are future pointing or all components are past-pointing. Therefore the relevant sum of of the wave front covectors never vanishes.

See [Collini 16, p. 25-26](Hadamard+distribution#Collini16)

=--

+-- {: .num_defn #WickAlgebraOfFreeQuantumField}
###### Definition
**([[Wick algebra]] of [[free quantum field]])**

Let $(X,g)$ be a [[globally hyperbolic spacetime]] and let $\omega \in \mathcal{D}'(X \times X)$ be a [[Hadamard distribution]] (def. \ref{HadamardDistribution}) which is guaranteed to exist by prop. \ref{ExistenceOfHadamardDistributions}.

Then the _Wick algebra_ of [[quantum observables]] of the [[free field|free]] [[scalar field]] on $(X,g)$ is the space of [[microcausal functionals]] $\mathcal{F}_{mc}$ (def. \ref{MicrocausalFunctionals}) equipped with the Hadamard-Moyal [[star product]] from prop. \ref{MoyalStarProductOnMicrocausal}:

$$
  \mathcal{W}(X,\omega)
  \;\coloneqq\;
  \left(
    \mathcal{F}_{mc}, \star_\omega
  \right)
  \,.
$$

> need to quotient out ideal of elements in the image of $\Box_g + m^2$ to go on [[shell]]

=--


In [[Minkowski spacetime]] the [[Hadamard state]] is simply the usual [[vacuum state]] $\vert vac \rangle$, hence the [[Hadamard distribution]] is, as a [[generalized function]]

$$
  \omega(x,y) = \langle vac \vert \Phi(x) \Phi(y) \vert vac \rangle
  \,.
$$


Therefore the abstractly defined Wick algebra as in def. \ref{WickAlgebraOfFreeQuantumField} in this case satisfies the relation

$$
  \int_{X} f(x,y)  \;  :\Phi(x): \,  :\Phi(y): \; dvol_g
  \;=\;
  \int_X f(x,y) \left( :\Phi(x) \Phi(y): -  \langle vac \vert \Phi(x) \Phi(y) \vert vac \rangle \right)  \; dvol_g
  \,.
$$

This is the traditional expression for the normal ordered Wick product on Minkowski spacetime (e.g. [here](https://en.wikipedia.org/wiki/Normal_order#Free_fields)).


$\,$

## Scattering

We consider now the [[axioms]] for a perturbative S-matrix of a [[Lagrangian field theory]]
as used in  [[causal perturbation theory]] (def. \ref{PerturbativeSMatrixOnMinkowskiSpacetime} below).
Since, by definition, the S-matrix is a formal sum of multi-[[linear continuous functionals]],
it is convenient to impose axioms on these directly: this is the axiomatics for _[[time-ordered products]]_
in def. \ref{TimeOrderedProduct} below. That these latter axioms already imply the former
is the statement of prop. \ref{TimeOrderedProductInducesPerturbativeSMatrix} below. Its proof
requires a close look at the "reverse-time ordered products" for the inverse S-matrix (def. \ref{ReverseTimeOrderedProduct} below)
and their induced reverse-causal factorization (prop. \ref{ReverseCausalFactorizationOfReverseTimeOrderedProducts} below).

The axioms we consider here are just the bare minimum of [[causal perturbation theory]], sufficient to
imply that the induced perturbative [[quantum observables]]
organize into a [[causally local net of quantum observables]] (discussed [below](#QuantumObservables)).

In applications one considers further axioms, in particular compatibility of the S-matrix with
[[spacetime]] [[symmetry]]. This is needed for the proof of the [[main theorem of perturbative renormalization]]
(see [below](#Renormalization)).


+-- {: .num_defn #PerturbativeSMatrixOnMinkowskiSpacetime}
###### Definition
**([[perturbative S-matrix]])**

Let $\mathcal{W}$ be a [[Wick algebra]]
encoding the quantization of [[free fields]] in $E$, with

$$
  \mathcal{F}_{loc} \overset{:(-):}{\longrightarrow} \mathcal{W}
$$

the quantization map (def. \ref{CompactlySupportedPolynomialLocalDensities}).

Then a _Lagrangian S-matrix for fields of type $E$ perturbing the free fields encoded by $\mathcal{W}$_, is a [[functional]]

$$
  S
    \;\colon\;
  \mathcal{F}_{loc}\otimes ( \langle g,j\rangle  ) \longrightarrow \mathcal{W}[ [ g/\hbar, j/\hbar ] ]
$$

(on [[local observables]] (def. \ref{CompactlySupportedPolynomialLocalDensities})
times the coupling constant $g$ or source strength $j$
with values in the algebra of [[formal power series]] in the formal variables $g/\hbar$
and $j/\hbar$  in the given [[Wick algebra]])
such that the following conditions hold for fixed $L_{int}, \{ J_n\}_{n = 1}^N$:

1. (perturbation)

   There exist [[distributions]] ([[multilinear map|multi-]] [[linear continuous functionals]]) of the form

   $$
     T \;\colon\; (\mathcal{F}_{loc} \otimes ( \langle g,j \rangle ) )^{\otimes^k} \longrightarrow \mathcal{W}[ [ g/\hbar, j/\hbar ] ]
   $$

   for all $k \in \mathbb{N}$, such that:

   1. The unary operation is the quantization map

      $$
        T(L + A) = :L: + :A:
      $$

   1. The S-matrix is the [[exponential]] of "time-ordered products" in that  for $L, A  \in \mathcal{F}_{loc}$

      $$
        \begin{aligned}
          S( g L + j A )
          & =
          T\left( \exp_{\otimes}\left( \tfrac{1}{i \hbar} \left( g L + j A\right) \right) \right)
          \\
          & \coloneqq
          \underoverset{k = 0}{\infty}{\sum} \tfrac{1}{k!}
          \frac{1}{(i \hbar)^k}
          T(\underset{k\, \text{arguments}}{\underbrace{ (g L + j A) \cdots (g L + j A) }})
        \end{aligned}
      $$

1. (normalization)

   $$
     S(0) = 1
   $$

1. ([[causal additivity]])

  For all $J_1, J_2, L \in \mathcal{F}_{loc}$ we have

   $$
     \left( supp(J_1) \geq supp(J_2) \right)
     \;\; \Rightarrow \;\;
     \left(
       \underset{L \in \mathcal{F}_{loc}}{\forall}
       \left(
         S(L + J_1 + J_2)
         =
         S(L + J_1) S(L)^{-1} S(L + J_2)
       \right)
     \right)
     \,.
   $$

Given such perturbative $S$-matrix, then we say that the _[[generating function]]_
(for [[quantum observables]], see def. \ref{GeneratingFunctionsForCorrelationFunctions} below) that it induces is the functional

$$
  \label{GeneratingFunctionInducedFromSMatrix}
  Z
    \;\colon\;
  \mathcal{F}_{loc} \langle g \rangle
    \times
  \mathcal{F}_{loc} \langle j \rangle
    \longrightarrow
  \mathcal{W}[ [ g/\hbar] ][ [ j/\hbar ] ]
$$

given by

$$
  Z_{g_{sw}L_{int}}(j_{sw}A)
  \;\coloneqq\;
  S(g_{sw}L_{int})^{-1} S( g_{sw}L_{int} + j_{sw}A )
  \,.
$$


=--

Def. \ref{PerturbativeSMatrixOnMinkowskiSpacetime} is due to ([Epstein-Glaser 73 (1)](causal+perturbation+theory#EpsteinGlaser73))
(in view of prop. \ref{CausalLocalityOfThePerturbativeSMatrix} below), except that these authors
remain a little vague on the nature of the domain.
The domain $\mathcal{F}_{loc}$ is made explicit (in terms of axioms
for the [[time-ordered products]], see def. \ref{TimeOrderedProduct} below),
in ([Brunetti-Fredenhagen 99, section 3](S-matrix#BrunettiFredenhagen99), [DütschFredenhagen 04, appendix E](S-matrix#DuetschFredenhagen04),
[Hollands-Wald 04,  around (20)](S-matrix#HollandsWald04)); for review see ([Rejzner 16, around def. 6.7](perturbative+algebraic+quantum+field+theory#Rejzner16)).

+-- {: .num_remark}
###### Remark
**(further axioms)**

The list of axioms in def. \ref{PerturbativeSMatrixOnMinkowskiSpacetime},
similarly those for the [[time-ordered products]] below in def. \ref{TimeOrderedProduct}, is just the bare
minimum which implies that the corresponding [[quantum observables]]
organize into a [[causally local net]] (discussed [below](#CausalLocality)).
In applications such as in discussion of [[renormalization]] ([below](#Renormalization))
one considers further axioms, such a unitarity and compatibility with spacetime symmetry.

=--


+-- {: .num_remark #PerturbativeSMatrixInverse}
###### Remark
**(invertibility of the [[perturbative S-matrix]])**

The mutliplicative inverse $S(-)^{-1}$ of the perturbative S-matrix in def. \ref{PerturbativeSMatrixOnMinkowskiSpacetime}
always exists: By the axioms "perturbation" and "normalization" this follows with the usual formula
for the multiplicative inverse of [[formal power series]] that are non-vanishing in degree 0:

If we write

$$
  S(g L +  j A) \coloneqq 1 + D(g L + j A)
$$

then

$$
  \label{InfverseOfPerturbativeSMatrix}
  \begin{aligned}
    S(g L + j A)^{-1} &= (1 + D(j L + j A))^{-1}
    \\
    & =
    \underoverset{r = 0}{\infty}{\sum} (-D(g L + j A))^r
    \\
    & =
    \underoverset{r = 0}{\infty}{\sum} (1 - S(g L + j A))^r
    \,,
  \end{aligned}
$$

where the last sum does exist in $\mathcal{W}[ [ g/\hbar, j/\hbar] ]$ because by
the axiom "normalization"
$D(L)$ has vanishing coefficient in zeroth order, so that
only a finite sub-sum of the formal infinite sum contributes in each order.

=--


+-- {: .num_remark #InterpretationOfPerturbativeSMatrix}
###### Remark
**(intuitive interpretation of the [[perturbative S-matrix]] as a "[[path integral  ]]")**

In traditional informal discussion of [[perturbative quantum field theory]],
the [[S-matrix]] from def. \ref{PerturbativeSMatrixOnMinkowskiSpacetime} is thought of as a "[[path integral]]",
written

$$
  S\left(
    \tfrac{g}{\hbar} L_{int} + j
  \right)
  \;\overset{\text{not really!}}{=}\;
  \underset{\Phi \in \Gamma_\Sigma(E)_{asmpt}}{\int}
  \exp\left(
    \int_X
    \left(
      \tfrac{g}{i \hbar} L_{int}(\Phi) + j A(\Phi)
    \right)
  \right)  e^{\tfrac{1}{i \hbar}\int_X L_{free}(\Phi) }D[\Phi]
  \,,
$$

where the integration is thought to be over the [[space of field histories]] $\Gamma_\Sigma(E)_{asmpt}$
("field paths", example \ref{DiffeologicalSpaceOfFieldHistories})
which satisfy given asymptotic conditions at $x^0 \to \pm \infty$; and as these boundary conditions
vary the above is regarded as an integral kernel that defines the required operator in $\mathcal{W}$
(e.g. [Weinberg 95, around (9.3.10) and (9.4.1)](S-matrix#Weinberg95)).

Here the local density $g_{sw}L_{int}$ has the interpretation of an
[[interaction]] [[Lagrangian density]] $L_{int}$ [[adiabatic switching|adiabatically switched]] by a
spacetime-dependent [[coupling constant|coupling]] "constant",  and $j_{sw}$ has the interpretation of a [[source field]]  strength.

On the other hand, the [[kinetic action|kinetic]] or [[free field]] Lagrangian $L_{free}$, which in the
axiomatic description of def. \ref{PerturbativeSMatrixOnMinkowskiSpacetime} is implicit in the [[Wick algebra]]
$\mathcal{W}$ is interpreted as determining the would-be [[Gaussian integral|Gaussian measure]]
"$e^{\tfrac{1}{i \hbar}\int_X L_{free}(\Phi) }D[\Phi]$" for the [[path integral]].

Since this [[measure]] does not actually exist, in general (or is not known to exist),
we may instead think of the axioms for the [[S-matrix]] in def. \ref{PerturbativeSMatrixOnMinkowskiSpacetime} as rigorously _defining_
the [[path integral]], not as an actual [[integration]], but "[[synthetic mathematics|synthetically]]"
by characterizing the behaviour of the _result_ of the would-be integration.

See also remark \ref{InterpretationOfBogoliubovFormulaAsPathIntegral} below.

=--

Definition \ref{PerturbativeSMatrixOnMinkowskiSpacetime} suggests to focus on the
multilinear operations $T(...)$ which define the perturbative S-matix order-by-order:


+-- {: .num_defn #TimeOrderedProduct}
###### Definition
**([[time-ordered product]])**

Let $\mathcal{W}$ be a [[Wick algebra]]
encoding the quantization of [[free fields]] in $E$ (def. \ref{CompactlySupportedPolynomialLocalDensities}).

A _[[time-ordered product]]_ is a sequence of [[distributions]] ([[multilinear map|multi-]] [[linear continuous functionals]]) of the form

$$
  T_k \;\colon\; \mathcal{F}_{loc}^{\otimes^k} \longrightarrow \mathcal{W}[ [ g/\hbar ] ]
$$

for all $k \in \mathbb{N}$, such that:

1. (perturbation) $T_1(g L + j A) =  :g L: +  :j A:$

1. (normalization) $T_0 = 1$

1. (symmetry) each $T_k$ is symmetric in its arguments

1. ([[causal factorization]]) If $supp(L_1) \cup \cdots \cup supp(L_r) \;\geq\; supp(L_{r+1}) \cup \cdots \cup supp(L_k)$ then

   $$
     T((g L_1 + j A_1)  \cdots (g L_k + j A_k) )
       =
     T( (g L_1 + j A_1)  \cdots (g L_r + j A_r) )
     T( (g L_{r+1} + j A_{r+1})  \cdots ( g L_k + j A_{k} ) )
     \,.
   $$

=--

+-- {: .num_defn #NotationForTimeOrderedProductsAsGeneralizedFunctions}
###### Definition
**(notation for time-ordered products as [[generalized functions]])**

It will be convenient (as in [Epstein-Glaser 73](causal+perturbation+theory#EpsteinGlaser73)) to think of the time-ordered products, being [[operator-valued distributions]], as [[generalized functions]] with dependence on spacetime points:

$$
  \begin{aligned}
    & \int_{\Sigma^{r+s}}
      T_{L_1, \cdots, L_r, A_1, \cdots, A_s}(x_1, \cdots, x_{r}, y_1, \cdots, y_s)
      g_{sw,1}(x_1) \cdots g_{sw, r}(x_r)
      j_{sw,1}(y_1) \cdots j_{sw,s}(y_s)
    dvol_\Sigma(x_1, \cdots, x_r, y_1, \cdots, y_s)
    \\
    & \coloneqq
    T( g_{sw,1} L_1 \cdots g_{sw,k} L \cdot j_{sw,1} A_1 \cdots j_{sw,s}A_s )
  \end{aligned}
  \,.
$$

Moreover, the subscripts on these [[generalized functions]] will always be
clear from the context, so that in computations we will notationally suppress these.

Finally, due to the "symmetry" axiom in def. \ref{TimeOrderedProduct}, a time-ordered product
depends only on its [[set]] of arguments, not on the order of the arguments. We will write
$\mathbf{X} \coloneqq \{x_1, \cdots, x_r\}$ and $\mathbf{Y} \coloneqq \{y_1, \cdots y_r\}$
for sets of spacetime points, and hence abbreviate the expression for the "value" of the
generalized function in the above as $T(\mathbf{X}, \mathbf{Y})$ etc.

In this condensed notation the above reads

$$
    \int_{\Sigma^{r+s}}
      T(\mathbf{X}, \mathbf{Y})
      \,
      g_{sw,1}(x_1) \cdots g_{sw, r}(x_r)
      \,
      j_{sw,1}(y_1) \cdots j_{sw,s}(y_s)
    dvol_\Sigma(\mathbf{X},\mathbf{Y})
  \,.
$$

=--

This condensed notation turns out to be greatly simplify computations, as it absorbs all the "relative"
combinatorial prefactors:

+-- {: .num_example #ProductOfPerturbationSeriesInGenealizedFunctionNotation}
###### Example
**(product of perturbation series in generalized function notation)**

Let

$$
  U(g)
  =
  \underoverset{n = 0}{\infty}{\sum}
   \frac{1}{n!}
   \int U(x_1, \cdots, x_n)
   \,
   g(x_1) \cdots g(x_n) \, dvol
$$

and

$$
  V(g)
  =
  \underoverset{n = 0}{\infty}{\sum}
   \frac{1}{n!}
   \int V(x_1, \cdots, x_n)
   \,
   g(x_1) \cdots g(x_n) \, dvol
$$

be power series of distributions in formal power series in $g/\hbar$ as in def. \ref{NotationForTimeOrderedProductsAsGeneralizedFunctions}.
Then the product $W(g) \coloneqq U(g) V(g)$ with expansion

$$
  W(g)
  =
  \underoverset{n = 0}{\infty}{\sum}
   \frac{1}{n!}
   \int W(x_1, \cdots, x_n)
   \,
   g(x_1) \cdots g(x_n) \, dvol
$$

is given simply by

$$
  W(\mathbf{X})
    \;=\;
  \underset{\mathbf{I} \subset \mathbf{X}}{\sum} U(\mathbf{I}) V(\mathbf{X} \setminus \mathbf{I})
  \,.
$$

([Epstein-Glaser 73 (5)](causal+perturbation+theory#EpsteinGlaser73))

This is because for fixed cardinality ${\vert \mathbf{I} \vert} = n_1$
this sum over all subsets $\mathbf{I} \subset \mathbf{X}$ overcounts the sum over
partitions of the coordinates as $(x_1, \cdots x_{n_1}, x_{n_1 + 1}, \cdots x_n)$ precisely by the
[[binomial coefficient]] $\frac{n!}{n_1! (n - n_1) !}$. Here the factor of $n!$ cancels
against the "global" combinatorial prefactor in the above expansion of $W(g)$, while the remaining
factor $\frac{1}{n_1! (n - n_1) !}$ is just the "relative" combinatorial prefactor seen at total order $n$
when expanding the product $U(g)V(g)$.


=--



+-- {: .num_remark #TheTraditionalErrorThatLeadsToTheNotoriouDivergencies}
###### Remark
**(the traditional error that leads to the notorious divergencies)**

Naively it might seem that the time-ordered products of def. \ref{TimeOrderedProduct}
are given simply by multiplication with [[step functions]], in the notation as
generalized functions (def. \ref{NotationForTimeOrderedProductsAsGeneralizedFunctions}):

$$
  T(x_1, x_2)
  \overset{\text{no!}}{=}
  \theta(x_1^0 - x_2^0) T(x_1) T(x_2)
  +
  \theta(x_2^0 - x_1^0) T(x_2) T(x_1)
$$

etc. (for instance [Weinberg 95, p. 143, between (3.5.9) and (3.5.10)](#Weinberg95)).

This however is simply a mathematical error, in general: Both $T(-,-)$ as well as $\theta$
are [[distributions]] and their [[product of distributions]] is in general not defined.
The notorious "divergencies which plague quantum field theory" are the signature
of this ill defined operation.

On the other hand, when both distributions are restricted to the [[complement]] of the [[diagonal]]
(i.e. restricted away from $x_1 = x_2$) then the above expression happens to be well defined and does
solve the axioms for time-ordered products.

Hence what needs to be done to properly define the time-ordered product is to
choose an [[extension of distributions]] of the above expression from the complement of the
diagonal to the diagonal. Any such extension will produce time-ordered products.
There are in general several different such extensions. This freedom of choice is the freedom
of [[renormalization]]; or equivalently, by the [[main theorem of perturbative renormalization theory]],
this is the freedom of choosing "counter terms" for the local interaction. This we discuss below in
_[Feynman diagrams and (re-)normalization](#Renormalization)_.


=--

In order to prove that the axioms for time-ordered products do imply those for a perturbative S-matrix
(prop. \ref{TimeOrderedProductInducesPerturbativeSMatrix} below) we need to consider
the corresponding reverse-time ordere products:


+-- {: .num_defn #ReverseTimeOrderedProduct}
###### Definition
**(reverse-time ordered product)**

Given a time-ordered product $T = \{T_k\}_{k \in \mathbb{N}}$ (def. \ref{TimeOrderedProduct}),
its _reverse-time ordered product_

$$
  \overline{T}_k \;\colon\; \mathcal{F}_{loc}^{\otimes^k} \longrightarrow \mathcal{W}[ [ g/\hbar ] ]
$$

for $k \in \mathbb{N}$ is defined by

$$
  \overline{T}( L_1 \cdots L_n )
  \;\coloneqq\;
  \left\{
    \array{
      \underoverset{r = 1}{n}{\sum}
      (-1)^r
      \underset{\sigma \in Unshuffl(n,r)}{\sum}
      T( L_{\sigma(1)} \cdots L_{\sigma(k_1)} )
      \,
      T( L_{\sigma(k_1 + 1)} \cdots L_{\sigma(k_2)} )
      \cdots
      T( L_{\sigma(k_{r-1}+1)} \cdots L_{\sigma_{k_r}}  )
      &\vert& k \geq 1
      \\
      1 &\vert& k = 0
    }
  \right.
  \,,
$$

where the sum is over all [[unshuffles]] $\sigma$ of $(1 \leq \cdots \leq n)$ into $r$ non-empty
ordered subsequences. Alternatively, as a generalized function as in def. \ref{NotationForTimeOrderedProductsAsGeneralizedFunctions}, this reads

$$
  \overline{T}( \mathbf{X} )
  =
  \underoverset{r = 1}{{\vert \mathbf{X} \vert}}{\sum}
  (-1)^r
  \underset{ \array{
    \mathbf{I}_1, \cdots, \mathbf{I}_r \neq \emptyset
    \\
    \underset{j \neq k}{\forall}\left( \mathbf{I}_j \cap \mathbf{I}_k = \emptyset  \right)
    \\
    \mathbf{I}_1 \cup \cdots \cup \mathbf{I}_r = \mathbf{X}
  } }{\sum}  T( \mathbf{I}_1 ) \cdots T(\mathbf{I}_r)
$$

=--

(e.g. [Epstein-Glaser 73 (11)](causal+perturbation+theory#EpsteinGlaser73))

+-- {: .num_prop #ReverseTimOrderedProductsGiveReverseSMatrix}
###### Proposition
**(reverse-time ordered products express inverse S-matrix)**

Given a time-ordered products $T(-)$ (def. \ref{TimeOrderedProduct}), then the
corresponding reverse time-ordered product $\overline{T}(-)$ (def. \ref{ReverseTimeOrderedProduct})
expresses the [[inverse]] $S(-)^{-1}$ (according to remark \ref{PerturbativeSMatrixInverse}) of the corresponding
perturbative S-matrix $S(L) \coloneqq \underset{k \in \mathbb{N}}{\sum} \tfrac{1}{k!} T(\underset{k\,\text{args}}{\underbrace{L \cdots L}})$:

$$
  S(L)^{-1}
  =
  \underset{k \in \mathbb{N}}{\sum} \tfrac{1}{k!} \overline{T}( \underset{k \, \text{args}}{\underbrace{L \cdots L}} )
  \,.
$$

=--

+-- {: .proof}
###### Proof

By definition we have

$$
  \underset{k \in \mathbb{N}}{\sum}
    \tfrac{1}{k!}
    \overline{T}( \underset{k \, \text{args}}{\underbrace{L \cdots L}} )
  =
  \underset{ k \in \mathbb{N}}{\sum}
    \tfrac{1}{k!}
    \underoverset{r = 1}{k}{\sum}
    (-1)^r
    \underset{\sigma \in Unshuffl(k,r)}{\sum}
    T( L_{\sigma(1)} \cdots L_{\sigma(k_1)} )
    T( L_{\sigma(k_1 + 1)} \cdots L_{\sigma(k_2)} )
    \cdots
    T( L_{\sigma(k_{r-1}+1)} \cdots L_{\sigma_{k_r}} )
$$

where $\underset{k \in \{1 , \cdots, n\}}{\forall} L_k \coloneqq L$.

If instead of unshuffles (i.e. partitions into non-empty subsequences preserving the original order) we took
partitions into arbitrarily ordered subsequences,
we would be overcounting by the factorial of the length of the subsequences, and hence the
above may be equivalently written as:

$$
  \cdots
  =
  \underset{k \in \mathbb{N}}{\sum}
    \tfrac{1}{k!}
    \underoverset{r = 1}{k}{\sum}
    (-1)^r
    \underset{ {\sigma \in \Sigma(k)} \atop { { k_1 + \cdots + k_r = k } \atop { \underset{i}{\forall} (k_i \geq 1) } } }{\sum}
    \tfrac{1}{k_1!} \cdots \tfrac{1}{k_r !}
    \,
    T( L_{\sigma(1)} \cdots L_{\sigma(k_1)} )
    \,
    T( L_{\sigma(k_1 + 1)} \cdots L_{\sigma(k_2)} )
    \cdots
    T( L_{\sigma(k_{r-1}+1)} \cdots L_{\sigma_{k_r}} )
    \,,
$$

where $\Sigma(k)$ denotes the [[symmetric group]] (the collection of all [[permutations]] of $k$ elements).

Moreover, since all the $L_k$ are equal, the sum is in fact independent of $\sigma$, it only depends
on the length of the subsequences. Since there are $k!$ permutations of $k$ elements
the above reduces to

$$
  \begin{aligned}
    \cdots
    & =
    \underset{k \in \mathbb{N}}{\sum}
      \underoverset{r = 1}{k}{\sum}
      (-1)^r
      \underset{  k_1 + \cdots + k_r = k }{\sum}
      \tfrac{1}{k_1!} \cdots \tfrac{1}{k_r !}
      T( \underset{k_1 \, \text{factors}}{\underbrace{ L \cdots L }}  )
      T( \underset{k_2 \, \text{factors}}{\underbrace{ L \cdots L }}  )
      \cdots
      T( \underset{k_r \, \text{factors}}{\underbrace{ L \cdots L }}  )
    \\
    & =
      \underoverset{\infty}{r = 0}{\sum}
      \left(
        - \underoverset{k = 0}{\infty}{\sum} T ( \underset{k\,\text{factors}}{\underbrace{L \cdots L}}   )
      \right)^r
    \\
    & =
      S(L)^{-1}
      \,,
  \end{aligned}
$$

where in the last line we used (eq:InfverseOfPerturbativeSMatrix).


=--

In fact prop. \ref{ReverseTimOrderedProductsGiveReverseSMatrix} is a special case of the
following more general statement:

+-- {: .num_prop #InversionFormulaForTimeOrderedProducts}
###### Proposition
**(inversion relation for reverse-time ordered products)**

Let $\{T_k\}_{k \in \mathbb{N}}$ be [[time-ordered products]] according to def. \ref{TimeOrderedProduct}.
Then the reverse-time ordered products according to def. \ref{ReverseTimeOrderedProduct}
satisfies the following inversion relation for all $\mathbf{X} \neq \emptyset$
(in the condensed notation of def. \ref{NotationForTimeOrderedProductsAsGeneralizedFunctions})

$$
  \underset{\mathbf{J} \subset \mathbf{X}}{\sum}
    T(\mathbf{J}) \overline{T}(\mathbf{X} \setminus \mathbf{J})
  \;=\;
  0
$$

and

$$
  \underset{\mathbf{J} \subset \mathbf{X}}{\sum}
    \overline{T}(\mathbf{X} \setminus \mathbf{J})  T(\mathbf{J})
  \;=\;
  0
$$

=--

+-- {: .proof}
###### Proof

This is immediate from unwinding the definitions.


=--

+-- {: .num_prop #ReverseCausalFactorizationOfReverseTimeOrderedProducts}
###### Proposition
**(reverse [[causal factorization]] of reverse-time ordered products)**

Let $\{T_k\}_{k \in \mathbb{N}}$ be [[time-ordered products]] according to def. \ref{TimeOrderedProduct}.
Then the reverse-time ordered products according to def. \ref{ReverseTimeOrderedProduct} satisfies
reverse-[[causal factorization]].

=--

([Epstein-Glaser 73, around (15)](causal+perturbation+theory#EpsteinGlaser73))

+-- {: .proof}
###### Proof

In the condensed notation of def. \ref{NotationForTimeOrderedProductsAsGeneralizedFunctions},
we need to show that for $\mathbf{X} = \mathbf{P} \cup \mathbf{Q}$ with $\mathbf{P} \cap \mathbf{Q} = \emptyset$
then

$$
  \left(
    \mathbf{P} \geq \mathbf{Q}
  \right)
  \;\Rightarrow\;
  \left(
    \overline{T}(\mathbf{X})
     =
    \overline{T}(\mathbf{Q}) \overline{T}(\mathbf{P})
  \right)
  \,.
$$

We proceed by [[induction]]. If ${\vert \mathbf{X}\vert} = 1$ the statement is immediate.
So assume that the statement is true for sets of [[cardinality]] $n \geq 1$ and consider
$\mathbf{X}$ with ${\vert \mathbf{X}\vert} = n+1$.

We make free use of the condensed notation as in example \ref{ProductOfPerturbationSeriesInGenealizedFunctionNotation}.

From the formal inversion

$$
  \underset{\mathbf{J} \subset \mathbf{X}}{\sum} \overline{T}(\mathbf{J}) T(\mathbf{X}\setminus \mathbf{J})
  = 0
$$

(which uses the induction assumption that ${\vert \mathbf{X}\vert} \geq 1$) it follows that

$$
  \begin{aligned}
    \overline{T}(\mathbf{X})
      & =
    - \underset{ { \mathbf{J} \subset \mathbf{X} } \atop { \mathbf{J} \neq \mathbf{X} }  }{\sum}
     \overline{T}(\mathbf{J}) T( \mathbf{X} \setminus \mathbf{J} )
     \\
     & =
    - \underset{
        { \mathbf{J} \cup \mathbf{J}' = \mathbf{X} }
        \atop
        {
          { \mathbf{J} \cap \mathbf{J}' = \emptyset }
          \atop
          { \mathbf{J}' \neq \emptyset }
        }
     }{\sum}
     \overline{T}( \mathbf{Q} \cap \mathbf{J} )
     \overline{T}( \mathbf{P} \cap \mathbf{J} )
               T ( \mathbf{P} \cap ( \mathbf{J}' ) )
               T ( \mathbf{Q} \cap ( \mathbf{J}' ) )
     \\
     & =
    - \underset{
      { \mathbf{L} \cup \mathbf{L}' = \mathbf{Q} \,,\, \mathbf{L} \cap \mathbf{L}' = \emptyset }
      \atop
      { \mathbf{L}' \neq \emptyset }
    }{\sum}
     \overline{T}( \mathbf{L} )
     \underset{ = 0}{
       \underbrace{
         \left(
          \underset{
              \mathbf{K} \subset \mathbf{P}
           }{\sum}
           \overline{T}( \mathbf{K} ) T( \mathbf{P} \setminus \mathbf{K})
         \right)
       }
     }
     T(\mathbf{L'})
    -
    \overline{T}(\mathbf{Q})
    \underset{
      = - \overline{T}(\mathbf{P})
    }{
    \underbrace{
      \underset{
        {\mathbf{K} \subset \mathbf{P}}
        \atop
        { \mathbf{K} \neq \emptyset }
      }{\sum}
      \overline{T}(\mathbf{K})
                T (\mathbf{P} \setminus \mathbf{K} )
    }}
    \\
    & =
    \overline{T}(\mathbf{Q}) \overline{T}(\mathbf{P})
  \end{aligned}
   \,.
$$

Here

1. in the second line we used that $\mathbf{X} = \mathbf{Q} \sqcup \mathbf{P}$, together with the
causal factorization property of $T(-)$ (which holds by general assumption) and that of $\overline{T}(-)$
(which holds by the induction assumption, using that $\mathbf{J} \neq \mathbf{X}$ hence that
${\vert \mathbf{J}\vert} \lt {\vert \mathbf{X}\vert}$).

1. in the third line we decomposed the sum over $\mathbf{J}, \mathbf{J}' \subset \mathbf{X}$
into two sums over subsets of $\mathbf{Q}$ and $\mathbf{P}$:

   1. The first summand in the third line is the contribution where $\mathbf{J}'$ has a non-empty intersection with $\mathbf{Q}$. This makes $\mathbf{K}$ range without constraint, and therefore the sum in the middle vanishes, as indicated, as it is the contribution at order ${\vert \mathbf{Q}\vert}$ of the inversion formula from prop. \ref{InversionFormulaForTimeOrderedProducts}

   1. The second summand in the third line is the contribution where $\mathbf{J}'$ does not intersect $\mathbf{Q}$.
     Now the sum over $\mathbf{K}$ is the inversion formula from prop. \ref{InversionFormulaForTimeOrderedProducts} except for one term, and so it equals that term.

=--

Using these facts about the reverse-time ordered products,
we may finally prove that [[time-ordered products]] indeed do induced a perturbative S-matrix:

+-- {: .num_prop #TimeOrderedProductInducesPerturbativeSMatrix}
###### Proposition
**([[time-ordered products]] induce [[perturbative S-matrix]])**

Let $\{T_k\}_{k \in \mathbb{N}}$ be a system of [[time-ordered products]] according to def. \ref{TimeOrderedProduct}.
Then

$$
  \begin{aligned}
    S(-)
    & \coloneqq
    T \exp\left(
      \tfrac{1}{i \hbar}(-)
      \right)
    \\
    &
    \coloneqq \underset{k \in \mathbb{N}}{\sum} \tfrac{1}{(i \hbar)^k} \tfrac{1}{k!} T( \underset{k \, \text{factors}}{\underbrace{- \cdots -}} )
  \end{aligned}
$$

is indeed a perturbative S-matrix according to def. \ref{PerturbativeSMatrixOnMinkowskiSpacetime}.

=--

+-- {: .proof}
###### Proof

The axiom "perturbation" and "normalization" for the S-matrix are
immediate from the corresponding axioms of the time-ordered products.
What requires proof is that [[causal additivity]] of the S-matrix follows from
the causal factorization property of the time-ordered products.

Notice that also the simple causal factorization property of the S-matrix

$$
  (supp(g_{sw_1}L_1) \geq supp(g_{sw,}L_2))
    \;\Rightarrow\;
  \left(
    S(g_{sw,1}L_1 + g_{sw,2}L_2)
    =
    S(g_{sw,1}L_1) S(g_{sw,2}L_2)
  \right)
$$

is immediate from the time-ordering axiom of the time-ordered products.

But [[causal additivity]] is stronger. It is remarkable that this, too,
follows from just the time-ordering ([Epstein-Glaser 73, around (73)](causal+perturbation+theory#EpsteinGlaser73)):

To see this, first expand the
generating functional $Z$ (eq:GeneratingFunctionInducedFromSMatrix)  into
powers of $(g/\hbar)$ and $(j/\hbar)$

$$
  Z_{L}(L + A)
  \;=\;
  \underoverset{n,m = 0}{\infty}{\sum}
   \frac{1}{n! m!}
   R(  \underset{n\, \text{factors}}{\underbrace{L \cdots L}},  ( \underset{m \, \text{factors}}{ \underbrace{ A \cdots A } }  ) )
$$

and then compare order-by-order with the given time-ordered product $T$ and
its induced reverse-time ordered product (def. \ref{ReverseTimeOrderedProduct}) via prop. \ref{ReverseTimOrderedProductsGiveReverseSMatrix}.
(These $R(-,-)$ are also called the "generating [[retarded products]], discussed in their own right around def. \ref{RetardedProductFromPerturbativeSMatrix} below.)

In the condensed notation of
def. \ref{NotationForTimeOrderedProductsAsGeneralizedFunctions}
and its way of absorbing combinatorial prefactors as in example \ref{ProductOfPerturbationSeriesInGenealizedFunctionNotation}
this
yields at order $(g/\hbar)^{\vert \mathbf{Y}\vert} (j/\hbar)^{\vert \mathbf{X}\vert}$ the coefficient

$$
  \label{CoefficientOfgeneratingRetardedProduct}
  R(\mathbf{Y}, \mathbf{X})
   \;=\;
  \underset{\mathbf{I} \subset \mathbf{Y}}{\sum}
    \overline{T}(\mathbf{I})
    T( (\mathbf{Y} \setminus \mathbf{I}) , \mathbf{X} )
  \,.
$$

We claim now that the [[support of a distribution|support]] of $R$ is inside the subset for which
$\mathbf{Y}$ is in the [[causal past]] of $\mathbf{X}$. This will imply the claim, because by
multi-linearity of $R(-,-)$ it then follows that

$$
  \left(J_1 \geq J_2\right) \Rightarrow \left( Z_{L + J_1}(J_2) = Z_L(J_2) \right)
$$

and by prop. \ref{CausalLocalityOfThePerturbativeSMatrix} this is equivalent to [[causal additivity]] of the S-matrix.

It remains to prove the claim:

Consider $\mathbf{X}, \mathbf{Y} \subset \Sigma$ such that the subset $\mathbf{P} \subset \mathbf{Y}$
of points not in the past of $\mathbf{X}$ (def. \ref{CausalOrdering}), hence the maximal subset with

$$
  \mathbf{P} \geq \mathbf{X}
  \,,
$$

is non-empty. We need to show that in this case $R(\mathbf{Y}, \mathbf{X}) = 0$ (in the sense of generalized functions).

Write $\mathbf{Q} \coloneqq \mathbf{Y} \setminus \mathbf{P}$
for the complementary set of points, so that all points of $\mathbf{Q}$ are in the past of $\mathbf{X}$.
Notice that this implies that $\mathbf{P}$ is also not in the past of $\mathbf{Q}$:

$$
  \mathbf{P} \geq \mathbf{Q}
  \,.
$$

With this decomposition of $\mathbf{Y}$, the sum in (eq:CoefficientOfgeneratingRetardedProduct)
over subsets $\mathbf{I}$ of $\mathbf{Y}$ may be decomposed into a sum over
subsets $\mathbf{J}$ of $\mathbf{P}$ and $\mathbf{K}$ of $\mathbf{Q}$, respectively.
These subsets inherit the above causal ordering, so that by the causal factorization property of
$T(-)$ (def. \ref{TimeOrderedProduct}) and $\overline{T}(-)$ (prop. \ref{ReverseCausalFactorizationOfReverseTimeOrderedProducts})
the time-ordered and reverse time-ordered products
factor on these arguments:

$$
  \begin{aligned}
    R(\mathbf{Y}, \mathbf{X})
    & =
    \underset{ {\mathbf{J} \subset \mathbf{P}} \atop { \mathbf{K} \subset \mathbf{Q} } }{\sum}
     \,
     \overline{T}( \mathbf{J} \cup \mathbf{K} )
     T( (\mathbf{P} \setminus \mathbf{J}) \cup (\mathbf{Q} \setminus \mathbf{K}), \mathbf{X} )
     \\
     & =
     \underset{ {\mathbf{J} \subset \mathbf{P}} \atop { \mathbf{K} \subset \mathbf{Q} } }{\sum}
     \,
     \overline{T}( \mathbf{K} )
     \overline{T}( \mathbf{J} )
     T( \mathbf{P} \setminus \mathbf{J} )
     T( \mathbf{Q} \setminus \mathbf{K}, \mathbf{X} )
     \\
     & =
     \underset{ \mathbf{K} \subset \mathbf{Q} }{\sum}
     \overline{T}(\mathbf{K})
     \underset{= 0}{
     \underbrace{
     \left(
       \underset{\mathbf{J} \subset \mathbf{P}}{\sum}
       \overline{T}(\mathbf{J})
       T( \mathbf{P} \setminus \mathbf{J} )
     \right)
     }}
     T(\mathbf{Q} \setminus \mathbf{K}, \mathbf{X})
  \end{aligned}
  \,.
$$

Here the sub-sum in brackets vanishes by the inversion formula, prop. \ref{InversionFormulaForTimeOrderedProducts}.

=--

$\,$

## Quantum observables
 {#QuantumObservables}



A genuine local [[observable]] should depend on the values of the [[fields]] on some [[compact subset]]
of spacetime. Moreover, a perturbative [[quantum observable]] should be a [[power series]] in [[Planck's constant]] $\hbar$,
reducing to the corresponding classical observable at $\hbar = 0$. The perturbative S-matrix axiomatized [above](#PerturbativeSMatrixAndTimeOrderedProducts)
is neither localized in spacetime this way, nor is it a power series in $\hbar$ (it is a [[Laurent series]] in $\hbar$).
So it is not a local observable. But the actual [[quantum observables on interacting fields]] may be expressed in terms of the S-matrix
by [[Bogoliubov's formula]] (def. \ref{GeneratingFunctionsForCorrelationFunctions} below).

This formula is consistent in that it implies that local observables form a [[causally local net]]
as their spacetime support varies (this is prop. \ref{PerturbativeQuantumObservablesIsLocalnet} below).
(On deeper grounds, this formula
turns out to yield the [[formal deformation quantization|formal]] [[Fedosov deformation quantization]] of
the interacting field theory ([Collini 16](Fedosov+deformation+quantization#Collini16)).)


Namely a key consequence of the "[[causal additivity]]" axiom on the S-matrix in def. \ref{PerturbativeSMatrixOnMinkowskiSpacetime}
turns out to be that the perturbative [[quantum observables on interacting fields]] with compact spacetime support (def. \ref{GeneratingFunctionsForCorrelationFunctions})

1. depend on the [[adiabatic switching]] $g_{sw}$ of the [[interaction]] [[Lagrangian density]]
only up to _canonical_ unitary [[isomorphism]] (prop. \ref{CausalLocalityOfThePerturbativeSMatrix} below)

1. form a [[causal locality|causally]] [[local net of observables]] in the sense of the [[Haag-Kastler axioms]] as the spacetime localization varies (prop. \ref{PerturbativeQuantumObservablesIsLocalnet} below).

To the extent that a [[local net of observables]] may be regarded as _defining_ a [[quantum field theory]],
which is the claim of ([[perturbative AQFT|perturbative]]) [[AQFT]],
this proves that the perturbative S-matrices in [[causal perturbation theory]] as in def. \ref{PerturbativeSMatrixOnMinkowskiSpacetime}
indeed make sense, despite the involvement of [[adiabatic switching]] of the [[interaction]] [[Lagrangian density]]
which does not make physical sense when interpreted naively: In reality the interaction is of course not (for realistic [[theory (physics)|theories]] at least) "switched off" outside some bounded region of spacetime; but the result here shows that if we pretend that it does
then first of all we get consistent mathematical formulas and moreover we can then nevertheless compute the correct [[quantum observables]] that are localized in this spacetime region. But the [[local net of observables]] as the spacetime localization varies
is supposed to encode the full quantum field theory. Certainly any given [[experiment]] in practice probes a bounded spacetime
region, and hence the algebra of observables localized in this region is sufficient to compare the theory to experiment.


$\,$


+-- {: .num_defn #GeneratingFunctionsForCorrelationFunctions}
###### Definition
**(perturbative [[quantum observables on interacting fields]] via [[Bogoliubov's formula]])**

Let $S$ be a perturbative S-matrix as in def. \ref{PerturbativeSMatrixOnMinkowskiSpacetime},
and $g_{sw} L_{int} \in \mathcal{F}_{loc}\langle g\rangle$ an [[adiabatic switching|adiabatically switched]]
[[interaction]] [[Lagrangian density]].

Then for $A \in \mathcal{F}_{loc}$ a [[local observable]], the perturbative
[[quantum observable]] $\widehat{A}$ corresponding to $A$ is the [[operator-valued distribution]]

$$
  \widehat{A}
  \;\colon\;
  C^\infty_{cp}(\Sigma)
    \longrightarrow
  \mathcal{W}[ [ g ] ][ [ \hbar ] ]
$$

which is the [[derivative]] of the generating functional $Z$ ((eq:GeneratingFunctionInducedFromSMatrix) in def. \ref{PerturbativeSMatrixOnMinkowskiSpacetime}) at vanishing [[source field]]:

$$
  \widehat{A}(j)
    \;\coloneqq\;
  - i \hbar \frac{d}{d \epsilon} Z_{g_{sw} L_{int}}( \epsilon j  A)\vert_{\epsilon = 0}
  \,.
$$


=--

This definition of $\widehat{A}$ without the [[adiabatic switching]] $g_{sw}$ is originally due to [Bogoliubov-Shirkov 59](causal+perturbation+ theory#BogoliubovShirkov59), nowadays sometimes called _[[Bogoliubov's formula]]_ (e.g. [Rejzner 16 (6.12)](perturbative+algebraic+quantum+field+theory#Rejzner16)).
The version with adiabatic switching is due to ([Epstein-Glaser 73 around (74)](causal+perturbation+theory#EpsteinGlaser73)).
Review includes ([Dütsch-Fredenhagen 00, around (17)](S-matrix#DuetschFredenhagen00)).


+-- {: .num_remark #InterpretationOfBogoliubovFormulaAsPathIntegral}
###### Remark
**(intuitive interpretation of [[Bogoliubov's formula]] in terms of a "[[path integral]]")**

With the [[perturbative S-matrix]] intuitively thought of as a "[[path integral]] as in
remark \ref{InterpretationOfPerturbativeSMatrix}

$$
  S(\tfrac{g}{\hbar} L_{int} + j A)
    \;\overset{\text{not really!}}{=}\;
  \int
  \exp\left(
    \int_X
    \left(
      \tfrac{g}{i \hbar} L_{int}(\Phi) + j A(\Phi)
    \right)
  \right)  e^{\tfrac{1}{i \hbar}\int_X L_{free}(\Phi) }D[\Phi]
$$

the [[Bogoliubov formula]] in def. \ref{GeneratingFunctionsForCorrelationFunctions}
similarly would have the following heuristic interpretation:


$$
  \widehat A(j)
  \;\overset{\text{not really!}}{=}\;
  \frac{
    \int
    j A(\Phi)
    \exp\left(
      \int_X
      \left(
        \tfrac{g}{i \hbar} L_{int}(\Phi)
      \right)
    \right)  e^{\tfrac{1}{i \hbar}\int_X L_{free}(\Phi) }D[\Phi]
  }
  {
    \int
    \exp\left(
      \int_X
      \left(
        \tfrac{g}{i \hbar} L_{int}(\Phi)
      \right)
    \right)  e^{\tfrac{1}{i \hbar}\int_X L_{free}(\Phi) }D[\Phi]
  }
$$

If here we were to regard the expression

$$
  \mu(\Phi)
  \;\overset{\text{not really}}{\coloneqq}\;
  \frac{
    \exp\left(
      \int_X
      \left(
        \tfrac{g}{i \hbar} L_{int}(\Phi)
      \right)
    \right)  e^{\tfrac{1}{i \hbar}\int_X L_{free}(\Phi) }D[\Phi]
  }
  {
    \int
    \exp\left(
      \int_X
      \left(
        \tfrac{g}{i \hbar} L_{int}(\Phi)
      \right)
    \right)  e^{\tfrac{1}{i \hbar}\int_X L_{free}(\phi) }D[\phi]
  }
$$

as a "complex [[probability measure]]" on the [[space of field histories]] ("field paths"), then this formula
would express the [[expectation value]] of the functional $A$ under this measure:

$$
  \widehat{A}(j) \overset{\text{not really!}}{=} [j A]_{\mu} = \int j A(\Phi) \mu(\Phi)
  \,.
$$

=--

The power series coefficients of the [[quantum observables on interacting fields]]
are also called the _[[retarded products]]_. For the time being we mention these here
just for completeness:

+-- {: .num_defn #RetardedProductFromPerturbativeSMatrix}
###### Definition
**([[retarded products]] induced from perturbative S-matrix)**

It follows from the perturbation axiom in def. \ref{PerturbativeSMatrixOnMinkowskiSpacetime} that there is a system of [[continuous linear functionals]]

$$
  R
    \;\colon\;
  \left(\mathcal{F}_{loc}\langle g\rangle\right)^{\otimes^k}
    \otimes
  (\mathcal{F}_{loc})^{\otimes^l}
    \longrightarrow
  \mathcal{W}[ [ g/\hbar] ] [ [ j/\hbar] ]
$$

for all $k,l \in \mathbb{N}$ such that

$$
  Z_{g_{sw} L}(j_{sw} A)
  =
  \underset{k,l \in \mathbb{N}}{\sum} \frac{1}{k! l!}
  R(
    \underset{k \,\text{arguments}}{\underbrace{ g_{sw} L \cdots g_{sw} L } },
    \underset{l \; \text{arguments}}{\underbrace{ j_{sw} A \cdots j_{sw} A }}
  )
  \,.
$$

Similarly there is

$$
  R
    \;\colon\;
  \left(\mathcal{F}_{loc}\langle g \rangle\right)^{\otimes^k}
    \otimes
  \left(\mathcal{F}_{loc}\langle j \rangle\right)
    \longrightarrow
  \mathcal{W}[ [ g ] ] [ [ \hbar ] ]
$$

such that

$$
  \widehat{A}(h)
  =
  \underset{k \in \mathbb{N}}{\sum} \frac{1}{k!}
  r( \underset{k \,\text{arguments}}{\underbrace{g_{sw}L_{int} \cdots g_{sw}L_{int}}}, h A )
  \,.
$$

These are called the (generating) _[[retarded products]]_ ([Glaser-Lehmann-Zimmermann 57](retarded+product#GlaserLehmannZimmermann57), [Epstein-Glaser 73, section 8.1](causal+perturbation+theory#EpsteinGlaser73)).

=--

Direct axiomatization of the [[retarded products]] is due to ([Dütsch-Fredenhagen 04](retarded+product#DuetschFredenhagen04)),
see ([Collini 16, section 2.2](retarded+product#Collini16)).

$\,$

It is useful now to reformulate the [[causal additivity]]-property of the perturbative S-matrix
in terms of the generating functions / [[retarded products]]:

+-- {: .num_prop #CausalLocalityOfThePerturbativeSMatrix}
###### Proposition
**([[causal locality]] of the [[perturbative S-matrix]])**

Let $S$ be a perturbative S-matrix according to def. \ref{PerturbativeSMatrixOnMinkowskiSpacetime}
with $Z$ the generating functional (eq:GeneratingFunctionInducedFromSMatrix) it induces

1. The following conditions are equivalent for all $L, J_1, J_2 \in \mathcal{F}_{loc}$:

   1. $Z_L(J_1 + J_2) = Z_L(J_1) Z_L(J_2)$

   1. $Z_{L + J_1}(J_2) = Z_L(J_2)$

   1. $S(L + J_1 + J_2) = S(L + J_1) \, S(L)^{-1} \, S(L + J_2)$

   Hence causal additivity in def. \ref{PerturbativeSMatrixOnMinkowskiSpacetime}
implies that all these conditions hold if $supp(J_1) \geq supp(J_2)$.


1. If $supp(J_1)$ is [[spacelike]] separted from $supp(J_1)$, hence if the causal ordering (def \ref{CausalOrdering}) is
   $supp(J_1) \geq supp(J_2)$ and $supp(J_2) \geq supp(J_1)$ then

   $$
     Z_{L_{int}}(J_1) Z_{L_{int}}(J_2) = Z_{L_{int}}(J_2) J_{L_{int}}(J_1)
     \,.
   $$


   Similarly, if $supp(L_1) \geq supp(L_2)$ and $supp(L_2) \geq supp(L_1)$ then

   $$
     S(L_1) \, S(L_2) = S(L_2) \, S(L_1)
     \,.
   $$



1. If $L_1\vert_{O} = L_2\vert_{O}$ on a [[causally closed subset]] $O \subset \mathbb{R}^{d-1,1}$
then there exists an invertible $K \in \mathcal{W}[ [ g/\hbar] ]$ such that for all $J$ with $supp(J) \subset O$
   it relates $Z_{L_1}(J)$ to $Z_{L_2}(J)$ by [[conjugation]]:

   $$
     Z_{L_2}(J) = K^{-1} \, Z_{L_1}(J) \, K
     \,.
   $$

=--

+-- {: .proof}
###### Proof

The equivalence of the three conditions in the first statement is immediate from the definitions:

Expanding out the definition of $V$, the first expression is equivalent to

$$
  S(L)^{-1} S(L + J_1 + J_2)
    =
  S(L)^{-1} S(L +  J_1 ) S(L)^{-1} S(L + J_2)
  \,.
$$

Multiplying both sides of this equation by $S(L)$, shows that it is equivalent to the third clause.

Multiplying once more with $S(L + J_1)^{-1}$ this third equation is seen to be equivalent to

$$
  S(L + J_1)^{-1} S(L + J_1 + J_2) = S(L)^{-1} S(L + J_2)
$$

which is equivalently the second clause, by definition of $V$.

Now the first clause of the first item immediately implies the first clause of the second item.

Similarly, setting $L = 0$ and $J_1 = L_1$ and $J_2 = L_2$ in the third clause of the first item it
reduces to

$$
  \left(
    supp(L_1) \geq supp(L_2)
  \right)
   \;\Rightarrow\;
  S(L_1 + L_2)
  =
  S(L_1)S(L_2)
  \,.
$$

Hence if $supp(L_1) \geq supp(L_2)$ and $supp(L_2) \geq supp(L_1)$ then

$$
  S(L_1) S(L_2) = S(L_1 + L_2) = S(L_2 + L_1) = S(L_2) S(L_1)
  \,,
$$

which is the second clause of the second statement to be shown.


For the last statement, notice that by causal closure of
$O$ the difference $L_2 - L_2$, which by assumption has
$supp(L_2 - L_1) \in X \setminus O$,
may, according to lemma \ref{CausalPartition}, be written as

$$
  L_2 - L_1 = a + r
$$

such that their causal order (def. \ref{CausalOrdering}) is

$$
  supp(a) \geq supp(J) \geq supp(r)
$$

It follows with causal additivity and its equivalent formulations above that

$$
  \begin{aligned}
    Z_{L_2}(J)
      & =
    Z_{L_1 + a + r}(J)
    \\
      & =
    Z_{L_1 + r}(J)
    \\
      & =
    S(L_1 + r)^{-1} \, S(L_1 + r + J)
    \\
      & =
    S(L_1 + r)^{-1} \, S(J + L_1) \, S(L_1)^{-1} \, S(L_1 + r)
    \\
      & =
    S(L_1 + r)^{-1} \underset{= id}{\underbrace{S(L_1) S(L_1)^{-1}}} S(L_1 + J) \, S(L_1)^{-1} \, S(L_1 + r)
    \\
      & =
    Z_{L_1}(r)^{-1} \, Z_{L_1}(J) \, Z_{L_1}(r)
  \end{aligned}
$$

and hence the last statement holds for $K \coloneqq Z_{L_1}(r)$.

=--

We now use this fact (prop. \ref{CausalLocalityOfThePerturbativeSMatrix}) to neatly organize the
system of localized [[quantum observables on interacting fields]]:

+-- {: .num_defn #PerturbativeGeneratingLocalNetOfObservables}
###### Definition
**(system of perturbative generating [[algebras of observables]])**

Let $S$ be a perturbative S-matrix according to def. \ref{PerturbativeSMatrixOnMinkowskiSpacetime}
and let $L_{int} \in \Omega^{d,0}(E)$ be an [[interaction]] [[Lagrangian density]].


For $\mathcal{O} \subset \Sigma$ a [[causally closed subset]] of [[spacetime]]
(def. \ref{CausalComplementOfSubsetOfLorentzianManifold})
and for $g_{sw} \in Cutoffs(\mathcal{O})$ an [[adiabatic switching]] function (def. \ref{CutoffFunctions})
which is constant on a [[neighbourhood]] of $\mathcal{O}$, write

$$
  Gen_{g_{sw} L_{int}}(\mathcal{O})
   \coloneqq
  \left\langle
    Z_{g_{sw}L_{int}}(J) \;\vert\; supp(J) \subset \mathcal{O}
  \right\rangle
   \;\subset\;
  \mathcal{W}[ [ g/\hbar] ]
$$

for the smallest subalgebra of the [[Wick algebra]] which contains the
generating functions for correlation functions  (def. \ref{GeneratingFunctionsForCorrelationFunctions})
of the form $Z_{g_{sw}L_{int}}(J)$, for all those [[local observables]] $J \in \mathcal{F}_{loc}$ with $supp(J) \subset \mathcal{O}$.

Moreover, write

$$
  Gen_{L_{int}}(\mathcal{O})
    \;\subset\;
  \underset{g_{sw} \in Cutoffs(\mathcal{O})}{\prod} Gen_{g_{sw}L_{int}}(\mathcal{O})
$$

be the subalgebra of the [[Cartesian product]] of all these algebras as $g_{sw}$ ranges, which is generated by the
[[tuples]]

$$
  Z_{L_{int}}(J)
    \;\coloneqq\;
  \left(
     Z_{g_{sw}L_{int}} (J)
  \right)_{g_{sw} \in Cutoffs(\mathcal{O})}
$$

for $J$ with $supp(J) \subset \mathcal{O}$.

Finally, for $\mathcal{O}_1 \subset \mathcal{O}_2$ an inclusion of two [[causally closed subsets]], let

$$
  i_{\mathcal{O}_1, \mathcal{O}_2}
  \;\colon\;
  Gen_{L_{int}}(\mathcal{O}_1)
    \longrightarrow
  Gen_{L_{int}}(\mathcal{O}_2)
$$

be the algebra [[homomorphism]] which is given simply by restricting the index set of [[tuples]].

This construction defines a [[functor]]

$$
  Gen_{L_{int}} \;\colon\; CausClsdSubsets(\Sigma) \longrightarrow StarAlgebras
$$

from the [[poset]] of [[causally closed subsets]] of [[spacetime]] to the [[category]] of [[star algebras]].


=--

([Brunetti-Fredenhagen 99, (65)-(67)](S-matrix#BrunettiFredenhagen99))

+-- {: .num_remark}
###### Remark
**([[algebra of observables]] well defined up to canonical [[isomorphism]])**

By prop. \ref{CausalLocalityOfThePerturbativeSMatrix},
for every causally closed $\mathcal{O} \subset X$ and every $g_{sw} \in Cutoffs(\mathcal{O})$
the abstract algebra $Gen_{L_{int}}(\mathcal{O})$ from def. \ref{CausalLocalityOfThePerturbativeSMatrix}
is _canonically_ isomorphic to the subalgebra $Gen_{g_{sw}L_{int}}(\mathcal{O}) \subset \mathcal{W}[ [ g/\hbar ] ] $
of formal power series in the [[Wick algebra]].

Beware the slight subtlety in this statement:

The unitary elements $K$ in $\mathcal{W}[ [ g/\hbar] ]$ which exhibit the isomorphisms by [[conjugation]] are not
unique, since there are many choices of splittings $g_2 - g_1 = a + r$ in the proof of prop. \ref{CausalLocalityOfThePerturbativeSMatrix}.
But the induced isomorphisms between the algebras generated by the $Z_{L_{int}}(J)$ is independent
of this ambiguity, since, again by the proof of prop. \ref{CausalLocalityOfThePerturbativeSMatrix},
conjugation by each such $K$ gives the same result on the given generators: $Z_{g_1 L_{int}}(J) \mapsto Z_{g_2 L_{int}}(J)$.

=--

+-- {: .num_prop #GeneratingAlgebrasIsLocalNet}
###### Proposition
**(system of perturbative generating algebras is [[causally local net of observables]])**

Given a perturbative S-matrix according to def. \ref{PerturbativeSMatrixOnMinkowskiSpacetime}
and an interaction [[Lagrangian density]] $L_{int}$, then the system of generating algebras of observables $Gen_{L_{int}}$ (def. \ref{PerturbativeGeneratingLocalNetOfObservables})
is a [[causally local net of observables]] in that

1. (isotony) For every inclusion $\mathcal{O}_1 \subset \mathcal{O}_2$ of [[causally closed subsets]]
   the corresponding
   algebra homomorphism is a [[monomorphism]]

   $$
     i_{\mathcal{O}_1, \mathcal{O}_2}
     \;\colon\;
     Gen_{L_{int}}(\mathcal{O}_1) \hookrightarrow Gen_{L_{int}}(\mathcal{O}_2)
   $$

1. ([[causal locality]]) For $\mathcal{O}_1, \mathcal{O}_2 \subset X$ two [[causally closed subsets]]
   which are [[spacelike]] separated, in that their causal ordering (def. \ref{CausalOrdering}) satisfies

   $$
     \mathcal{O}_1 \geq \mathcal{O}_2
       \;\text{and}\;
     \mathcal{O}_2 \geq \mathcal{O}_1
   $$

   then for $\mathcal{O} \subset X$ any further causally closed subset which contains both

   $$
     \mathcal{O}_1 , \mathcal{O}_2 \subset \mathcal{O}
   $$

   then the corresponding images of the generating algebras of $\mathcal{O}_1$ and $\mathcal{O}_2$,
   respectively, commute with each other as subalgebras of the generating algebra of $\mathcal{O}$:

   $$
     \left[
       i_{\mathcal{O}_1,\mathcal{O}}(Gen_{L_{int}}(\mathcal{O}_1))
       \;,\;
       i_{\mathcal{O}_2,\mathcal{O}}(Gen_{L_{int}}(\mathcal{O}_2))
     \right]
     \;=\;
     0
     \;\;\;
     \in Gen_{L_{int}}(\mathcal{O})
     \,.
   $$


=--

([Dütsch-Fredenhagen 00, section 3](#DuetschFredenhagen00), following [Brunetti-Fredenhagen 99, section 8](S-matrix#BrunettiFredenhagen99),
[Il'in-Slavnov 78](S-matrix#IlinSlavnov78))

+-- {: .proof}
###### Proof

Isotony is immediate from the definition of the algebra homomorphisms in def. \ref{PerturbativeGeneratingLocalNetOfObservables}.

Causal locality of the system of observables follows from the causal additivity of the S-matrix,
by the first clause in the second statement of prop. \ref{CausalLocalityOfThePerturbativeSMatrix}.

=--

In the same kind of way as def. \ref{PerturbativeGeneratingLocalNetOfObservables} the actual net of algebra
of perturbative [[quantum observables]] (def. \ref{GeneratingFunctionsForCorrelationFunctions}) is defined:

+-- {: .num_defn #SystemOfAlgebrasOfQuantumObservables}
###### Definition
**(system of [[algebras of quantum observables]])**

Let $S$ be a perturbative S-matrix according to def. \ref{PerturbativeSMatrixOnMinkowskiSpacetime}
and let $L_{int} \in \Omega^{d,0}(E)$ be an [[interaction]] [[Lagrangian density]].


For $\mathcal{O} \subset \Sigma$ a [[causally closed subset]]
of [[spacetime]] (def. \ref{CausalComplementOfSubsetOfLorentzianManifold})
and for $g_{sw} \in Cutoffs(\mathcal{O})$ an compatible [[adiabatic switching]] function (def. \ref{CutoffFunctions}) write

$$
  Obs_{g_{sw} L_{int}}(\mathcal{O})
   \coloneqq
  \left\langle
     -i \frac{d}{d \epsilon} Z_{g_{sw}L_{int}}(\epsilon J)\vert_{\epsilon = 0} \;\vert\; supp(J) \subset \mathcal{O}
  \right\rangle
   \;\subset\;
  \mathcal{W}[ [ g ] ] [ [ \hbar ]  ]
$$

for the smallest subalgebra of the [[Wick algebra]] which contains the
perturbative [[quantum observables on interacting fields]]  (def. \ref{GeneratingFunctionsForCorrelationFunctions}) supported in $\mathcal{O}$.

Moreover, let

$$
  Obs_{L_{int}}(\mathcal{O})
    \subset
  \underset{g_{sw} \in Cutoffs(\mathcal{O})}{\prod} Obs_{g_{sw}L_{int}}(\mathcal{O})
$$

be the subalgebra of the [[Cartesian product]] of all these algebras as $g_{sw}$ ranges, which is generated by the
[[tuples]]

$$
  -i \hbar \frac{d}{d \epsilon} Z_{L_{int}}(\epsilon J)\vert_{\epsilon = 0}
    \;\coloneqq\;
  \left(
      - i \hbar \frac{d}{d \epsilon} Z_{g_{sw}L_{int}} (\epsilon J)\vert_{\epsilon = 0}
  \right)_{g_{sw} \in Cutoffs(\mathcal{O})}
$$

for $J$ with $supp(J) \subset \mathcal{O}$.

Finally, for $\mathcal{O}_1 \subset \mathcal{O}_2$ an inclusion of two [[causally closed subsets]], let

$$
  i_{\mathcal{O}_1, \mathcal{O}_2}
  \;\colon\;
  Obs_{L_{int}}(\mathcal{O}_1)
    \longrightarrow
  Obs_{L_{int}}(\mathcal{O}_2)
$$

be the algebra [[homomorphism]] which is given simply by restricting the index set of [[tuples]].

This construction defines a [[functor]]

$$
  Obs_{L_{int}} \;\colon\; CausClsdSubsets(\Sigma) \longrightarrow StarAlgebras
$$

from the [[poset]] of [[causally closed subsets]] in the [[spacetime]] $\Sigma$ to the [[category]] of [[star algebras]].

=--

As a corollary of prop. \ref{GeneratingAlgebrasIsLocalNet} we then have the key result:

+-- {: .num_prop #PerturbativeQuantumObservablesIsLocalnet}
###### Proposition
**(system of [[algebras of quantum observables|algebra of perturbative quantum observables]] is [[local net of observables]])**


Given a perturbative S-matrix according to def. \ref{PerturbativeSMatrixOnMinkowskiSpacetime}
and an interaction [[Lagrangian density]] $L_{int}$, then the system of [[algebras of observables]] $Obs_{L_{int}}$ (def. \ref{SystemOfAlgebrasOfQuantumObservables})
is a [[local net of observables]] in that

1. (isotony) For every inclusion $\mathcal{O}_1 \subset \mathcal{O}_2$ of [[causally closed subsets]]
   the corresponding algebra homomorphism is a [[monomorphism]]

   $$
     i_{\mathcal{O}_1, \mathcal{O}_2}
     \;\colon\;
     Obs_{L_{int}}(\mathcal{O}_1) \hookrightarrow Obs_{L_{int}}(\mathcal{O}_2)
   $$

1. ([[causal locality]]) For $\mathcal{O}_1, \mathcal{O}_2 \subset X$ two [[causally closed subsets]]
   which are [[spacelike]] separated, in that their causal ordering (def. \ref{CausalOrdering}) satisfies

   $$
     \mathcal{O}_1 \geq \mathcal{O}_2
       \;\text{and}\;
     \mathcal{O}_2 \geq \mathcal{O}_1
   $$

   then for $\mathcal{O} \subset X$ any further causally closed subset which contains both

   $$
     \mathcal{O}_1 , \mathcal{O}_2 \subset \mathcal{O}
   $$

   then the corresponding images of the generating algebras of $\mathcal{O}_1$ and $\mathcal{O}_2$,
   respectively, commute with each other as subalgebras of the generating algebra of $\mathcal{O}$:

   $$
     \left[
       i_{\mathcal{O}_1,\mathcal{O}}(Obs_{L_{int}}(\mathcal{O}_1))
       \;,\;
       i_{\mathcal{O}_2,\mathcal{O}}(Obs_{L_{int}}(\mathcal{O}_2))
     \right]
     \;=\;
     0
     \;\;\;
     \in Obs_{L_{int}}(\mathcal{O})
     \,.
   $$

=--

([Dütsch-Fredenhagen 00, below (17)](S-matrix#DuetschFredenhagen00), following [Brunetti-Fredenhagen 99, section 8](S-matrix#BrunettiFredenhagen99),
[Il'in-Slavnov 78](S-matrix#IlinSlavnov78))

+-- {: .proof}
###### Proof

The first point is again immediate from the definition (def. \ref{SystemOfAlgebrasOfQuantumObservables}).

For the second point it is sufficient to check the commutativity relation on generators. For these
the statement follows with prop. \ref{GeneratingAlgebrasIsLocalNet}:

$$
  \begin{aligned}
    \left[
      -i \frac{d}{d \epsilon_1} Z_{g_{sw}L_{int}}(\epsilon_1 J_1)\vert_{\epsilon_1 = 0}
      \;,\;
      -i  \frac{d}{d \epsilon_2} Z_{g_{sw}L_{int}}(\epsilon_2 J_2)\vert_{\epsilon_2 = 0}
    \right]
    &
    =
     -
     \frac{d}{d \epsilon_1}
     \frac{d}{d \epsilon_2}
     \underset{ = 0}{
     \underbrace{
    \left[
       Z_{g_{sw}L_{int}}(\epsilon_1 J_1)
      \;,\;
       Z_{g_{sw}L_{int}}(\epsilon_2 J_2)
    \right]}} \vert_{ {\epsilon_1 = 0} \atop {\epsilon_2 = 0}}
    \\
    & = 0
  \end{aligned}
$$

for $supp(J_1) \geq supp(J_2)$ and $supp(J_2) \geq supp(J_1)$.

=--


$\,$

## Feynman diagrams
 {#FeynmanDiagrams}

So far we considered only the [[axioms]] on a consistent perturbative S-matrix /[[time-ordered products]]
and its formal consequences. Now we discuss the actual construction of [[time-ordered products]],
hence of perturbative S-matrices, by the process called _[[renormalization]] of [[Feynman diagrams]]_.

We first discuss how [[time-ordered product]], and hence the perturbative S-matrix [above](#PerturbativeSMatrixAndTimeOrderedProducts),
is uniquely determined away from the locus where interaction points coincide (prop. \ref{TimeOrderedProductAwayFromDiagonal} below).
Moreover, we discuss how on that locus the time-ordered product is naturally expressed as a sum
of [[products of distributions]] of [[Feynman propagators]] that are labeled by [[Feynman diagrams]]: the _[[Feynman perturbation series]]_ (prop. \ref{FeynmanPerturbationSeriesAwayFromCoincidingPoints} below).

This means that the full  [[time-ordered product]] is an [[extension of distributions]] of these
_[[scattering amplitudes]]- to the locus of coinciding vertices. The space of possible such
extensions turns out to be finite-dimensional in each order of $g/\hbar, j/\hbar$, parameterizing the choice of
[[point-supported distributions]] at the interaction points whose [[degree of a distribution|scaling degree]]
is bounded by the given Feynman propagators.

+-- {: .num_defn #TuplesOfCompactlySupportedPolynomialLocalFunctionalsWithPairwiseDisjointSupport}
###### Definition

For $k \in \mathbb{N}$, write

$$
  \left(\mathcal{F}_{loc}\langle g,j\rangle\right)^{\otimes^k}_{pds}
  \hookrightarrow
  \left(\mathcal{F}_{loc}\langle g,j\rangle\right)^{\otimes^k}
$$

for the subspace of the $k$-fold [[tensor product]] of the space of compactly supported polynomial
local densities (def. \ref{CompactlySupportedPolynomialLocalDensities}) on those [[tuples]]
which have pairwise disjoint spacetime [[support]].

=--

+-- {: .num_prop #TimeOrderedProductAwayFromDiagonal}
###### Proposition
**([[time-ordered product]] away from the diagonal)**

Restricted to $\left(\mathcal{F}_{loc}\langle g,j\rangle\right)^{\otimes^k}_{pds}$
(def. \ref{TuplesOfCompactlySupportedPolynomialLocalFunctionalsWithPairwiseDisjointSupport})
there is a unique [[time-ordered product]] (def. \ref{TimeOrderedProduct}),
given by the [[star product]] that is induced by the [[Feynman propagator]] $\omega_F$

$$
  F \star_{\omega_F} G
  \;\coloneqq\;
  prod \circ
  \exp\left(
   \hbar
   \left\langle
     \omega_F , \frac{\delta}{\delta \phi} \otimes \frac{\delta}{\delta \phi}
   \right\rangle
  \right)
  (F \otimes G)
$$

in that

$$
  T( L_1 \cdots L_k )
  =
  L_1 \star_{\omega_F} L_2 \star_{\omega_F} \cdots \star_{\omega_F} L_k
  \,.
$$

=--

+-- {: .proof}
###### Proof

Since the [[singular support]] of the [[Feynman propagator]] is on the [[diagonal]],
and since the support of elements in $\left(\mathcal{F}_{loc}\langle g,j\rangle\right)^{\otimes^k}_{pds}$
is by definition in the complement of the diagonal, the star product $\star_{\omega_F}$ is well defined.
By construction it satisfies the axioms "peturbation" and "normalization" in def. \ref{TimeOrderedProduct}.
The only non-trivial point to check is that it indeed satisfies "[[causal factorization]]":

Unwinding the definition of the [[Hadamard state]] $\omega$ and the [[Feynman propagator]] $\omega_F$, we have

$$
  \begin{aligned}
    \omega & = \tfrac{i}{2}( \Delta_R - \Delta_A ) + H
    \\
    \omega_F & = \tfrac{i}{2}( \Delta_R + \Delta_A ) + H
  \end{aligned}
$$

where the propagators on the right have, in particular, the following properties:

1. the [[advanced propagator]] vanishes when its first argument is not in the causal past of its second argument:

   $$
     (supp(F) \geq supp(G))
     \;\Rightarrow\;
     \left(
       \left\langle \Delta_A , \frac{\delta F}{\delta \phi} \otimes \frac{\delta G}{\delta \phi}  \right\rangle = 0
     \right)
     \,.
   $$

1. the [[retarded propagator]] equals the [[advanced propagator]] with arguments switched:

   $$
     \left\langle \Delta_R , \frac{\delta F}{\delta \phi} \otimes \frac{\delta G}{\delta \phi} \right\rangle
       =
     \left\langle \Delta_A , \frac{\delta G}{\delta \phi} \otimes \frac{\delta F}{\delta \phi} \right\rangle
   $$

1. $H$ is symmetric:

   $$
     \left\langle H, \frac{\delta F}{\delta \phi} \otimes \frac{\delta G}{\delta \phi} \right\rangle
     =
     \left\langle H, \frac{\delta G}{\delta \phi} \otimes \frac{\delta F}{\delta \phi} \right\rangle
   $$

It follows for causal ordering $supp(F) \geq supp(G)$ (def. \ref{CausalOrdering}) that

$$
  \begin{aligned}
    F \star_{\omega_F} G
    & =
    prod \circ \exp\left(
      \hbar
      \left\langle  \omega_F , \frac{\delta }{\delta \phi} \otimes \frac{\delta}{\delta \phi}  \right\rangle
    \right)
    ( F \otimes G )
    \\
    & =
    prod \circ
    \exp\left(
      \hbar
      \left\langle  \tfrac{i}{2}( \Delta_R + \Delta_A ) + H  , \frac{\delta }{\delta \phi} \otimes \frac{\delta}{\delta \phi}  \right\rangle
    \right)
    ( F \otimes G )
    \\
    & =
    prod \circ
    \exp\left(
      \hbar
      \left\langle  \tfrac{i}{2}\Delta_R + H  , \frac{\delta }{\delta \phi} \otimes \frac{\delta}{\delta \phi}  \right\rangle
    \right)
    ( F \otimes G )
    \\
    & =
    prod \circ
    \exp\left(
      \hbar
      \left\langle  \tfrac{i}{2}( \Delta_R - \Delta_A ) + H  , \frac{\delta }{\delta \phi} \otimes \frac{\delta}{\delta \phi}  \right\rangle
    \right)
    ( F \otimes G )
    \\
    & =
    prod \circ
    \exp\left(
      \hbar
      \left\langle  \omega , \frac{\delta }{\delta \phi} \otimes \frac{\delta}{\delta \phi}  \right\rangle
    \right)
    ( F \otimes G )
    \\
    & =
    F \star_{\omega} G
  \end{aligned}
$$

and for $supp(G) \geq supp(F)$ that

$$
  \begin{aligned}
    F \star_{\omega_F} G
    & =
    prod \circ \exp\left(
      \hbar
      \left\langle  \omega_F , \frac{\delta }{\delta \phi} \otimes \frac{\delta}{\delta \phi}  \right\rangle
    \right)
    ( F \otimes G )
    \\
    & =
    prod \circ \exp\left(
      \hbar
      \left\langle  \tfrac{i}{2}( \Delta_R + \Delta_A ) + H  , \frac{\delta }{\delta \phi} \otimes \frac{\delta}{\delta \phi}  \right\rangle
    \right)
    ( F \otimes G )
    \\
    & =
    prod \circ \exp\left(
      \hbar
      \left\langle  \tfrac{i}{2} \Delta_A + H  , \frac{\delta }{\delta \phi} \otimes \frac{\delta}{\delta \phi}  \right\rangle
    \right)
    ( F \otimes G )
    \\
    & =
    prod \circ \exp\left(
      \hbar
      \left\langle  \tfrac{i}{2} \Delta_R + H  , \frac{\delta }{\delta \phi} \otimes \frac{\delta}{\delta \phi}  \right\rangle
    \right)
    ( G \otimes F )
    \\
    & =
    prod \circ \exp\left(
      \hbar
      \left\langle  \tfrac{i}{2} (\Delta_R - \Delta_A) + H  , \frac{\delta }{\delta \phi} \otimes \frac{\delta}{\delta \phi}  \right\rangle
    \right)
    ( G \otimes F )
    \\
    & =
    G \star_{\omega} F
    \,.
  \end{aligned}
$$

This shows that $\star_F$ is a consistent time-ordered product on the subspace of functionals
with disjoint support. It is immediate from the above that it is the unique solution on this subspace.

=--

+-- {: .num_remark #TimeOrderedProductAssociative}
###### Remark
**([[time-ordered product]] is [[associativity|assocativative]])**

Prop. \ref{TimeOrderedProductAwayFromDiagonal} implies in particular that the
time-ordered product is [[associativity|associative]], in that

$$
  T( T(V_1 \cdots V_{k_1}) \cdots T(V_{k_{n-1}+1} \cdots V_{k_n} ) )
  =
  T( V_1 \cdots V_{k_1} \cdots V_{k_{n-1}+1} \cdots V_{n_n} )
  \,.
$$

=--

It follows that the problem of constructing time-ordered products, and hence (by prop. \ref{TimeOrderedProductInducesPerturbativeSMatrix}) the
perturbative S-matrix, consists of finding compatible [[extension of distributions|extension]]
of the distribution
$ prod \circ \exp\left( \left\langle  \omega_F , \frac{\delta }{\delta \phi} \otimes \frac{\delta}{\delta \phi}  \right\rangle \right)$ to the diagonal.

Moreover, by the nature of the exponential expression, this means in each order to
extend [[product of distributions|products]] of Feynman propagators labeled by
[[graphs]] whose [[vertices]] correspond to the polynomial factors in $F$ and $G$ and whose
[[edges]] indicate over which variables the Feynman propagators are to be multiplied.


+-- {: .num_defn #ScalarFieldFeynmanDiagram}
###### Definition
**([[scalar field]] [[Feynman diagram]])**

A _[[scalar field]] [[Feynman diagram]]_ $\Gamma$ is

1. a [[natural number]] $v \in \mathcal{N}$ (number of [[vertices]]);

1. a $v$-[[tuple]] of elements $(V_r \in \mathcal{F}_{loc} \langle g,j\rangle)_{r \in \{1, \cdots, v\}}$ (the interaction and external field vertices)

1. for each $a \lt b \in \{1, \cdots, v\}$ a natural number $e_{a,b} \in \mathbb{N}$ ("of [[edges]] from the $a$th to the $b$th vertex").

For a given [[tuple]] $(V_j)$ of interaction vertices we write

$$
  FDiag_{(V_j)}
$$

for set of scalar field Feynman diagrams with that tuple of vertices.

=--

+-- {: .num_prop #FeynmanPerturbationSeriesAwayFromCoincidingPoints}
###### Proposition
**([[Feynman perturbation series]] away from coinciding vertices)**


For $v \in \mathbb{N}$ the $v$-fold
[[time-ordered product]] away from the diagonal,
given by prop. \ref{TimeOrderedProductAwayFromDiagonal}

$$
  T_v
    \;\colon\;
  \left(\mathcal{F}_{loc}\langle g,j\rangle\right)_{pds}^{\otimes^{v}}
    \longrightarrow
  \mathcal{W}[ [ g/\hbar, j/\hbar] ]
$$

is equal to

$$
  T_k(V_1 \cdots V_v)
    \;=\;
  prod
    \circ
  \underset{\Gamma \in \mathcal{G}_{(V_j)_{j = 1}^{v}}}{\sum}
  \underset{ r \lt s \in \{1, \cdots, v\} }{\prod}
  \tfrac{1}{e_{r,s}!}
  \left\langle
      \hbar \omega_F
      \,,\,
      \frac{\delta^{e_{r,s}}}{\delta \phi_r^{e_{r,s}}}
      \frac{\delta^{e_{r,s}}}{ \delta \phi_s^{e_{r,s}} }
  \right\rangle
  (V_1 \otimes \cdots \otimes V_v)
  \,,
$$

where the edge numbers $e_{r,s} = e_{r,s}(\Gamma)$ are those of the given Feynman diagram $\Gamma$.

=--

([Keller 10, IV.1](Feynman+diagram#Keller10))

+-- {: .proof}
###### Proof

We proceed by [[induction]] over the number of [[vertices]].
The statement is trivially true for a single vertex.
Assume it is true for $v \geq 1$ vertices. It follows that

$$
  \begin{aligned}
    T(V_1 \cdots V_v V_{v+1})
    & =
    T( T(V_1 \cdots V_v) V_{v+1} )
    \\
    &=
    prod \circ
    \exp\left(
      \left\langle
         \hbar \omega_F, \frac{\delta}{\delta \phi} \otimes \frac{\delta}{\delta \phi}
      \right\rangle
    \right)
    \left(
      prod
        \circ
      \underset{\Gamma \in \mathcal{G}_{(V_j)_{j = 1}^{v}}}{\sum}
      \underset{ r \gt s \in \{1, \cdots, v\} }{\prod}
      \frac{1}{e_{r,s}!}
      \left\langle
          \hbar \omega_F
          \,,\,
          \frac{\delta^{e_{r,s}}}{\delta \phi_r^{e_{r,s}}}
          \frac{\delta^{e_{r,s}}}{ \delta \phi_s^{e_{r,s}} }
      \right\rangle
      (V_1 \otimes \cdots \otimes V_v)
    \right)
    \;\otimes\;
    V_{v+1}
    \\
    & =
    prod
      \circ
    \underset{\Gamma \in \mathcal{G}_{(V_j)_{j = 1}^{v}}}{\sum}
      \underset{ r \gt s \in \{1, \cdots, v\} }{\prod}
      \tfrac{1}{e_{r,s}!}
    \left\langle
        \hbar \omega_F
        \,,\,
        \frac{\delta^{e_{r,s}}}{\delta \phi_r^{e_{r,s}}}
        \frac{\delta^{e_{r,s}}}{ \delta \phi_s^{e_{r,s}} }
    \right\rangle
    \left(
    \underset{e_{1,{v+1}}, \cdots e_{v,v+1} \in \mathbb{N}}{\sum}
      \underset{t \in \{1, \cdots v\}}{\prod}
      \tfrac{1}{e_{t,v+1} !}
    \left(
      \frac{\delta^{e_{1,v+1}} V_1 }{\delta \phi_{1}^{e_{1,v+1}}}
        \otimes
        \cdots
        \otimes
      \frac{ \delta^{e_{v,v+1}} V_v}{ \delta \phi_{v}^{e_{v,v+1}} }
    \right)
    \;\otimes\;
    \frac{\delta^{e_{1,v+1} + \cdots + e_{v,v+1}} V_{v+1}}{\delta \phi_{v-1}^{e_{1,v+1} + \cdots + e_{v,v+1}}}
    \right)
    \\
    &=
    prod
      \circ
    \underset{\Gamma \in \mathcal{G}_{(V_j)_{j = 1}^{v+1}}}{\sum}
    \underset{ r \lt s \in \{1, \cdots, v+1\} }{\prod}
    \tfrac{1}{e_{r,s}!}
    \left\langle
        \hbar \omega_F
        \,,\,
        \frac{\delta^{e_{r,s}}}{\delta \phi_r^{e_{r,s}}}
        \frac{\delta^{e_{r,s}}}{ \delta \phi_s^{e_{r,s}} }
    \right\rangle
    (V_1 \otimes \cdots \otimes V_{v+1})
  \end{aligned}
$$

Here in the first step we use the [[associativity]] of the time-ordered product
(remark \ref{TimeOrderedProductAssociative}), in the second step we use the induction assumption,
in the third we pass the outer functional derivatives through the pointwise product
using the [[product rule]], and in the fourth step we recognize that this amounts to summing
in addition over all possible choices of sets of edges from the first $v$ vertices to the new $v+1$st vertex,
which yield in total the sum over all diagrams with $v+1$ vertices.

=--


+-- {: .num_remark}
###### Remark
**([[loop order]] and powers of [[Planck's constant]])**

From prop. \ref{FeynmanPerturbationSeriesAwayFromCoincidingPoints} one deduces that the
order in [[Planck's constant]] that a ([[planar graph|planar]]) [[Feynman diagram]] contributes to the
S-matrix is given (up to a possible offset due to external vertices) by the "number of loops" in the diagram.


In the computation of [[scattering amplitudes]] for [[field (physics)|fields]]/[[particles]] via [[perturbative quantum field theory]] the [[scattering matrix]] ([[Feynman perturbation series]]) is a [[formal power series]] in (the [[coupling constant]] and) [[Planck's constant]] $\hbar$ whose contributions may be labeled by [[Feynman diagrams]]. Each Feynman diagram $\Gamma$ is a finite labeled [[graph]], and the order in $\hbar$ to which this graph contributes is

$$
  \hbar^{ E(\Gamma) - V(\Gamma) }
$$

where

1. $V(\Gamma) \in \mathbb{N}$ is the number of [[vertices]] of the graph

1. $E(\Gamma) \in \mathbb{N}$ is the number of [[edges]] in the graph.

This comes about, according to the above, because

1. the explicit $\hbar$-dependence of the [[S-matrix]] is

   $$
     S\left(\tfrac{g}{\hbar} L_{int} \right)
     =
     \underset{k \in \mathbb{N}}{\sum} \frac{g^k}{\hbar^k k!} T( \underset{k \, \text{factors}}{\underbrace{L_{int} \cdots L_{int}}} )
   $$

1. the further $\hbar$-dependence of the [[time-ordered product]] $T(\cdots)$ is

   $$
     T(L_{int} L_{int}) = prod \circ \exp\left( \hbar \int \omega_{F}(x,y) \frac{\delta}{\delta \phi(x)} \otimes \frac{\delta}{\delta \phi(y)}  \right) ( L_{int} \otimes L_{int} )
     \,,
   $$

where $\omega_F$ denotes the [[Feynman propagator]] and $\phi(x)$ the field observable at point $x$ (where we are notationally suppressing the internal degrees of freedom of the fields for simplicity, writing them as [[scalar fields]], because this is all that affects the counting of the $\hbar$ powers).

The resulting terms of the S-matrix series are thus labeled by

1. the number of factors of the [[interaction]] $L_{int}$, these are the [[vertices]] of the corresponding Feynman diagram and hence each contibute with $\hbar^{-1}$

1. the number of integrals over the Feynman propagator $\omega_F$, which correspond to the edges of the Feynman diagram, and each contribute with $\hbar^1$.

Now the formula for the [[Euler characteristic of planar graphs]] says that the number of regions in a plane that are encircled by edges, the _faces_ here thought of as the number of "loops", is

$$
  L(\Gamma) =  1 + E(\Gamma) - V(\Gamma)
  \,.
$$

Hence a planar Feynman diagram $\Gamma$ contributes with

$$
  \hbar^{L(\Gamma)-1}
  \,.
$$

So far this is the discussion for internal edges. An actual scattering matrix element is of the form

$$
  \langle \psi_{out} \vert S\left(\tfrac{g}{\hbar} L_{int} \right)
  \vert \psi_{in} \rangle
  \,,
$$

where

$$
  \vert \psi_{in}\rangle
    \propto
  \tfrac{1}{\sqrt{\hbar^{n_{in}}}}
  \phi^\dagger(k_1) \cdots \phi^\dagger(k_{n_{in}}) \vert vac \rangle
$$

is a state of $n_{in}$ free field quanta and similarly

$$
  \vert \psi_{out}\rangle
    \propto
  \tfrac{1}{\sqrt{\hbar^{n_{out}}}}
  \phi^\dagger(k_1) \cdots \phi^\dagger(k_{n_{out}}) \vert vac \rangle
$$

is a state of $n_{out}$ field quanta. The normalization of these states, in view of the commutation relation $[\phi(k), \phi^\dagger(q)] \propto \hbar$, yields the given powers of $\hbar$.

This means that an actual [[scattering amplitude]] given by a [[Feynman diagram]] $\Gamma$ with $E_{ext}(\Gamma)$ external vertices scales as

$$
  \hbar^{L(\Gamma) - 1 + E_{ext}(\Gamma)/2 }
  \,.
$$

(For the analogous discussion of the dependence on the actual [[quantum observables]] on $\hbar$ given by [[Bogoliubov's formula]], see [there](Bogoliubov's+formula#PowersInPlancksConstant).)



=--


$\,$

## Renormalization
 {#Renormalization}

[[renormalization]]

* [[extension of distributions]]

* [[main theorem of perturbative renormalization]]

...

$\,$

## Quantum Electrodynamics
 {#QED}

* [[quantum electrodynamics]]


* [[anomalous magnetic moment of the electron]]

(...)




$\,$


***

$\,$

$\,$


[[!redirects A first idea of quantum field theory]]
