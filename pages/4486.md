
+-- {: .rightHandSide}
+-- {: .toc .clickDown tabindex="0"}
### Context
#### Differential geometry
+-- {: .hide}
[[!include synthetic differential geometry - contents]]
=--
=--
=--

# Differentiable maps
* table of contents
{: toc}

## Idea

A map is *differentiable* at some point if it can be well approximated by a [[linear map]] near that point.  The approximating linear maps at different points together form the *derivative* of the map.

One can then ask whether the derivative itself is differentiable, and so on.  This leads to a hierarchy of ever more differentiable maps, starting with [[continuous maps]] and progressing through maps that are $n$ times (continuously) differentiable to those that are infinitely differentiable, and finally to those that are [[analytic map|analytic]].  Infinitely differentiable maps are sometimes called *smooth*.

Differentiability is first defined directly for maps between (open subsets of) [[Euclidean space]].  These differentiable maps can then be used to define the notion of [[differentiable manifold]], and then a more general notion of differentiable map *between* differentiable manifolds, forming a [[category].  We have a parallel hierarchy of ever more differentiable manifolds and ever more differentiable maps between them.  Since every more differentiable manifold has an [[underlying]] less differentiable manifold, we may always consider maps that are less differentiable than the manifolds between which they run.


## Definitions

### From Euclidean space to the real numbers

Let $f:U\to \mathbb{R}$ be a function, where $U\subseteq \mathbb{R}^n$ is an [[open subset]].  We say that $f$ is **differentiable** at $x\in U$ if there exists a [[linear map]] $d f_x : \mathbb{R}^n \to \mathbb{R}$ such that

$$ \lim_{h\to 0} \frac{f(x+h)-f(x) - d f_x(h)}{\Vert h\Vert} = 0. $$

We say that $f$ is __differentiable on__ a [[subset]] $I$ of $U$ if $f$ is differentiable at every $x\in U$, and __differentiable__ (tout court) if $f$ is differentiable on all of $U$.

The map $d f_x$ is called the **derivative** or **differential of $f$ at $x$**.  If $n=1$, as in classical one-variable calculus, then $d f_x$ can be identified with a number, and that number is also called the derivative of $f$ at $x$ and often written $f'(x)$.  (In that case, the notation $d f$ is generally still reserved for the corresponding linear map, with its input denoted by $d x$, so that we have $d f = f'(x) d x$.)

Note that $h\in \mathbb{R}^n$, so the limit as $h\to 0$ means that it approaches zero "from all directions at once".  More precisely, for any $\epsilon \gt 0$ there must be an [[open subset]] $V\subseteq U$ containing $x$ such that whenever $x+h\in V$ we have $\frac{f(x+h)-f(x) - d f_x(h)}{\Vert h\Vert} \lt \epsilon$.

An equivalent way to state this definition is to say that
$$ f(x+h) = f(x) + d f_x(h) + E(h){\Vert h\Vert} $$
where $E$ is a function such that $\lim_{h\to 0}E(h) = 0$.  This is easy to see; just let $E(h) = \frac{f(x+h)-f(x) - d f_x(h)}{\Vert h\Vert}$.

Another equivalent way to say it is that
$$ f(x+h) = f(x) + d f_x(h) + E_1(h) h_1 + \cdots + E_n(h) h_n $$
where $E_i$ are functions such that $\lim_{h\to 0}E_i(h) = 0$.  For if this is true, then $E(h) = \frac{1}{\Vert h\Vert}(E_1(h) h_1 + \cdots + E_n(h) h_n)$ satisfies the previous definition.  Conversely, if the previous definition holds, then defining $E_i(h) = \frac{h_i}{\Vert h \Vert} E(h)$ satisfies this definition.

### Partial and directional derivatives

A weaker notion of differentiability is the following: given any $v\in \mathbb{R}^n$, the **directional deriative** of $f:U\to \mathbb{R}$ at $x\in U$ in the direction of $v$ is the limit

$$ \lim_{h\to 0} \frac{f(x+h v}- f(x)}{h}$$

if this exists.  In this case, $h$ is just a real number.  If $v$ is a unit vector $e_i$, then the directional derivative is called a **[[partial derivative]]** with respect to the corresponding coordinate, and often written $\frac{\partial f}{\partial x_i}$ or $f_{x_i}$.

If $f$ is differentiable at $x$ in the above sense, then $d f_x(v)$ is its directional derivative along $v$.  In particular, the coordinates of $d f_x$ are the partial derivatives of $f$.

In general, $f$ may have all partial derivatives, and even all directional derivatives, without being differentiable; see the examples below.  However, if $f$ has all partial derivatives and they are *continuous* as functions of $x$, then in fact $f$ is differentiable.

### Maps between Euclidean spaces

For $U\subseteq \mathbb{R}^n$, a map $f:U\to \mathbb{R}^m$ is differentiable if each component $f_i : U \to \mathbb{R}$ is differentiable.  In this case, the derivatives of the $f_i$ assemble into a linear map $d f_x: \mathbb{R}^n \to \mathbb{R}^m$.

### Higher differentiability

For $f:U\to \mathbb{R}^m$, we can regard $d f$ as a function from a subset of $U$ (the points where $f$ is differentiable) to the space $L(\mathbb{R}^n,\mathbb{R}^m)$ of linear maps.  Since $L(\mathbb{R}^n,\mathbb{R}^m) \cong \mathbb{R}^{n m}$, we can then ask whether $d f$ is differentiable.

We can then iterate, obtaining the following hierarchy of differentiability.  Because differentiability by itself is not very useful, and a differentiable map is necessarily continuous, one generally included continuity of the last assumed derivatives.

* The map $f$ is __continuous__ or __$C^0$__ if it is a [[continuous map]] between underlying [[topological spaces]].  We begin with this since a differentiable map is necessarily continuous.

* The map $f$ is __continuously differentiable__ or __$C^1$__ on $U$ if it is differentiable at all points of $U$ and the resulting map $d f$ is [[continuous map|continuous]].  (At this point, if we generalize to infinite-dimensional spaces, we get a variety of notions of when the differential is 'continuous'; see [[continuously differentiable map]] for discussion.)

* The map $f$ is __twice differentiable__ if it is differentiable and its derivative $d f$ is differentiable.  A twice differentiable map must be continuously differentiable.  Similarly, $f$ is __twice continuously differentiable__ or __$C^2$__ if it is twice differentiable and the second derivative $d d f$ is continuous.

* By [[recursion]], $f$ is __$n + 1$ times differentiable__ if $f$ is $n$ times differentiable and the $n$th derivative of $f$ is differentiable.  Similarly, $f$ is __$n$ times continuously differentiable__ or __$C^n$__ if $f$ is $n$ times differentiable and the $n$th derivative of $f$ is continuous.

* The map $f$ is __[[smooth map|smooth]]__ or __infinitely differentiable__ or __$C^\infty$__ if it is $n$ times differentiable for all $n$, or equivalently if it is $C^n$ for all $n$.  (There is no difference between infinite differentiability and infinite continuous differentiability.)  One may also define this notion [[coinductive definition|coinductively]]: $f$ is infinitely differentiable if it is differentiable and its derivative $d f$ is infinitely differentiable.

* One step higher, we may ask whether $f$ is [[analytic function|analytic]] or $C^\omega$.

### For maps between manifolds

If $X$ and $Y$ are $C^k$-[[manifolds]], then we can define what it means for a map $f:X\to Y$ to be $n$ times differentiable, or $C^n$, for any $n\le k$, by asking that it yield such a map when restricted to any charts.  The most common case is when $X$ and $Y$ are smooth (infinitely differentiable) manifolds, so that we can define $C^n$ functions between them for all $n\le \infty$.  (Analytic manifolds, which are necessary in order to define analyticity of $f$, are somewhat rarer.)

A differentiable map between manifolds induces a map between their [[tangent bundles]] $d f : T X \to T Y$; this operation extends to a [[functor]] from $C^{k+1}$ manifolds and $C^{k+1}$ maps to $C^k$ manifolds and $C^k$ maps.  See [[differentiation]] for more.

## Examples

### Differentiability versus partial derivatives

The function $f:\mathbb{R}^2 \to \mathbb{R}$ defined by

$$ f(x,y) =
\begin{cases}
  \frac{y^3}{x^2+y^2} &\quad (x,y) \neq (0,0)\\
  0 &\quad (x,y) = (0,0)
\end{cases}
$$

is continuous everywhere, and has directional derivatives at $(0,0)$ in all directions, but is not differentiable at $(0,0)$.  Note that the directional derivative along the line $y=m x$ is $\frac{m^3}{1+m^2}$, which is not a linear function.

One may wonder whether existence of a linear map $d f_x$ is enough, but this is also not the case.  The function $f:\mathbb{R}^2 \to \mathbb{R}$ defined by

$$ f(x,y) = \begin{cases} \frac{y^3}{x} &\quad x\neq 0\\ 0 &\quad x=0 \end{cases} $$

has all directional derivatives at $(0,0)$ equaling $0$, so that in particular there is a linear map $d f_{(0,0)}$ whose values are the directional derivatives.  But it is not differentiable at $(0,0)$; in fact, it is not even continuous at $(0,0)$.  (Thus it also provides an example of a discontinuous function which has all directional derivatives.)

+--{: .query}
[[Mike Shulman]]: Is there a function that is continuous in a neighborhood of $(0,0)$ *and* has all directional derivatives there equaling $0$, but is not differentiable?
=--

### Differentiability versus continuity

Let $k$ be a [[natural number]], and consider the function
$$ f_k(x) \coloneqq x^k \sin(1/x) $$
from the [[real line]] to itself, with $f(0) \coloneqq 0$.  Away from $0$, $f_k$ is smooth (even analytic); but at $0$, $f_0$ is not continuous, $f_1$ is continuous but not differentiable, $f_2$ is differentiable but not continuously differentiable, and so on:
*  If $k = 2 n$ is even, then $f_k$ is differentiable $n$ times but not continuously differentiable $n$ times;
*  If $k = 2 n + 1$ is odd, then $f_k$ is continuously differentiable $n$ times but not differentiable $n + 1$ times.


## Related concepts

* [[extremum]]

* [[continuous function]], **differentiable function**, [[continuously differentiable function]], [[smooth function]], [[analytic function]]


[[!redirects differentiable map]]
[[!redirects differentiable maps]]
[[!redirects differentiable function]]
[[!redirects differentiable functions]]

[[!redirects twice differentiable map]]
[[!redirects twice differentiable maps]]
[[!redirects twice differentiable function]]
[[!redirects twice differentiable functions]]

[[!redirects C-n map]]
[[!redirects C-n maps]]
[[!redirects C-n function]]
[[!redirects C-n functions]]
[[!redirects C^n map]]
[[!redirects C^n maps]]
[[!redirects C^n function]]
[[!redirects C^n functions]]
[[!redirects C-k map]]
[[!redirects C-k maps]]
[[!redirects C-k function]]
[[!redirects C-k functions]]
[[!redirects C^k map]]
[[!redirects C^k maps]]
[[!redirects C^k function]]
[[!redirects C^k functions]]

[[!redirects derivative]]
[[!redirects derivatives]]
