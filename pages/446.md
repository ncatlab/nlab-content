
+-- {: .rightHandSide}
+-- {: .toc .clickDown tabindex="0"}
### Context
#### Category theory
+-- {: .hide}
[[!include category theory - contents]]
=--
=--
=--


#Contents#
* table of contents
{:toc}


## Idea ##

In [[category theory]], an _allegory_ is a [[category]] with properties meant to reflect the properties one expects of a category [[Rel]] of [[relations]]. The notion was first introduced (as far as we know) in the book _[[Categories, Allegories]]_ ([Freyd-Scedrov](#FreydScedrov)).

## Definition

An **allegory** is a [[(1,2)-category]] $A$ equipped with an [[involution]] $(-)^o \colon A^{op} \to A$ which is the identity on objects, such that

* each [[hom-object|hom-poset]] $A(x,y)$ has binary [[intersections]], and
* the *[[modular lattice|modular law]]* holds: for $\phi\colon x\to y$, $\psi\colon y\to z$, and $\chi\colon x\to z$, we have $\psi \phi \cap \chi \le \psi (\phi \cap \psi^o \chi)$. 

## Examples 

* If $C$ is a [[regular category]] and $Rel(C)$ is the [[locally posetal 2-category|locally posetal]]  [[bicategory]] of [[relations]], then $Rel(C)$ is an allegory. 

* Any [[first-order hyperdoctrine with equality]] similarly gives rise to an allegory, as does any abstract [[bicategory of relations]] in the sense of Carboni-Walters. 

* Any [[modular lattice]] can be regarded as a one-object allegory if we take composition to be union and the involution to be the identity. 

## Maps, tabulations, and units

A **map** in an allegory is a morphism that has a [[right adjoint]].

A **tabulation** of a morphism $\phi$ is a pair of maps $f,g$ such that $\phi = g^o f$ and $f^o f \cap g^o g = 1$.  An allegory is **tabular** if every morphism has a tabulation, and **pretabular** if every morphism is contained in one that has a tabulation.

Every [[regular category]], and indeed every [[locally regular category]], has a tabular allegory of internal binary relations.  Conversely, by restricting to the morphisms with left adjoints ("maps") in a tabular allegory, we obtain a locally regular category.  These constructions are inverse, so tabular allegories are equivalent to locally regular categories.

A locally regular category has finite products if and only if its tabular allegory of relations has top elements in its hom-posets.

Finally, a **unit** in an allegory is an object $U$ such that $1_U$ is the greatest morphism $U\to U$, and every object $X$ admits a morphism $\phi\colon X\to U$ such that $1_X\le \phi^o\phi$.  A locally regular category has a terminal object (hence is regular) if and only if its tabular allegory of relations has a unit.

Thus, regular categories are equivalent to unital (or unitary) tabular allegories.  For more details, see [[Categories, Allegories]], the [[Elephant]], or [[toddtrimble:Theory of units and tabulations in allegories]].


## Division allegories and power allegories 

A **division allegory** is an allegory in which every hom-poset is a [[lattice]] (not just a meet-semilattice), and for which composition on one (and therefore the other) side has a right adjoint (left or right division). That is: given $r \colon A \to B$ and $s \colon A \to C$, there exists $r/s \colon B \to C$ such that 

$$t \leq s/r \in \hom(B, C) \Leftrightarrow t \circ r \leq s \in \hom(A, C)$$ 

(so that $- \circ r$ has right adjoint $-/r$: an example of a right [[Kan extension]]). Composition on the other side, $r \circ -$, has a right adjoint (an example of a right Kan lift) given by 

$$r\backslash u \coloneqq (u^o/r^o)^o.$$ 

In the bicategory of sets and relations, with notation as above, we have 

$$(s/r)(b, c) \dashv \vdash \forall_{a \colon A} r(a, b) \Rightarrow s(a, c)$$

where $r(a, b)$ is shorthand for "$(a, b)$ belongs to $r$". 

The category of maps (functional relations) of a unitary/unital tabular division allegory is a [[logos]], and conversely the bicategory of relations in a logos is a unitary tabular division allegory. ([[Categories, Allegories]], 2.32, page 227.) 

A **power allegory** is an allegory $\mathcal{A}$ such that the inclusion functor $Map(\mathcal{A}) \to \mathcal{A}$ has a right adjoint $P$. The counit at an object $B$ may be written 

$$\ni_B \colon P(B) \to B$$ 

and we have the [[comprehension axiom]] that to each $r \colon A \to B$ there is a map $\chi_r \colon A \to P(B)$ such that $r = \ni_B \circ \chi_r$. 

In other language, a power allegory is a division allegory which associates to each object $B$ a morphism $\ni_B \colon P(B) \to B$ such that for all $r \colon A \to B$

* $1_A \leq (r \backslash \ni_B) \circ (\ni_B \backslash r)$ 

which expresses the truth of the formula $\forall_{a \colon A} \exists_{S: P(B)} \forall_{b \colon B} S \ni_B b \Leftrightarrow r(a, b)$, and 

* $(\ni_B \backslash \ni_B) \wedge (\ni_B \backslash \ni_B)^o \leq 1_{P(B)}$ 

which internalizes an axiom of extensionality, which reads $\forall_{b \colon B} (S \ni_B b) \Leftrightarrow (T \ni_B b) \vdash S = T$. Given those axioms, and given $r \colon A \to B$, one may define

$$\chi_r \coloneqq (\ni_B \backslash r) \wedge (r\backslash \ni_B)^o,$$ 

which internalizes the formula-definition $\chi_r(a, S) \coloneqq \forall_b S \ni_B b \Leftrightarrow r(a, b)$, and then show $\chi_r$ is a map. (See Categories, Allegories, pp. 235-236.) 

The bicategory of relations in a [[topos]] is a power allegory; conversely, the category of maps in a unitary tabular power allegory is a topos. 


## Related entries

Other attempted axiomatizations of the same idea "something that acts like the category of relations in a regular category" include:

* [[bicategory of relations]] (a special sort of [[cartesian bicategory]])

* [[1-category equipped with relations]]

Discussion of the relation between pretabular unitary allegories and bicategories of relations, and also between tabular unitary allegories and regular categories is in 

* [[toddtrimble:Theory of units and tabulations in allegories]]

## References

The standard monograph is 

* [[Peter Freyd]] and Andre Scedrov, _[[Categories, Allegories]]_, Mathematical Library Vol 39, North-Holland (1990). ISBN 978-0-444-70368-2.
 {#FreydScedrov}

The notion is discussed also in chapter A3 of

* [[Peter Johnstone]], _[[Sketches of an Elephant]]_

In

* [[Bob Walters]], _Categorical algebras of relations_ ([blog post](http://rfcwalters.blogspot.com/2009/10/categorical-algebras-of-relations.html) )

it is shown that any [[bicategory of relations]] is an allegory.

See also

* Wikipedia, _[Allegory](http://en.wikipedia.org/wiki/Allegory_%28category_theory%29)_


[[!redirects tabular allegory]]
[[!redirects union allegory]]
[[!redirects division allegory]]
[[!redirects power allegory]]

[[!redirects allegories]]
[[!redirects tabular allegories]]
[[!redirects union allegories]]
[[!redirects division allegories]]
[[!redirects power allegories]]
