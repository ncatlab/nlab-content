\tableofcontents

\section{Idea of a situs }

A _situs_ is a notion of generalised topological space, and 
 defined as a simplicial object of 
the [[category of filters|category of filters on sets]] 
or, equivalently, the category of finitely additive measures 
taking values 0 and 1 only, i.e. 
a simplicial set equipped, for each $n\geq 0$, 
with a filter, equiv. such a measure, 
on the set of $n$-simplices such that 
under any face or degeneration map the preimage of a large set is large. 
We denote the category of situses by s&#x12CB;.
Most of what we say below would also apply to the category $sM$ of _simplicial sets with finitely additive measures_ obtained by 
dropping the restriction that the measure takes only two values. 
With appropriate definitions, s&#x12CB; is a full subcategory of $sM$.


Intuitively, these filters(measures) are viewed 
as additional structure of topological nature on a simplicial set 
("the situs structure on a simplicial set")
giving a meaning to the phrase "a simplex is sufficiently small":
by definition, we say "a property holds for all small enough $n$-simplices"
iff it holds on a set in the filter, and we refer to sets 
in the filter as _neighbourhoods_. 
In particular, 
the situs structure "on a set" (i.e. on the simplicial set represented by the set) allows one to talk about an n-tuple of points 
being "sufficiently nearby each other" for $n\ge 2$.
This extends to simplicial language the standard intuition of topology 
available for  pairs of points (n=2):
given a topological structure on a set, the precise meaning of the phrase
"a property $P_{x_0}(x)$ holds for all points $x$ sufficiently close to a given point $x_0$"
is that the property holds on a neighbourhood of $x_0$;
intuitively, $x$ near $x_0$ is thought of as  small because $x$ approximates $x_0$ up to a small error. 

Situses  generalise metric and topological spaces, filters, and simplicial sets, 
and the concept is designed to be flexible enough to formulate 
categorically
a number of standard basic elementary definitions 
in various fields, e.g. in analysis, 
limit, (uniform) continuity and convergence, 
equicontinuity of sequences of functions;
in algebraic topology, being locally trivial and geometric realisation; in 
geometry, quasi-isomorphism;
in model theory, stability and simplicity and several Shelah's dividing lines, e.g. NIP, NOP, NSTOP, $NSOP_i$, $NTP_i$, of a theory. 

No homotopy theory for situses has been developed,
although the naive definition of an [interval object](#IntervalSitus) 
(namely, the simplicial set represented by the linear order $[0,1]$ 
equipped 
with some situs structure based on the metric/topology)
leads to a [[directed topological space|directed (not symmetric) notion of homotopy]], and in s&#x12CB; there is a diagram chasing reformulation of local triviality [(becoming trivial after a certain base-change/pullback)](#locallytrivial).

\section{Examples}

We now give a number of examples demonstrating the expressive power 
of the category of situses. 


\subsection{Simplicial sets as situses}


A simplicial set can be equipped with discrete or indiscrete situs structure: 
%The (in)discrete situs structure on a simplicial set
for each $n$, equip $X_n$ with the discrete or indiscrete filter, respectively.




\subsection{Metric spaces: uniformly continuous maps and quasi-isometries}

Let $M$ be a metric space. View $M$ as a simplicial set represented by the set of points of $M$, and equip each $M^n$ with the filter 
generated by uniform neighbourhoods of the diagonal, 
i.e. subsets containing all tuples of small enough diameter. 
With this situs structure, 
a map  $f:M\to N$ is uniformly continuous iff
it induces a morphism $f_\bullet:M_\bullet\to N_\bullet$ of situses.
In fact this defines a fully faithful embedding of the category
of metric spaces with uniformly continuous maps 
into the category of situses. 


We can also consider a different situs structure 
capturing the notion of quasi-isomorphism in large scale geometry.
Equip each $M^n$ with the filter 
such that a subset of $M^n$ is large iff it contains
all $n$-tuples such that the distance between 
distinct points is at least $D$, for some $D\geq 0$. 
With this situs structure, 
for quasi-geodesic metric spaces, 
a map $f_\bullet:M_\bullet\to N_\bullet$ is an isomorphism of situses
iff $f:M\to N$ is an quasi-isometry. 



\subsection{A filter as a situs}

Given a filter $\mathfrak{F}$ on a set $X$, 
there is a coarsest situs structure on 
$X$ viewed as a simplicial set (i.e. 
the simplicial set $|X|_\bullet$ represented by $X$) 
such that its filter on the set $X$ of $0$-simplices is 
finer than $\mathfrak{F}$. 
Dually, there is a finest  situs structure on $|X|_\bullet$
such that its filter on the set of $0$-simplices is coarser than $\mathfrak{F}$.
{#DiagCartDefn} We denote these situses by 
 $|X^\mathfrak{F}|_\bullet^{\operatorname{cart}}$
and  $|X^\mathfrak{F}|_\bullet^{\operatorname{diag}}$, respectively.



 In fact this gives two fully faithful embeddings of the category of filters into the category of situses
$$ |-^\mathfrak{F}|_\bullet^{\operatorname{cart}}, |-^\mathfrak{F}|_\bullet^{\operatorname{diag}} : &#x12CB;  \to s&#x12CB; $$


 
{#PreordersAsSituses} In a similar way one can define two fully faithful embeddings of the category of filters on preorders
and continuous monotone maps. We denote these by 
$X^{\leq\mathfrak{F}}_\bullet^{\operatorname{cart}}$
and  $X^{\leq\mathfrak{F}}_\bullet^{\operatorname{diag}}$, respectively.




\subsection{Topological and uniform spaces as situses }


{#DiagCartDefnNdim}
More generally, given an arbitrary 
simplicial set $X_\bullet$ and a filter $\mathfrak{F}$ on the set of $n$-simplices $X_n$, 
there is a coarsest/finest situs structure on $X_\bullet$
such that its filter on the set of $n$-simplices is finer/coarser 
than $\mathfrak{F}$. Taking $n=0$ and the filter $\mathfrak{F}$ always indiscrete gives two fully faithful embeddings of the category of simplicial sets into the category of situses. 

We use this to define situses corresponding to uniform and topological spaces. 

\subsubsection{Uniform spaces as situses }

Take a set $X$ and view it as a simplicial set $X_\bullet$ (represented by $X$). Recall that a [[uniform space|uniform structure]] on $X$ is a filter on  $X\times X$; 
take the coarsest situs structure with this filter on
the set $X\times X$ of $1$-simplices. This is the situs
associated with the uniform structure on $X$. 
Intuitively, we defined the situs  structure "on a set" 
such that two points $x_1,x_2\in X$ of points are 
"sufficiently close to each other" in the uniform structure 
iff the 1-simplex $(x_1,x_2)\in X\times X$ is "sufficiently small".  


{#SymmetricSitus} 
In fact, it is easy to define uniform spaces in terms of situses.
A filter on $X\times X$ is a uniform structure iff it is symmetric
(i.e. the endomorphism of $X\times X$, $(x,y)\mapsto (y,x)$ permuting the coordinates is continuous)
and this construction produces a situs such that the filter on $X\times X\times X$
is the coarsest filter such that the two maps $X^3\to X\times X$, $(x_1,x_2,x_3)\mapsto (x_i,x_{i+1}),i=1,2$ 
are continuous. This can be used to characterise situses arising 
from uniform structures as those symmetric situses such that
the filter of $X\times X\times X$ has this property. 
We say that a situs is symmetric iff
it factors though the category of non-empty finite sets. 

\subsubsection{Topological spaces as situses}

The situs associated to a topological structure on $X$ 
is defined in the same way starting from 
the filter of non-uniform neighbourhoods of the diagonal on $X\times X$
defined as consisting of the subsets of 
form $\bigcup_{x\in X} \{x\}\times U_x$ where
$U_x\ni x$ is a not necessarily open neighbourhood of $x\in X$.


A trivial verification shows these constructions 
define fully faithful embeddings
of the categories of topological and of uniform spaces 
into the category of situses, and in fact 
there are corresponding forgetful functors to these categories 
such that the following compositions are the identity:
$$Top \to s&#x12CB; \to Top$$
$$UniformSpaces \to s&#x12CB; \to UniformSpaces .$$


\subsection{Cauchy sequences and equicontinuity }


A filter $\mathfrak{F}$ on a metric space $M$ is _Cauchy_ iff 
$\mathfrak{F}^{\operatorname{cart}}_\bullet \to M_\bullet$ is continuous. 


A sequence of functions $f_i:L \to M$, $i\in \mathbb{N}$ of metric spaces
is _uniformly equicontinuous_ iff the map $(\mathbb{ N}^{cofinite})^{\operatorname{diag}}_\bullet\times L_\bullet \to M_\bullet$ is continuous. 
This gives a precise meaning to the phrase 
"if $i\in\mathbb{N}$, $x\in L$ and $j\in \mathbb{N}$, $y\in L$ are sufficiently close to each other, so are $f_i(x)$ and $f_j(y)$".
A different choice of the situs strucuture gives a different precise meaning: 

A sequence of functions $f_i:X \to M$, $i\in \mathbb {N}$ from a topological space $X$ to a metric space $M$
is _equicontinuous_ iff the map $(\mathbb{ N}^{cofinite})^{\operatorname{diag}}_\bullet\times X_\bullet \to M_\bullet$ is continuous. 



\subsection{Limits, compactness, and completeness }

An endomorphism of the category $\Delta$ of finite linear orders gives rise to an endomorphism of the category of situses.
Of particular interest is the shift 
endomorphism $\Delta\to\Delta$ adding a new least element ([[decalage]] considers the endomorphism adding a new greatest element rather than least) 
on objects, $n\mapsto 1+n$, and on morphisms, 
$f:n\to m$ goes to $f[+1]:1+n\to 1+m$, $f[+1](0)=0$, $f[+1](1+i)=1+f(i)$, $0\leq i\leq n$. 
The object $X_\bullet\circ [+1]$ and morphism $X_\bullet\circ [+1]\to X$
allows one to talk about local properties of $X_\bullet$, 
e.g. limits and local triviality. 

\subsubsection{Limits via shift endomorphism}

For example, taking a _limit_ of a filter $\mathfrak{F}$ on 
a topological or metric space $X$ corresponds to taking the factorization 
$$\mathfrak{F}^{\operatorname{diag}}_\bullet\to X_\bullet\circ [+1]\to X_\bullet.$$
Indeed, the underlying simplicial set of $\mathfrak{F}^{\operatorname{diag}}_\bullet$
is connected and thus maps to a single connected component 
of  $X_\bullet\circ [+1]=\sqcup_{x\in X} \{x\}\times X_\bullet$ 
(here we consider the equality of the underlying simplicial sets);
continuity of the map $\mathfrak{F} \to  X\times X$, $x\mapsto (x_0,x)$
means exactly that the first coordinate $x_0$ is a limit point 
of $\mathfrak{F}$ on $X$.



\subsubsection{Compactness and completeness as lifting properties}
Diagram chasing reformulation of the notions above allows to define compactness and completeness as [lifting properties](en.wikipedia.org/wiki/Lifting_property).

Let $\mathbb{N}^{cofinite}$ and $\mathbb{N}^{\leq cofinite}$
denote the set, resp. the linear order $ \mathbb{N}^\leq$, equipped 
with the filter of cofinite subsets.

A metric space $M$ is _complete_ iff either of the following equivalent conditions holds:

i. $\bot\to (\mathbb{N}^{\leq cofinite})^{\operatorname{cart}}_\bullet \rightthreetimes M_\bullet\circ [+1]\to M_\bullet$.

ii. $\bot\to (\mathbb{N}^{cofinite})^{\operatorname{cart}}_\bullet \rightthreetimes M_\bullet\circ [+1]\to M_\bullet$.

iii. $(\mathbb{N}^{\leq cofinite})^{\operatorname{cart}}_\bullet\to
(\mathbb{N}^{\leq cofinite}\cup\{\infty\})^{\operatorname{cart}}_\bullet  \rightthreetimes M_\bullet\to\top$.


Such a reformulation raises the question whether the notion of completeness may be 
defined with help of the archetypal counterexample: is a metric space $M$ complete 
iff  
$$ M_\bullet\circ [+1]\to M_\bullet \in (\mathbb {R}_\bullet\circ [+1]\to \mathbb{R}_\bullet)^{\rightthreetimes lr} ? $$
It also allows to define the completion of a metric space 
in terms of a weak factorisation system 
$$M_\bullet \xrightarrow{((\mathbb{N}^{\leq cofinite})^{\operatorname{cart}}_\bullet\to
(\mathbb{N}^{\leq cofinite}\cup\{\infty\})^{\operatorname{cart}}_\bullet)^{rl}} \hat M_\bullet \xrightarrow{((\mathbb{N}^{\leq cofinite})^{\operatorname{cart}}_\bullet\to
(\mathbb{N}^{\leq cofinite}\cup\{\infty\})^{\operatorname{cart}}_\bullet)^r} \top
$$




A topological space $X$ is _compact_ iff for each ultrafilter $\mathfrak{U}$ either of the following equivalent conditions holds:

i. $\bot\to \mathfrak{U}^{\operatorname{diag}}_\bullet \rightthreetimes X_\bullet\circ [+1]\to X_\bullet$.

ii. $\mathfrak{U}^{\operatorname{diag}}_\bullet 
\to (\mathfrak{U}\cup\{\infty\})^{\operatorname{diag}}_\bullet \rightthreetimes X_\bullet\to \top$.



A topological space $K$ is _compact_ iff 
$$K_\bullet \circ [+1]\to K_\bullet \in 
(\{\{o\},\{o,1\}\}^{\operatorname{cart}}_\bullet \cup  \{\{1\},\{o,1\}\}^{\operatorname{cart}}_\bullet\to  \{\{o,1\}\}^{\operatorname{cart}}_\bullet)^{\rightthreetimes lr}.$$
Here
$\{\{o\},\{o,1\}\}$, $\{\{1\},\{o,1\}\}$, and $\{\{o,1\}\}$
are viewed as filters on the set $\{o,1\}$. (needs verification)


\subsection{Local triviality }


{#locallytrivial} 
A map $f:X\to Y$ of topological or metric spaces is locally trivial with fibre $F$ 
iff in s&#x12CB; becomes a direct product with $F_\bullet$ ("globally trivial") 
after base-change 
$Y_\bullet\circ [+1]\to Y_\bullet$. That is,  
$f_\bullet:(Y_\bullet\circ [+1])\times_{Y_\bullet} X_\bullet \to  Y_\bullet\circ [+1]$
is of form $ (Y_\bullet\circ [+1])\times F_\bullet \to  Y_\bullet\circ [+1]$.




\subsection{Geometric realisation}




The notion of [[geometric realization]] involves 
topological spaces and simplicial sets, 
which both are situses. This allows one to interpret
the Besser-Drinfeld-Grayson construction 
of geometric realisation in s&#x12CB;, as follows.


View the standard geometric simplex consisting of sequences $0\leq x_1\leq ... \leq x_n\leq 1$ in $\mathbb{R}^n$
as the space of monotone maps 
$[0,1]^\leq \to (n+1)^\leq$ with 
Skorokhod-type metric 
$dist(f,g):= sup_{x} inf_{y} \{ |x-y| : f(x)=g(y) \}$.
Recall that Skorokhod metric is used in probality theory 
to express the intution that two random variables are close
if one can be obtained from another by a small perturbation 
of both time and space (values).
The category of situses allows us to view both linear orders as situses:
the situs structure on $[0,1]_\bullet$ "remembers" the metric, 
and the situs structure on $\Delta_n=Hom(-,(n+1)^\leq)$ 
"remembers" the equality $f(x)=g(x)$, i.e. is the finest situs
structure such that the filter on the set of 0-simplices is indiscrete.  
Then one may define a situs structure on the 
[inner hom](https://ncatlab.org/nlab/show/internal+hom#in_simplicial_sets) 
$$HHom([0,1]_\bullet, -) :s&#x12CB;\to s&#x12CB;$$
of the underlying simplicial sets
motivated by the definition of Skorokhod metric. 

This gives the construction of geometric realisation due to  
Besser, Drinfeld, and Grayson. 
See details at section 3.2 of [[geometric realization]].



\subsection{The interval object and homotopy theory } 
{#IntervalSitus} No homotopy theory for situses has been developed. 
The naive definition of an [[interval object]] used to define 
in s&#x12CB; geometric realisation
 eqipped with some situs structure "remembering" the topology, 
does not appear very useful, particularly 
for dealing with situses arising in model theory 
and the [lifting properties](en.wikipedia.org/wiki/Lifting_property)
defining stability and simplicity (defined below). 
However, note that the naive interval object 
 $[0,1]^\leq_\bullet$ reminds one of [[directed topological space|directed topological spaces]]: 
it is directed by definition 
and so would be 
any naive notion of homotopy associated with it:
a homotopy from $A$ to $B$ cannot in general 
be reversed to get a homotopy from $B$ to $A$.



\subsection{Stability and simplicity in model theory}

Let us now describe how situses can be used to reformulate
two notions of model theory: stability and simplicity of a first-order theory. 

\subsubsection{Stability. }

Consider a model $M$ in a language $\mathcal {L}$, and a linear order $I$. 
For an $r$-ary $\mathcal {L}$-formula $\phi(x_1,...,x_r)$, 
we say that a sequence $(a_i)_{i\in I}$ of elements of $M$ 
is $\phi$-indiscernible (with repetitions) 
iff for either all or none of the 
subsequences $(a_{i_1},...,a_{i_r}), i_1\le ... \le i_r$ (of distinct elements) 
the formula $\phi(a_{i_1},...,a_{i_r})$ holds in $M$. 

Equip $M^n$ with the filter generated by 
the sets of all $n$-tuples which are $\phi$-indiscernible with repetitions,
where $\phi$ varies through all $\mathcal{L}$-formulas.
The situs so obtained is called {the generalised pre-Stone space 
of $M$ in s&#x12CB;} because the forgetful functor $s&#x12CB;\to Top$ takes it 
to the set of elements of $M$ equipped with the preimage 
of [[Stone topology]];
by this we mean the topology on $M$ generated by 
sets of elements realising unary $\mathcal{L}$-formulas. 
There are many variants of this definition, notably instead of 
being $\phi$-indiscernible
one may require being a part of an {infinite} $\phi$-indiscernible sequence,
and instead of $M^n$ consider the set of $n$-types  $S_n(\emptyset)$ 
or $S_n(M)$. 

We shall reformulate the following characterisation of 
stable theories as a lifting property in s&#x12CB;. 

A first-order theory 
is stable iff in a saturated enough model it holds that each 
 $\phi$-indiscernible sequence of $n$-tuples is in fact a $\phi$-indiscernible set,
for each $n\ge 0$ and each formula $\phi$ of the language of the theory. 

For $n=1$ this can be reformulated as a lifting property in s&#x12CB; as follows. 

Fix a linear order $I$.  
Let $I^\leq_\bullet:=(I^\leq)^{\operatorname{cart}}_\bullet$ be the situs associated with the preorder $I^\leq$ with the indiscrete filter.
[Recall](#PreordersAsSituses) that this is the simplicial set 
$n^\leq \mapsto Hom_{preorders} (n^\leq, I^\leq)$ represented by $I^\leq$ as a linear order, 
equipped with indiscrete filters. 
Let  $(I^{\leq tails})^{\operatorname{cart}}_\bullet$ denote the  situs associated with the preorder $I^\leq$ with the  {filter of tails}
generated by the subsets containing all elements large enough. 


Let  $(|I|^{tails})^{\operatorname{cart}}_\bullet$ denote the situs associated with the filter of tails on the set of elements of $I$. 


An indiscernible sequence indexed by a linear order $I$ is an injective continuous map $(I^{\leq})^{\operatorname{cart}}_\bullet \to M_\bullet$.


An indiscernible set indexed by $I$ is an injective continuous map $|I|^{\operatorname{cart}}_\bullet \to M_\bullet$.


An eventually indiscernible sequence indexed on a linear order $I$ is an injective continuous map 
$(I^{\leq tails})^{ cart}_\bullet \to M_\bullet$.

\begin{proposition}
Let $M$ be a model. The following are equivalent:

i. each $\phi$-indiscernible sequence of elements is in fact a $\phi$-indiscernible set.

ii. the situs $M_\bullet$ is [symmetric](#SymmetricSitus)

iii. the following lifting property holds in s&#x12CB;:
$$ (I^{\leq tails})^{\operatorname{cart}}_\bullet\to (|I|^{tails})^{\operatorname{cart}}_\bullet 
\rightthreetimes M_\bullet\to \top .$$
\end{proposition}
\begin{proof} iii. says that each continuous map $ (I^{\leq tails})^{\operatorname{cart}}_\bullet\to M_\bullet$ factors
as $(I^{\leq tails})^{\operatorname{cart}}_\bullet\to (|I|^{tails})^{\operatorname{cart}}_\bullet 
\to M_\bullet$. If these maps are injective, remarks above 
say it is equivalent to i. If not injective, then 
in some end segment each element occurs infinitely often, 
and in that case being indiscernible with repetitions 
means being set indiscernible. 
\end{proof}

([Simon,2021](#Simon2021)) implies that a theory is stable iff the lifting property iii. holds 
for the situs associated with $M\times M$ considered in the language with arbitrary parameters, 
for a saturated enough model $M$ of the theory.



\subsubsection{Simplicity. }

The definition of simplicity is not as simple combinatorially. 

First let us introduce the situs associated with a model
for this purpose; this situs structure is defined to talk 
about consistency of instances of a formula. Fix a formula $\phi$. 
As usual, the situs is based on the simplicial set represented by the 
set of elements of $M$.
The filter on $M^n$ is generated by a single set 
of those tuples $(a_1,...,a_n)$ such that  
$M\models \exists x \bigwedge_{1\leq i\leq n}  \phi(x,a_i)$. 
Let us denote this situs by $M_\bullet^{\exists\phi}$ and call it the _$\phi$-characteristic_ situs of model $M$. Note that 
$\phi$-characteristic situs captures the same structure as
the characteristic sequence of a first order formula in 
([M.Malliaris. 
The characteristic sequence of a first-order formula. 2010](#Mallaris2010jsl)), see also ([M.Malliaris.
"Edge distribution and density in the characteristic sequence](#Mallaris2010apal)).


##### Finite Cover Property
 
Recall that a formula φ(x;y) has the _finite cover property_ if for arbitrarily large $n \le \omega$ there exist $ a_0,...a_n$ such that $\{\phi(x;a_0),...\phi(x;a_n)\}$ is n-consistent but (n+1)-inconsistent.

Recall that a simplicial object $M_\bullet$, e.g. a situs, is said to have finite dimension if 
for some $k$ for each $n$
 $M_\bullet(n)$ is the pullback of 
all the simplicial maps $M_\bullet(n)\to M_\bullet(l)$, $l\leq k$.
Let $P_n$ denote the formula $\exists x \wedge_{i\leq n} \phi(x,y_i)$.


\begin{theorem}

1. $\phi$ has no finite cover property

2. the characteristic sequence $\lt P_n\gt $ has finite support (in terminology of [Malliaris, Def.2.6](#Mallaris2010jsl))

3. the situs $M^{\exists\phi}_\bullet$ has finite dimension, i.e. explicitly, for some $k$ for each $n$
the filter on $M^{\exists\phi}_\bullet(n)=M^n$ is the coarsest filter such that 
all the simplicial maps $M^{\exists\phi}_\bullet(n)=M^n\to M^{\exists\phi}_\bullet(k)=M^k$ are continuous
 

4. there is $k$ such that for each $n$ $\exists x \wedge_{i\leq n} \phi(x,y_i)$ holds iff  $\exists x \wedge_{i\leq n} \phi(x,y_i)$ for any $k$-element subset $y_{i_1},...,y_{i_k}$ 

5. there is $k$ such that for each $n$ $\exists x \wedge_{i\leq n} \phi(x,y_i)\leftrightarrow \wedge_{1\leq i_1\le ...\le i_k\le n}\exists x \wedge_{1\leq l\leq k} \phi(x,y_{i_l})$

\end{theorem}
\begin{proof} Items 1 and 2 are  Remark 2.7 of [Malliaris](#Mallaris2010jsl), item 4 and 5 are  both item 2 and item 3 written explicitly.
\end{proof}


##### No tree property NTP 


The reformulation in terms of situses uses 
the definition of a simple first-order theory which 
says
that each formula of the theory has 
NTP ("not the tree property")
see [Tent-Ziegler, Def.7.2.1](#TentZiegler), or [3,\S9](#3) 
NTP is defined as a lifting property with respect to a morphism 
involving the following combinatorial structures.

We recall the definition of NTP and a simple theory. 

\begin{definition}[Tent-Ziegler,7.2.1] 1. A formula $\varphi(x, y)$ has the tree property 
(with respect to k) if there is a tree of parameters $(a_s\,\,|\,\,\emptyset \neq s \in {}^{\lt\omega}\omega )$ such that:

 a) For all $s\in {}^{\lt\omega}\omega $, $(\varphi(x, a_{si} )\,\,|\,\,i \lt\omega )$ is $k$-inconsistent.

 b) For all $\sigma\in {}^{\omega}\omega $ $ \{\varphi(x, a_s )\,\,|\,\,\emptyset \neq s\subseteq \sigma  \}$ is consistent.


2. A theory T is simple if there is no formula $\varphi(x, y)$ with the tree property.

\end{definition}  




Let $T^\leq$ be an infinitely branching tree of infinite depth, 
viewed as preorder, and equipped with the indiscrete filter.  
We may take $T^\leq$ to be ${}^{\lt\omega}\omega$. 
Let $T^\leq_\bullet:=(T^\leq)^{cart}_\bullet$ 
denote the corresponding situs.
[Recall](#PreordersAsSituses) that by definition $T^\leq_\bullet(n)$
is the set of ordered (weakly increasing) $n$-tuples
of vertices of $T$, and there is  only one large subset,
namely the whole set. 

Note that to give a morphism $T^\leq_\bullet \to M_\bullet^{\exists\phi}$ of the underlying simplicial sets
is the same as to give a a tree of parameters $(a_s\,\,|\,\,\emptyset \neq s \in {}^{\lt\omega}\omega )$. This morphism is continious 
iff these parameters satisfy item b,
in notation of the definition: indeed, 
continuity means that the preigame of the large (by definition) 
set of $\phi$-consistent tuples is large, i.e. the whole
set $T^\leq_\bullet(n)$ of ordered tuples, for each $n$.  

Let $|T|_\bullet$ be the simplicial set represented by the set 
$|T|$ of vertices of $T$, namely 
$|T|_\bullet(n^\leq)=|T|^n$. 

\begin{defn} Let $|T|^{TP}_\bullet$ denote the simplicial set $|T|_\bullet$
equipped with the _$TP$-tautological_ filter on $|T|_\bullet(n^\leq)$ defined as follows:
a subset is not small iff it either contains 

1) some tuple in weakly increasing order, or

2) all   the lexicographically ordered tuples
   required to be inconsistent by the tree property 
   with respect to a subtree-counterexample to the tree property. 

In more detail, a subset $\epsilon$ is large iff 

1') it contains the subset of tuples in weakly increasing order

2') for each isomorphic copy
of $T'={}^{\lt\omega}\omega$ in $T^\leq$ there is a vertex $v\in T'$
and its immediate (in $T'$) descendants 
$v_1\leq_{lex}...\leq_{lex} v_k $ such that $(v_1,..,v_k) \in \epsilon \cap T'$.
%A verification shows that this indeed defines a filter. 
\end{defn}
 
Note that by item (i) the map $T^\leq_\bullet \to |T|_\bullet^{TP}$ is continuous.
Also note that no tuple of increasing elements is required to be $\phi$-inconsistent by the tree property. 

\begin{proposition}
The following are equivalent:

i. the formula $\phi$ has NTP with respect $k$ in the model $M$

ii. in s&#x12CB; there is no morphism $\tau:T^\leq_\bullet\to M_\bullet^{\exists\phi}$ such that
    for each tuple $k$-tuple $v_1,..,v_k$, for each $k$, 
     of immediate descendants of the same vertex, 
     $M \models\neg \exists x (\phi(x,\tau(v_1))\wedge ... \wedge \phi(x,\tau(v_n))$


iii. In s&#x12CB; the following lifting property holds:
$T^\leq_\bullet \to |T|^{TP}_\bullet
\rightthreetimes M_\bullet^{\exists\phi}\to \top $
\end{proposition}
\begin{proof} ii. is exactly the definition of NTP for formula $\phi$
as stated in ([Tent-Ziegler,  Def.7.2.1](#TentZiegler)), cf. [3,\S9](#3). 
In iii., one only needs to check that the unique lifting is 
continuous, namely that the set of tuples 
$(v_1,...,v_k)$ such that  $M \models \exists x (\phi(x,\tau(v_1))\wedge ... \wedge \phi(x,\tau(v_k))$ is large. 
By the definition of the filter, this set is large iff there is 
an infinitely branching subtree of infinite depth satisfying ii. 
This implies that ii. and iii. are equivalent. 

Finally, let us prove our $TP$-tautological filters are well-defined. 
We need only to show that the union of 
any two small sets $X\cup Y$ is small.
Assume it is not small. 
Label each vertex of the tree with the largest $n\lt\omega$
such that the first small subset contains 
above the vertex all tuples required to be inconsisent 
in some copy of ${}^{\lt n}\omega$. 
Above each vertex in $X$ there are at most finitely many vertices in $X$ labelled 
by the same or greater number. Removing them
leaves $X\cup Y$ not small. 
But then we get that vertices of $X$ are 
labelled by numbers strictly decreasing along 
any branch, hence $X$ is of finite depth. 
Now pick a vertex labelled $0$. This means
that below that vertex
there is no infinite set of siblings that 
each lexicographically ordered tuple is in $X$, 
hence among any infinite set of siblings by Ramsey theorem there is
an infinite set of siblings not in $X$, i.e. in $Y$. 
Hence, $Y$ is not small.
\end{proof}

\begin{remark} One can similarly define 
$TP_i$-tautological situs of a tree $T$, for $i=1$,
and see that $TP_i$ is defined by a lifting property.
The same argument gives lifting properties 
related  to cdt, [inp](modeltheory.fandom.com/wiki/INP_pattern), 
and sct patterns
in classification theory.
\end{remark}

\begin{remark} This raises the question whether $NTP=NTP_1\&NTP_2$
holds in the category of situses. It seems the standard proof would go through if one defines the corresponding lifting properties carefully enough. In particular, to reflect the use of Ramsey theorem, 
it may be necessary to replace $|M|_\bullet$
by the simplicial set of types $S^M_\bullet$ where $S^M(n)$ is the set of $n$-types, and also do the same for $T^\leq_\bullet$ and $|T|^{TP}_\bullet$ for quantifier-free types in an appropriate language.  

In fact, it would seem that the standard proof of $NTP=NTP_1\&NTP_2$
gives that $T^\leq_\bullet\to |T|_\bullet^{TP}$ is
the pushout of $T^\leq_\bullet\to |T|_\bullet^{TP_1}$ 
and $T^\leq_\bullet\to |T|_\bullet^{TP_2}$,
just as diagram chasing considerations show would
be sufficient for the corresponding relation between the lifting properties.
Though, possibly one needs to modify 
the definitions of the filters appropriately modified 
to reflect the need to use Ramsey theorem and 
consider the tree properties with respect all the finite conjunctions
$\&_i\phi(x,y_i)$ of $\phi(x,y)$ at the same time. 
\end{remark}


\begin{remark}
The notion of a $\phi$-characteristic situs captures the same structure 
as
the characteristic sequence of a first order formula in 
([M.Malliaris. 
The characteristic sequence of a first-order formula. 2010](#Mallaris2010jsl)), see also ([M.Malliaris.
"Edge distribution and density in the characteristic sequence](#Mallaris2010apal)). Moreover, it appears that several properties
of characteristic sequences can be defined as lifting properties
in the category of situses. 
\end{remark}



\subsection{Shelah's dividing lines NOP, NSOP, NSOPi, NTP, NTPi, NATP, and tautological filters} 

We show that in the category of situses 
a number of the Shelah's divining lines,
namely  $NOP, NSOP, NSOP_i, NTP, NTP_i$, and $NATP$
are expressed as Quillen lifting properties of form 
$$A \to B \rightthreetimes M\to\top$$  
where $\top$ is the terminal object, and 
$M$ is a situs associated with a model and a formula,
and $A$ and $B$ are objects of combinatorial nature.  


\subsection{Informal explanation}

Recall the common pattern of definitions of 
$NOP, NSOP, NSOP_i, NTP, NTP_i, NATP$. 
As usually stated, such a property wrt a formula $\phi$ and a model $M$ 
require
that there is a combinatorial structure ("counterexample" or "witness") 
formed by elements of the model $M$ satisfying certain "positive" requirement 
that certain collections of formulas are consistent, and "negative" requirement 
that certain collections of formulas are inconsistent. 
The combinatorics is coded by the maps of underlying simplicial sets 
$|A_\bullet|\to |M_\bullet|$ and $|B_\bullet|\to |M_\bullet|$.
The positive requirements are coded by continuity of the morphism $A_\bullet\to M_\bullet$.
The failure of negative requirement are coded by continuity of the diagonal morphism
$B_\bullet \to M_\bullet$.

The underlying simplicial sets of $A_\bullet, B_\bullet$, and $M_\bullet$ are representable, 
and are so chosen that both morphisms  $A_\bullet\to M_\bullet$ and $B_\bullet \to M_\bullet$
both correspond to maps of sets $a_\bullet :|I|\to |M|$ and $a'_\bullet:|I'|\to |M|$.
The $A_n$'s and $B_n$'s represent the indices of tuples mentioned 
in positive, resp. negative, requirements. 
The filters on $A_n$ are taken indiscrete; thus continuity of  
$f:A_\bullet\to M_\bullet$ means that for each $n\in \Bbb N$,
each tuple $(a_i)_{0\leq i\le n} \in a(A_n)\subset |M|^n$ satisfies a certain formula. 
Namely, if $M_\bullet$ is the situs of $\phi$-indiscernible sequences, 
the continuity says that each such sequence is $\phi$-indiscernile;
if $M$ is the situs of consisent finite $\phi$-types, the continuity says
that each finite type $\phi(x,a_i)$ is consistent. 

To code by continuity the failure of negative requirements,
we need to define non-trivial filters on $B_n$. The first (incorrect) attempt
would be to say that a subset of $B_n$ is large (a neighbourhood) 
iff it contains a tuple representing one of the negative requirements; 
unfortunately, this is not a filter. But if it were, then continuity of $B_n\to M_\bullet(n)$
would mean exactly that one of negative requirements fails, and hence 
the map $A_\bullet\to M_\bullet$ does not represent a counterexample/witness. 
To fix this definition, define a subset of $B_n$ to be large (a neighbourhood) 
iff it contains a tuple representing a negative requirement with respect to each 
_substructure_ of $A$ of the same shape as required by the property.  
We call the filters on $B_n$'s _tautological_ because of the tautological argument
showing equivalence  of the continuity and the failure of the negative requirements.  


Below we do the reformulations for non-order properties $NOP$, $NSOP$, and $NSOP_i$, $i\geq 3$
which involve the situs of $\phi$-indiscernible sequences. These reformulations involve
reformutading the standard definitions in terms of $\phi$-indiscernible sequences. 

The no-tree-properties were formulated above and they involve the situs of consistent $\phi$-types. 

\begin{remark} Note our considerations allow to formulate a precise conjecture corresponding to 
the equality $NATP = NSOP_1+ NTP_2$ of [On the Antichain Tree Property](https://arxiv.org/pdf/2106.03779.pdf). 
Indeed, all classes occurring in the formula are defined by lifting properties wrt the same morphism,
and the equalitity should represented a relationship of the "combinatorial" morphisms on the left. 
Though doing so should perhaps require a rather more careful reformulations taking care 
of formulas of arbitrary arity. 
\end{remark}




\subsubsection{No order property NOP}



Let $\phi(-,-)$ be a binary formula, and let 
$M^{\{\phi\}}_\bullet$ be the situs on simplicial set $|M|_\bullet$ represented by the
set
 of elements of $M$ where $|M|^n$ is equipped with the filter generated by the set of all   $\phi$-indiscernible sequences
$$\{(x_1,...,x_n): \forall 1\leq i\le j\leq n, 1\leq k \le l\leq n \phi(x_i,x_j)\leftrightarrow \phi(x_k,x_l)\}\subset |M|^n.$$
We call it _the situs of $\phi$-indiscernible sequences_.


Recall a formula $\phi(-,-)$ has NOP (no order property) iff  there no sequence $(a_i)_{i\in\omega}$ such that
$$ \phi(a_i,a_j) \leftrightarrow i\leq j$$

Let $I^{\leq tails}_\bullet$ be the situs associated with the filter of final segments
on the linear order $I$.    

\begin{definition}
Let $|I|^{NOP}_\bullet$ be the simplicial set $|I|_\bullet$ represented by the set $|I|$ of elements of $I$, equipped with _NOP-tautological filters_ defined as follows.


1.  A subset $X\subset |I|^3$ is large in the _NOP-tautological_ filter on $|I|^n$ iff 

a. it contains each triple $(a_i,a_j,a_k)$ for $i\leq j\leq k$

b. for each infinite increasing subsequence 
  $a_i\in I, i\in\omega$  there is a pair $i\lt j$ such that $(a_i,a_j,a_i)\in X$

2. for $n\neq 3$ the filter on $|I|^n$ is the coarsest filter such that all the simplcial maps $I^n\to I^3$ are continuous. 

\end{definition}

We call this filter _tautological_ because by definition any large subset
contains a "witness" $\phi(a_i,a_j)\leftrightarrow \phi(a_j,a_i)$ of failure of the order property. More precisely,  by very definition both maps  $a_\bullet: I^{\leq tails}_\bullet\to M^{\{\phi\}}$ and 
$a_\bullet: |I|^{NOP}_\bullet\to M^{\{\phi\}}$ are continuous iff 
(a) $a_i$ is a sequence such that $\phi(a_i,a_j)$ whenever $i\leq j$, and 
(b) each (infinite) subsequence of $(a_i)_{i\in I}$ does not have the order property for $\phi$.
A little argument using Ramsey theorem shows that the NOP-tautological filter
is indeed a filter, as follows.
Assume that the intersection $X\cap Y$ of two large subsets is not large,
i.e. there is an infinite subsequence $a_{i_l}$ such that for each $k\lt l$ 
either $(a_{i_k},a_{i_l},a_{i_k})\notin X$ or $(a_{i_k},a_{i_l},a_{i_k})\notin Y$.
This gives a colouring of pairs $i\lt j$ in two colours, and by Ramsey theory 
there is an infinite clique of the same colour, which by definition 
means that either $X$ or $Y$ is not large. 


The following theorem summarises the considerations above.


\begin{theorem}

1. formula $\phi$ has NOP 

2. there no sequence $(a_i)_{i\in\omega}$ such that
$ \phi(a_i,a_j) \leftrightarrow i\leq j$

3. the following lifting property holds in s&#x12CB;: 
$$I^\leq_\bullet \to |I|^{NOP}_\bullet  \rightthreetimes M^{\{\phi\}}_\bullet\to\top$$  

\end{theorem}
\begin{proof}
Each map $I^\leq_\bullet \to M^{\{\phi\}}_\bullet$
corresponds to a sequence $(a_i)_{i\in I}$ such that
$i\leq j\implies \phi(a_i,a_j) $. 

If NOP fails, take $(a_i)_{i\in I}$ to be a witness of this. 
Then evidently the induced map $|I|^{NOP}_\bullet  \to M^{\{\phi\}}_\bullet$ is not continuous as there are no witnesses for (b).


Assume NOP. Then for each infinite subsequence there is a witness of NOP,
i.e. a tuple as in (b) contained in the preimage of the set of $\phi$-consistent tuples in $M$. Hence, this preimage is large
and the induced diagonal map is continuous. 
\end{proof}

The trick behind the definition of tautological filter works for some other dividing lines such as NSOP and tree properties. We discuss the tree properties in the next section. 



\subsubsection{No strict order property NSOP}

To define NSOP-tautological filters we need to define 
a notion of a witness to failure of NSOP formulated in terms of $\phi$-indiscernible sequences.  
The following reformulation is convenient for us: 
we say that a formula $\phi(-,-)$ has NSOP' iff 
there is an infinite sequence $(a_i)_I$ such that

(a) $\phi(a_i,a_j)$ iff $i\leq j$

(b) $\phi(M,a_i)\subset \phi(M,a_j)$ for $i\leq j$.

Failure of this is witnessed by

(a') a sequence $(a_i,a_j,a_i)$ being $\phi$-indiscernible for $i\lt j$

(b') both sequences  $(x,a_i,a_j)$ and $(x,a_l,a_k)$ being $\phi$-indiscernible 
for $i\lt j, k\lt l$, and $j\lt l$.



More precisely:
\begin{statement}
1. If items (a) and (b) hold for $\phi$, then items (a') and (b') never hold 

2. If items (a') and (b') never hold for formula $\phi$ and a long enough sequence $(a_i)_i$, then (a) and (b) holds for subsequence $(a_i)_{0\lt i\lt \omega}$ and formula $\phi'(x,y)$ or $\neg\phi'(x,y)$ where 
$$\phi'(x,y):=\phi(x,y) \wedge \neg \phi(x,a_0)\wedge \phi(x,a_\omega)$$

\end{statement}

\begin{proof}
Indeed, assuming (a), item (b') means that 
$\phi(x,a_i),\phi(x,a_j)$, $\neg \phi(x,a_k)$, and $\neg \phi(x,a_l)$, for some  $i\lt j, k\lt l$, and $j\lt l$,
which does contradict (b). 

Item (a') means that for each $i\lt j$ $\phi(a_i,a_j)\leftrightarrow \neg\phi(a_j,a_i)$,
hence by Ramsey theory (a) holds for an infinite subsequence, possibly 
replacing $\phi$ by $\neg\phi$. So without loss of generality 
we may assume (a) holds for $\phi$.

Now let us prove that (a) and (b') 
imply SOP' holds for some infinite subsequence $(a_i)_{0\lt i\lt \omega}$ and 
$$\phi'(x,y):=\phi(x,y) \wedge \neg \phi(x,a_0)\wedge \phi(x,a_\omega)$$
We only need to prove that (a) and (b') implies that 
(b'') $\phi'(M,a_i)\subset \phi'(M,a_j)$ for $i\leq j$.
Indeed, let $i\lt j$ and $x$ be a counterexample, i.e.  
 $\phi(x,a_i) \wedge \neg \phi(x,a_0)\wedge \phi(x,a_\omega)$ and 
 $\neg (\phi(x,a_j) \wedge \neg \phi(x,a_0)\wedge \phi(x,a_\omega))$.
 These formulae 
 imply that $\neg\phi(x,a_j)$ and thus both
 $(x,a_i,a_\omega)$ and $(x,a_j,a_0)$ are $\phi$-indiscernible. 
\end{proof}

Hence we define NSOP-tautological filters on $|I\cup I^4|_\bullet$ as:

\begin{definition}
1.  A subset $U\subset |I\cup I^4|^3$ is large in the {\em $NSOP$-tautological filter} on $|I\cup I^4|^3$ iff each infinite subsequence 
  $ I'\subset I$  contains a witness of (a') and (b'), i.e.
  
  i.  there is a pair $i\lt j,i,j\in I'$ such that $(a_i,a_j,a_i)\in U$
  
  ii.    there are $i\lt j, k\lt l$, and $j\lt l$, $i,j,k,l\in I'$ such that
   $((i,j,k,l),i,j)\in U$ and $((i,j,k,l),a_l,a_k)\in U$ 
  
2. for $n\neq 3$ the filter on $|I\cup I^4|^n$ is the coarsest filter such that all the simplcial maps $|I\cup I^4|^n\to |I\cup I^4|^3$ are continuous. 

\end{definition}


\begin{theorem}

1. theory $T$ has NSOP 

2. there no formula $\phi$ and an infinite sequence 
$(a_i)_{i\in\omega}\in M$ satisfying (a') and (b') above, for some saturated model $M$

3. for each linear order $I$, model $M$ and formula $\phi$ it holds
$$|I|^\leq_\bullet \to |I\cup I^4|^{NSOP}_\bullet  \rightthreetimes M^{\{\phi\}}_\bullet\to\top$$  

\end{theorem}
\begin{proof} Let $(a_i)_{i\in I}$ be a witness for SOP. 
Take the corresponding map $|I|^\leq_\bullet \to  M^{\{\phi\}}_\bullet$.
By SOP there are no witnesses of (b') in $M$, thus
wherever I^4 is sent to, the preimage of the subset of $\phi$-consistent tuples will not contain a witness of ii., hence by definition is large in the NTP-tautological filter. Therefore the lifting property fails. 

Now assume NOP and let us show the lifting property holds. 
The map $|I|^\leq_\bullet \to  M^{\{\phi\}}_\bullet$ 
corresponds to a sequence $(a_i)_{i\in I}$ witnessing (a). 
If this sequence has only finitely many distinct elements, 
then (b) is witnessed by all tuples where $i,j,k,l$ belong to 
an infinite constant subsequence, and therefore 
the preimage of the subset of $\phi$-consistent tuples is large. 

Thus we may assume that all $a_i$'s are distinct. 
Take the diagonal map sending each
 $(i,j,k,l)\in I^4$ into a witness of (b')
whenever it exists. Each infinite subsequence
also fails SOP, hence there is a witness of (b') for this.
Hence, the preimage of the subset of $\phi$-consistent tuples is large. 
\end{proof}


#### $NSOP_n$ for $n\gt 3$

Recall that a formula $\phi$ has $SOP_n$ iff there is an infinite sequence $(a_i)_{i\in \omega}$ such that 

(a) $\phi(a_i,a_j)$ iff $i\leq j$

($b_n$)  there are $(a_i)_{0\leq i \leq n-1}$ such that 
$\phi((a_i,a_{(i+1)mod\,n})$
for any $0\leq i\leq n$

Say a formula $\phi$ has $SOP'_n$ iff 
there is an infinite sequence $(a_i)_{i\in \omega}$ such that 

(a) $\phi(a_i,a_j)$ iff $i\leq j$

($b'_n$)  there are $(a_i)_{0\leq i \leq n-1}$ such that for any $0\leq i\leq n$
the sequence $(a_i,a_{(i+1)mod\,n},a_{(i+2)mod\,n})$ is $\phi$-indiscernible.

It is easy to see that for $n\gt 3$ 
$SOP'_n(\phi)\leftrightarrow SOP_n(\phi)\vee SOP_n(\neg\phi)$.


Indeed, either there is a 3-cycle
$\phi(a_i,a_{(i+1)mod\,n}), \phi(a_{(i+1)mod\,n},a_{(i+2)mod\,n}), 
\phi(a_{(i+2)mod\,n},a_{i})$
or for each $0\leq i\less n$ 
$\neg\phi(a_{(i+2)mod\,n},a_{i})$, hence there is an $n$-cycle 
$n-1,..,(n-1-2k)mod\,n,..(n-1-2n)mod\,n$ 
for $\neg\phi$.
   
Let us  reformulate this as a lifting property.

Let $|\{0,...,n-1\}|^{cycle}_\bullet$ be the situs associated with the filter on 
$|\{0,...,n-1\}|^3$ generated by the set of triples 
$(a_i,a_{(i+1)mod\,n},a_{(i+2)mod\,n})$, $0\leq i\leq n-1$.

\begin{theorem} 
A formula $\phi$ has $NSOP'_n$ iff $\phi$ has NOP and 
the following lifting property holds:
$$|\{0,...,n-1\}|^{diag}_\bullet \to |\{0,...,n-1\}|^{cycle}_\bullet \rightthreetimes M^{\{\phi\}}\to \top$$
\end{theorem}
\begin{proof}
The proof is straightforward. 
\end{proof}







\subsection{References}

Some of these constructions are sketched in the drafts below.



Topology and analysis:

* {#1} [1] Misha Gavrilovich. The category of simplicial sets with a notion of smallness.
 [(pdf)](http://mishap.sdf.org/6a6ywke/6a6ywke.pdf)

Geometric realisation:

* {#2} [2] Misha Gavrilovich, Konstantin Pimenov.  Geometric realisation as the Skorokhod semi-continuous path space endofunctor. [(pdf)](http://mishap.sdf.org/SkorokhodGeometricRealisation.pdf)1

Stability and simplicity:

* {#TentZiegler} [TentZiegler] K.Tent, M.Ziegler. 
A Course in Model Theory. CUP. 2012.

* {#Mallaris2010jsl} Maryanthe Malliaris. 
The characteristic sequence of a first-order formula. J Symb Logic 75, 4 (2010) 1415-1440. [(pdf)](https://math.uchicago.edu/~mem/mm-char-seq-revised.pdf)

* {#Mallaris2010apal} Maryanthe Malliaris.
"Edge distribution and density in the characteristic sequence," Ann Pure Appl Logic 162, 1 (2010) 1-19. [pdf](https://math.uchicago.edu/~mem/apal-malliaris-revised-version.pdf)

* {#Scow2012} [Scow2012] Lynn Scow. 
Characterization of nip theories by ordered graph-indiscernibles. Annals of
Pure and Applied Logic, 163(11):1624 – 1641, 2012. [(pdf)](https://arxiv.org/abs/1106.5153)

* {#Simon2021} [Simon2021] Pierre Simon. A note on stability and NIP in one variable. 
[(pdf)](https://arxiv.org/abs/2103.15799)

* {#3} [3] Misha Gavrilovich. Remarks on Shelah's classification theory and Quillen's negation.
 [(pdf)](http://mishap.sdf.org/yetanothernotanobfuscatedstudy.pdf)


 