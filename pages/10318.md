
+-- {: .rightHandSide}
+-- {: .toc .clickDown tabindex="0"}
### Context
#### Physics
+-- {: .hide}
[[!include physicscontents]]
=--
#### Symplectic geometry
+--{: .hide}
[[!include symplectic geometry - contents]]
=--
=--
=--


#Contents#
* table of contents
{:toc}


## Idea

Here we discuss the notion of _prequantized Lagrangian correspondences_ and how it serves to embed traditional [[classical mechanics]] in its formulation as [[Hamiltonian mechanics]] and [[Lagrangian mechanics]] into the general context of [[local prequantum field theory]] and its [[motivic quantization]].

A traditional notion is that of a plain _[[Lagrangian correspondence]]_, which is a [[Lagrangian submanifold]] of the [[Cartesian product]] of a [[symplectic manifold]] and another one, with opposite [[symplectic structure]]. As discussed there, plain [[Lagrangian correspondences]] naturally generalize [[symplectomorphisms]] -- hence transformations between [[phase spaces]] in [[physics]] -- via [[correspondences]] of [[symplectic manifolds]].

But in [[prequantum field theory]] proper, and in particular with an eye towards [[geometric quantization]], one considers the [[prequantization]] of these symplectic manifolds by lifting them to [[prequantum circle bundles]] with [[principal connection]]. The notion of _prequantized Lagrangian correspondence_ is the refinement of that of plain [[Lagrangian correspondence]] which does properly respect and reflect this [[prequantization]] information: a prequantized Lagrangian correspondence is a [[Lagrangian subspace]] as before, but now equipped with an explicit [[gauge transformation]] between the pullbacks of the two [[prequantum circle bundles]] to the correspondence space.

We discuss below how the concept of prequantized Lagrangian correspondences neatly induces and unifies ingredients and aspects of [[classical mechanics]], notably the [[Hamiltonian mechanics]] of [[symplectic manifolds]] and the [[Lagrangian mechanics]] of [[action functionals]] associated to it via the [[Legendre transform]]. Specifically, below in _[The classical action prequantizes Hamiltonian correspondences](#TheClassicalActionFunctionalPrequantizesHamiltonianCorrespondences)_ we see that prequantized Lagrangian correspondences are [[diagrams]] which schematically express this data as follows:

$$
  \array{
    && {{space\,of} \atop {trajectories}}
    \\
    & {}^{\mathllap{{initial}\atop {values}}}\swarrow && \searrow^{\mathrlap{{Hamiltonian} \atop {evolution}}}
    \\
    phase\,space_{in} && \swArrow_{{action} \atop {functional}} && phase \,space_{out}
    \\
    & {}_{\mathllap{{prequantum}\atop {bundle}_{in}}}\searrow 
    && 
    \swarrow_{\mathrlap{{prequantum} \atop {bundle}_{out}}}
    \\
    && {{2-group} \atop {of\,phases}}
  }
  \,.
$$

This describes a [[diagram]] in what is called the [[slice topos]] of [[smooth spaces]] over the [[moduli stack]] of [[prequantum circle bundles]]. Once formulated this way, there is an evident refinement to [[moduli infinity-stack|higher moduli stacks]] of [[prequantum n-bundles]].

For $n = 2$ we show how the notion of prequantized Lagrangian correspondence is -- still naturally in the context of [[local prequantum field theory]] -- further refined from the context of [[symplectic manifolds]] to that of [[Poisson manifolds]]. Specifically, this is obtained by realizing that prequantized Lagrangian correspondences are really naturally to be regarded as correspondences-of-correspondences in a [[higher category of correspondences|2-category of correspondences]], where now the new lower-order correspondences are instead [[boundary field theories]] for a [[2d Chern-Simons theory]] (a non-perturbative [[Poisson sigma-model]]).  

## Classical mechanics by prequantized Lagrangian correspondences

The following is effectively a derivation of, and an introduction to, [[classical mechanics]] by studying [[correspondences]] in what is called (as we will explain) the _[[slice topos]] over the [[moduli stack]] of [[prequantum line bundles]]_. One such correspondence in this slice topos is precisely a _prequantized Lagrangian correspondences_ and the reader looking for these should skip ahead to the section _[Hamiltonian trajectories and prequantized Lagrangian correspondences](#HamiltonianTrajectoriesAndPrequantizedLagrangianCorrespondences)_. But for completeness and to introduce the technology used here, we start with introducing also more basic concepts, such as [[phase space]] etc.

### Phase spaces and symplectic manifolds
 {#PhaseSpaceAndSymplecticManifolds}

Given a [[physical system]], one says that its _[[phase space]]_ is the
space of its possible ("classical") histories or _[[trajectories]]_. 
The first two of [[Newton's laws of motion]] say that [[trajectories]] of [[physical systems]] are (typically) determined by [[differential equations]] of  _second_ order, and therefore these spaces of trajectories are (typically) equivalent to initial value data of 0th and of 1st derivatives. In [[physics]] this data (or rather its linear dual) is referred to as the _[[canonical coordinates]]_ and the _[[canonical momenta]]_, respectively, traditionally denoted by the symbols "$q$" and "$p$". 
But being [[coordinates]], these are actually far from being canonical in the mathematical sense; all that has invariant meaning is, locally, the surface element $\mathbf{d}p \wedge \mathbf{d}q$ spanned by a change of coordinates and momenta.

So far this says that a physical phase space is mathematically formalized
by a sufficiently [[smooth manifold]] $X$ which is equipped with a closed
and non-degenerate [[differential 2-form]] $\omega  \in \Omega^2_{\mathrm{cl}}(X)$, hence by a [[symplectic manifold]] $(X,\omega)$.

But if the [[mechanical system]], and hence the [[differential equations]]
that describe it, is subject to [[constraints]], then the full [[phase space]] is [[foliation|foliated]] by unconstrained phase spaces in the above sense and so the  above surface element may be any closed 2-form, not necessarily non-degenerate. This is a _[[pre-symplectic manifold]]_ $(X,\omega)$ and this is the generality considered in the following discussion: a _[[phase space]]_ is a _[[pre-symplectic manifold|pre-symplectic]] [[smooth manifold]]_.



+-- {: .num_example}
###### Example

The [[sigma-model]] describing the propagation of a [[particle]] on the [[real line]] $\mathbb{R}$ has as [[phase space]] the [[plane]] $\mathbb{R}^2 = T^\ast \mathbb{R}$ and as [[symplectic form]] its canonical [[volume form]]. Traditionally the two canonical [[coordinate functions]] on this phase space are denoted $q,p \;\colon\; \mathbb{R}^2 \longrightarrow \mathbb{R}$ (called the "[[canonical coordinate]]" and the "[[canonical momentum]]", respectively), and in terms of these the symplectic form in this example is $\omega = \mathbf{d} q \wedge \mathbf{d} p$.

=--

When dealing with spaces $X$ that are equipped with extra structure, such as  $\omega \in \Omega^2_{\mathrm{cl}}(X)$, then it is useful to have 
a _universal [[moduli space]]_ for these structures, and this will be central for our developments here. 
So we need a "[[smooth space]]" $\mathbf{\Omega}^2_{\mathrm{cl}}$ of sorts, characterized by the property that  there is a [[natural bijection]] between smooth closed differential  2-forms $\omega \in \Omega^2_{\mathrm{cl}}(X)$ and [[smooth maps]]
$
    X \longrightarrow \mathbf{\Omega}^2_{\mathrm{cl}}
$.
Of course such a universal moduli spaces of closed 2-forms does not exist in the  [[category]] of [[smooth manifolds]]. But it does exist canonically if we  slightly generalize the notion of "smooth space" suitably. 

+-- {: .num_defn}
###### Definition

A _[[smooth space]]_ or _smooth 0-type_ $X$ is 

1. an assignment to each $n \in \mathbb{N}$ of a  set, to be written $X(\mathbb{R}^n)$ and to be called the  _set of smooth maps from $\mathbb{R}^n$ into $X$_,

1. an assignment to each ordinary smooth function $f : \mathbb{R}^{n_1} \to \mathbb{R}^{n_2}$ between Cartesian spaces of  a function of sets $X(f) : X(\mathbb{R}^{n_2}) \to X(\mathbb{R}^{n_1})$, to be called the _pullback of smooth functions into $X$ along $f$_;

such that

1. this assignment respects composition of smooth functions;

1. this assignment respects the [[covering]] of [[Cartesian spaces]] by [[open disks]]: for every [[good open cover]] $\{\mathbb{R}^n \simeq U_i \hookrightarrow \mathbb{R}^n\}_i$, the set $X(\mathbb{R}^n)$ of smooth functions out of $\mathbb{R}^n$ into $X$ is in natural bijection with the set $\left\{ (\phi_i)_i \in \prod_i X(U_i) \;|\;  \forall_{i,j}\; \phi_i|_{U_{i} \cap U_j}   = \phi_j|_{U_{i} \cap U_j} \right\}$ of tuples of smooth functions out of the patches of the cover which agree on all intersections of two patches.

=--

For more on this see at _[[geometry of physics]]_ in the section _[Smooth spaces](geometry%20of%20physics#SmoothSpaces)_.

While the formulation of this definition is designed to make transparent its geometric meaning, of course equivalently but more abstractly this says the following:

+-- {: .num_defn}
###### Definition

 Write [[CartSp]] for the [[category]] of [[Cartesian spaces]] with 
[[smooth functions]] between them, and consider it as a [[site]] by equipping it with the [[coverage]] of [[good open covers]]. 
A _[[smooth space]]_ or _smooth 0-type_ is a [[sheaf]] on this site. 
The _[[topos]] of smooth 0-types_ is the [[category of sheaves]]
  $$
    \mathrm{Smooth}0\mathrm{Type} \coloneqq \mathrm{Sh}(\mathrm{CartSp})
	\,.
  $$

=--

In the following we will abbreviate the notation to
$$
  \mathbf{H} \coloneqq \mathrm{Smooth}0\mathrm{Type}
  \,.
$$

For the discussion of presymplectic manifolds, we need the following two 
examples.

+-- {: .num_example}
###### Example

  Every smooth manifold $X \in \mathrm{SmoothManifold}$ becomes
  a smooth 0-type by the assignment 
  $$
    X : n \mapsto C^\infty(\mathbb{R}^n, X)
	\,.
  $$
  This construction extends to a [[full subcategory|full embedding]]
  of [[smooth manifolds]] into [[smooth spaces]]
  $$
    SmoothManifold
    \hookrightarrow
    \mathbf{H}
  $$

=--

+-- {: .num_example}
###### Example

  For $p \in \mathbb{N}$, write $\mathbf{\Omega}^p_{\mathrm{cl}}$
  for the smooth space given by the assignment
  $$
    \mathbf{\Omega}^p_{\mathrm{cl}} : n \mapsto \Omega^p_{\mathrm{cl}}(\mathbb{R}^n)
  $$
  and by the evident pullback maps of differential forms.

=--

For more see at _[[geometry of physics]]_ in the section _[Differential forms](geometry%20of%20physics#DifferentialForms)_.


This solves the [[moduli problem]] for closed smooth differential forms:


+-- {: .num_prop #PresymplecticFormsAsMapsIntoASmoothSpace}
###### Proposition

  For $p \in \mathbb{N}$
  and $X \in SmoothManifold \hookrightarrow Smooth0Type$, 
  there is a [[natural bijection]]
  $$
    \mathbf{H}(X,\mathbf{\Omega}^p_{\mathrm{cl}})
	\simeq
	\Omega^p_{\mathrm{cl}}(X)
	\,.
  $$

=--

So a presymplectic manifold $(X,\omega)$ is equivalently a map of smooth spaces of the form
$$
  \omega \;\colon\;
    X \longrightarrow \mathbf{\Omega}^2_{\mathrm{cl}}
  \,.
$$

### Canonical transformations and symplectomorphisms

An [[equivalence]] between two [[phase spaces]], hence a re-expression
of the "canonical" coordinates and momenta, is called a 
_[[canonical transformation]]_ in [[physics]]. Mathematically this is
a _[[symplectomorphism]]_.

+-- {: .num_defn}
###### Definition

Given two [[symplectic manifolds]] $(X_1, \omega_1)$ and $(X_2, \omega_2)$ (which might well be two copies of one single symplectic manifold), a _[[symplectomorphism]]_ between them

$$
  f \;\colon\; (X_1, \omega_1) \longrightarrow (X_2, \omega_2)
$$

is a [[diffeomorphism]]

$$
  f \;\colon\; X_1 \longrightarrow X_2
$$

of the underlying [[smooth manifolds]], such that the [[pullback of differential forms|pullback]] of the second [[symplectic form]] along $f$ equals the first, 

$$
  f^\ast \omega_2 = \omega_1
  \,.
$$

=--


The above formulation of pre-symplectic manifolds as maps into a [[moduli space]] of closed [[differential 2-forms]] yields the following formulation of symplectomorphisms,  which is very simple in itself, 
but contains in it the seed of an important phenomenon:


+-- {: .num_prop}
###### Proposition

A [[symplectomorphism]] $f \colon (X_1, \omega_2) \longrightarrow (X_2, \omega_2)$ as above is, under the identification of prop. \ref{PresymplecticFormsAsMapsIntoASmoothSpace}, equivalently a [[commuting diagram]] in $\mathbf{H}$ of the form

$$
  \array{
    X_1 && \stackrel{f}{\longrightarrow}&& X_2
    \\
    & {}_{\mathllap{\omega_1}}\searrow && \swarrow_{\mathrlap{\omega_2}}
    \\
    && \Omega^2_{cl}
  }
  \,.
$$

=--

Situations like this are naturally interpreted in a _[[slice topos]]_:

+-- {: .num_defn}
###### Definition

For $A \in \mathbf{H}$ any [[smooth space]],
  the _[[slice topos]]_  $\mathbf{H}_{/A}$ is the [[category]] whose
  [[objects]] are objects $X \in \mathbf{H}$ equipped with [[maps]]
  $X \to A$, and whose [[morphisms]] are [[commuting diagrams]] in $\mathbf{H}$
  of the form
  $$
    \array{
      X &&\longrightarrow&& Y
      \\
      & \searrow && \swarrow
      \\
      && A
    }
  $$

=--

Hence if we write $\mathrm{SymplManifold}$ for the category of smooth pre-symplectic manifolds and symplectomorphisms betwen them, then we have the following.


+-- {: .num_prop}
###### Proposition


   The construction of
  prop. \ref{PresymplecticFormsAsMapsIntoASmoothSpace} constitutes a
  full embedding
  $$
     SymplManifold 
     \hookrightarrow 
     \mathbf{H}_{/\mathbf{\Omega}^2_{\mathrm{cl}}}
  $$
  of pre-symplectic manifolds with symplectomorphisms between them into 
  the slice topos of smooth spaces over the smooth moduli space of
  closed differential 2-forms.

=--

### Trajectories and Lagrangian correspondences

A [[symplectomorphism]] clearly puts two [[symplectic manifolds]] "in _[[relation]]_" to each other. But it does so also in the formal sense of [[relations]] in mathematics. Recall:

+-- {: .num_defn}
###### Definition

For $X,Y \in $ [[Set]] two [[sets]], a [[relation]] $R$ between [[elements]] of $X$ and [[elements]] of $Y$ is a [[subset]] of the [[Cartesian product]] set 

$$
  R \hookrightarrow X \times Y
  \,.
$$

More generally, for $X, Y \in \mathbf{H}$ two [[objects]] of a [[topos]] (such as the topos of [[smooth spaces]]), then a [[relation]] $R$ between them is a [[subobject]] of their [[Cartesian product]]

$$
  R \hookrightarrow X \times Y
  \,.
$$

=--

In particular any [[function]] induces the [[relation]] "$y$ is the image of $x$":

+-- {: .num_example}
###### Example

For $f \;\colon\; X \longrightarrow Y$ a [[function]], its _induced relation_ is the [[relation]] which is exhibited by the [[graph of a function|graph]] of $f$

$$
  graph(f) 
    \coloneqq 
  \left\{
    (x,y) \in X \times Y \;|\; f(x) = y
  \right\}
$$

canonically regarded as a subobject 

$$
  graph(f) \hookrightarrow X \times Y
  \,.
$$

=--

Hence in the context of classical mechanics, in particular any [[symplectomorphism]] $f \;\colon\; (X_1, \omega_1) \longrightarrow (X_2, \omega_2)$ induces the relation 

$$
  graph(f) \hookrightarrow X_1 \times X_2
  \,.
$$

Since we are going to think of $f$ as a kind of "physical process", it is useful to think of the [[smooth space]] $graph(f)$ here as the _space of [[trajectories]]_ of that process. To make this clearer, notice that we may equivalently rewrite every [[relation]] $R \hookrightarrow X \times Y$ as a [[diagram]] of the form

$$
  \array{
     && R
      \\
     & {}^{\athllap{i_X}}\swarrow && \searrow^{\mathrlap{i_Y}}
    \\
    X && && Y
  }
$$

exhibiting the fact that every [[element]] $(x \sim y) \in R$ defines an element $x = i_X(x \sim y) \in X$ and an element $y = i_Y(x \sim y) \in Y$. 

Then if we think of $R = graph(f)$ we may read the relation as "there is a trajectory from an incoming configuration $x_1$ to an outgoing configuration $x_2$"

$$
  \array{
    && graph(f)
    \\
    & {}^{\mathllap{incoming}}\swarrow && \searrow^{\mathrlap{outgoing}}
    \\
    X_1 && && X_2
  }
  \,.
$$

Notice here that the defining property of a relation as a [[subset]]/[[subobject]] translates into the property of [[classical physics]] that there is _at most one trajectory_ from some incoming configuration $x_1$ to some outgoing trajectory $x_2$ (for a fixed parameter time interval at least, we will make this relation precise in the next section when we genuinely consider Hamiltonian correspondences).

In a more general context one could consider there to be several such trajectories, and even a whole smooth space of such trajectories between given incoming and outgoing configurations. Each such trajectory would "relate" $x_1$ to $x_2$, but each in a possible different way. We can also say that each trajectory makes $x_1$ _correspond_ to $x_2$ in a different way, and that is the mathematical term usually used:

+-- {: .num_defn}
###### Defininition

For $X, Y \in \mathbf{H}$ two spaces, a [[correspondence]] between them is a [[diagram]] in $\mathbf{H}$ of the form

$$
  \array{
     && Z
     \\
     & \searrow && \searrow
    \\
    X && && Y
  }
$$

with no further restrictions. 

=--

Here $Z$ is also called the _[[correspondence space]]_. 

Observe that the [[graph of a function]]  $f \colon X \to Y$ is, while defined differently, in fact [[equivalent]] to just the space $X$, the equivalence being induced by the map $x \mapsto (x,f(x))$

$$
  X \stackrel{\simeq}{\longrightarrow} graph(f)
  \,.
$$

In fact the [[relation]]/[[correspondence]] which expresses "$y$ is the image of $f$ under $x$" may just as well be exhibited by the diagram

$$
  \array{
    && X
    \\
    & {}^{\mathlla{id}}\swarrow && \searrow^{\mathrlap{f}}
    \\
    X && && Y
  }
  \,.
$$

It is clear that this correspondence with correspondence space $X$ should be regarded as being equivalent to the one with correspondence space $graph(f)$. We may formalize this equivalence by noting that it is exhibited by the existence of the following [[commuting diagram]]

$$
  \array{
     && X
     \\
    & {}^{\mathllap{id}}\swarrow && \searrow^{\mathrlap{f}}
    \\
    X &&\downarrow^{\mathrlap{\simeq}} && Y
    \\
    & {}_{\mathllap{i_X}}\nwarrow && \nearrow_{\mathrlap{i_Y}}
    \\
    && graph(f)
  }
  \,.
$$

A diagram like this we call an _[[equivalence]] or [[correspondences]]_.

The notion of correspondence makes sense (in particular) in every [[topos]]. In particular also in the [[slice toposes]] of a given ambient topos. 

To see how this is useful in the present context, notice the following basic observation:

+-- {: .num_prop}
###### Proposition

Let $f \colon X_1 \to X_2$ be a [[smooth function]] between [[smooth manifolds]] and let

$$
  \array{
     && graph(f)
     \\
     && \downarrow
     \\
     && X_1 \times X_2
     \\
     & {}^{\mathllap{p_1}}\swarrow && \searrow^{\mathrlap{p_2}}
     \\
    X_1 && && X_2
  }
$$

be the induced [[correspondence]]. If $\omega_1$ and $\omega_2$ are [[symplectic forms]] on $X_1$ and $X_2$, respectively, then $p_1^\ast \omega_1 - p_2^\ast \omega_2$ is a pre-symplectic form on $X_1 \times X_2$, and $f$ is a [[symplectomorphism]] precisely if $graph(f) \hookrightarrow X_1 \times X_2$ is a [[Lagrangian submanifold]].

=--

Traditionally one considers now the [[Cartesian product]] [[manifold]] $X_1 \times X_2$ itself as a [[symplectic manifold]] equipped with the [[pullback of differential forms|pullback]] symplectic form

$$
  (X_1 \times X_2 , \; p_1^\ast \omega_1 - p_2^\ast \omega_2)
$$

and observes then that the [[diffeomorphism]] $f$ being a [[symplectomorphism]] is equivalent to its [[graph of a function|graph]] being a [[Lagrangian submanifold]] of this product symplectic manifold. In that case the above [[correspondence]] is called a _[[Lagrangian correspondence]]_ between $(X_1, \omega_1)$ and $(X_2, \omega_2)$.

+-- {: .num_remark}
###### Remark

In the language of the [[topos]] $\mathbf{H}$ of [[smooth spaces]], this has a more evident formulation: that $graph(f)$ is an [[isotropic subspace]] equivalently means that there is a [[commuting diagram]] of [[smooth spaces]] of the following form

$$
  \array{
    && graph(f)
    \\
    & \swarrow && \searrow
    \\
    X_1 && && X_2
    \\
    & {}_{\mathllap{\omega_1}}\searrow && \swarrow_{\mathrlap{\omega_2}}
    \\
   && \Omega^2_{cl}
  }
  \,.
$$

This in turn is equivalent to being a [[correspondence]] in the [[slice topos]] $\mathbf{H}_{/\Omega^2_{cl}}$.

=--


### Hamiltonian (time evolution) trajectories and Hamiltonian correspondences

An important class of [[symplectomorphisms]] are the [[Hamiltonian symplectomorphisms]] from a [[symplectic manifold]] to itself, those which are the [[flow]] of a [[Hamiltonian vector field]] on $(X,\omega)$ induced by a [[Hamiltonian function]] 

$$
  H \;\colon\; X \longrightarrow \mathbb{R}
  \,.
$$

Using the [[Poisson bracket]] $\{-,-\}$ induced by the [[symplectic form]] $\omega$ and identifying the [[derivation]] $\{H,-\}$ with the corresponding [[Hamiltonian vector field]] and the exponent notation $\exp(t \{H,-\})$ with the corresponding [[flow]] for parameter "time" $t \in \mathbb{R}$, we may write these as 

$$
  \exp( t \{H,-\}) \;\colon\; (X,\omega) \longrightarrow (X,\omega)
  \,.
$$ 

Here we refer to [[Lagrangian correspondences]] induced from [[Hamiltonian symplectomorphisms]] as _Hamiltonian correspondences_.

+-- {: .num_remark #HamiltonianCorrespondencesAreSpacesOfTrajectories}
###### Remark

The [[smooth space|smooth]] [[correspondence space]] of a
Hamiltonian correspondence is naturally identified with the space of
_classical [[trajectories]]_ 

$$
  Fields_{traj}^{class}(t) = graph\left( \exp(t) \{H,-\}\right)
$$

in that 

1. every point in the space corresponds uniquely to a [[trajectory]] of parameter time length $t$ characterized as satisfying the [[equations of motion]] as given by [[Hamilton's equations]] for $H$;

1. the two projection maps to $X$ send a trajectory to its initial and to its final configuration, respectively.

=--

+-- {: .num_remark}
###### Remark


Forming Hamiltonian correspondences consitutes a [[functor]] from 1-dimensional [[cobordisms]] with [[Riemannian structure]] to the [[category of correspondences]] in the [[slice topos]]:

$$
  \exp((-)\{H,-\}) \;\colon\; Bord^{Riem}_1 \longrightarrow Corr_1(\mathbf{H}_{/\Omega^2})
$$

since for all ("time") parameter valued $t_1, t_2 \in \mathbb{R}$ 
we have a [[composition]] (by [[fiber product]]) of [[correspondences]] exhibited
by the following [[pasting diagram]]:

$$
  \array{
    &&&& graph\left(\exp\left(\left(t_1+t_2\right)\right) \left\{H,-\right\} \right)
    \\
    && & \swarrow && \searrow
    \\
    && graph\left(\exp\left(t_1\right)\left\{H,-\right\}\right) 
    && (pb) && graph\left(\exp\left(t_2 \left\{H,-\right\}\right)\right)
    \\
    & \swarrow && \searrow & & \swarrow && \searrow
    \\
    X && && X && && X
    \\
    & \searrow &&& \downarrow &&& \swarrow
    \\
    &&&& \Omega^2_{cl}
  }
  \,.
$$

=--

### The kinetic action, pre-quantization and differential cohomology

Given a pre-symplectic form $\omega \in \Omega^2_{\mathrm{cl}}(X) $, 
by the [[Poincare lemma]] there is a good cover $\{U_i \hookrightarrow X\}_i$
and smooth 1-forms $\theta_i \in \Omega^1(U_i)$ such that 
$\mathbf{d}\theta_i = \omega_{|U_i}$. Physically such a 1-form is 
(up to a factor of 2) a choice
of _[[kinetic energy]] density_ called a _[[kinetic Lagrangian]]_ 
$L_{\mathrm{kin}}$:
$$
  \theta_i = 2 L_{\mathrm{kin}, i}
  \,.
$$
Given a path $\gamma : [0,1] \to X$ in phase space, its 
_[[kinetic action]]_ $S_{\mathrm{kin}}$ 
is supposed to be the integral of $\mathcal{L}_{\mathrm{kin}}$
along this trajectory. In order to make sense of this with the
above locally defined kinetic Lagrangians,
there are to be functions $g_{i j} \in C^\infty(U_i \cap U_j, \mathbb{R})$
such that
$$
  \theta_j|_{U_j} - \theta_i|_{U_i} = \mathbf{d}g_{i j}
  \,.
$$
If on triple intersections these functions satisfy
$$
  g_{ij} + g_{j k} = g_{i k}
$$
then there is a well defined action functional
$$
  S_{\mathrm{kin}}(\gamma) \in \mathbb{R}
$$
obtained by dividing $\gamma$ into small pieces that each map to a single
patch $U_i$, integrating $\theta_i$ along this piece, and adding the 
contribution of $g_{i j}$ at the point where one switches from using
$\theta_i$ to using $\theta_j$.

However, requiring this condition on triple overlaps as an equation between
$\mathbb{R}$-valued functions makes the local patch structure trivial: if this
holds then one can find a single $\theta \in \Omega^1(X)$ and
functions $h_i \in C^\infty(U_i, \mathbb{R})$ such that 
$\theta_i = \theta|_{U_i} + \mathbf{d}h_i$. This has the
superficially pleasant effect that the the action is 
simply the integral against this globally defined 1-form, 
$S_{\mathrm{kin}} = \int_{[0,1]} \gamma^\ast L_{\mathrm{kin}}$, but it also
means that the pre-symplectic form $\omega$ is exact, which is 
not the case in many important examples.

On the other hand, what really matters in physics is not the action functional
$S_{\mathrm{kin}} \in \mathbb{R}$ itself, 
but the _exponentiated_ action 
$$
  \exp( \tfrac{i}{\hbar} S ) \in \mathbb{R}/(2\pi \hbar)\mathbb{Z}
  \,.
$$
For this to be well defined, one only needs that the equation
$g_{i j} + g_{j k} = g_{i k}$ holds modulo addition of an integral
multiple of $h = 2\pi \hbar$, which is _[[Planck's constant]]_. 
If this is the case, then one says that the data 
$(\{\theta_i\}, \{g_{i j}\})$ defines 
equivalently

* a $U(1)$-principal connection;

* a degree-2 cocycle in ordinary differential cohomology 

on $X$, with _[[curvature]]_ the given symplectic 2-form $\omega$.

Such data is called a _[[pre-quantization]]_ of the symplectic manifold 
$(X,\omega)$. Since it is the exponentiated action functional
$\exp(\frac{i}{\hbar} S)$ that enters the quantization of the 
given mechanical system (for instance as the integrand of a 
[[path integral]]),
the [[prequantization]] of a symplectic manifold is indeed precisely
the data necessary before quantization.

Therefore, in the spirit of the above discussion of pre-symplectic structures,
we would like to refine the smooth moduli space of closed 
differential 2-forms to a moduli space of prequantized differential 
2-forms. 

Again this does naturally exist if only we allow for a good notion of
"space". An additional phenomenon to be taken care of now is that
while pre-symplectic forms are either equal or not, their
pre-quantizations can be different and yet be _[[equivalence|equivalent]]_:

because there is still a remaining freedom to change this data without
changing the exponentiated action along a _closed_ path:
we say that a choice of functions 
$h_i \in C^\infty(U_i, \mathbb{R}/(2\pi\hbar)\mathbb{Z})$
defines an equivalence between 
$(\{\theta_i\}, \{g_{i j}\})$ and $(\{\tilde \theta_i\}, \{\tilde g_{i j}\})$
if $\tilde \theta_i - \theta_i = \mathbf{d}h_i$
and $\tilde g_{i j} - g_{i j} = h_j - h_i$.

This means that the space of prequantizations of $(X,\omega)$
is similar to an _[[orbifold]]_: it has points which are connected by 
gauge equivalences: there is a _[[groupoid]]_ of pre-quantum structures
on a manifold $X$. 

Write then $\mathbf{B}U(1)_{\mathrm{conn}}$
for the moduli space of prequantizations. This is characterized by the fact that 
a map

$$
    X 
      \longrightarrow
   \mathbf{B}U(1)_{\mathrm{conn}}
$$

is equivalently a prequantum structure, and a homotopy between two 
such maps is equivalently a gauge transformation between those.

$$
  F
  \;\colon\;
   \mathbf{B}U(1)_{\mathrm{conn}}
     \longrightarrow
   \mathbf{\Omega}^2_{\mathrm{cl}}
$$

A prequantization of $(X,\omega)$ is hence a lift $\nabla$ in
$$
  \array{
    X &\stackrel{\nabla}{\longrightarrow}& \mathbf{B}U(1)_{conn}
    \\
    & {}_{\mathllap{\omega}}\searrow & \downarrow^{\mathrlap{F_{(-)}}}
    \\
    && \mathbf{\Omega}^2_{cl}
  }
  \,.
$$


### The classical action, the Legendre transform and Prequantized Lagrangian correspondences
 {#HamiltonianTrajectoriesAndPrequantizedLagrangianCorrespondences}

But the reason to consider [[Hamiltonian symplectomorphisms]] instead of general [[symplectomorphisms]] is really because these give [[homomorphisms]] not just between plain [[symplectic manifolds]], but between their _prequantizations_. To these we turn now.

+-- {: .num_defn}
###### Definition


A _[[prequantization]]_ of a [[symplectic manifold]] $(X,\omega)$ is -- if it exists -- a choice of [[circle group]]-[[principal connection]] $\nabla$ on $X$ whose [[curvature]] 2-form is the given [[symplectic form]]

$$
  F_\nabla = \omega
  \,.
$$

=--

+-- {: .num_remark #PrequantizationIsLiftThroughCurvatureBaseChange}
###### Remark

In the [[topos]] of [[smooth spaces]], or rather in the [[(2,1)-topos]] $\mathbf{H}$ of [[smooth groupoids]], this means that a [[prequantization]] is a lift $\nabla$ in the [[diagram]]

$$
  \array{
    X &\stackrel{\nabla}{\longrightarrow}& \mathbf{B}U(1)_{conn}
    \\
    & {}_{\mathllap{\omega}}\searrow & \downarrow^{\mathrlap{F}_{(-)}}
    \\
    && \Omega^2_{cl}
  }
  \,,
$$

where $\mathbf{B}U(1)_{conn}$ is the [[moduli stack]] of [[circle n-bundle with connection|circle bundle with connection]]. For details on this see at _[[geometry of physics]]_ the section _[Smooth homotopy types](geometry+of+physics#SmoothnGroupoids)_.

More abstractly we hence find that a [[prequantization]] is a lift of a symplectic manifold regard as an object of the [[slice topos]] $\mathbf{H}_{/\Omega^2_{cl}}$ through the [[base change]]/[[dependent sum]] map induced by the universal [[curvature]] map $F_{(-)} \;\colon\;\mathbf{B}U(1)_{conn} \longrightarrow \Omega^2_{cl}$ to the [[slice (infinity,1)-topos|slice (2,1)-topos]] $\mathbf{H}_{/\mathbf{B}U(1)_{conn}}$.

=--

Then for two prequantized symplectic manifolds, it is now clear what a _prequantized correspondence_ between them is: 

+-- {: .num_defn}
###### Definition


A _prequantization_ of a [[Lagrangian correspondence]] $Y \colon (X_1,\omega) \to (X_2,\omega_2)$
is a [[diagram]] in $\mathbf{H}$ of the form

$$
  \array{
    && Y
    \\
    & \swarrow &\swArrow& \searrow
    \\
    X_1 &\stackrel{\nabla_1}{\longrightarrow}& \mathbf{B}U(1)_{conn} &\stackrel{\nabla_2}{\longleftarrow}& X_2
    \\
    & {}_{\mathllap{\omega_1}}\searrow && \swarrow_{\mathrlap{\omega_2}}
    \\
   && \Omega^2_{cl}
  }
$$

hence a correspondence in the [[slice (infinity,1)-topos|slice (2,1)-topos]] $\mathbf{H}_{/\mathbf{B} U(1)_{conn}}$.

=--

In the case that $X_1$ and $X_2$ have the same [[dimension]], this is equivalent to a morphism

$$
  \array{
    X_1 &&\stackrel{\phi}{\longrightarrow}&& X_2
    \\
    & {}_{\mathllap{\nabla_1}}\searrow &\swArrow& \swarrow_{\mathrlap{\nabla_2}}
    \\
    && \mathbf{B}U(1)_{conn}
  }
$$

hence a morphism in the slice $\mathbf{H}_{/\mathbf{B}U(1)_{conn}}$. This has been discussed in detail in ([hgp 13](#FiorenzaRogersSchreiber13a)).

One finds that [[infinitesimal object|infinitesimally]] such morphism are given by a [[Hamiltonian]] and its [[Legendre transform]] (...)

[[!include Hamiltonian and Lagrangian -- table]]

### The classical action functional prequantizes Hamiltonian correspondences
 {#TheClassicalActionFunctionalPrequantizesHamiltonianCorrespondences}

The natural question now is which Hamiltonian correspondences may be prequantized and what the corresponding prequantum data is. The following proposition shows that the prequantization of the Hamiltonian correspondence given by a [[Hamiltonian]] $H$ is given by the exponentiated [[action functional]] associated with $H$, namely the exponentiated integral over its [[Lagrangian]] $L$, which is its [[Legendre transform]] $L = p \frac{\partial H}{\partial p} - H$.

Of course all the ingredients in the statement and in the proof of the following proposition are classical. But the notion of prequantized Lagrangian correspondence serves to neatly unify these ingredients and give them a natural place in the context of [[local prequantum field theory]] which later naturally leads to the formulation of [[higher prequantum geometry|higher]] [[local prequantum field theory]] and its [[motivic quantization]].

+-- {: .num_prop #HamiltonianCorrespondenceIsPrequantizedByTheExponentiatedAction}
###### Proposition

Consider the [[phase space]] $(\mathbb{R}^2, \; \omega = \mathbf{d} q \wedge \mathbf{d} p)$ equipped with its canonical [[prequantization]] by $\theta = p \mathbf{d}q$. Then for $H \colon \mathbb{R}^2 \to \mathbb{R}$ a [[Hamiltonian]], and for $t \in \mathbb{R}$ a parameter ("time"), a lift of the [[Lagrangian correspondence]] $\exp(t \{H,-\})$ to a prequantized Lagrangian correspondence is given by

$$
  \array{   
    && graph\left( \exp(t \{H,-\}) \right)
    \\
    & \swarrow && \searrow
    \\
    X && \swArrow_{\exp( i S_t  )} && X
    \\
    & {}_{\mathllap{\omega_1}} \searrow && \swarrow_{\mathrlap{\omega_2}}
    \\
    && \mathbf{B}U(1)_{conn}
  }
  \,,
$$

where 

* $S_t \;\colon\; \mathbb{R}^2 \longrightarrow \mathbb{R}$ is the [[action functional]] of the classical [[trajectories]] induced by $H$,

* which is the [[integral]] $S_t = \int_{0}^t L \, d t$ of the [[Lagrangian]] $L \,d t$ induced by $H$,

* which is the [[Legendre transform]]

  $$
    L \coloneqq p \frac{\partial H}{\partial p} - H \;\colon\; \mathbb{R}^2 \longrightarrow \mathbb{R}
    \,. 
  $$

In particular, this induces a [[functor]]

$$
  \exp(i S)
  \;\colon\;
  Bord_1^{Riem} 
    \longrightarrow 
  Corr_1(\mathbf{H}_{/\mathbf{B}U(1)_{conn}})
  \,.
$$

=--

This is a special case of the discussion in ([hgp 13](#FiorenzaRogersSchreiber13a)).

+-- {: .proof}
###### Proof

The canonical [[prequantization]] of $(\mathbb{R}^2, \mathbf{d} q \wedge \mathbf{d} p)$ is the globally defined [[connection on a bundle|connection]] 1-form

$$
  \theta \coloneqq p \, \mathbf{d} q
  \,.
$$

We have to check that on $graph(\exp(t\{H,-\}))$ we have the [[equation]]

$$
  p_2 \mathbf{d} q_2 = p_1 \mathbf{d} q_1 + \mathbf{d} S 
  \,.
$$

Or rather, given the setup, it is more natural to change notation to

$$
  p_t \mathbf{d} q_t = p \mathbf{d} q + \mathbf{d} S
  \,.
$$

Notice here that by the nature of $graph(\exp(t\{H,-\}))$ we can identify

$$
  graph(\exp(t\{H,-\}))
  \simeq
  \mathbb{R}^2
$$

and under this identification

$$
  q_t = \exp(t \{H,-\}) q
$$

and

$$
  p_t = \exp(t \{H,-\}) p
  \,.
$$

It is sufficient to check the claim [[infinitesimal object|infinitesimally]]. So let $t = \epsilon$ be an [[infinitesimal object|infinitesimal]], hence such that $\epsilon^2 = 0$. Then the above is [[Hamilton's equations]] and reads equivalently

$$
  q_\epsilon = q + \frac{\partial H}{\partial p} \epsilon
$$

and

$$
  p_\epsilon = p - \frac{\partial H}{\partial q} \epsilon
  \,.
$$

Using this we compute

$$
  \begin{aligned}
    \theta_\epsilon - \theta 
     & = 
    p_\epsilon \, \mathbf{d} q \epsilon - p \mathbf{d} q
     \\
      & =
    \left(p - \frac{\partial H}{\partial q} \epsilon \right)
    \mathbf{d}
    \left(
      q + \frac{\partial H}{\partial p} \epsilon
    \right)
    - p \mathbf{d}q
    \\
    & =
    \epsilon
    \left(
      p \mathbf{d}\frac{\partial H}{\partial p}
      - 
      \frac{\partial H}{\partial q} \mathbf{d}q
    \right)
    \\
    & = 
    \epsilon
    \left(
      \mathbf{d}\left( p \frac{\partial H}{\partial p}\right)
      -
      \frac{\partial H}{\partial p} \mathbf{d} p
      - 
      \frac{\partial H}{\partial q} \mathbf{d}q
    \right)
    \\
    & =
    \epsilon \mathbf{d}
    \left(
      p \frac{\partial H}{\partial p}
      -
      H
    \right)
  \end{aligned}
  \,.
$$

=--

+-- {: .num_remark}
###### Remark

In summary,  prop. \ref{HamiltonianCorrespondenceIsPrequantizedByTheExponentiatedAction} 
and remark \ref{HamiltonianCorrespondencesAreSpacesOfTrajectories}
say that a prequantized Lagrangian correspondence is conceptually of the following form

$$
  \array{
    && {{space\,of} \atop {trajectories}}
    \\
    & {}^{\mathllap{{initial}\atop {values}}}\swarrow && \searrow^{\mathrlap{{Hamiltonian} \atop {evolution}}}
    \\
    phase\,space_{in} && \swArrow_{{action} \atop {functional}} && phase \,space_{out}
    \\
    & {}_{\mathllap{{prequantum}\atop {bundle}_{in}}}\searrow 
    && 
    \swarrow_{\mathrlap{{prequantum} \atop {bundle}_{out}}}
    \\
    && {{2-group} \atop {of\,phases}}
  }
  \,.
$$

=--

### The Heisenberg group and the Poisson bracket from prequantized Lagrangian equivalences

Above we have interpreted [[maps]] $f \colon X \to Y$ as [[correspondences]]
between $X$ and $Y$ by taking the [[correspondence space]] to be the 
[[graph of a function|graph]] of $f$. There is also another natural way
to regard maps as correspondences: we may simply take $X$ as the correspondence
space, take the left map out of it to be the identity and the right map 
to be $f$ itself:

$$
  \left(
    X \stackrel{f}{\longrightarrow} Y
  \right)
  \;\;  
    \mapsto
  \;\;
  \left(
    \array{
       && X
       \\
       & {}^{\mathllap{id}}\swarrow && \searrow^{\mathrlap{f}}
       \\
      X && && Y
    }
  \right)
  \,.
$$

Consider now those correspondences which are [[equivalences]] ([[isomorphisms]])
in the [[category of correspondences]] $Corr_1(\mathbf{H})$. If we forget
the [[smooth structure]] on everything and consider just correspondences
of the underlying [[sets]], hence $Corr_1(Set)$, then it is easy to see
that under the [[cardinality]] map correspondences are given by [[matrices]]
with [[cardinality]] entries and [[composition]] of correspondence 
by [[fiber product]] induces [[matrix multiplication]]. 

Therefore for a correspondence to be an equivalence-transformation it has
to be of the form above, induced by a direct [[map]], which in 
addition is an [[equivalence]] $f \colon X \stackrel{\simeq}{\longrightarrow} Y$.

+-- {: .num_prop}
###### Proposition

Let $(X,\omega)$ be a [[symplectic manifold]] and choose any 
[[prequantization]] $(L,\nabla)$, thought of, via remark \ref{PrequantizationIsLiftThroughCurvatureBaseChange}, as an object in the [[slice (infinity,1)-topos|slice (2,1)-topos]],
$\nabla \in \mathbf{H}_{/\mathbf{B}U(1)_{conn}}$. Then

* the [[automorphism group]] of $\nabla$ in the [[category of correspondences]] $Corr_1(\mathbf{H}_{/\mathbf{B}U(1)_{conn}})$ is what is called the _[[quantomorphism group]]_;

* its [[Lie algebra]] is the [[Poisson bracket]] Lie algebra of $(X,\omega)$.

=--

See ([hgp 13](#FiorenzaRogersSchreiber13a))

For some reason, the [[quantomorphism group]] which is the [[Lie integration]] of the [[Poisson bracket]] is less famous than the [[Heisenberg group]] that sits inside it:

+-- {: .num_remark}
###### Remark

Suppose that $(X,\omega)$ itself has the structure of a [[group]] (for instance if $(X,\omega)$ is a [[symplectic vector space]] such as $(\mathbb{R}^{2n}, \sum_i p_i \mathbf{d}q^i)$ ), then the [[subgroup]] of the [[quantomorphism group]] whose underlying [[diffeomorphisms]] are given by the action of $X$ is the _[[Heisenberg group]]_ of $X$.

=--

### Hamiltonian actions and moment maps are actions by prequantized Lagranian correspondences

For $G$ a [[Lie group]], a [[Hamiltonian action]] of $G$ on $(X,\omega)$ is equivalently an action by prequantized Lagrangian correspondences, hence a group [[homomorphism]]

$$
  G \longrightarrow \mathbf{Aut}_\nabla(Corr_1(\mathbf{H}_{/\mathbf{B}U(1)_{conn}}))
  \,.
$$

The [[Lie differentiation]] of this is the corresponding [[moment map]].

See ([hgp 13](#FiorenzaRogersSchreiber13a))



## References

As far as it is not covered by traditional material, the above discussion is taken from

* [[Domenico Fiorenza]], [[Chris Rogers]], [[Urs Schreiber]], _[[schreiber:Higher geometric prequantum theory]]_
 {#FiorenzaRogersSchreiber13a}

* [[Joost Nuiten]], [[Urs Schreiber]], _[[schreiber:Local prequantum field theory]]_

For more and related references see there and see at _[[motivic quantization]]_.

[[!redirects prequantized Lagrangian correspondences]]

[[!redirects prequantum Lagrangian correspondence]]
[[!redirects prequantum Lagrangian correspondences]]
