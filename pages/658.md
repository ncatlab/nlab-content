#Contents#
* automatic table of contents goes here
{:toc}

## Definition ##

If $C$ and $D$ are [[categories]], a **profunctor** from $C$ to $D$ is a functor $D^{op}\times C \to Set$.  Such a  profunctor is usually written as $F\colon  C &#x21F8; D$.

Every [[functor]] $f\colon C\to D$ induces two profunctors $D(1,f)\colon C &#x21F8; D$ and $D(f,1)\colon D &#x21F8; C$, defined by $D(1,f)(d,c) = D(d,f(c))$ and $D(f,1)(c,d) = D(f(c),d)$.  These profunctors are called *representable* (or sometimes one of them is *corepresentable*).

The notion generalizes to many other kinds of categories.  For instance, if $C$ and $D$ are [[enriched category|enriched]] over some symmetric [[closed monoidal category]] $V$, then a profunctor from $C$ to $D$ is a $V$-functor $D^{op} \otimes C\to V$.  If they are [[internal categories]], then a profunctor $C &#x21F8; D$ is an [[internal diagram]] on $D^{op}\times C$, and so on.  There are also other equivalent definitions in each case; see below.

A profunctor is also sometimes called a **[[bimodule|(bi)module]]** or a **distributor** or a **correspondence**, though the latter word is also used for a [[span]].  The term "module" tends to be common in Australia, especially in the enriched case; here the intuition is that for one-object $V$-categories, i.e. monoids in $V$, profunctors really are the same as [[bimodules]] between such monoids in the usual sense.  "Profunctor" is perhaps more common in the Set-based and internal cases (but is also used in the enriched case); here the intuition is that a profunctor is a generalization of a functor, via the construction of "representable" profunctors.  Jean Bénabou, who invented the term and originally used "profunctor," now prefers "distributor," which is supposed to carry the intuition that a distribut**or** generalizes a funct**or** in a similar way to how a [[distribution]] generalizes a [[function]].

Note that the convention that a profunctor is a functor $D^{op}\times C \to Set$ is not universal; some authors reverse $C$ and $D$ and/or put the "op" on the other one.  See the discussion below.


## The bicategory of profunctors

Profunctors are composed by using a [[coend]] to "trace out" the middle variable.  Specifically, for profunctors $F : C &#x21F8; D$ and $G : D &#x21F8; E$, their composite $G \circ F: C &#x21F8; E$ is defined to be

$$
  G \circ F := \int^{d \in D} F(d,-)\otimes G(-,d)
  \,.
$$

This yields a [[bicategory]] in which

* objects are categories,

* morphisms are profunctors with the above composition, and

* 2-morphisms are natural transformations.

This bicategory is variously denoted $Prof$, $Mod$, or $Dist$, according to one's chosen name for profunctors.  In the enriched case, it is written $V Prof$ or $V Mod$ or $V Dist$.

The construction of the "representable" profunctors $D(1,f)$ and $D(f,1)$ from a functor $f\colon C\to D$ yield two identity-on-objects functors $Cat \to Prof$ and $Cat^{op}\to Prof$.  Moreover, it is easy to check that $D(1,f) \vdash D(f,1)$ in the bicategory $Prof$; thus $Cat\to Prof$ is a [[proarrow equipment]] in the sense of Wood (in fact, the prototypical one).  This same fact can also be expressed by defining a (pseudo) [[double category]] in which functors and profunctors are the two kinds of arrows; the construction of representable profunctors is then given by [[companion]]s and [[conjoint]]s in this double category, which make it a [[framed bicategory]], hence an equivalent representation of a proarrow equipment.


## Alternative definitions ##


### In terms of colimit-preserving functors on presheaf categories ###

A basic fact (e.g. Kashiwara, Schapira, [[Categories and Sheaves]], corollary 2.7.4, page 63) is that for $A$ a [[cocomplete category]], [[cocontinuous functor|colimit-preserving functors]] from [[presheaf|presheaves]] on some category $C$ to $A$ are canonically equivalent to functors from $C$ to $A$: we have an equivalence of [[functor category|functor categories]]

$$
 Cocont(PSh(C),A)
 \simeq
  Func(C,A)
  \,.
$$

This may be thought of as a consequence of the [[co-Yoneda lemma]] (and hence, of course, of the [[Yoneda lemma]]) which says that every presheaf is colimit over [[representable functor|representables]], i.e. over objects in the image of the [[Yoneda embedding]] $Y : C \to PSh(C)$. This immediate implies that a colimit-preserving functor on $PSh(C)$ is already determined by its restriction along $Y$ to $C$.

Now, profunctors $D^{op} \otimes C \to V$ are [[adjunct]] to functors $C \to [D^{op}, V] \simeq PSh(D)$. Hence by the above, profunctors are equivalent to colimit-preserving functors

$$
  PSh(C) \to PSh(D)
  \,.
$$

Indeed, there is an equivalence of bicategories between $V Prof$ and the 2-category of categories and colimit-preserving functors and natural transformation between their presheaf categories.  Note that the latter is a [[strict 2-category]] which can thus serve as a "natural" strictification of $V Prof$.

An explicit statement of this can be found for instance as prop. 4.2.4

* Gian Luca Cattani, PhD thesis from BRICS, University of Aarhus ([pdf](http://www.daimi.au.dk/~luca/thesis.html))

From this perspective, the representable profunctor induced by an ordinary $V$-functor $f : C \to D$ is 
the [[adjunct]] of the postcomposition 
$$
  C \stackrel{f}{\to} D \stackrel{Y}{\to} [D^{op},V]
$$
with the [[Yoneda embedding]] under the Hom-adjunction.

The formulation of profunctors as colimit-preserving functors on presheaf categories plays a big role also in the context of [[(∞,1)-categories]]. A [[presentable (∞,1)-category]] is one equivalent to a [[localization]] of some [[(∞,1)-category of (∞,1)-presheaves]] (i.e. some [[reflective (∞,1)-subcategory]] of the latter). The collection of all [[presentable (∞,1)-categories]] and colimit-preserving [[(∞,1)-functors]] betweem them forms the [[symmetric monoidal (∞,1)-category of presentable (∞,1)-categories]], whose [[tensor product]] is the "bilinear" tensor product coming from interpreting colimit-preserving functors as "linear" (reading: colimit $\sim$ sum).

This $(\infty,1)$-category $Pr^L$ therefore is an $(\infty,1)$-analog of $Set\text{-}Mod$. In [[geometric ∞-function theory]] one finds (see section 4 there) that morphisms in $Pr^L$ encode the "correspondence operations" such as Fourier-Mukai and its generalizations. See in that context also the examples below.


### In terms of two-sided discrete fibrations

Recall that a functor $D^{op}\to Set$ can equivalently be described as a [[discrete fibration|discrete]] [[(Grothendieck) fibration]], and similarly a functor $C\to Set$ can be described as a discrete opfibration.  Thus, a profunctor $D^{op}\times C\to Set$ could be described by a discrete opfibration over $D^{op}\times C$, or a discrete fibration over $D\times C^{op}$, but there is also a more directly "two-sided" fibrational description.  A *two-sided fibration* from $C$ to $D$ is a functor $E\to C\times D$ which is a fibration over $D$ and an opfibration over $C$ in a compatible way; see [[Grothendieck fibration]] for details.  Such a fibration represents a pseudofunctor $D^{op}\times C\to Cat$, and hence if it is discrete it represents a profunctor $D^{op}\times C\to Set$.

This definition/characterization of profunctors works for internal categories as well, but *not* for enriched ones.  It is sometimes called the [[graph of a profunctor]] (although this is sometimes also used for the other fibrational representations mentioned above).


### In terms of two-sided codiscrete cofibrations

Yet another way of representing profunctors is via their [[collages]], also called [[cograph of a profunctor|cographs]].  The collage of a profunctor $H\colon C &#x21F8; D$ is, in particular, a category $\bar{H}$ equipped with functors $C\to \bar{H}$ and $D\to\bar{H}$ which are [[fully faithful functor|fully faithful]] and jointly bijective on objects.

In fact, the objects of the [[undercategory]] $(C\sqcup D)/Cat$ which are collages of profunctors $C &#x21F8; D$ can be characterized, up to equivalence, as the *two-sided codiscrete cofibrations*, i.e. the two-sided discrete fibrations in $Cat^{op}$.  In simpler and more explicit language, these are the categories $M$ which contain $C$ and $D$ as disjoint full subcategories which are jointly-[[wide subcategory|wide]] (i.e. together contain all the objects), and such that there are no morphisms from an object of $C$ to an object of $D$.  Equivalently, they are the categories which admit a functor to the [[interval category]] $I$ such that $D$ is the fiber over $0$ and $C$ is the fiber over $1$.

When viewing a profunctor $H\colon C &#x21F8; D$ in this way, one may sometimes speak of elements of $H(d,c)$ as *heteromorphisms* from $d$ to $c$, since they are morphisms in the category $\bar{H}$ and can be "composed" with morphisms of $C$ and $D$ (this corresponds to the "action" of $C$ and $D$ on $H$ in the other formulations), but they go between objects of two different categories (namely $C$ and $D$).

This characterization works just as well in both the internal and enriched case.  Perhaps surprisingly, it also tends to give the "right" notion of profunctor starting with many other, even more exotic, 2-categories.  However, it is trickier to figure out how to define the composite of profunctors viewed as codiscrete cofibrations.  References include:

* [[Ross Street]], "Fibrations in bicategories"

* Carboni and Johnson and [[Ross Street|Street]] and [[Dominic Verity|Verity]], "Modulated bicategories"


## Examples ##

* Recall that a one-object [[Vect]]-[[enriched category]] is just an [[algebra]], while a general [[Vect]]-[[enriched category]] is an [[algebroid]]. The full sub-bicategory of $Vect\Mod$ on one-object $Vect$-enriched categories is the familiar category of [[algebras]], [[bimodules]] and bimodule homomorphisms.  In this case, the "representable" profunctors correspond to the way in which every morphism $A \to B$ of [[algebras]] induces the $A$-$B$ bimodule which as a vector space is $B$ with obvious right $B$ action and left $A$-action induced by first mapping $A$ to $B$ via $f$ and then using multiplication in $B$.

* The full sub-bicategory of $Set Prof$ on [[discrete category|discrete categories]] is the bicategory of sets, [[spans]] of sets and morphisms of spans:
  $$
    Set\Mod_{disc} \simeq Span(Set) 
    \,.
  $$
  In this case, the representable profunctor induced by a map $f : C \to D$ of sets is the span
  $$
  \array{
    && C
    \\
    & {}^{Id}\swarrow && \searrow^{f}
    \\
    C &&&& D
  }
  $$

* Similarly, the full sub-bicategory of internal profunctors in $S = (Set^{op}, \times)$ on "discrete categories" is the bicategory of [[cospans]]
  $$
  Set^{op}\Mod_{disc} \simeq Span(Set^{op}) = Cospan(Set) 
  \,.
  $$


## Related entries ##

* [[module]]

* [[2-vector space]]

* [[double profunctor]]

## References ##

_(what is a good  comprehensive reference?)_

Some exposition at

* John Baez, _Re: Klein 2-Geometry VII_ ([blog](http://golem.ph.utexas.edu/category/2006/11/klein_2geometry_vii.html#c005985))

The common generalization of [[bimodules]] and [[spans]] in terms of profunctors has been discussed on the blog at

* John Baez, _Bimodules versus spans_ ([blog](http://golem.ph.utexas.edu/category/2008/08/bimodules_versus_spans.html))

There is a discussion of profunctors in the recently republished:

* J.-M. Cordier and T. Porter, (1989), Shape Theory: Categorical Methods of Approximation, Mathematics and its Applications, Ellis Horwood. Reprinted Dover (2008).

Excellent  notes from a course on _distributors_ given by 
Jean Bénabou in June 2000 at TU Darmstadt, and prepared by Thomas Streicher, are available from his website  <http://www.mathematik.tu-darmstadt.de/~streicher>.

* A nice example of profunctors between Lawvere [[metric spaces]] can be found in [this comment](http://golem.ph.utexas.edu/category/2009/11/equipments.html#c029633).

* See the [[joyalscatlab:Distributors and barrels|Catlab]] for the theory of set valued distributors.


***

## Notation ## {#notation}

Profunctors are often notated with a slashed or barred arrow, as in $C &#x21F8; D$, which is U+21F8 in Unicode.  It is not always obvious how to draw this character, so here are some hints.

* On the nLab (or anywhere that accepts SGML character entities, including raw HTML on the web), it can be found using a Unicode entity:

      &#x21F8;

* In LaTeX, one can use `\nrightarrow` (producing ‘$\nrightarrow$’) in a pinch, but a nice-looking extensible barred arrow command can also be produced with the following preamble code (modified from amsmath's `\xrightarrow`):

      \makeatletter
      \def\slashedarrowfill@#1#2#3#4#5{%
        $\m@th\thickmuskip0mu\medmuskip\thickmuskip\thinmuskip\thickmuskip
         \relax#5#1\mkern-7mu%
         \cleaders\hbox{$#5\mkern-2mu#2\mkern-2mu$}\hfill
         \mathclap{#3}\mathclap{#2}%
         \cleaders\hbox{$#5\mkern-2mu#2\mkern-2mu$}\hfill
         \mkern-7mu#4$%
      }
      \def\rightslashedarrowfill@{%
        \slashedarrowfill@\relbar\relbar\mapstochar\rightarrow}
      \newcommand\xslashedrightarrow[2][]{%
        \ext@arrow 0055{\rightslashedarrowfill@}{#1}{#2}}
      \makeatother

* In Xypic, a barred arrow (to the right, in this example) can be produced with

      \ar[r]|-@{|}


## Discussion ##

The following discussion is about where to put the "op" in the definition of a profunctor.

+--{.query}
_Todd_: There is an inevitable debate here about whether one should use $C^{op} \otimes D \to V$ or $C \otimes D^{op} \to V$. My own convention is to use the latter. For example, every functor $C \to D$ yields a profunctor by composition with the Yoneda embedding on $D$. 

[[Mike Shulman|Mike]]: My convention is $D^{op}\otimes C$.  I agree with your reasoning for why $D$ should be contravariant; I like to put it first because in the hom-functor $C(-,-)$ the contravariant variable appears first.

[[Sridhar Ramesh]]: But surely, just as well, a functor from $C$ to $D$ yields a contravariant functor from $C$ to $Set^D$ and thus a profunctor $C^{op} \otimes D \to V$, by composition with the contravariant Yoneda embedding of $D$ into $Set^D$? At the moment, I still do not see why there is reason to prefer in the abstract general one to the other of $(c, d) \mapsto Hom_D(F(c), d)$ and $(d, c) \mapsto Hom_D(d, F(c))$, though it's not an issue I've thought very much about or have strong emotions regarding. Are there further reasons beyond the above?

[[Mike Shulman]]: Well, the covariant Yoneda embedding is arguably more natural and important than the contravariant one.  If a profunctor $C&#x21F8; D$ is a functor $C\to Set^{D^{op}}$, then we can think of it as assigning to every $c\in C$ a presheaf on $D$, which may or may not be representable.  The profunctor "is" a functor just when all its values are representable presheaves.  Of course, if instead a profunctor $C&#x21F8; D$ were a functor $C^{op}\to Set^D$, i.e. $C\to (Set^D)^{op}$, then we could think of it as assigning to each $c\in C$ a functor $D\to Set$, which might or might not be (co)representable.  However, for a bunch of reasons it's often more natural to think of an object of $D$ as determined by the maps *into* it, rather than the maps *out* of it---in other words by its [[generalized elements]], or in yet other words by the presheaf it represents.  Athough of course *formally*, there is a complete duality.
=--


## References

* [[joyalscatlab:HomePage|Joyal's CatLat]], _[[joyalscatlab:Distributors and barrels]]_

[[!redirects profunctors]]
[[!redirects distributor]]
[[!redirects distributors]]
