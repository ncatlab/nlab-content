
+-- {: .rightHandSide}
+-- {: .toc .clickDown tabindex="0"}
###Context###
#### Category theory
+--{: .hide}
[[!include category theory - contents]]
=--
=--
=--



#Contents#
* table of contents
{:toc}

## Idea

If $C$ is a [[finitely complete category]] (a category with all finite limits), then it\'s interesting to consider a left [[exact functor]] on $C$ (a functor that preserves all [[finite limit]]s).  Even if $C$ lacks some finite limits, then this concept still makes sense, but it may not be the correct one.  Instead we use the stronger concept of a _flat functor_, which may be thought of as a functor that preserves all finite limits ---even the ones that don\'t exist yet!



## Definition

There are two _different_ definitions that both go by the name _flat functor_  in the literature. For emphasis, we speak here of _representably_ and _internally_ flat functors, following ([Shulman](#Shulman)).


+-- {: .num_defn}
###### Definition

A [[functor]] $F: C \rightarrow D$ is 

* **representably flat** if for each [[object]] $d \in D$, the [[opposite category|opposite]] [[comma category]] $(d / F)^{op}$ is a [[filtered category]]

* **internally flat** if ...

=--

For instance [Johnstone, C2.3.7 and B3.2.3](#Johnstone), where "internally flat functors" are called "torsors".

+-- {: .num_remark}
###### Remark

Some authors call this precisely a [[exact functor|left exact functor]], see the definition there.

=--

## Properties

### General

+-- {: .num_prop}
###### Proposition

If $F : C \to D$ is flat, then it [[preserved limit|preserves]] any [[finite limit]]s that exist in $C$.  

A partial converse holds: if $C$ has enough finite limits and $F$ preserves these, then $F$ is flat.

=--

+-- {: .num_prop}
###### Proposition

If $F : C \to D$ is a [[flat functor]] and 

$$
  [C^{op}, Set] \leftarrow [D^{op},Set] : F^* 
$$

is its action on [[presheaves]] by precomposition, then the corresponding [[left adjoint]] $F_!$

$$
  (F_! \dashv F^*) : [D^{op}, Set] \stackrel{\overset{F_!}{\to}}{\underset{F^*}{\leftarrow}}
  [C^{op},Set]
$$

preserves [[finite limit]]s.


=--

+-- {: .proof}
###### Proof

The left adjoint is the left [[Kan extension]] along $F$

$$
  F_! \simeq Lan_F
  \,.
$$

Since [[presheaf topos]]es have all [[colimit]]s, this is computed on any object $c \in C$ (as discussed at [[Kan extension]]) by the [[colimit]]

$$
  (F_! X(c) = \lim_{\to} \left( 
     (d/F)^{op} \to C^{op} \stackrel{F}{\to} Set
  \right)
  \,,
$$

where $(d/F)$ is the corresponding [[comma category]] and $(d/F)^{op} \to C^{op}$ is the canonical projection.

Now, by definition $F$ being flat is equivalent to $(d/F)^{op}$ being a [[filtered category]]. So this is a [[filtered colimit]]. By the discussion there, it is precisely the filtered colimits that commute with finite limits.

=--

+-- {: .num_prop}
###### Proposition

If $\mathcal{E}$ is a [[topos]] and $F: C \rightarrow \mathcal{E}$ is flat, then the functor $(- \otimes F) : [C^op,Set] \rightarrow \mathcal{E}$ (the [[Yoneda extension]] of $F$, i.e. the left [[Kan extension]] of $F$ along the [[Yoneda embedding]]) preserves all finite limits (and now all finite limits exist).

=--

For $\mathcal{E} = $ [[Set]] this is prop. 6.1.3 in ([Borceux](#Borceux)).


A similar statement holds when $C$ is a [[site]] and we extend a co[[continuous functor]] $F$ to $Sh(C)$.  But a cocontinuous functor from $Sh(C)$ preserving finite limits is (almost) the same thing as (the [[inverse image]] part of) a [[geometric morphism]].  So cocontinuous flat functors out of a site $C$ characterise (almost) geometric morphisms into $Sh(C)$.  This can be very useful when a [[Grothendieck topos]] has a presentation by a particularly simple site.

## Examples

* Morphisms of [[site]]s are given by flat functors.

## References

Representbaly flat functors are the topic of chapter 6 in

* [[Francis Borceux]], _Handbook of categorical algebra_ , volume I, _Basic category theory_
{#Borceux}

Internally flat functors ("torsors") are discussed around B3.2 and representably flat functors around ... in C2.3.7 of

* [[Peter Johnstone]], _[[Sketches of an Elephant]]_ .
 {#Johnstone}

The difference between internally and representably flat functors is discussed in 

* [[Mike Shulman]], _[Flat Functors and Morphisms of Sites](http://golem.ph.utexas.edu/category/2011/06/flat_functors_and_morphisms_of.html)_
 {#Shulman}

[[!redirects flat functors]]

[[!redirects internally flat functor]]
[[!redirects representably flat functor]]

[[!redirects internally flat functors]]
[[!redirects representably flat functors]]