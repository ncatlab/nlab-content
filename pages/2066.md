
+-- {: .rightHandSide}
+-- {: .toc .clickDown tabindex="0"}
###Context###
#### Idempotents
+-- {: .hide}
[[!include idempotents - contents]]
=--
#### Category theory
+--{: .hide}
[[!include category theory - contents]]
=--
=--
=--



#Contents#
* table of contents
{:toc}

## Idea ##

The _Karoubi envelope_ or _idempotent completion_ of a [[category]] is the [[universal construction|universal]] enlargement of the category with the property that every [[idempotent]] is a [[split idempotent]].  This is the [[Set]]-enriched version of the more general notion of _[[Cauchy completion]]_ of an  [[enriched category]].

A category in which all idempotents split is called *Karoubi complete* or *Cauchy complete* or *idempotent-complete*.  Thus, the Karoubi envelope is a [[completion]] operation into such categories.

## Definition
 {#Definition}

There  is an

* _[Abstract definition](#AbstractDefinition)_

that characterizes idempotent completions. In particular the idempotent completion always exists is unique up to [[equivalence of categories]]. Explicit constructions include:

* _[Construction in components](#InComponents)_

* _[Construction via the Yoneda embedding](#UnderTheYonedaEmbedding)_

For more constructions and equivalent characterizations see at _[[Cauchy complete category]]_ in the section _[In ordinary category theory](Cauchy+complete+category#InOrdinaryCategoryTheory)_.

### Abstract definition
 {#AbstractDefinition}

+-- {: .num_defn #IdempotentCompletionAbstractly}
###### Definition

For $\mathcal{C}$ a [[category]], a [[functor]] $\mathcal{C} \to \tilde \mathcal{C}$ exhibits $\tilde \mathcal{C}$ as an **idempotent completion** of $\mathcal{C}$ if

* $\tilde \mathcal{C}$ is an [[idempotent complete category]];

* $\mathcal{C} \to \tilde \mathcal{C}$ is a [[full and faithful functor]];

* every object in $\tilde \mathcal{C}$ is the [[retract]] of an object in $\mathcal{C}$, under this embedding.

=--

See e.g. ([Lurie, def. 5.1.4.1](#Lurie)). 

+-- {: .num_lemma #def2}
###### Lemma  
For a fully faithful embedding $i \colon \mathcal{C} \to \mathcal{D}$ to exhibit an idempotent(-splitting) completion of $\mathcal{C}$, it suffices that 

* $i(p)$ splits in $\mathcal{D}$ for every idempotent $p$ in $\mathcal{C}$, and 

* every object in $\tilde \mathcal{C}$ is the retract of an object in $\mathcal{C}$ under $i$. 
=-- 

+-- {: .proof} 
###### Proof 
We must show that these conditions imply that every idempotent $e \colon D \to D$ in $\mathcal{D}$ splits. Write $D$ as a retract of some $i(C)$, say $r: i(C) \to D$ with right inverse $s$. Then $p = s \circ e \circ r \colon i(C) \to i(C)$ is idempotent, and we may split $p$, say as $p = \sigma \circ \pi$ where $\pi \circ \sigma = 1_E$ for some $E$. We claim that the pair 

$$\pi \circ s \colon D \to E, \qquad r \circ \sigma \colon E \to D$$ 

provides a splitting of $e$. Certainly we have 

$$(r \sigma)(\pi s) = r s e r s = e,$$ 

and we also have 

$$\sigma(\pi s)(r \sigma) = p s r \sigma = s e r s r \sigma = s e r \sigma = p \sigma = \sigma \pi \sigma = \sigma$$ 

but since $\sigma$ is monic, this implies $(\pi s)(r \sigma) = 1_E$, as desired. 
=-- 


### In components
 {#InComponents}

Let $C$ be a [[category]]. We give an elementary construction of the __Karoubi envelope__ $\bar{C}$ which formally splits [[idempotents]] in $C$. 


The objects of $\bar{C}$ are pairs $(c, e: c \to c)$ where $e$ is an idempotent on an object $c$ of $C$. Morphisms $(c, e) \to (d, f)$ are morphisms $\phi: c \to d$ in $C$ such that $f \circ \phi = \phi = \phi \circ e$. NB: the identity on $(c, e)$ in $\bar{C}$ is the morphism $e: c \to c$. 


There is a functor 

$$E: C \to \bar{C}$$ 

which maps an object $c$ to $(c, 1_c)$. This functor is [[fully faithful functor|full and faithful]]: it fully embeds $C$ in $\bar{C}$. If $e: c \to c$ is an idempotent in $C$, then in $\bar{C}$ there are maps 

$$p: (c, 1_c) \to (c, e), \, j: (c, e) \to (c, 1_c),$$ 

both given by $e: c \to c$. It is clear that $p \circ j$ is the identity $e: (c, e) \to (c, e)$, and that $j \circ p$ is the idempotent $E(e): E(c) \to E(c)$. Thus the pair $(p, j)$ formally splits the idempotent $e: c \to c$. The same argument shows that every idempotent $\phi: (c, e) \to (c, e)$ in $\bar{C}$ splits. Actually this formal construction does more: it gives a _choice_ of splitting for every idempotent. 


Let $D$ be any category in which every idempotent $h: d \to d$ has a chosen splitting $(p_h: d \to d_h, j_h: d_h \to d)$ (using identities to split identities), and let $F: C \to D$ be a functor. Define an extension 

$$\bar{F}: \bar{C} \to D$$ 

by sending $(c, e: c \to c)$ to the underlying object $F(c)_{F(e)}$ of the splitting of $F(e): F(c) \to F(c)$ in $D$. For morphisms $\phi: (c, e) \to (c', e')$, define $\bar{F}(\phi)$ to be the composite 

$$F(c)_{F(e)} \overset{F(j_{F(e)})}{\to} F(c) \overset{F(\phi)}{\to} F(c') \overset{F(p_{F(e')})}{\to} F(c')_{F(e')}$$ 

Then $\bar{F}$ is the unique extension of $F$ which preserves chosen splittings. Thus the Karoubi envelope is universal among functors from $C$ into categories $D$ in which every idempotent has a chosen splitting. 


If $D$ is a category in which every idempotent splits, then we can choose a splitting for each idempotent using the [[axiom of choice]] (AC); the extension $\bar{F}$ depends on how we do this but is unique up to unique [[natural isomorphism]].  Alternatively, we can define $\bar{F}$ as an [[anafunctor]]; then no AC is needed, and we still have $\bar{F}$ unique up to unique natural isomorphism.  (It is key here that a splitting of an idempotent is unique up to a coherent isomorphism.)


### Under the Yoneda embedding
 {#UnderTheYonedaEmbedding}

+-- {: .num_prop}
###### Proposition

For $\mathcal{C}$ a [[small category]], write $PSh(\mathcal{C})$ for its [[category of presheaves]] and write $\tilde \mathcal{C} \hookrightarrow PSh(\mathcal{C})$ for the [[full subcategory]] on those presheaves which are [[retracts]] of objects in $\mathcal{C}$, under the [[Yoneda embedding]]. Then the Yoneda embedding

$$
  \mathcal{C} \to \tilde \mathcal{C}
$$

exhibits $\tilde \mathcal{C}$ as [[generalized the|the]] idempotent completion of $\mathcal{C}$.

=--

For instance ([Lurie, proof of prop. 5.1.4.2](#Lurie)).

## Properties

### Finality of the completion
 {#Finality}

+-- {: .num_defn}
###### Definition

A functor $\mathcal{C}\to \tilde \mathcal{C}$ exhibiting an idempotent completion, def. \ref{IdempotentCompletionAbstractly}, is a [[final functor]].

=--

For instance ([Lurie, lemma 5.1.4.6](#Lurie)).

### Monadicity over semicategories

The functor that forms idempotent completion is the [[monad]] induced from the [[adjunction]] between categories and [[semicategories]] given by the [[forgetful functor]] $Cat \to SemiCat$ and its [[right adjoint]]. More details on this are at _[Semicategory - Relation to categories](semicategory#RelationToCategories)_.

## Examples

* [[category of Chow motives]]

## Related concepts

* [[Karoubian category]], [[pseudo-abelian category]]

* [[Cauchy completion]]

* [[idempotent complete (infinity,1)-category]]



## References 
 {#References}

A classical account is for instance in

* [[Francis Borceux]] and D. Dejean, _Cauchy completion in category theory_  Cahiers Topologie G&eacute;om. Diff&eacute;rentielle Cat&eacute;goriques, 27:133–146, (1986) ([numdam](http://www.numdam.org/item?id=CTGDC_1986__27_2_133_0))
  {#BorceuxDejean}

For more classical references see the references at _[[Cauchy complete category]]_.



Karoubi envelopes for [[(infinity,1)-category|(∞,1)-categories]] are discussed in section 4.4.5 of

* [[Jacob Lurie]], _[[Higher Topos Theory]]_
 {#Lurie}


Some discussion of the stable version is in section 4.1.2 of

* [[David Ben-Zvi]], John Francis, David Nadler, _Integral Transforms and Drinfeld Centers in Derived Algebraic Geometry_ ([arXiv](http://arxiv.org/abs/0805.0157), [[geometric infinity-function theory|nLab entry]])

and section 2.3 of 

* [[David Ben-Zvi]], David Nadler, _The Character Theory of a Complex Group_ ([arXiv](http://arxiv.org/abs/0904.1247))

In section 3.1.2 of latter are also given
references (to Neeman and Lurie) for an important result of Neeman's about Karoubi closure and compact generators.

The Karoubi envelope for the additive case (see also [[additive envelope]]) is covered at 

* [[Dror Bar-Natan]], [[Scott Morrison]], _The Karoubi envelope and Lee's degeneration of Khovanov homology_ ([arXiv](http://arxiv.org/abs/math/0606542))

Discussion for [[triangulated categories]] is in 

* Paul Balmer, Marco Schlichting, _Idempotent completion of triangulated categories_ ([pdf](http://www.math.ucla.edu/~balmer/research/Pubfile/IdempCompl.pdf))

[[!redirects Karoubi completion]]
[[!redirects Karoubi complete category]]
[[!redirects idempotent-complete category]]
[[!redirects idempotent complete category]]

[[!redirects idempotent completion]]
[[!redirects idempotent completions]]

[[!redirects idempotent-splitting completion]]
[[!redirects idempotent-splitting completions]]


[[!redirects pseudo-abelian completion]]
[[!redirects Karoubian envelope]]
[[!redirects Karoubianization]]
[[!redirects Karoubianization functor]]
[[!redirects Karoubinization functor]]

