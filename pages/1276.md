
+-- {: .rightHandSide}
+-- {: .toc .clickDown tabindex="0"}
###Context###
#### Algebra
+--{: .hide}
[[!include higher algebra - contents]]
=--
#### Homological algebra
+--{: .hide}
[[!include homological algebra - contents]]
=--
=--
=--



#Contents#
* table of contents
{:toc}

## Idea

A [[module]] over a [[ring]] $R$ is called _flat_ if its satisfies one of many equivalent conditions, the simplest to state of which is maybe: forming the [[tensor product of modules]] with $N$ preserves [[submodules]].

Under the dual geometric interpretation of [modules as generalized vector bundles](module#RelationToVectorBundlesInIntroduction) over the space on which $R$ is the ring of functions, flatness of a module is essentially the _local triviality_ of these bundles, hence in particular the fact that the [[fibers]] of these bundles do not change, up to isomorphism. See prop. \ref{ForFinitelyGeneratedFlatIsLocallyFree} below for the precise statement. On the other hand there is **no** relation to "flat" as in [[flat connection]] on such a bundle.

## Definition

### In terms of exact functors and Tor-functors

+-- {: .num_defn}
###### Definition

Given a [[commutative ring]] (or $k$-[[associative algebra|algebra]]) $R$, a left $R$-[[module]], say $N$, is __flat__ if [[tensor product of modules|tensoring]] with $N$ over $R$ as a [[functor]] from left $R$-modules to left $k$-modules 

$$
  (-)\otimes_R N : R Mod \to R Mod
$$

is an [[exact functor]] (sends [[short exact sequences]] to short exact sequences).  

=--

+-- {: .num_remark}
###### Remark

Tensoring with $N$ is automatically a [[right exact functor]], so the above is equivalent to require that tensoring with $N$ be even a [[left exact functor]].  And this in turn is equivalent to $(-)\otimes_R N$ preserves [[monomorphisms]].

Since [[Mod]] is [[finitely complete category|finitely complete]], this is also equivalent to requiring that tensoring with $N$ be a [[flat functor]].

=--

* On an [[abelian category]], the notions of _[[exact functor]]_ and _[[flat functor]]_ coincide.

* The ring may be taken non-unital without any change.

=--

By the general properties of [[derived functors in homological algebra]], the [[obstruction]] to $(-)\otimes_R N$ being left exact is given by the first [[Tor]]-groups. Therefore the above definition is equivalent to the following.

+-- {: .num_defn}
###### Definition

A module $N$ is flat precisely if the [[Tor]]-[[functor]] $Tor_1^{R Mod}(-,N)$ is zero.

=--


### In terms of identities

There is a characterisation of flatness that says that a left $A$-module $M$ is flat if and only if "everything (that happens in $M$) happens for a reason (in $A$)".

The meaning of this is akin to the existence of [[basis of a vector space|bases in vector spaces]].  In a [[vector space]], say $V$, if we have an identity of the form $\sum_i \alpha_i v_i = 0$ then we cannot necessarily assume that the $\alpha_i$ are all zero.  However, if we choose a basis then we can write each $v_i$ in terms of the basis elements, say $v_i = \sum_j \beta_{i j} u_j$, and substitute in to get $\sum_{i j} \alpha_i \beta_{i j} u_j = 0$.  Now as $\{u_j\}$ forms a basis, we can deduce from this that for each $j$, $\sum_i \alpha_i \beta_{i j} = 0$.  These last identities happen in the coefficient field, which is standing in place of $A$ in the analogy.

When translating this into the language of modules we cannot use bases so we have to be a little more relaxed.  The following statement is the right one.

Suppose there is some identity in $M$ of the form $\sum_i a_i m_i = 0$ with $m_i \in M$ and $a_i \in A$.  Then there is a family $\{n_j\}$ in $M$ such that every $m_i$ can be written in the form $m_i = \sum_j b_{i j} n_j$ and the coefficients $b_{i j}$ have the property that $\sum_i a_i b_{i j} = 0$.

The module $M$ being flat is equivalent to being able always to do this.

There is an alternative way to phrase this which is less element-centric.  The elements $m_i$ correspond to a [[morphism]] into $M$ from a [[free module]], say $m \colon F \to M$.  The $a_i$ correspond to a morphism $a \colon F \to F$, multiplying the $i$th term by $a_i$.  That we have the identity $\sum_i a_i m_i = 0$ says that the composition $m a$ is zero, or that $m \colon F \to M$ factors through the [[coequaliser]] of $a$ and $0$.  

Now we consider the elements $n_j$.  These define another morphism from a free module, say $n \colon E \to M$.  That the $m_i$ can be expressed in terms of the $n_j$ says that the morphism $m$ factors through $n$.  That is, there is a morphism $b \colon F \to M$ such that $m = n b$.  We therefore have to factorisations of $m$: one through $n$ and one through the [[cokernel]] $\coker a$.  The question is as to whether these have any relation to each other.  In particular, does $\coker a \to M$ factor through $n$?  We can represent all of this in the following diagram.

+-- {: style="text-align:center"}
<svg width="222" height="136" xmlns="http://www.w3.org/2000/svg" xmlns:se="http://svg-edit.googlecode.com" se:nonce="14804">
 <g>
  <title>Layer 1</title>
  <foreignObject height="24.000001" width="30" font-size="16" id="svg_14804_1" y="56" x="0">
   <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML">
    <semantics>
     <mrow>
      <mi>F</mi>
     </mrow>
     <annotation encoding="application/x-tex">F</annotation>
    </semantics>
   </math>
  </foreignObject>
  <foreignObject id="svg_14804_2" height="24.000001" width="30" font-size="16" y="56" x="80">
   <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML">
    <semantics>
     <mrow>
      <mi>F</mi>
     </mrow>
     <annotation encoding="application/x-tex">F</annotation>
    </semantics>
   </math>
  </foreignObject>
  <foreignObject id="svg_14804_8" height="24.000001" width="30" font-size="16" y="56" x="192">
   <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML">
    <semantics>
     <mrow>
      <mi>M</mi>
     </mrow>
     <annotation encoding="application/x-tex">M</annotation>
    </semantics>
   </math>
  </foreignObject>
  <foreignObject id="svg_14804_14" height="24.000001" width="60" font-size="16" y="112" x="121">
   <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML">
    <semantics>
     <mrow>
      <mo rspace="thinmathspace" lspace="0em">coker</mo>
      <mi>a</mi>
     </mrow>
     <annotation encoding="application/x-tex">\coker a</annotation>
    </semantics>
   </math>
  </foreignObject>
  <foreignObject id="svg_14804_20" height="24.000001" width="30" font-size="16" y="0" x="136">
   <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML">
    <semantics>
     <mrow>
      <mi>E</mi>
     </mrow>
     <annotation encoding="application/x-tex">E</annotation>
    </semantics>
   </math>
  </foreignObject>
  <line marker-end="url(#se_marker_end_svg_14804_26)" id="svg_14804_26" y2="66" x2="80.009803" y1="66" x1="30" stroke-width="2" stroke="#000000" fill="none"/>
  <line transform="rotate(45, 121.006, 94)" id="svg_14804_27" marker-end="url(#se_marker_end_svg_14804_27)" y2="94" x2="146.009803" y1="94" x1="96" stroke-width="2" stroke="#000000" fill="none"/>
  <line id="svg_14804_29" transform="rotate(-45, 122.006, 39)" marker-end="url(#se_marker_end_svg_14804_29)" y2="39" x2="147.009803" y1="39" x1="97" stroke-width="2" stroke="#000000" fill="none"/>
  <line id="svg_14804_30" transform="rotate(-45, 179.006, 95)" marker-end="url(#se_marker_end_svg_14804_30)" y2="95" x2="204.009803" y1="95" x1="154" stroke-width="2" stroke="#000000" fill="none"/>
  <line id="svg_14804_31" transform="rotate(45, 179.006, 38)" marker-end="url(#se_marker_end_svg_14804_31)" y2="38" x2="204.009803" y1="38" x1="154" stroke-width="2" stroke="#000000" fill="none"/>
  <foreignObject height="20" width="27.999999" font-size="16" id="svg_14804_32" y="44" x="40.000001">
   <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML">
    <semantics>
     <mrow>
      <mi>a</mi>
     </mrow>
     <annotation encoding="application/x-tex">a</annotation>
    </semantics>
   </math>
  </foreignObject>
  <foreignObject id="svg_14804_33" height="20" width="27.999999" font-size="16" y="20" x="99.000001">
   <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML">
    <semantics>
     <mrow>
      <mi>b</mi>
     </mrow>
     <annotation encoding="application/x-tex">b</annotation>
    </semantics>
   </math>
  </foreignObject>
  <foreignObject id="svg_14804_39" height="20" width="27.999999" font-size="16" y="17" x="177.000001">
   <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML">
    <semantics>
     <mrow>
      <mi>n</mi>
     </mrow>
     <annotation encoding="application/x-tex">n</annotation>
    </semantics>
   </math>
  </foreignObject>
  <foreignObject id="svg_14804_45" height="20" width="27.999999" font-size="16" y="44" x="154.000001">
   <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML">
    <semantics>
     <mrow>
      <mi>m</mi>
     </mrow>
     <annotation encoding="application/x-tex">m</annotation>
    </semantics>
   </math>
  </foreignObject>
  <line id="svg_14804_51" marker-end="url(#se_marker_end_svg_14804_51)" y2="66" x2="190" y1="66" x1="110" stroke-width="2" stroke="#000000" fill="none"/>
  <line marker-end="url(#se_marker_end_svg_14804_52)" id="svg_14804_52" y2="25.291191" x2="149" y1="111" x1="149" stroke-dasharray="5,5" stroke-width="2" stroke="#000000" fill="none"/>
 </g>
 <defs>
  <marker refY="50" refX="50" markerHeight="5" markerWidth="5" viewBox="0 0 100 100" se_type="rightarrow" orient="auto" markerUnits="strokeWidth" id="se_marker_end_svg_14804_26">
   <path stroke-width="10" stroke="#000000" fill="#000000" d="m100,50l-100,40l30,-40l-30,-40z"/>
  </marker>
  <marker refY="50" refX="50" markerHeight="5" markerWidth="5" viewBox="0 0 100 100" se_type="rightarrow" orient="auto" markerUnits="strokeWidth" id="se_marker_end_svg_14804_27">
   <path stroke-width="10" stroke="#000000" fill="#000000" d="m100,50l-100,40l30,-40l-30,-40z"/>
  </marker>
  <marker refY="50" refX="50" markerHeight="5" markerWidth="5" viewBox="0 0 100 100" se_type="rightarrow" orient="auto" markerUnits="strokeWidth" id="se_marker_end_svg_14804_29">
   <path stroke-width="10" stroke="#000000" fill="#000000" d="m100,50l-100,40l30,-40l-30,-40z"/>
  </marker>
  <marker refY="50" refX="50" markerHeight="5" markerWidth="5" viewBox="0 0 100 100" se_type="rightarrow" orient="auto" markerUnits="strokeWidth" id="se_marker_end_svg_14804_30">
   <path stroke-width="10" stroke="#000000" fill="#000000" d="m100,50l-100,40l30,-40l-30,-40z"/>
  </marker>
  <marker refY="50" refX="50" markerHeight="5" markerWidth="5" viewBox="0 0 100 100" se_type="rightarrow" orient="auto" markerUnits="strokeWidth" id="se_marker_end_svg_14804_31">
   <path stroke-width="10" stroke="#000000" fill="#000000" d="m100,50l-100,40l30,-40l-30,-40z"/>
  </marker>
  <marker refY="50" refX="50" markerHeight="5" markerWidth="5" viewBox="0 0 100 100" se_type="rightarrow" orient="auto" markerUnits="strokeWidth" id="se_marker_end_svg_14804_51">
   <path stroke-width="10" stroke="#000000" fill="#000000" d="m100,50l-100,40l30,-40l-30,-40z"/>
  </marker>
  <marker refY="50" refX="50" markerHeight="5" markerWidth="5" viewBox="0 0 100 100" se_type="rightarrow" orient="auto" markerUnits="strokeWidth" id="se_marker_end_svg_14804_52">
   <path stroke-width="10" stroke="#000000" fill="#000000" d="m100,50l-100,40l30,-40l-30,-40z"/>
  </marker>
 </defs>
</svg>
=--

Saying that $M$ is flat says that this lift always occurs.

Taking this a step further, we consider the [[filtered category|filtered family]] of all finite [[subsets]] of $M$.  This generates a filtered family of [[finitely generated module|finitely generated]] [[free modules]] with compatible morphisms to $M$.  So there is a morphism from the [[colimit]] of this family to $M$.  This morphism is [[surjection|surjective]] by construction.  To show that it is [[injection|injective]], we need to show that any element in one of the terms in the family that dies by the time it reaches $M$ has actually died on the way.  This is precisely what the above characterisation of flatness is saying: the element corresponding to $\sum_i a_i m_i$ that dies in $M$ is already dead by the time it reaches $E$.

Hence a module is flat if and only if it is a [[filtered colimit]] of [[free modules]]. 

This observation (Wraith, Blass) can be put into the more general context of modelling [[geometric theory|geometric theories]] by [[geometric morphism|geometric morphisms]] from their [[classifying topos|classifying toposes]], or equivalently, certain [[flat functor|flat functors]] from [[site|sites]] for such topoi.

## Properties

### Relation to projective modules

+-- {: .num_prop}
###### Proposition
**([[Lazard's criterion]])**

A module is flat if and only if it is a [[filtered colimit]] of [[free modules]]. 

=--

This is due to ([Lazard (1964)](#Lazard)).

+-- {: .proof}
###### Proof

(...) For the moment see the above discussion. (...)

=--

### Relation to (locally) free modules

+-- {: .num_defn #LocallyFreeModule}
###### Definition

An $R$-module $N$ over a [[Noetherian ring]] $R$ is called a **locally free module** if there is a [[Zariski topology|cover]] by [[prime ideals]] $I \hookrightarrow R$ such that the [[localization of a module|localization]] $N_I$ is a [[free module]] over the [[localization of a ring|localization]] $R_I$. 

=--

+-- {: .num_prop #ForFinitelyGeneratedFlatIsLocallyFree}
###### Proposition

For $R$ a [[Noetherian ring]] and $N$ a [[finitely generated module]] over $R$, $N$ is flat precisely if it is [[locally free module]], def. \ref{LocallyFreeModule}.

=--

By [Raynaud-Gruson, 3.4.6 (part I)](#RaynaudGruson)


+-- {: .num_prop }
###### Proposition

If 

1. $R$ is a [[local ring]],

1. $N$ is a [[finitely generated module]],

1. $N$ is a flat module

then $N$ is a [[free module]].

=--

This is [Matsumara, Theorem 7.10](#Matsumara)

## Examples
 {#Examles}

+-- {: .num_example}
###### Example

An [[abelian group]] is flat (regarded as a $\mathbb{Z}$-module) precisely if it is [[torsion subgroup|torsion-free]].

=--

+-- {: .proof}
###### Proof

By the general discussion at [[derived functor in homological algebra]], the obstruction to $A \in Ab$ being flat are the first [[Tor]]-groups $Tor_1^{\mathbb{Z}}(-,A)$. By the discussion at  _[Tor -- relation to torsion subgroups](Tor#RelationToTorsionGroups)_ these a [[filtered colimits]] and [[direct sums]] of the [[torsion subgroups]] of $A$. In particular for $Tor_1^\mathbb{Z}(\mathbb{Z}_n,A)$ is the $n$-torsion subgroup of $A$. Hence $Tor_1^\mathbb{Z}(-,A)$ vanishes and hence $A$ is flat precisely if all torsion subgroups of $A$ are trivial.

=--

## Related concepts

* [[flat resolution lemma]]

* [[projective object]], [[projective presentation]], [[projective cover]], [[projective resolution]]

* [[injective object]], [[injective presentation]], [[injective envelope]], [[injective resolution]]

  * [[injective module]]

* [[free object]], [[free resolution]]
 
* flat object, [[flat resolution]]

* [[free module]] $\Rightarrow$ [[projective module]] $\Rightarrow$ **flat module** $\Rightarrow$ [[torsion-free module]]






## References

The characterization of flat modules as filtered colimits of [[projective modules]] is due to 

* [[Daniel Lazard]], _Sur les modules plats_ C. R. Acad. Sci. Paris 258, 6313–6316 (1964)
 {#Lazard}

For a general account see for instance section 3.2 of 

* [[Charles Weibel]], _[[An Introduction to Homological Algebra]]_

For more details see

* Matsumura's CRT book
 {#Matsumara}

* Michel Raynaud, Laurent Gruson, _Critères de platitude et de projectivité_, Techniques de "platification" d’un module. Invent. Math. 13 (1971), 1–89.
 {#RaynaudGruson}

* MO discussion _[flatness and local freeness](http://mathoverflow.net/questions/33522/flatness-and-local-freeness)_

[[!redirects flat modules]]
