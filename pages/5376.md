In this article, we explore [[cartesian monoidal category|cartesian monoidal categories]] as a [[doctrine]] on [[Cat]], by analyzing the structure of free cartesian categories. 

It is convenient to discuss the case of categories with arbitrary small products (or arbitrary small coproducts) first, because there we get some very pleasant adjunctions to work with. Then, we may cut down to finite products and derive some possibly unexpected bonuses involving finite limits. 

## Free product-completions of sets 

We start by constructing the free category with small products $Prod(S)$ generated by a set $S$. This by definition comes equipped with a function $i: S \to Ob(Prod(S))$ with the following universal property: given a category $C$ with small products and a function $f: S \to Ob(C)$, there exists up to (unique) isomorphism a unique product-preserving functor $\Pi: Prod(S) \to C$ such that $f = Ob(\Pi) \circ i$. 

The [[slice category]] $Set/S$ is [[small-complete category|small-cocomplete]]; therefore $(Set/S)^{op}$ has small products. There is an evident function $i: S \to Ob((Set/S)^{op})$ which takes $s \in S$ to $s: 1 \to S$. This can also be regarded as a [[Yoneda embedding]] under the equivalence $Set/S \simeq Set^S$. 

Each object $n: N \to S$ of $(Set/S)^{op}$ can be regarded as a formal product $\prod_{s \in S} x_{s}^{n_s}$ where $S$ indexes a set of variables $x_s$ and $n_s = n^{-1}(s)$ is the (cardinality of the) fiber over $S$. Therefore the following theorem comes as no surprise. 

+-- {: .un_thm} 
######Theorem 
$Set/S$ together with $i: S \to Set/S$ is the free category with small products generated by $S$. 
=-- 

+-- {: .proof} 
######Proof
Let $C$ be a category with small products. Given $f: S \to Ob(C)$, the functor $\Pi: (Set/S)^{op} \to C$ is defined on the object-level: $n: N \to S$ is sent to $\prod_{s \in S} f(s)^{n_s}$ in $C$. In addition, a morphism from $m: M \to S$ to $n: N \to S$ in $(Set/S)^{op}$ is a function $\phi: N \to M$ that satisfies $m \circ \phi = n$; this in turn consists of a collection of functions $\phi_s: n_s \to m_s$ indexed by elements $s \in S$, and each such function induces a morphism 

$$f(s)^{\phi_s}: f(s)^{m_s} \to f(s)^{n_s}$$ 

in $C$, uniquely specified by declaring the $i^{th}$ component of this morphism for $i \in n_s$ to be given by 

$$f(s)^{m_s} \stackrel{proj_{\phi_s(i)}}{\to} f(s)$$

Given a morphism $\phi$ of $(Set/S)^{op}$, define $\Pi(\phi)$ by  

$$\Pi(\phi) = \langle f(s)^{\phi_s} \rangle_{s \in S}: \prod_{s \in S}  f(s)^{m_s} \to \prod_{s \in S} f(s)^{n_s}.$$ 

The functor $\Pi$ is the unique product-preserving functor $(Set/S)^{op} \to C$ (up to isomorphism) that extends $f: S \to Ob(C)$. 
=-- 

Given categories with products $C$ and $D$, let $Prod(C, D)$ denote the category of product-preserving functors $F: C \to D$ and natural transformations between them. By the preceding theorem, there is an equivalence 

$$Prod((Set/S)^{op}, C) \simeq C^S$$ 

where the right side consists of functors $S \to C$ (where $S$ is regarded as a discrete category) and natural transformations between them. 

+-- {: .un_cor}
######Corollary
The category $Prod((Set/S)^{op}, Set)$ is isomorphic to $Set/S$. 
=-- 

+-- {: .proof} 
######Proof
Because $Prod((Set/S)^{op}, Set) \simeq Set^S \simeq Set/S$. 
=-- 

Let $C$ be a locally small category with products. There is a Yoneda embedding 

$$y: C^{op} \to Prod(C, Set)$$ 

As we just saw, the Yoneda embedding $y: Set/S \to Prod((Set/S)^{op}, Set)$ is an equivalence. We may arrange that the reverse equivalence $Prod((Set/S)^{op}, Set) \to Set/S$ is right adjoint to $y$, and so we denote it as $y^*$. 

+-- {: .un_thm} 
######Theorem 
If $C$ is a locally small category with small products and $f: S \to C$ is a functor, the coproduct-preserving functor $\Pi^{op}: Set/S \to C^{op}$ has a right adjoint given by the composite 

$$C^{op} \stackrel{y}\to Prod(C, Set) \stackrel{Prod(\Pi, Set)}{\to} Prod((Set/S)^{op}, Set) \stackrel{y^*}{\to} Set/S$$ 
=-- 

+-- {: .proof}
######Proof
Let $g: X \to S$ be an object of $Set/S$ and $c$ an object of $C$. We have the following natural bijections between sets of morphisms: 

$$\array{
\Pi^{op}(g: X \to S) \to c & & in C^{op}\\
c \to \Pi(g: X \to S) & & in C\\
y(g: X \to S) \to \hom_C(c, \Pi-) & & in Prod((Set/S)^{op}, Set)\\
(g: X \to S) \to y^* \hom_C(c, \Pi-) & & in Set/S
}$$ 
where we get to the third line by the Yoneda lemma. This proves the theorem. 
=-- 

+-- {: .un_cor}
######Corollary
Under the hypotheses of the previous theorem, the product-preserving functor $\Pi: (Set/S)^{op} \to C$ is a right adjoint. In particular, it 
preserves _all_ limits, not just products. 
=-- 

### Free product-completions of categories 

Now let $C$ be a small category. We may construct the free category with _co_products generated by $C$ directly as follows: the objects of $Coprod(C)$ are those of $Set/C_0$, where $C_0$ is the set of objects. A morphism (say from $f: X \to C_0$ to $g: Y \to C_0$) is given by a function $\phi: X \to Y$ together with an $X$-indexed collection of morphisms of $C$ of the form $\Phi_x: f(x) \to g(\phi(x))$. The data of a morphism may be exhibited as a 2-cell of the form 

$$\array{
X & \stackrel{\phi}{\to} & Y \\
\mathllap{1_X} \downarrow & \stackrel{\Phi}{\Rightarrow} & \downarrow \mathrlap{g} \\
X & \underset{f}{\to} & C
}$$

Coproducts of objects in $Coprod(C)$ are computed just as they are in $Set/C_0$. 

Another light on this construction comes from seeing the free coproduct-cocompletion $Coprod(C)$ as sitting inside the free cocompletion $Set^{C^{op}}$. First, we have a Yoneda mapping 

$$C_0 \to Set^{C^{op}}: c \mapsto \hom(-, c)$$ 

This induces a coproduct-preserving functor $Set/C_0 \to Set^{C^{op}}$, which takes an object $g: Y \to C_0$ to the presheaf 

$$\sum_{y \in Y} \hom_C(-, g(y))$$ 

By the preceding theorem, this functor has a right adjoint. The right adjoint is simply described: it is the evident underlying functor 

$$Set^{C^{op}} \to Set/C_0$$ 

taking a presheaf $F: C^{op} \to Set$ to the $C_0$-indexed set where the fiber over $c \in C_0$ is $F(c)$. 

+-- {: .proof}
######Proof
As is well-known, this underlying functor $Set^{C^{op}} \to Set/C_0$ is monadic; the monad $M_C$ takes an object $g: Y \to C_0$ to the object whose fiber over $c$ is the set 

$$\sum_{y \in Y} \hom_C(c, g(y))$$ 

In other words, the left adjoint to the underlying functor is the coproduct-preserving functor that takes $g: Y \to C_0$ to 

$$\sum_{y \in Y} \hom(-, g(y)$$ 

as described above. 
=--

Notice that $M_C(g)$ is given by the top horizontal composite 

$$\array{
P & \to & C_1 & \stackrel{\dom}{\to} & C_0 \\
\downarrow & & \downarrow \mathrlap{\cod} & & \\
Y & \underset{g}{\to} & C_0 & & 
}$$

where the square is a pullback. 

+-- {: .un_thm} 
######Theorem
The free coproduct-cocompletion of $C$ is the Kleisli category of the monad $M_C: Set/C_0 \to Set/C_0$. 
=-- 

+-- {: .proof}
######Proof 
Let $f: X \to C_0$ and $g: Y \to C_0$ be two objects of $Kl(M_C)$. A morphism from $f$ to $g$ in $Kl(M_C)$ is a morphism from $f$ to $M_C(g)$ in $Set/C_0$, in other words a map $h: X \to P$ making the following diagram commute: 

$$\array{
X & \stackrel{1_X}{\to} & X & & \\
h \downarrow & & & \searrow \mathrlap{f} \\
P & \to & C_1 & \stackrel{\dom}{\to} & C_0 \\
\downarrow & & \downarrow \mathrlap{\cod} & & \\
Y & \underset{g}{\to} & C_0 & & 
}$$

Since $P$ is the pullback, the map $h$ is given by maps $\phi: X \to Y$, $\Phi: X \to C_1$ with $\Phi(x): f(x) \to g(\phi(x))$ for each $x \in X$. But this is how a morphism from $f$ to $g$ was described in the explicit construction of $Coprod(C)$. 
=-- 

The free product-completion of $C$ is obtained by dualization: 

$$Prod(C) = Coprod(C^{op})^{op} = Kl(M_{C^{op}})^{op}$$ 

Here $M = M_{C^{op}}$ is the monad on $Set/C_0$ whose algebras are functors $C \to Set$. This functor category is the category of models of a simple multi-sorted [[algebraic theory]], where the set of sorts is $C_0$ and each morphism $f: c \to d$ is regarded as an unary operation. According to the entry [[algebraic theory]], the corresponding Lawvere theory is just $Kl(M)^{op}$, in other words the product-completion of $C$. 
