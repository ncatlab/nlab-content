
> still under construction: the first $~ 1/3 + {\vert\epsilon\vert} $ should be readable, the rest is still skeletal, check again tomorrow or the day after

+-- {: .rightHandSide}
+-- {: .toc .clickDown tabindex="0"}
###Context###
#### Cohomology
+--{: .hide}
[[!include cohomology - contents]]
=--
#### String theory
+-- {: .hide}
[[!include string theory - contents]]
=--
=--
=--



#Contents#
* table of contents
{:toc}

## Idea

The [[background gauge fields]] on [[spacetime]] appearing in [[string theory]] are mathematically described by [[cocycles]] in [[twisted cohomology|twisted]] and [[differential cohomology|differential]] refinements of [[smooth infinity-groupoid|smooth]] [[cohomology]]. A famous example is the [[twisted K-theory]] that describes the [[B-field]]-twisted [[Yang-Mills fields]] over [[D-branes]] in [[type II string theory]]. But there are many more classes of examples of twisted / smooth / differential cohomology appearing throughout string theory.

This page provides a survey of and introduction to such examples, organized along a _[Table of twists](#TableOfTwists)_, that indicates how all of these are instances a single pattern. For further reading and more details see the list of _[related entries](#RelatedEntries)_ and the list of _[references](#References)_ below.

We start with an introduction to the general notion of twisted smooth cohomology by way of the simple but instructive class of examples of

* I) _[Geometric structure (generalized, exceptional)](#VielbeinFields)_,

which serves as a blueprint for all of the examples to follow, and which we use to introduce the general machinery.

(The mathematically inclined reader wishing to see a more formal development of the general theory behind the discussion here should look at the section _[General theory](#GeneralTheory)_ for pointers.)

Then we proceed in direct analogy, but now with ordinary [[gauge fields]] generalized to the genuine [[higher gauge fields]] of string theory, and discuss aspects of the main classes of examples of twisted smooth cohomology appearing there:

* II) _[Spin-, String-, and Fivebrane structure](#SpinStringFivebraneStructures)_;

* III) _[$Spin^c$-, $String^c$-, and $Fivebrane^c$-structure](#TwistedK)_ .

There are various further details and refinements, which however go beyond the intended scope of this page. As an outlook we indicate aspects of

* IV) _[Higher orientifold structure](#HigherOrientifold)_.




## Overview: The Table of Twists
 {#TableOfTwists} 

The following sections discuss classes of examples of [[twisted differential c-structures|twisted smooth structures]] in [[string theory]]. All these examples are governed by the the same general pattern of [[twisted cohomology]] (a gentle explanation follows [in a moment](#VielbeinFields), for a formal discussion see further [below](#TwistedCohomology)). They are specified by a _universal coefficient bundle_

$$
  \array{ 
    F &\to& E
    \\ 
    && 
    \downarrow^{\mathrlap{\mathbf{c}}} 
    \\ 
    && \mathbf{B}G 
   }
$$

which exists in a [[(∞,1)-topos|topos]] $\mathbf{H} = $ [[Smooth∞Grpd]] of [[smooth ∞-groupoid|smooth homotopy types]]. 

Here

* $G$ is a [[smooth ∞-group]] -- a higher [[gauge group]];

* $\mathbf{B}G$ is the [[smooth ∞-groupoid|smooth]] [[moduli ∞-stack]] of $G$-[[principal ∞-bundles]];

* $F$ is a coefficient object equipped with a $G$-[[action]];

* $E \to \mathbf{B}G$ is the [[associated ∞-bundle|associated bundle]] to the $G$-[[universal principal ∞-bundle]] over the [[moduli ∞-stack]] $\mathbf{B}G$ of $G$-[[principal ∞-bundles]].

Given such, and given a [[spacetime]]/[[target space]] $X$, we have

* a morphism $\phi : X \to \mathbf{B}G$ determines a _twisting bundle_ or _twisting [[background gauge field]]_ on $X$;

* a lift $\hat \phi$ in 

  $$
    \array{
      X &&\stackrel{\hat \phi}{\to}&& P
      \\
      & {}_{\mathllap{\phi}}\searrow &\swArrow& \swarrow_{\mathrlap{\mathbf{c}}}
      \\
      && \mathbf{B}G
    }
  $$

  is a $\phi$-[[twisted infinity-bundle|twisted bundle]], or $\phi$-twisted background gauge field.

The following table lists examples of such coefficient bundles and tabulates the correspondings twisting fields and twisted fields. This is to be read as an extended table of contents. Explanations are in the sections to follow.


| class of examples | universal coefficient bundle | twisting bundle | twisting field | twisted bundle | twisted field |
|---|---|---|---|---|---|
| **[0)](#GeneralTheory)** [[twisted differential c-structure|general pattern]] | | | | | |
| | $\array{ F &\to& E  \\ && \downarrow^{\mathrlap{\mathbf{c}}} \\ && \mathbf{B}G }$ | $G$-[[principal infinity-bundle|principal bundle]] | $G$-[[higher gauge field|gauge field]] [[instanton]]-sector | [[section]] of $\rho$-[[associated infinity-bundle|associated]] $F$-bundle | twisted $\Omega F$-[[gauge field]] [[instanton]] sector |
| | $\array{ \flat \mathbf{B}^n U(1) &\to& \mathbf{B}^n U(1) \\ && \downarrow^{\mathbf{curv}} \\ && \flat_{dR} \mathbf{B}^{n+1} U(1) }$ | [[de Rham cohomology|de Rham]] [[hypercohomology]] |  | [[circle n-bundle with connection]]  | [[higher gauge field|higher abelian gauge field]] |
| | $\array{ F_{conn} &\to& E_{conn}  \\ && \downarrow^{\mathrlap{\hat \mathbf{c}}} \\ && \mathbf{B}G_{conn} }$ | $G$-[[connection on an infinity-bundle|connection]] | $G$-[[higher gauge field|gauge field]]  | [[section]] of $\rho$-[[associated infinity-bundle|associated]] $F$-bundle | twisted $\Omega F$-[[gauge field]]|
| **[I)](#VielbeinFields)** [[reduction of structure group]]/[[G-structure|geometric structure]] | | | | | |
| | $\array{ GL(n)/O(n) &\to& \mathbf{B} O(n) \\ && \downarrow \\ && \mathbf{B} GL(n) }$ | [[manifold]] structure / [[tangent bundle]] |  | [[vielbein]] | [[gravity]] |
| | $\array{ GL(n)/O(n) &\to& \mathbf{B} O(n)_{conn} \\ && \downarrow \\ && \mathbf{B} GL(n)_{conn} }$ | [[affine connection]] |   | [[spin connection]] | [[gravity]] |
| | $\array{ O(2d,2d)/SU(d,d) &\to& \mathbf{B} SU(d,d) \\ && \downarrow  \\ && \mathbf{B} O(2d,2d) }$ | [[generalized tangent bundle]] | |  | [[generalized Calabi-Yau manifolds]] |
| | $\array{ O(n)\backslash O(n,n)/O(n) &\to& \mathbf{B} O(n) \times O(n) \\ && \downarrow \\ && \mathbf{B} O(n,n) }$ | [[generalized  tangent bundle]] |  | [[type II geometry]] | DFT [[type II supergravity]] | 
| | $\array{ SU(3)\backslash O(6,6) / SU(3) &\to& \mathbf{B} SU(3) \\ && \downarrow \\ && \mathbf{B} O(6,6) }$ | [[generalized tangent bundle]]  | | [[type II geometry]] | $d = 6$, $N=1$  [[type II supergravity]] [[Kaluza-Klein mechanism|comactifications]] | 
| |  $\array{ E_{7(7)}/SU(7) &\to& \mathbf{B} SU(7) \\ && \downarrow \\ && \mathbf{B}E_{7(7)} }$ | [[exceptional tangent bundle]] | [[E7]]-[U-duality](supergravity#UDuality) moduli ([[split real form]]) |  | $d = 7$, $N=1$ [[11-dimensional supergravity|11d supergravity]] [[Kaluza-Klein mechanism|compactifications]] |
| | $\array{ E_{n(n)}/H_n &\to& \mathbf{B}H_n \\ && \downarrow \\ && \mathbf{B}E_{n(n)} }$ | [[exceptional tangent bundle]]  | [U-duality](supergravity#UDuality) moduli | [[U-duality]] [[exceptional generalized geometry]] | [[Kaluza-Klein mechanism|compactification]] of [[11-dimensional supergravity|11d supergravity]] to $d = 11-n$ |
| | $\array{ \mathbf{B} U &\to& \mathbf{B} P U \\ && \downarrow^{\mathbf{dd}} \\ && \mathbf{B}^2 U(1) }$ | [[circle n-bundle with connection|circle 2-bundle]]/$U(1)$-[[bundle gerbe]] | [[B-field]] | [[twisted bundle|twisted unitary bundle]] | [[Yang-Mills field]] |
| | $\array{ \mathbf{B}String(E_8) &\to& \mathbf{B} E_8 \\ && \downarrow^{\mathrlap{\mathbf{a}}} \\ && \mathbf{B}^3 U(1)} $ | [[circle n-bundle with connection|circle 3-bundle]] / [[bundle 2-gerbe]] | [[supergravity C-field]] |  | [[twisted differential string structure|twisted String(E8)]]-2-form gauge field  |
| **[II)](#SpinStringFivebraneStructures)** [higher spin structures](spin+structure#Higher) | | | | | |
| | $\array{ \mathbf{B} Spin &\to& \mathbf{B} SO \\ && \downarrow^{\mathrlap{\mathbf{w}_2}} \\ && \mathbf{B}^2 \mathbb{Z}_2 }$ | [[second Stiefel-Whitney class]] | | [[twisted spin structure]] |  |
| | $\array{ \mathbf{B}String &\to& \mathbf{B} Spin  \\ && \downarrow^{\mathrlap{\tfrac{1}{2}\mathbf{p}_1}} \\ && \mathbf{B}^3 U(1)  }$ | [[circle n-bundle with connection|circle 3-bundle]]/$U(1)$-[[bundle 2-gerbe]] |  [[NS5-brane]] [[magnetic charge]] |  [[twisted differential string structure|twisted smooth string structure]] |  |
| | $\array{ \mathbf{B}String_{conn} &\to& \mathbf{B} Spin_{conn}  \\ && \downarrow^{\mathrlap{\tfrac{1}{2}\hat \mathbf{p}_1}} \\ && \mathbf{B}^3 U(1)_{conn}  }$ | [[circle n-bundle with connection|circle 3-bundle with connection]]| [[NS5-brane]] [[current|magnetic current]]  |  [[twisted differential string structure]] | [[Green-Schwarz mechanism]] [[gravity]]+[[B-field]] |
| | $\array{ \mathbf{B}Fivebrane &\to& \mathbf{B} String  \\ && \downarrow^{\mathrlap{\tfrac{1}{6}\mathbf{p}_2}} \\ && \mathbf{B}^7 U(1)  }$ | [[circle n-bundle with connection|circle 7-bundle]]| [[string]] [[electric charge]]  | [[twisted differential fivebrane structure|twisted smooth fivebrane structure]] |  |
| | $\array{ \mathbf{B}Fivebrane_{conn} &\to& \mathbf{B} String_{conn}  \\ && \downarrow^{\mathrlap{\tfrac{1}{6}\hat \mathbf{p}_2}} \\ && \mathbf{B}^7 U(1)_{conn}  }$ | [[circle n-bundle with connection|circle 7-bundle with connection]]| [[string]] [[current|electric current]] | [[twisted differential fivebrane structure]] | dual [[Green-Schwarz mechanism]] [[gravity]]+[[B6-field]] |
| **[III)](#TwistedK)** [higher spin^c-structures](spin^c+structure#Higher) | | | | | |
| | $\array{ \mathbf{B}Spin^c &\to& \mathbf{B} (SO \times U(1))  \\ && \downarrow^{\mathrlap{ w_2 - c_1}} \\ && \mathbf{B}^2 \mathbb{Z}_2  }$ |  |   | [[twisted spin^c structure]] |  |
|  | $\array{ && \mathbf{B} (PU \times SO) \\ && \downarrow^{\mathrlap{ \mathbf{dd} - \mathbf{W}_3 }} \\ && \mathbf{B}^2 U(1) }$ | [[circle n-bundle with connection|circle 2-bundle]] |  [[B-field]] | [[twisted spin^c structure]]  | Freed-Witten anomaly for type II string on D-brane  |
| | $\array{ \mathbf{B}String^{\mathbf{a}} &\to& \mathbf{B} Spin \times E_8  \\ && \downarrow^{\mathrlap{\tfrac{1}{2}\mathbf{p}_1 - 2 \mathbf{a}}} \\ && \mathbf{B}^3 U(1)  }$ | [[circle n-bundle with connection|circle 3-bundle]]/$U(1)$-[[bundle 2-gerbe]] |  [[supergravity C-field]] |  [[twisted differential string structure|twisted smooth string^c structure]] |  [[gravity]]+[[B-field]]+[[E8]]-[[gauge field]] |
| **[IV)](#HigherOrientifold)** Giraud-[[∞-gerbes]] | | | | | |
| | $\array{ \mathbf{B}^2 U(1) &\to& \mathbf{B}Aut(\mathbf{B}U(1)) \\ && \downarrow \\ && \mathbf{B}\mathbb{Z}_2 }$ | [[double cover]] |  | [[Jandl gerbe]] | [[orientifold]] [[B-field]] | 
| | $\array{ \mathbf{B}^3 U(1) &\to& \mathbf{B}Aut(\mathbf{B}^2 U(1)) \\ && \downarrow \\ && \mathbf{B}\mathbb{Z}_2 }$ | [[double cover]] |  | | [[Hořava-Witten theory|Hořava-Witten orientifold]] | 
 

## Examples
 {#Examples}

This section discusses four classes of examples of twisted smooth cohomology in string theory

1. _[Geometric structure (generalized, exceptional)](#VielbeinFields)_

1. _[Spin-, String-, and Fivebrane structure](#SpinStringFivebraneStructures)

1. _[$Spin^c$-, $String^c$-, $Fivebrane^c$-structure](#TwistedK)_

1. _[Higher orientifold structure](#HigherOrientifold)_ 

### **I)** Geometric structure (generalized, exceptional)
 {#VielbeinFields}

The ordinary notion of _[[vielbein]]_ in [[differential geometry]] (equivalently: _[[soldering form]]_ or _[[orthogonal structure]]_) turns out to be a simple special case of the general notion of twisted smooth cohomology that we are concerned with here. Viewed from this perspective it already contains the seeds of all of the more sophisticated examples to be considered below. Therefore we discuss this case here as a warmup, such as to introduce the general theory by way of example. 

#### The class of the tangent bundle
 {#ClassOfTheTangentBundle}

Let $X$ be a [[smooth manifold]] of [[dimension]] $n$. 

By definition this means that there is an [[atlas]] $\{\phi_i^{-1} : \mathbb{R}^n \simeq U_i \hookrightarrow X\}$ of [[coordinate charts]]. On each overlap $U_i \cap U_j$ of two [[coordinate charts]] the [[partial derivatives]] of the corresponding [[coordinate transformations]]

$$
  \phi_j\circ \phi_i^{-1}
  : 
  U_i \cap U_j \subset \mathbb{R}^n \to \mathbb{R}^n
$$

form the [[Jacobian matrix]] of [[smooth functions]]

$$
  ((\lambda_{i j})^{\mu}{}_{\mu})
  \coloneqq
  \left[\frac{d}{d x^\nu} \phi_j \circ \phi_i^{-1} (x^\mu)
  \right]
  :
  U_i \cap U_j 
  \to 
  GL_n
$$

with values in invertible [[matrices]], hence in the
[[general linear group]] $GL(n)$. By construction (by the [[chain rule]]), these functions satisfy on triple overlaps of coordinate charts the [[matrix product]] equations

$$
  (\lambda_{i j})^\mu{}_\lambda (\lambda_{j k})^\lambda{}_{\nu} 
  = 
  (\lambda_{i k})^\mu{}_{\nu}
  \,,
$$

hence the equation

$$
  \lambda_{i j} \cdot \lambda_{j k} = \lambda_{i k}
$$

in the [[group]] $C^\infty(U_i \cap U_j, GL(n))$ of smooth $GL(n)$-valued functions on the chart overlap.

This is the [[cocycle]] condition for a smooth [[Cech cohomology|Cech cocycle]] in degree 1 with coefficients in $GL(n)$ (precisely: with coefficients in the [[sheaf]] of smooth functions with values in $GL(n)$ ). We write

$$
  [(\lambda_{i j})] \in H^1_{smooth}(X, GL_n)
  \,.
$$

It is useful to formulate this statement in the language of [[Lie groupoids]]/[[differentiable stacks]]. 

* $X$ itself is a Lie groupoid $(X \stackrel{\to}{\to} X)$ with trivial morphism structure;

* from the atlas $\{U_i \to X\}$ we get the corresponding [[Cech groupoid]] 
  $$
    C(\{U_i\}) = 
    (\coprod_{i, j} U_i \cap U_j \stackrel{\to}{\to} \coprod_i U_i)
    = 
    \left\{
      \array{
         && (x,j)
         \\
         & \nearrow &=& \searrow
         \\
        (x,i) &&\to&& (x,k)
      }
      \;\;\;
      for\, x \in U_i \cap U_j \cap U_k
    \right\}
    \,,
  $$

  whose objects are the points in the atlas, whith morphisms identifying lifts of a point in $X$ to different charts of the atlas;

* any [[Lie group]] $G$ induces its [[delooping]] [[Lie groupoid]] 
  
  $$
    \mathbf{B}G
    = 
    \left(
       G \stackrel{\to}{\to} * 
    \right)
    \,.
  $$

The above situation is neatly encoded in the existence of a [[diagram]] of Lie groupoids of the form

$$
  \array{
     C(\{U_i\}) &\stackrel{\lambda}{\to}& \mathbf{B} GL(n).
     \\
     {}^{\mathllap{\simeq}}\downarrow
     \\
     X
  }
  \,,
$$

where

* the left morphism is [[stalk]]-wise (around small enough [[neighbourhoods]] of each point) an [[equivalence of groupoids]];

* the horizontal functor has as components the functions $\lambda_{i j}$ and its functoriality is the cocycle condition $\lambda_{i j} \cdot \lambda_{j k} = \lambda_{i k}$.

A [[natural transformation|transformation]] of smooth functors $\lambda_1 \Rightarrow \lambda_2 : C(\{U_i\}) \to \mathbf{B} GL(n)$ is precisely a [[coboundary]] between two such cocycles.

#### Smooth moduli stacks

We want to think of such a diagram as being directly a morphism of [[smooth infinity-groupoid|smooth groupoids]]


$$
  T X \; : \; X \to \mathbf{B} GL(n) \;\; \in \mathbf{H}
$$

such that this may be regarded as a smooth refinement of the underlying [[homotopy]] class of a  map into the [[classifying space]] $B GL(n)$

$$
  X \to B GL(n) \in Top  
  \,.
$$

Evidently, for this we need to turn the [[stalk]]-wise [[homotopy equivalence]] $C(\{U_i\}) \to X$ into an actual [[homotopy equivalence]]. This is a non-abelian/non-stable generalization of what happens in the construction of a [[derived category]], for instance in the theory of [[topological string|topological branes]].

To make this precise, first notice that every Lie groupoid $A = (A_1 \stackrel{\to}{\to} A_0)$ yields on each smooth manifold $U$ a groupoid of maps from $U$ into $A$

$$
  A : U \mapsto (C^\infty(U,A_1) \stackrel{\to}{\to} C^\infty(U,A_0))
  \,,
$$

the groupoid of _smooth $U$-families_ of elements of $A$.

Moreover, for every smooth function $U_1 \to U_2$ there is an evident restriction map $A(U_2) \to A(U_1)$ and so this yields a [[presheaf]] of groupoids, hence a functor $A \in Func(SmthMfd^{op}, Grpd)$.

Let therefore

$$
  \mathbf{H} \coloneqq Func(SmthMfd^{op}, Grpd)[\{stalkwise\, h.e\}^{-1}]
$$

be the [[simplicial localization|localization]] of groupoid-valued presheaves that universally turns [[stalk]]wise [[homotopy equivalences]] into actual homotopy equivalences. We call this the _[[(2,1)-topos]]_ of _[[smooth infinity-groupoid|smooth groupoids]]_ or _[[smooth infinity-groupoid|smooth stacks]]_.

Then we have

1. a morphism $X \to \mathbf{B} GL(n)$ in $\mathbf{H}$ is precisely a smooth real vector bundle on $X$;

1. a homotopy between two such morphisms in $\mathbf{H}$ is precisely a smooth $GL(n)$-[[gauge transformation]] between the two vector bundles.

Therefore $\mathbf{B}GL(n)$ regarded as an object of $\mathbf{H}$ is the _[[moduli stack]]_ of real vector bundles.

Of course there is a "smaller" Lie groupoid that also classifies real vector bundles. Passing to this "smaller" Lie groupoid is what the choice of vielbein accomplishes, to which we now turn.


#### Reduction of the structure group
 {#ReductionOfTheStructureGroup}


Consider the defining inclusion of the [[orthogonal group]] into the [[general linear group]]

$$
  O(n) \hookrightarrow GL(n)
  \,.
$$

We may understand this inclusion geometrically in terms of the canonical [[metric]] on $\mathbb{R}^n$, but we may also understand it purely Lie theoretically as the
the inclusion of the [[maximal compact subgroup]] of $GL(n)$. This makes it manifest that the inclusion is trivial at the level of [[homotopy theory]] (it is a [[homotopy equivalence]]) and hence _only_ encodes geometric information.


The inclusion induces a corresponding inclusion ([[truncated object of an (infinity,1)-category|0-truncated morphism]]) of moduli stacks

$$
  \mathbf{Orth} : \mathbf{B} O(n) \to \mathbf{B} GL(n)
  \;\;\;
  \in \mathbf{H}
$$

simply by regarding it as a morphism of Lie groupoids

$$
  (O(n) \stackrel{\to}{\to} * )
  \to 
  (GL(n) \stackrel{\to}{\to} * )
  \,.
$$

Now we can say what a [[Riemannian metric]]/[[orthogonal structure]] on $X$ is: A choice of [[orthogonal structure]] on $T X$ is a factorization of the above $GL(n)$-valued cocycle $\lambda$ through $\mathbf{Orth}$, up to a smooth [[homotopy]] $E$, hence a [[diagram]]

$$
  \array{
     X &&\stackrel{h}{\to}&& \mathbf{B} O(n)
     \\
     & {}_{\mathllap{\lambda}}\searrow &\swArrow_{\mathrlap{E^{-1}}}& \swarrow_{\mathrlap{\mathbf{Orth}}}
     \\
     && \mathbf{B}GL(n)
  }
$$

in $\mathbf{H}$.

This consists of two pieces of data

* the morphism $h$ is (by the same reasoning as for $\lambda$ above) a $O(n)$-valued 1-cocycle -- a collection of _orthogonal transition functions_ --  hence on each overlap of coordinate patches a smooth function
  
  $$
    ((h_{i j}){}^a{}_b) : U_i \cap U_j \to O(n)
  $$
  
  such that 

  $$
    h_{i j} \cdot h_{j k} = h_{i k}
  $$

  on all triple overlaps of coordinate charts $U_i \cap U_j \cap U_k$;

* the homotopy $E$ is on each chart a function

  $$
    E_i  = ((E_i)^a{}_\mu) : U_i \to GL(n)
  $$

  * such that on each overlap of coordinate charts it intertwines the transition functions $\lambda$ of the tangent bundle with the new orthogonal transition functions, meaning that the equation

    $$
      (E_i)^a{}_{\mu} (\lambda_{i j})^{\mu}{}_\nu
      =
      (h_{i j})^a{}_b (E_j)^b{}_\nu
    $$

    holds. This exhibits the [[natural transformation|naturality]] [[diagram]] of $E$:

  $$
    \array{
       * &\stackrel{E_i}{\to}& * 
       \\
       {}^{\mathllap{\lambda_{i j}}}\downarrow && \downarrow^{\mathrlap{h_{i j}}}
       \\
       * &\stackrel{E_j}{\to}& * 
    }
  $$

The component $h$ defines an $O(n)$-[[principal bundle]] on $X$, or its [[associated bundle|associated]] [[vector bundle]].
The component $E$ is the corresponding **vielbein**. It exhibits an [[isomorphism]] 

$$
  E : T X \stackrel{\simeq}{\to} V
$$

between a [[vector bundle]] $V \to X$ with [[structure group]] explicitly being the [[orthogonal group]] and the [[tangent bundle]], hence it exhibits the [[reduction of structure groups|reduction of the structure group]] of $T X$ from $GL(n)$ to $O(n)$.

#### Moduli space of orthogonal structures: twisted cohomology
 {#ModuliSpaceOfOrhtogonalStructures}

In order to understand the space of choices of vielbein fields on a given tangent bundle, hence the _[[moduli space]]_ or _[[moduli stack]]_ of [[orthogonal structures]]/[[Riemannian metrics]] on $X$, it is useful to first consider the [[homotopy fiber]] of the morphism $\mathbf{c} : \mathbf{B}O(n) \to \mathbf{B}GL(n)$. One finds that this is the [[coset]] $O(n) \backslash GL(n)$. We may think of the [[fiber sequence]]

$$
  \array{  
    GL(n)/O(n) &\to& \mathbf{B} O(n)
    \\
    && \downarrow
    \\
    && \mathbf{B} GL(n)
  }
$$

as being a bundle in $\mathbf{H}$ over the [[moduli stack]] $\mathbf{B}GL(n)$ with typical fiber $GL(n)/O(n)$. It is  the smooth [[associated infinity-bundle|associated bundle]] to the smooth [[universal principal bundle|universal GL(n)-bundle]] induced by the canonical [[action]] of $GL(n)$ on $O(n)\backslash GL(n)$.

This means that if the tangent bundle $T X$ is trivializable, then the coset space $O(n)\backslash GL(n)$ is the moduli space for vielbein fields on $T X$: 

$$
  (T X \; trivializable)
  \Rightarrow
  SpaceOfVielbeinFieldsOn(T X)
  =
  \mathbf{H}(X, O(n)\backslash GL(n)) = C^\infty(X, O(n)\backslash GL(n))
  \,.
$$

However, if $T X$ is not trivial, then this is true only locally: there is then an [[atlas]] $\{U_i \to X\}$ such that restricted to each $U_i$ the moduli space of vielbein fields is $C^\infty(U_i, GL(n)/ O(n))$, but globally these now glue together in a non-trivial way as encoded by the tangent bundle: we may say that 

the tangent bundle _twists_ the functions $X \to GL(n)/O(n)$. If we think of an ordinary such function as a cocycle in degree-0 cohomology, then this means that a vielbein is a cocycle in $T X$-_[[twisted cohomology]]_ relative to the _twisting coefficient bundle_ $\mathbf{c}$.

We can make this more manifest by writing equivalently

$$
  \array{
    O(n)\backslash GL(n) &\to& (O(n)\backslash GL(n)) // GL(n)
    \\
    && \downarrow   
    \\
    && \mathbf{B}GL(n)
  }
  \,,
$$

where now on the right we have inserted the [[fibration]] resolution of the morphism $\mathbf{c}$ as provided by the [[factorization lemma]]: this is the morphism out of the [[action groupoid]] of the action of $GL(n)$ on $O(n)\backslash GL(n)$.


The pullback

$$
  \array{
    T X \times_{GL(n)} (O(n)\backslash GL(n)) 
      &\to&
    O(n)\backslash GL(n) // GL(n)
    \\
    \downarrow && \downarrow
    \\
    X &\stackrel{T X}{\to}& \mathbf{B}GL(n)
  }  
$$

gives the non-linear $T X$-associated bundle whose space of sections is the "twisted $O(n)\backslash GL(n)$-0-cohomology", hence the space of inequivalent vielbein fields.


#### Moduli stack of orthogonal structures

The above says that the space of vielbein fields is the [[cohomology]] of $T X$ in the [[over-(infinity,1)-topos|slice (2,1)-topos]] $\mathbf{H}_{/\mathbf{B}GL(n)}$ with coefficients in $\mathbf{Orth} : \mathbf{B}O \to \mathbf{B}GL(n)$

$$
  \mathbf{Orth} Struc_{TX}(X) 
  \coloneqq
  \mathbf{Orth}(T X)
   \coloneqq
  \mathbf{H}_{/\mathbf{B}GL(n)}(T X, \mathbf{Orth})
  \,.
$$

But also this space of choices of vielbein fields has a smooth structure, it is itself a smooth [[moduli stack]]. This is obtained by forming the [[internal hom]] in the slice over $\mathbf{B}GL(n)$ of the [[locally cartesian closed (infinity,1)-category|locally cartesian closed (2,1)-category]] $\mathbf{H}$.

$$
  \mathbf{OrthStruc}_{T X}(X)
  \coloneqq
  [T X, \mathbf{Orth}]_{\mathbf{B}GL(n)}
  \,.
$$

#### Differential refinement: Spin connection

We may further refine this discussion to [[differential cohomology]] to get genuine _differential_ $T X$-twisted $\mathbf{c}$-structures. 

Recall that the moduli stack $\mathbf{B}G$ is presented in $\mathbf{H}$ by the presheaf of groupoids

$$
  \mathbf{B} G : U \mapsto (C^\infty(U,G) \stackrel{\to}{\to} *)
  \,.
$$

We may think of this for each $U$ as being the groupoid of $G$-gauge transformations acting on the trivial $G$-bundle over $U$. A [[connection on a bundle|connection]] on the trivial $G$-bundle is a [[Lie algebra]] valued form $A \in \Omega^1(U, \mathfrak{g})$. Accordingly, the presheaf of groupoids

$$
  \mathbf{B}G_{conn} : U \mapsto (C^\infty(U,G) \times \Omega^1(U, \mathfrak{g}) \stackrel{\to}{\to} \Omega^1(U, \mathfrak{g}) )
$$

is that of $G$-connections and gauge transformations between them: the _[[groupoid of Lie-algebra valued forms]]_ over $U$. As an object of $\mathbf{H} = $ [[smooth infinity-groupoid|SmoothGrpd]] this the [[moduli stack]] of $G$-[[connection on a bundle|connections]]:

$$
  \mathbf{H}(X, \mathbf{B}G_{conn})
  \simeq
  G Bund_\nabla(X)
  \,.
$$

The morphism $\mathbf{Orth}$ has an evident differential refinement to a morphism between such differentially refined moduli stacks

$$
  \mathbf{Orth}_{conn} : \mathbf{B}O(n)_{conn} \to \mathbf{B}GL(n)_{conn}
$$

by acting on the differential forms with the induced inclusion of the [[orthogonal Lie algebra]] into the [[general linear Lie algebra]] $\mathfrak{o}(n) \hookrightarrow \mathfrak{gl}(n)$.

The [[homotopy fiber]] of this differential refinement turns out to be the same moduli space as before

$$
  \array{
    GL(n)/ O(n) &\to& \mathbf{B} O(n)_{conn}
    \\
    && \downarrow^{\mathrlap{\mathbf{Orth}_{conn}}}
    \\
    && \mathbf{B} GL(n)_{conn}
  }
  \,,
$$

so that the moduli space of "differential vielbein fields" is the same as that of plain vielbein fields. But we nevertheless do gain differential information: consider an [[affine connection]] on the tangent bundle, which is now given by a morphism from $X$ to the moduli stack

$$
  \nabla_{T X} : X \to \mathbf{B}GL(n)
  \,.
$$

This is a $GL(n)$-[[principal connection]] which locally on an atlas is given by the [[Christoffel symbols]] 

$$
  \Gamma_i = ((\Gamma_i)_\mu{}{}^{\alpha}{}_\beta)
  \in 
  \Omega^1(U_i, \mathfrak{gl}(n))
  \,.
$$

A $\nabla_{T X}$-twisted differential cocycle is now a diagram

$$
  \array{
    X &&\stackrel{\nabla_{V}}{\to}&& \mathbf{B}O_{conn}
    \\
    & {}_{\mathllap{\nabla_{T X}}}\searrow 
     &\swArrow_{E^{-1}}& 
    \swarrow_{\hat {\mathbf{Orth}}}
    \\
    && \mathbf{B}GL(n)_{conn}
  }
  \,.
$$

In components over the atlas, $\nabla_V$ is a "[[spin connection]]" given by local 1-forms $\{\omega_i \in \Omega^1(U_i, \mathfrak{o}(n))\}$

$$
  \omega_i = E_i d_{dR} E_i^{-1} + E_i \Gamma E_i^{-1}
$$

and the vielbeing $E$ now exhibits on each chart $U_i$ the familiar relation between the components of the spin connection and the Christoffel-symbols:

$$
  \omegai{}^a{}_b 
   = 
   E_i^a{}_\nu d_{dR} E_i^\nu{}_b
   +
   E_i^a{}_\nu \Gamma_i {}^\nu{}_\lambda E_i^\lambda{}_b
   \,.
$$


#### Generalized vielbein fields: type II geometry, generalized CY and U-duality

The above discussion of ordinary [[vielbein]] fields is just a special case of an analogous discussion for general [[reduction of structure groups]], giving rise to [[generalized vielbein]] fields. Many geometric structures in string theory arise in this way, as indicated in the [table of twists](#TableOfTwists).

As one more out of these examples, we discuss in the above language of twisted smooth cohomology how a _[[type II geometry]]_ of [[type II supergravity]] is the [[reduction of the structure group]] of the [[generalized tangent bundle]] along the inclusion $O(d) \times O(d) \to O(d,d)$.

+-- {: .num_defn #InclusionForTypeIIGeometry}
###### Definition

Consider  the [[Lie group]] inclusion
$$
  \mathrm{O}(d) \times \mathrm{O}(d)
  \to 
  \mathrm{O}(d,d)
$$

of those [[orthogonal group|orthogonal transformations]], that preserve the positive definite part
or the negative definite part of the [[bilinear form]] of signature $(d,d)$, respectively.

If $\mathrm{O}(d,d)$ is presented as the group of $2d \times 2d$-[[matrix|matrices]] that 
preserve the [[bilinear form]] given by the $2d \times 2d$-matrix
$$
  \eta 
  \coloneqq
  \left( 
     \array{
       0 & \mathrm{id}_d
       \\
       \mathrm{id}_d & 0
     }
  \right)
$$

then this inclusion sends a pair $(A_+, A_-)$ of [[orthogonal group|orthogonal]] $n \times n$-matrices
to the matrix
$$
  (A_+ , A_-) 
    \mapsto 
  \frac{1}{\sqrt{2}}
  \left(
    \array{
	   A_+ + A_- & A_+ - A_-
	   \\
	   A_+ - A_- & A_+ + A_-
     }
  \right)
  \,.
$$

=--

This inclusion of [[Lie groups]] induces the corresponding morphism of 
[[smooth infinity-groupoid|smooth]] [[moduli stacks]]
of [[principal bundles]]

$$
  \mathbf{TypeII}
  :
  \mathbf{B}(\mathrm{O}(d) \times \mathrm{O}(d))
  \to 
  \mathbf{B} \mathrm{O}(d,d)  
  \,.
$$

+-- {: .num_prop }
###### Proposition

There is a [[fiber sequence]] of [[smooth infinity-groupoid|smooth stacks]] 

  $$
      O(d) \backslash O(d,d) / O(d)
	 \to
  \mathbf{B}(\mathrm{O}(d) \times \mathrm{O}(d))
     \stackrel{\mathbf{TypeII}}{\to}
    \mathbf{B} \mathrm{O}(d,d)  	
  \,,
  $$

where the fiber on the left is the [[coset space]] of the [[action]] of $O(d) \times O(d)$ on $O(d,d)$.

=--

+-- {: .num_defn }
###### Definition

There is a canonical embedding
$$
  \mathrm{GL}(d) \hookrightarrow \mathrm{O}(d,d)
$$

of the [[general linear group]].

In the above matrix presentation this is given by sending

$$
  a
  \mapsto 
  \left( 
     \array{
	    a & 0
		\\
		0 & a^{-T}
      }
  \right)
  \,,
$$

where in the bottom right corner we have the [[transpose matrix|transpose]] of the inverse matrix of the invertble
matrix $a$.

=--

+-- {: .num_defn }
###### Definition

Under inclusion of def. \ref{InclusionForTypeIIGeometry}, the 
[[tangent bundle]] of a $d$-[[dimension|dimensional]] 
[[manifold]] $X$ defines an $\mathrm{O}(d,d)$-[[cocycle]]

$$
  T X \otimes T^* X
  :
  
    X 
     \stackrel{T X}{\to}
    \mathbf{B}\mathrm{GL}(d)  
      \stackrel{}{\to}
    \mathbf{B} \mathrm{O}(d,d) 
  \,.
$$

The [[vector bundle]] canonically associated to this composite cocycles may 
canonically be identified with
the [[tensor product]] vector bundle $T X \otimes T^* X$, and so we will
refer to this cocycle by these symbols, as indicated. 
This is also called the **[[generalized tangent bundle]]** of $X$.

=--

Therefore we may canonically consider the groupoid of 
$T X \otimes T^* X$-twisted $\mathbf{TypeII}$-structures, 
according to the general notion of [[twisted differential c-structures]].


+-- {: .num_defn }
###### Definition

A **type II generalized vielbein** on a [[smooth manifold]] $X$ is a diagram

$$
  \array{
    X &&\stackrel{\widetilde(T X \otimes T^* X)}{\to}&& \mathbf{B}(O(n) \times O(n))
    \\
    & {}_{\mathllap{T X \otimes T^* X}}\searrow &\swArrow_{E}& \swarrow_{\mathrlap{\mathbf{TypeII}}}
    \\
    && \mathbf{B} O(n,n)
  }
$$

in $\mathbf{H} = $ [[Smooth∞Grpd]], hence a cocycle in the smooth [[twisted cohomology]]

$$
  E 
   \in 
  \mathbf{TypeII}Struc(X)
  \coloneqq
  \mathbf{H}_{/\mathbf{B} O(n,n)}(T X \otimes T^* X, \mathbf{TypeII})
  \,.
$$


=--

+-- {: .num_prop }
###### Proposition / Definition

  The [[groupoid]] $\mathbf{TypeII}\mathrm{Struc}(X)$
  is that of "generalized vielbein fields" on $X$, as considered for instance 
  around equation (2.24) of ([GMPW](#GMPW))
  (there only locally, though).
  
  In particular, its set of equivalence classes is the set of 
  type-II generalized geometry structures on $X$.

=--

+-- {: .proof}
###### Proof

Over a local [[coordinate chart]] $\mathbb{R}^d \simeq U_i \hookrightarrow X$, the most general such generalized vielbein
(hence the most general $\mathrm{O}(d,d)$-valued function)
may be parameterized as
$$
  E = 
  \frac{1}{2}
  \left(
    \array{
	  (e_+ + e_-) + (e_+^{-T} - e_-^{-T})B & (e_+^{-T} - e_-^{-T})
	  \\
	  (e_+ - e_-) - (e_+^{-T} + e_-^{-T})B & (e_+^{-T} + e_-^{-T})
     }
  \right)
  \,,
$$

where $e_+, e_- \in C^\infty(U_i, \mathrm{O}(d))$ are thought of as two 
[[vielbein|ordinary vielbein]] fields, and where $B$ is any smooth skew-symmetric $n \times n$-matrix valued function on 
$\mathbb{R}^d \simeq U_i$. 

By an $\mathrm{O}(d) \times \mathrm{O}(d)$-[[gauge transformation]] this can always be brought
into a form where $e_+ = e_- =: \tfrac{1}{2}e$ such that
$$
  E = 
  \left(
    \array{
	  e & 0
	  \\
	  - e^{-T}B  & e^{-T}
	}
  \right)
  \,.
$$

The corresponding "generalized metric" over $U_i$ is

$$
  E^T 
  E
  = 
  \left(
    \array{
	  e^T & B e^{-1}
	  \\
	  0  & e^{-1}
    }
  \right)
  \left(
    \array{
	  e & 0
	  \\
	  - e^{-T}B  & e^{-T}
    }
  \right)
  = 
  \left(
    \array{
	  g - B g^{-1} B & B g^{-1}
	  \\
	  - g^{-1} B  & g^{-1}
     }
  \right)
  \,,
$$

where

$$
  g \coloneqq e^T e
$$

is the [[metric]] (over $\mathbb{R}^q \simeq U_i$ a smooth function with values in symmetric $n \times n$-matrices) 
given by the [[vielbein|ordinary vielbein]] $e$.

=--




### **II)** Spin-, String- and Fivebrane-structure
 {#SpinStringFivebraneStructures}

Above we have seen ([[pseudo-Riemannian metric|pseudo]]-)[[Riemannian metric|Riemannian structure]] given by lifts through the inclusion $\mathbf{B} O(n) \to \mathbf{B} GL(n)$. Now we consider further lifts, through the [[Whitehead tower]] of $\mathbf{B}O$. This encodes 
_[higher spin structures](spin+structure#Higher)_.

Where a _[[spin structure]]_ on [[spacetime]] is necessary to cancel a [[quantum anomaly]] of the [[spinning particle]]/[[superparticle]] [[sigma-model]], so the [[heterotic string|heterotic]] [[superstring]] requires, in the absence of a [[gauge field]], a "[higher spin structure](#spin+structure#Higher)", called a _[[string structure]]_.  Further up in dimension, _[[dual heterotic string theory]]_ in the absence of the gauge field involves a  _[[fivebrane structure]]_.

In the presence of a nontrivial [[gauge fields]] string structures are generalized to _[[twisted differential string structure|twisted string structure]]_, which in [[heterotic string theory]] are part of the _[[Green-Schwarz mechanism]]_. These we discuss [below](#TwistedK).


#### Whitehead tower
 {#WhiteheadTower}

The nature of higher spin structures is governed by what is called the _[[Whitehead tower]]_ of the [[homotopy type]] of the [[classifying space]] $B O$ of the [[orthogonal group]], where in each stage a [[homotopy group]] is removed _from below_. This is [[duality|dual]] to the _[[Postnikov tower]]_, where in each stage a homotopy group is added from above.

The [[homotopy groups]] of $B O$ start out as

| $k =$ | 0 | 1 | 2 | 3 | 4 | 5 | 6 | 7 | 8 | 
|---|---|---|---|---|---|---|---|---|---|
|$\pi_k(B O) = $  | * | $\mathbb{Z}_2$ | $\mathbb{Z}_2$ | 0 | $\mathbb{Z}$ | 0 | 0 | 0 | $\mathbb{Z}$ |

The Whitehead tower of $B O$ starts out as

$$
  \array{
    & Whitehead tower
    \\
    &\vdots
    \\
    & B Fivebrane &\to& \cdots &\to& *
    \\
    & \downarrow && && \downarrow
    \\
    second frac Pontr. class & B String &\to& \cdots &\stackrel{\tfrac{1}{6}p_2}{\to}&  B^8 \mathbb{Z}
    &\to& * 
    \\
    & \downarrow && && \downarrow && \downarrow
    \\
    first frac Pontr. class & B Spin && && &\stackrel{\tfrac{1}{2}p_1}{\to}& B^4 \mathbb{Z} &\to & * 
    \\
    & \downarrow && && \downarrow && \downarrow && \downarrow
    \\
    second SW class & B S O 
    &\to&
    \cdots
    &\to&
    &\to&
    & \stackrel{w_2}{\to} &
    \mathbf{B}^2 \mathbb{Z}_2
    &\to&
    *
    \\
    & \downarrow && && \downarrow && \downarrow &&  \downarrow && \downarrow
    \\
    first SW class & B O 
    &\to&
    \cdots
    &\to&
    \tau_{\leq 8 } B O
    &\to&
    \tau_{\leq 4 } B O
    &\to&
    \tau_{\leq 2 } B O
    &\stackrel{w_1}{\to}&
    \tau_{\leq 1 } B O
    \simeq
    B \mathbb{Z}_2
    &
    Postnikov  tower
    \\
    & \downarrow
    \\
    & B GL(n)
  }
$$

where 

* the stages are the [[deloopings]] of

  ...
  $\to$
  [[fivebrane group]]
  $\to$
  [[string group]]
  $\to$
  [[spin group]]
  $\to$
  [[special orthogonal group]]
  $\to$
  [[orthogonal group]]

* the [[obstruction]] classes are the [[universal characteristic classes]]

  * [[first Stiefel-Whitney class]] $w_1$

  * [[second Stiefel-Whitney class]] $w_2$

  * [[Pontryagin class|first fractional Pontryagin class]] $\tfrac{1}{2}p_1$

  * [[Pontryagin class|second fractional Pontryagin class]] $\tfrac{1}{6}p_2$

* every possible square in the above is a [[homotopy pullback]] square (using the [[pasting law]]).

For instance $w_2$ is identified as such by using that $[S^2,-]$ preserves [[homotopy pullbacks]] and sends $ B O \to \tau_{\leq 2} B O$ to an isomorphism on connected components, so that $B SO \to B^2 \mathbb{Z}$ is an [[isomorphism]] on the second [[homotopy group]] and hence, by the [[Hurewicz theorem]], is also an isomorphism on the [[cohomology group]] $H^2(-,\mathbb{Z}_2)$. Analogously for the other characteristic maps.

In summary, more concisely, the tower is

$$
  \array{
    \vdots
    \\
    \downarrow
    \\
    B Fivebrane
    \\
    \downarrow
    \\
    B String &\stackrel{\tfrac{1}{6}p_2}{\to}& B^7 U(1) & \simeq B^8 \mathbb{Z}
    \\
    \downarrow
    \\
    B Spin &\stackrel{\tfrac{1}{2}p_1}{\to}& B^3 U(1) & \simeq B^4 \mathbb{Z}
    \\
    \downarrow
    \\
    B SO &\stackrel{w_2}{\to}& B^2 \mathbb{Z}_2
    \\
    \downarrow
    \\
    B O &\stackrel{w_1}{\to}& B \mathbb{Z}_2
    \\
    \downarrow^{\mathrlap{\simeq}}
    \\
    B GL
  }
  \,,
$$

where each "hook" is a [[fiber sequence]].

The [[universal property]] of [[homotopy pullbacks]] says that

* the [[obstruction]] to lifting an [[orthogonal structure]] $T X : X \to B O$ to an [[orientation]] structure is the homotopy class $[w_1(T X)] \in H^1(B O, \mathbb{Z}_2)$ of $w_1(T X) : X \stackrel{T X}{\to} B O \stackrel{w_1}{\to} B \mathbb{Z}_2$, the [[first Stiefel-Whitney class]];

* the [[obstruction]] to lifting an [[orientation]] structure $T X : X \to B SO$ to an [[spin structure]] is the [[second Stiefel-Whitney class]] $w_2(T X) : X \stackrel{}{\to} B S \stackrel{w_2}{\to} B^2 \mathbb{Z}_2$;

* the [[obstruction]] to lifting a [[spin structure]] $X \to B Spin$ to an [[string structure]] is the [[first fractional Pontryagin class]];

* the [[obstruction]] to lifting a [[string structure]] $X \to B String$ to a [[fivebrane structure]] is the [[second fractional Pontryagin class]].


#### Necessity of smooth refinement
 {#NecessityOfSmoothRefinement}

The [[classifying space]] for, say, the [[spin group]] is _not_ a _[[fine moduli space]]_: while homotopy classes $Maps(X, B Spin)_\sim$ of maps $X \to B Spin$ are in bijection with equivalence classes of [[spin bundles]] on $X$, the homotopy classes $Maps(X, \Omega B Spin)_\sim = Maps(X, Spin)_\sim$ of [[homotopies]] from the trivial map $X \to * \to B Spin$ are _not_ in general in bijection with the [[gauge transformations]] of the trivial spin bundle: the latter form the set of [[smooth functions]] $C^\infty(X,Spin)$, not just the homotopy classes of these.

Problems include for instance:

* $Maps(X, B(-))_\sim$ does not give the right [[BRST-complex]];

* $Maps(X, B(-))_\sim$ cannot distinguish a group from its [[maximal compact subgroup]], such as $O \hookrightarrow GL_n$, and hence cannot see [[vielbeins]], not [[generalized vielbeins]], not [[exceptional generalized geometry]]:

  in terms of classifying spaces the entire discussion [of vielbein fields above](#VielbeinFields) would collapse;

* higher analogs of this problem include for instance that $Maps(X, B(-))_\sim$ cannot distinguish over 10-dimensional spacetime $X$ an [[E8]]-[[gauge field]] from a [[NS5-brane]] [[magnetic charge]];

* etc.

These problems are all fixed by refining the [[classifying space]] $B Spin \in \infty Grpd$ to the [[smooth infinity-groupoid|smooth]] [[moduli stack]] $\mathbf{B} Spin \in Smooth \infty Grpd$, and similarly for the other cases.

#### Smooth refinement
 {#SmoothWhitehead}

[[differential geometry|Differential geometry]] is modeled on [[smooth manifolds]],
and these in turn on smooth [[Cartesian spaces]] $\mathbb{R}^n \in CartSp$. A functor
$X : CartSp^{op} \to \infty Grpd$ encodes a smooth family version of a [[homotopy type]].
For this only the [[germs]] of [[open balls]] $D^n \hookrightarrow \mathbb{R}^n$
matter. Therefore we say that a morphism $X \to Y$ of 
[[smooth infinity-groupoid|smooth homotopy types]] is an 
[[equivalence in an (infinity,1)-category|equivalence]] if it is one restricted to such germs of $n$-disks (is an equivalence "on each [[stalk]]").

This defines a [[homotopy theory]] to be denoted 
$\mathbf{H} \coloneqq $ _[[Smooth∞Grpd]]_

$$
  \mathbf{H} \coloneqq Func(SmthMfd^{op}, sSet)[\{stalkwise\, w.h.e.\}^{-1}]
  \,.
$$

The way this is constructed, the formalism takes care of much of the [[∞-stackification]] involved. For instance, as a presheaf of groupoids the assignment $\mathbf{B}G : U \mapsto (C^\infty(U,G) \stackrel{\to}{\to} * )$ does not satisfy [[descent]] and hence is not a [[stack]]. Its [[stackification]] is instead $G Bund(-) : U \mapsto G Bund(U)$, which sends each manifold $U$ to the groupoid of smooth $G$-principal bundles over it. But in $\mathbf{H}$ both these objects are in fact equivalent

$$
  \mathbf{B}G \stackrel{\simeq}{\to} G Bund(-)
  \,,
$$

hence under the above localization every presheaf of homotopy types is automatically regarded as the corresponding [[∞-stack]].

**Theorem** There is a lift of the [above Whitehead tower](#WhiteheadTower) of [[homotopy type|bare homotopy types]] to a tower of [[smooth infinity-groupoid|smooth homotopy types]]/[[smooth ∞-stacks]] through the [[geometric realization]] map

$$
  {\vert -\vert} : Smooth \infty Grpd \stackrel{\Pi}{\to} \infty Grpd \simeq Top
  \,.
$$

of the form

$$
  \array{
    \vdots
    \\
    \downarrow
    \\
    \mathbf{B} Fivebrane
    \\
    \downarrow
    \\
    \mathbf{B} String &\stackrel{\tfrac{1}{6}\mathbf{p}_2}{\to}& \mathbf{B}^7 U(1) 
    \\
    \downarrow
    \\
    \mathbf{B} Spin &\stackrel{\tfrac{1}{2}\mathbf{p}_1}{\to}& \mathbf{B}^3 U(1) 
    \\
    \downarrow
    \\
    \mathbf{B} SO &\stackrel{\mathbf{w}_2}{\to}& \mathbf{B}^2 \mathbb{Z}_2
    \\
    \downarrow
    \\
    \mathbf{B} O &\stackrel{\mathbf{w}_1}{\to}& \mathbf{B} \mathbb{Z}_2
    \\
    \downarrow
    \\
    \mathbf{B} GL
  }
  \,.
$$

where 

* $\mathbf{B}^{n+1} U(1)$ is the [[delooping]] of the smooth [[circle n-group]], the smooth moduli $(n+1)$-stack of smooth [[circle n-bundle with connection|circle n-bundles]];

* $\mathbf{B} String$ is the [[delooping]] of the [[smooth string 2-group]], the moduli 2-stack of smooth $String$-[[principal 2-bundles]]

* $\mathbf{B}Fivebrane$ is the delooping of the [[smooth fivebrane 6-group]], the smooth moduli 6-stack of smooth fivebrane-[[principal infinity-bundle|principal 6-bundles]].




#### Differential refinement

While the [above](#SmoothWhitehead) smooth refinement of the Whitehead tower already improves on the [bare Whitehead tower](#WhiteheadTower) by remembering the correct spaces of [[gauge transformations]], it still only sees "[[instanton]] sectors" of [[gauge fields]] and [[higher gauge fields]], namely the underlying [[principal ∞-bundles]]. We add now the refinement from _smooth cohomology_ to [[differential cohomology]] such as to encode the actual [[higher gauge fields]] themselves. This differential cohomology in turn is naturally available in terms of _curvature twisted flat cohomology_ or equivalently _curvature-twisted [[local systems]]_.

$\,$

(...) [[Deligne complex]] (...)

$$
  \mathbf{B}^{n} U(1)_{conn}
    =
  \left[
  C^\infty(-,U(1))
  \stackrel{d_{dR} log}{\to}
  \Omega^1(-)
  \stackrel{d_{dR}}{\to}
  \Omega^2(-)
  \stackrel{d_{dR}}{\to}
  \cdots
  \stackrel{d_{dR}}{\to}
  \Omega^n(- )
  \right]
  \,.  
$$

(...)

$\,$

For $A \in \mathbf{H}$ a smooth homotopy type, write $\flat A \coloneqq Disc \Gamma A$ for the [[discrete object]] on its underlying [[discrete infinity-groupoid|discrete homotopy type]]. We say that a morphism

$$
  X \to \flat A
$$

is an _$A$-[[local system]]_ or _$A$-valued [flat ∞-connection](cohesive+%28infinity,1%29-topos+--+structures#FlatDifferentialCohomology)_ on $X$.
For instance for $A = \mathbf{B} O$ a morphism $X \to \flat \mathbf{B}O$ is equivalently a flat vector bundle on $X$.

There is a canonical forgetful morphism $\flat A \to A$ which forgets the flat connection. Consider the [[homotopy fiber]] of this morphism

$$
  \flat_{dR} \mathbf{B}G \coloneqq * \times_{\mathbf{B}G} \flat \mathbf{B}G
  \,.
$$

By definition this classifies flat $\infty$-connections on _trivial_ $G$-[[principal ∞-bundles]]. This are equivalently $\mathfrak{g}$-[[infinity-Lie algebroid-valued differential form|∞-Lie algebra valued differential forms]] on $X$.

There is a canonical morphism $\theta : G \to \flat_{dR} \mathbf{B}G$, hence a canonical $\mathfrak{g}$-valued form on any cohesive [[∞-group]] $G$: this identifies as the canonical _[[Maurer-Cartan form]]_ on the [[∞-group]] $G$.

For $G = \mathbf{B}^n U(1)$ the [[circle n-group|circle (n+1)-group]] we call $curv  \coloneqq_{\mathbf{B}^n U(1)} : \mathbf{B}^n U(1) \to \flat_{dR} \mathbf{B}^{n+1} U(1)$ the _universal [[curvature]] class_ in degree $(n+1)$.

Let $F_X : X \to \Omega^{n+1}_{cl}(-)$ be a closed [[differential form]] on $X$. Then a [[cocycle]] in $F_X$-[[twisted cohomology|twisted]] $\mathbf{curv}$-cohomology is equivalently a [[circle n-bundle with connection]]

$$
  \array{
    X &&\stackrel{}{\to}&& \mathbf{B}^n U(1)
    \\
    & {}_{\mathllap{F}}\searrow &\swArrow_{\nabla}& \swarrow_{\mathrlap{\mathbf{curv}}}
    \\
    && \flat_{dR} \mathbf{B}^{n+1} U(1)_{conn}
  }
  \;\;
  \in
  \mathbf{H}_{\flat \mathbf{B}^{n+1}U(1)}(F_X, \mathbf{curv})
  \,.
$$

For varying $F$, the $\mathbf{curv}$-[[twisted cohomology]] in $\mathbf{H}$ identifies with [[ordinary differential cohomology]]: the [[homotopy pullback]] $\mathbf{B}^n U(1)_{conn}$ in

$$
  \array{
    \mathbf{B}^n U(1)_{conn} &\to& \Omega^{n+1}_{cl}(-)
    \\
    \downarrow && \downarrow
    \\
    \mathbf{B}^n U(1) &\stackrel{curv}{\to}& \mathbf{B}^{n+1} U(1)_{conn}
  }
$$

is presented by the [[Deligne complex]].


$$
  \mathbf{H}_{diff}(X, \mathbf{B}^n U(1))
  =
  \mathbf{curv}Struc_{\Omega^{n+1}}(X)
$$

$$
  \array{
     X &&\stackrel{}{\to}&& \mathbf{B}^n U(1)
     \\
     
  }
$$

If we have a smooth [[universal characteristic class]] $\mathbf{c} : \mathbf{B}G \to \mathbf{B}^{n+1} U(1)$ we say that a _differential refinement_ is a morphism $\hat \mathbf{c}$ fitting into the diagram

$$
  \array{
    \flat \mathbf{B}G &\stackrel{\flat \mathbf{c}}{\to}&
    \flat \mathbf{B}^{n+1} U(1)
    \\
    \downarrow && \downarrow 
    \\
    \mathbf{B}G_{conn} &\hat \mathbf{c}& \mathbf{B}^{n+1} U(1)_{conn}
    \\
    \downarrow && \downarrow
    \\
    \mathbf{B}G 
      &\stackrel{\mathbf{c}}{\to}&
    \mathbf{B}^{n+1} U(1)
  }
$$



**Theorem** ([SSS](#SSS), [FSSa](#FSS)) We have a smooth differential refinement of the Whitehead tower as follows:


$$
  \array{
    \vdots
    \\
    \downarrow
    \\
    \mathbf{B} Fivebrane_{conn}
    \\
    \downarrow
    \\
    \mathbf{B} String_{conn} &\stackrel{\tfrac{1}{6}\hat \mathbf{p}_2}{\to}& \mathbf{B}^7 U(1)_{conn} 
    \\
    \downarrow
    \\
    \mathbf{B} Spin_{conn} &\stackrel{\tfrac{1}{2}\hat \mathbf{p}_1}{\to}& \mathbf{B}^3 U(1)_{conn} 
    \\
    \downarrow
    \\
    \mathbf{B} S O_{conn} &\stackrel{\mathbf{w}_2}{\to}& \mathbf{B}^2 \mathbb{Z}_2
    \\
    \downarrow
    \\
    \mathbf{B} O_{conn} &\stackrel{\mathbf{w}_1}{\to}& \mathbf{B} \mathbb{Z}_2
    \\
    \downarrow^{}
    \\
    \mathbf{B} GL_{conn}
  }
  \,.
$$

This construction is a joint generalization of [[Chern-Weil theory]]
and [[Chern-Simons theory]] to [[∞-Chern-Weil theory]] and [[schreiber:∞-Chern-Simons theory]]

For instance 

* the differential refinement of the first fractional Pontryagin class above yields the action functional

  $$
    \exp(i S_{\tfrac{1}{2}\mathbf{p}_1}) 
      : 
    [\Sigma, \mathbf{B}Spin_{conn}]
      \stackrel{\tfrac{1}{2}\hat \mathbf{p}_1}{\to}
    [\Sigma, \mathbf{B}^{3}U(1)_{conn}]
      \stackrel{\exp(i \int_\Sigma(-))}{\to}
    U(1)
  $$

  of [[Spin]]-[[Chern-Simons theory]], refined to the integrated off-shell [[BRST-complex]] of the theory;

* the differential refinement of the second fractional Pontryagin class above yields the action functional

  $$
    \exp(i S_{\tfrac{1}{6}\mathbf{p}_2}) 
      : 
    [\Sigma, \mathbf{B}String_{conn}]
      \stackrel{\tfrac{1}{6}\hat \mathbf{p}_2}{\to}
    [\Sigma, \mathbf{B}^{7}U(1)_{conn}]
      \stackrel{\exp(i \int_\Sigma(-))}{\to}
    U(1)
  $$

  of 7-dimensional Chern-Simons theory on nonabelian String 2-form fields ([FSSb](#FSSb))




### **III)** $Spin^c$-, $String^c$-, $Fivebrane^c$-structure 
 {#TwistedK}


The [above Whitehead tower](#WhiteheadTower) of $\mathbf{B}O$ has a stage-wise [[unitary group|unitary]] twisting. In the first stage this is given by the familiar [[spin^c]]-group: instead of being the [[delooping]] of the [[homotopy fiber]] of the [[second Stiefel-Whitney class]] $w_2$, this is the [[homotopy pullback|homotopy fiber product]] of $w_2$ with the universal [[first Chern class]] $\mathbf{c}_1$. 
Analogous unitary twists exists for the [[string 2-group]] and the [[fivebrane 6-group]].

The corresponding (twisted) $Spin^c$-, $String^c$- and $Fivebrane^c$-structures encode [[background gauge fields]] in the presence of [[branes]] (D-branes, M-branes and Hořava-Witten boundaries), where the unitary contribution is part of the gauge field supported on the brane. We discuss aspects of some examples.






#### The $B$-field on D-branes: twisted K-theory
 {#BFieldInK}

We discuss aspects of the twisted smooth cohomology involved
over [[D-branes]] in [[type II string theory]].


For each $n$, the [[central extension]] of Lie groups

$$
  U(1) \to U(n) \to PU(n)
$$

that exhibits the [[unitary group]] as a [[circle group]]-extension of the [[projective unitary group]] induces the corresponding morphism of smooth [[moduli stacks]]

$$
  \mathbf{B} U(1) \to \mathbf{B} U(n) \to \mathbf{B} PU(n)
  \,.
$$

This is part of a [[fiber sequence|long fiber sequence]] which continues to the right by a [[connecting homomorphism]]

$$
  \mathbf{B} U(1) \to \mathbf{B} U(n) \to \mathbf{B} PU(n)
   \stackrel{\mathbf{dd}_n}{\to}
  \mathbf{B}^2 U(1)
  \,.
$$

A morphism $\phi : X \to \mathbf{B}^2 U(1)$ is a [[circle n-bundle with connection|circle 2-bundle]] and a $\phi$-twisted cocycle

$$
  \array{
    X &&\stackrel{}{\to}&& \mathbf{B} PU(n)
    \\
    & {}_{\mathllap{\phi}}\searrow &\swArrow_{\simeq}& \swarrow_{\mathrlap{\mathbf{dd}_n}}
    \\
    &&
  }
$$

is a unitary $\phi$-[[twisted bundle]]. 

For each $n \in \mathbb{N}$ there is a canonical inclusion $\mathbf{B} U(n) \to \mathbf{B} U(n+1)$, exhibiting the fact that a rank-$n$ complex vector bundle canonically induces a rank-$(n+1)$-bundle by added a trivial line bundle.

We may form the [[directed colimit]] of smooth moduli stacks

$$
  \mathbf{B}U \coloneqq \underset{\rightarrow_n}{\lim} \mathbf{B} U(n)
$$

$$
  \mathbf{B} PU \coloneqq \underset{\rightarrow_n}{\lim} \mathbf{B} PU(n)
$$

**Proposition** The stack $\mathbf{B} U$ is a smooth refinement of the [[classifying space]] $B U$ of reduced [[K-theory]]. Also, for $X$ a [[compact topological space|compact]] [[smooth manifold]] smooth $U$-principal bundles and smooth $U$-gauge transformations on $X$ are represented by ordinary $U(n)$-bundles for some finite $n$.

$$
  \mathbf{H}(X, \mathbf{B}U)
  \simeq
  \underset{\rightarrow_n}{\lim} \mathbf{H}(X, \mathbf{B} U(n))
  \,.
$$

Write therefore 

$$
  \array{
    \mathbf{B}U &\to& \mathbf{B} PU
    \\
    \downarrow^{\mathbf{dd}}
    \\
    \mathbf{B}^2 U(1)
  }
$$

for the corresponding universal coefficient bundle.

The corresponding twisted cohomology appears in string theory as [[relative cohomology]] over [[D-branes]]. 

Let therefore $i : Q \hookrightarrow X$ be a compact submanifold.
Assume first that it is equipped with [[spin^c structure]].

Then a cocycle in the corresponding relative cohomology is a diagram of smooth stacks

$$
  \array{
    Q &\stackrel{\phi_{ga}}{\to}& \mathbf{B} PU 
    \\
    {}^{\mathllap{i}}\downarrow 
      &\swArrow& \downarrow^{\mathrlap{\mathbf{dd}}}
    \\
    X &\stackrel{\phi_B}{\to}& \mathbf{B}^3 U(1)
  }
  \,.
$$

This is 

* a [[circle n-bundle with connection|circle 2-bundle]] $\phi_B : X \to \mathbf{B}^2 U(1)$ on [[spacetime]] $X$: the underlying bundle of the [[B-field]];

* a projective unitary bundle $\phi_{ga}$ on $Q$;

* together with an identification of the restriction $\phi_{B}|_Q$ with the [[obstruction]] $\mathbf{dd}(\phi_{ga})$ to lift $\phi_{ga}$ to a genuine unitary bundle.

This is a cocycle in reduced $\phi_{ga}|_{Q}$-[[twisted K-theory]] on $Q$.


More generally, if $Q \to \mathbf{B}SO$ does not admit  
a [[spin^c structure]] the Freed-Witten anomaly cancellation condition demands that 

$$
  [\mathbf{dd}(\phi_{ga})] + [W_3(o_Q)] = [\phi_B|_Q]
  \,.
$$

Formulating this constraint not on cohomology classes but on 
cocycles in [[homotopy type theory]] yields the moduli stack

$$
  \array{
    \{
      \mathbf{dd}(\phi_{ga})  +  W_3(o_Q)  \simeq  \phi_B|_Q
    \}
    &\to&
    [Q, \mathbf{B}^2 U(1)]
    \\
    \downarrow && \downarrow
    \\
    [Q, \mathbf{B} (SO \times PU)]
    &\stackrel{\mathbf{W}_3 - \mathbf{dd}}{\to}&
    [Q, \mathbf{B}^3 U(1)]
  }
  \,.
$$




#### The supergravity $C$-field: flux quantization
 {#SuGraFluxQuantization}


We discuss the twisted smooth cohomology of the
[[supergravity C-field]] in [[11-dimensional supergravity]]/[[M-theory]].
This proceeds essentially in higher analogy to the 
[previous example](#BFieldInK).

From the [[effective QFT]] of [[11-dimensional supergravity]] the bosonic massless field content consists of the [[graviton]] and a 3-form $C$. Due to the existence of [[spinors]] the graviton must be part of a [[spin connection]]

$$
  \phi_{gr} : X \to \mathbf{B}Spin_{conn}
  \,.
$$

Due to the coupling to the [[M2-brane]] the 3-form must globally be a [[circle n-bundle with connection|circle 3-bundle with connection]]

$$
  \phi_C : X \to \mathbf{B}^3 U(1)_{conn}
  \,.
$$

Fianlly, due to the coupling to the [[M5-brane]], there is an auxialary [[E8]]-bundle 

$$
  \phi_{ga} : X \to \matbf{B} E_8
$$

and these fields must satisfy the _flux quantization condition_, which says that in [[cohomology]]

$$
  [\frac{1}{2}p_1(\phi_{gr})]
  +
  [2\mathbf{a}(\phi_{ga})]
  = 
  [2G_4(\phi_C)]
  \,.
$$

In order to obtain the proper moduli stack, refining this conidition from gauge equivalence classes to [[cocycles]], we need to interpret this constraint in [[homotopy type theory]]. 

This yields the moduli 2-stack of the supergravity C-field: in the logic of [[homotopy type theory]] it is simply

$$
  \mathbf{CField}(X)
   \coloneqq
    \left\{
      \phi_{gr}, \phi_{ga}, \phi_{C}
      |
      \frac{1}{2}p_1(\phi_{gr})
      +
      2\mathbf{a}(\phi_{ga})
      \simeq_{\phi_H}
      2 G_4(\phi_C)
  \right\}
$$

and in the interpretation in the [[(∞,1)-topos]] $\mathbf{H}$ it is the [[homotopy pullback]] ([FSSc](#FSSc))

$$
  \array{
    \mathbf{CField}(X)
    &\to&
    [X, \mathbf{B}^3 U(1)_{conn}]
    \\
    \downarrow &\swArrow_{\simeq}& \downarrow^{2 G_4}
    \\
    [X, \mathbf{B}(Spin_{conn} \times E_8)]
    &\underset{\tfrac{1}{2} \mathbf{p}_1- 2 \mathbf{a}}{\to}&
    [X, \mathbf{B}^3 U(1)]
  }
$$



#### Twisted differential String-structure -- Green-Schwarz mechanism


The moduli 2-stack of anomaly-free heterotic string configurations (bosonic, massless) is

$$
  \array{
    String^{\mathbf{a}} &\to& \mathbf{B} E_8 \times E_8_{conn}
    \\
    \downarrow &\swArrow& \downarrow^{2\hat \mathbf{a}}
    \\
    \mathbf{B} Spin_{conn} &\stackrel{\tfrac{1}{2}\hat \mathbf{p}_1}{\to}&
    \mathbf{B}^3 U(1)_{conn}
  }
$$

(...)

#### Twisted differential Fivebrane structure -- dual Green-Schwarz mechanism

(...)


### **IV)** Higher orientifold structure 
 {#HigherOrientifold}



#### Orientifolds

(...)

* [[orientifold]]

(...)

#### Ho&rcaron;ava-Witten compactifications

(...)

* [[Hořava-Witten theory]]

(...)


## General theory
 {#GeneralTheory}


We survey here some key aspects of a general theory of geometric twisted differential cohomology, following ([DCCT](#Schreiber)), in which all of the following examples find their formal home. This is meant as a reference for readers of the _[Examples](#Examples)_-section who wish to see formal details.

$\,$

We base the formulation of [[physics]]/[[string theory]] on the [[foundations]] of _[[homotopy type theory|homotopy-type theory]]_, [[categorical semantics|interpreted]] in _[[(∞,1)-toposes]]_. This provides a nicely natural and expressive language for the purpose of twisted smooth cohomology in string theory. 

The following table indicates the hierarchy of [[axioms]] that we invoke, the fragments of [[theory]] that can be [[categorical semantics|interpreted]] with these and the [[models]] that we need. Essentially all of the above discussion works in the model [[Smooth∞Grpd]]. A more encompassing treatment uses [[supergeometry]] and works in the model [[SmoothSuper∞Grpd]].


| [[axioms]]  | [[syntax]] | [[semantics]] | typical [[models]] | expressiveness |
|--|---|---|---|---|
| bare minimum | [[homotopy type theory]] | [[(∞,1)-topos theory]] | [[∞Grpd]], [[Super∞Grpd]] | [[cohomology]], [[principal infinity-bundle|principal bundles]], [[twisted cohomology]], [[associated infinity-bundle|associated]] and [[twisted bundles]] |
| +[[local (∞,1)-topos|locality]]+[[locally infinity-connected (infinity,1)-topos|∞-connectedness]] | [[cohesive homotopy type theory]] | [[cohesive (∞,1)-topos]] |  [[Smooth∞Grpd]], [[SmoothSuper∞Grpd]] |  [[geometric realization]], [[differential cohomology]], [[infinity-Chern-Weil theory|Chern-Weil theory]] [[schreiber:infinity-Chern-Simons theory|Chern-Simons theory]], [[schreiber:infinity-geometric prequantization|geometric quantization]] |
| +[[cohesive (infinity,1)-topos -- infinitesimal cohesion|infinitesimals]] | differential homotopy type theory | [[cohesive (infinity,1)-topos -- infinitesimal cohesion|differential (∞,1)-topos]] | [[SynthDiff∞Grpd]] | [[de Rham space]], [[jet bundle]], [[étale infinity-groupoid|étale groupoid]], [[orbifold]]  |






### Homotopy-type theory


Traditionally a _[[homotopy type]]_ is a [[topological space]] regarded up to [[weak homotopy equivalence]], hence equivalently an _[[∞-groupoid]]_. More generally, we think of parameterized homotopy types -- of _[[∞-stacks]]_ or _[[(∞,1)-sheaves]]_ -- as _geometric homotopy types_. The collection of such forms an _[[(∞,1)-topos]]_ $\mathbf{H}$. One regards [[(∞,1)-topos theory]] as part of [[homotopy theory]], and, more specifically, the [[internal language]] of $\mathbf{H}$ is a _[[homotopy type theory|homotopy-type theory]]_.

We discuss now some basic structures that are expressible in such bare homotopy-type theory. (The fundamentals are due to [[Charles Rezk|Rezk]] and [[Jacob Lurie|Lurie]], see _[[Higher Topos Theory]]_. We point out the perspective of [[twisted cohomology]] in slices and add some aspects about higher bundle theory from ([NSS](#NSS))).


#### Cohomology

A [[group object in an (infinity,1)-category|group object]] in an [[(∞,1)-topos]] is a groupal [[A-∞ algebra|A-∞]]-homotopy type: an _[[∞-group]]_.


By [[looping and delooping]] there is an [[equivalence of (∞,1)-categories|equivalence]]

$$
  Grp(\mathbf{H})
   \stackrel{\overset{\Omega}{\leftarrow}}{\underoverset{\mathbf{B}}{\simeq}{\to}}
  \mathbf{H}_{\geq 1}^{*/}
$$

between group objects and [[pointed object|pointed]] 
[[n-connected object of an (∞,1)-topos|connected]] homtopy types.

For $A$ a group object which admits an $n$-fold [[delooping]] $\mathbf{B}^n A$ and $X \in \mathbf{H}$ any object, we write

* $\mathbf{H}(X, \mathbf{B}^n A)$ for the space of degree-$n$ $A$-cocycles on $X$;

* $H^n(X,A) \coloneqq \pi_0 \mathbf{H}(X, \mathbf{B}^n A)$

  for the degree-$n$ $A$-[[cohomology]] of $X$.


#### Principal bundles

For $G \in Grp(\mathbf{H})$, $G$-cocycles on $X$ have an equivalent geometric interpretation as $G$-[[principal ∞-bundles]]: morphisms

$$
  \array{
    P 
    \\
    \downarrow
    \\
    X
  }
$$

equipped with a $G$-[[action]] $\rho : P \times G \to P$ over $X$ such that the [[(∞,1)-colimit|∞-quotient]] of the action is $X$.

$$
  \mathbf{H}(X, \mathbf{B}G)
   \stackrel{\overset{\underset{\to}{\lim}}{\leftarrow}}{\underoverset{fib}{\simeq}{\to}}
  G Bund(X)    
$$

([NSS](#NSS))


+-- {: .num_remark }
###### Remark


$g : X \to \mathbf{B}G$

$$
  G \coloneqq (*_{\mathbf{B}G} \simeq *_{\mathbf{B}G}) : Type
$$

$$
  P \coloneqq \sum_{x : X} ( *_{\mathbf{B}G}  \simeq g(x)  ) : Type
$$

$$
  \begin{aligned}
    & \rho : P \times G \to G
    \\
    & \;\;\coloneqq
    (( x : X; p : (* \simeq g(x))), g : (* \simeq *) )
    \mapsto
    (x : X; p)
  \end{aligned}
$$

(...)

=--

#### Twisted cohomology
 {#TwistedCohomology}


For $\mathbf{H}$ an [[(∞,1)-topos]] and $\mathbf{B}G \in \mathbf{H}$, the collection of morphisms into $\mathbf{B}G$ is the [[slice (∞,1)-topos]] $\mathbf{H}_{/ \mathbf{B}G}$.

The [[cohomology]] in $\mathbf{H}_{/\mathbf{B}G}$ is naturally interpreted as follows

1. a coefficient object $\mathbf{c} : E \to \mathbf{B}G$ is a _universal bundle of coefficients_;

1. a domain object $\phi : X \to \mathbf{B}G$ is a _twisting bundle_;

1. a [[cocycle]] 

   $$
     \array{
       X &&\stackrel{\sigma}{\to}&& E
       \\
       & {}_{\mathllap{\phi}}\searrow &\swArrow_{\simeq}& \swarrow_{\mathrlap{\mathbf{c}}}
       \\
       && \mathbf{B}G
     }
   $$ 

   is equivalently a [[section]] of the [[(∞,1)-pullback]] bundle $\phi^* E \to X$;

   $$
     \array{  
        & \phi^* E &\to & E
        \\
        &{}^{\mathllap{\sigma}}\nearrow& \downarrow && \downarrow^{\mathbf{c}}
        \\
        X &\stackrel{id}{\to}& X &\stackrel{\phi}{\to}& \mathbf{B}G
     }
   $$

* the [[cohomology]] 

  $$
    \mathbf{c}Struc_{\phi}(X)
    \coloneqq
    \mathbf{c}(\phi)
    \coloneqq
    \mathbf{H}_{/\mathbf{B}G}(\phi, \mathbf{c})
  $$

  is the $\phi$-[[twisted cohomology]] of $X$ (with coefficients in the [[homotopy fiber]] $F$ of $\mathbf{c}$).

+-- {: .num_remark }
###### Remark


It can be instructive to formulate this in the [[syntax]] of [[homotopy type theory]]. The object of twisted cocycles is

$$
  [\phi, \mathbf{c}]
   \coloneqq
  \vdash \prod_{b \in \mathbf{B}G} (X(b) \to E(b)) : Type
  \;\;
  =
  \;\;
  \vdash \prod_{x : X} E(\phi(x)) : Type
$$

(see [here](http://www.ncatlab.org/nlab/show/locally%20cartesian%20closed%20category#RelationCartesianClosureBaseChangeInTypeTheory)).

While on the right this expresses the collection of sections of the pullback bundle, the left hand side expresses explicitly a $\mathbf{B}G$-parameterized collection of cocycles $X(b) \to E(b)$.

=--

#### Associated and twisted bundles

For

$$
  \array{
    \mathbf{B}A &\to& \mathbf{B}\hat G
    \\
    && \downarrow^{\mathrlap{\mathbf{c}}}
    \\
    && \mathbf{B}G
  }
$$

a universal coefficient bundle in $\mathbf{H}$ and $\phi : X \to \mathbf{B}G$ a twist and $\sigma : X \to \mathbf{B}\hat G$ a section, hence a cocycle in $\phi$-[[twisted cohomology]], the corresponding geometric object is the [[twisted ∞-bundle]] $\tilde \sigma$ on the total space $P$ of $\phi$

$$
  \array{
    \tilde P &\to& * 
    \\
    \downarrow && \downarrow
    \\
    P &\stackrel{\tilde \sigma}{\to}& \mathbf{B}A &\to& * 
    \\
    \downarrow && \downarrow && \downarrow
    \\
    X 
     &\stackrel{\sigma}{\to}&
   \mathbf{B}\hat G
     &\stackrel{\mathbf{c}}{\to}&
   \mathbf{B}G
  }
  \,.
$$


### Cohesive homotopy-type theory

In general the [[geometry]] encoded by an [[(∞,1)-topos]] can be exotic. Two extra axioms ensure that it is modeled locally on $\infty$-connected geometrical archetypes, such as for instance on _[[open disks]]_ for [[Euclidean-topological ∞-groupoid|Euclidean-topological geometry]] and _smooth open disks_ for [[smooth ∞-groupoid|smooth geometry]]. Following [[Bill Lawvere|Lawvere]], we call this refinement _[[cohesive homotopy type theory]]_ [[categorical semantics|interpreted]] in _[[cohesive (∞,1)-toposes]]_.


#### Geometric realization 


A [[cohesive (∞,1)-topos]] is in particular equipped with a [[left adjoint|left]] [[adjoint (∞,1)-functor|derived adjoint]] $\Pi$ to the [[locally constant ∞-stack]]-functor $Disc$

$$
  (\Pi \dashv Disc)
  : 
  \mathbf{H}
   \stackrel{\overset{\Pi}{\to}}{\underset{Disc}{\hookleftarrow}}
  \infty Grpd
  \,.
$$

Under the identification (see _[[homotopy hypothesis|homotopy hypothesis theorem]]_)

$$
  \infty Grpd \stackrel{{\vert-\vert}}{\to} Top
$$

this identifies with [[geometric realization]] of geometric homotopy types / [[∞-stacks]].

We say that a lift of a [[diagram]] in [[∞Grpd]] through $\Pi$ is a **geometric refinement** of the diagram.


#### Differential cohomology

Write $\mathbf{\Pi} \coloneqq Disc \circ \Pi$; 
and $\flat \coloneqq Disc \circ \Gamma$.

For $G$ an [[∞-group]], write $\flat_{dR} \mathbf{B}G \coloneqq * \times_{\mathbf{B}G} \flat \mathbf{B}G$: the _de Rham coefficient object_ for $\mathbf{B}G$.

There is a canonical morphism $\theta : G \to \flat_{dR} \mathbf{B}G$: this identifies as the canonical _[[Maurer-Cartan form]]_ on the [[∞-group]] $G$.

For $G = \mathbf{B}^n U(1)$ the [[circle n-group|circle (n+1)-group]] we call $curv  \coloneqq_{\mathbf{B}^n U(1)} : \mathbf{B}^n U(1) \to \flat_{dR} \mathbf{B}^{n+1} U(1)$ the _universal [[curvature]] class_ in degree $(n+1)$.

The $curv$-[[twisted cohomology]] in $\mathbf{H}$ identifies with [[ordinary differential cohomology]]. 

$$
  \array{
    \mathbf{B}^n U(1)_{conn} &\to& \Omega^{n+1}_{cl}(-)
    \\
    \downarrow && \downarrow
    \\
    \mathbf{B}^n U(1) &\stackrel{curv}{\to}& \mathbf{B}^{n+1} U(1)_{conn}
  }
$$


#### Chern-Weil theory

[[∞-Chern-Weil theory introduction]]

$$
  \array{
    \flat \mathbf{B}G &\stackrel{\flat \mathbf{c}}{\to}&
    \flat \mathbf{B}^{n+1} U(1)
    \\
    \downarrow && \downarrow 
    \\
    \mathbf{B}G_{conn} &\hat \mathbf{c}& \mathbf{B}^{n+1} U(1)_{conn}
    \\
    \downarrow && \downarrow
    \\
    \mathbf{B}G 
      &\stackrel{\mathbf{c}}{\to}&
    \mathbf{B}^{n+1} U(1)
  }
$$



### Differential homotopy-type theory

[[cohesive (infinity,1)-topos -- infinitesimal cohesion|infinitesimals]]

#### de Rham stack

(...)

#### &Eacute;tale stacks / orbifolds 

(...)

## Related entries
 {#RelatedEntries}

An entry with discussion of and list of examples of twisted differential structures is

* _[[twisted differential c-structures]]_.



## References
 {#References}

The string-theoretic aspects of the above discussion owe a lot to [[Hisham Sati]], who has pointed out the appearance of various twisted structures in string theory, notably in the series of articles

* _[[Geometric and topological structures related to M-branes]]_ , part I ([arXiv:1001.5020](http://arXiv.org/abs/1001.5020)), part _II: Twisted $String$ and $String^c$ structures_ ([arXiv:1007.5419](http://arxiv/1007.5419)); part _III: Twisted higher structures_ ([arXiv:1008.1755](http://arxiv.org/abs/1008.1755))

The smooth and differential refinements of these structures have been jointly developed in articles including the following

* [[Hisham Sati]], [[Urs Schreiber]], [[Jim Stasheff]], _[[schreiber:Twisted Differential String and Fivebrane Structures]]_
 {#SSS}

* [[Domenico Fiorenza]], [[Urs Schreiber]], [[Jim Stasheff]], _[[schreiber:Cech Cocycles for Differential characteristic Classes]]_
 {#FSSa}

* [[Domenico Fiorenza]], [[Hisham Sati]], [[Urs Schreiber]], _[[schreiber:7d Chern-Simons theory and the 5-brane|Multiple M5-branes, String 2-connections, and 7d nonabelian Chern-Simons theory]]_
 {#FSSb}

* [[Domenico Fiorenza]], [[Hisham Sati]], [[Urs Schreiber]], _[[schreiber:The moduli 3-stack of the C-field]]_
 {#FSSc}

* [[Thomas Nikolaus]], [[Urs Schreiber]], [[Danny Stevenson]], _[[schreiber:Principal ∞-bundles -- theory, presentations and applications]]_
 {#NSS}

A general theory of smooth homotopy-type theory is laid out in 

* [[Urs Schreiber]], _[[schreiber:differential cohomology in a cohesive topos]]_
 {#Schreiber}

The notion of [[twisted cohomology]] by sections of twisting coeffcient $\infty$-bundles used here is similar to that in 

* [[Matthew Ando]], [[Andrew Blumberg]], [[David Gepner]], _Twists of K-theory and TMF_, in Robert S. Doran, Greg Friedman, [[Jonathan Rosenberg]], _Superstrings, Geometry, Topology, and $C^*$-algebras_, Proceedings of Symposia in Pure Mathematics [vol 81](http://www.ams.org/bookstore-getitem/item=PSPUM-81) ([arXiv:1002.3004](http://arxiv.org/abs/1002.3004))
 {#ABG}

but considered in the non-stable contxt of [[nonabelian cohomology]] and refined from bare homotopy types to geometric homotopy types.


For references on the example of _[[twisted K-theory|twisted]]_ and _[[differential K-theory|differential]] [[K-theory]]_, as well as on _[[orientifolds]]_, see there.

This page originates in notes for an introductory lecture:

* [[Urs Schreiber]], _[Twisted differential structures in string theory](http://maths-old.anu.edu.au/esi/2012/program.html#Schreiber)_ at _[ESI Program on K-Theory and Quantum Fields](http://maths-old.anu.edu.au/esi/2012/)_ (2012)

